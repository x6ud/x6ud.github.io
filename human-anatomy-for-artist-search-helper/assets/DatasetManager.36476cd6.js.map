{"version":3,"file":"DatasetManager.36476cd6.js","sources":["../../src/DatasetManager/DatasetManager.ts?vue&type=script&src&lang.ts"],"sourcesContent":["import {NButton, NInput, NSpin} from 'naive-ui';\r\nimport {defineComponent, nextTick, onMounted, ref} from 'vue';\r\nimport PhotoDataset from '../utils/PhotoDataset';\r\nimport PhotoPoseLandmarks from '../utils/PhotoPoseLandmarks';\r\n\r\nexport default defineComponent({\r\n    components: {\r\n        NButton,\r\n        NInput,\r\n        NSpin,\r\n    },\r\n    setup() {\r\n        const dataset = new PhotoDataset();\r\n        const datasetLoading = ref(false);\r\n        const datasetLength = ref(0);\r\n        const numOfPages = ref(0);\r\n        const pageNum = ref('1');\r\n        const pageData = ref<PhotoPoseLandmarks[]>([]);\r\n        const pageLoading = ref(false);\r\n\r\n        onMounted(async function () {\r\n            try {\r\n                datasetLoading.value = true;\r\n                await dataset.load();\r\n                datasetLength.value = dataset.size;\r\n                numOfPages.value = dataset.getNumOfPages();\r\n            } finally {\r\n                datasetLoading.value = false;\r\n            }\r\n            // await dataset.loadAllChunks();\r\n            await loadPage();\r\n        });\r\n\r\n        async function loadPage() {\r\n            try {\r\n                pageLoading.value = true;\r\n                pageData.value = [];\r\n                await nextTick();\r\n                pageData.value = await dataset.getPage(Number(pageNum.value));\r\n            } finally {\r\n                pageLoading.value = false;\r\n            }\r\n        }\r\n\r\n        async function prevPage() {\r\n            const num = Math.max(1, Number(pageNum.value) - 1);\r\n            if (Number(pageNum.value) === num) {\r\n                return;\r\n            }\r\n            pageNum.value = num + '';\r\n            await loadPage();\r\n        }\r\n\r\n        async function nextPage() {\r\n            const num = Math.min(numOfPages.value, Number(pageNum.value) + 1);\r\n            if (Number(pageNum.value) === num) {\r\n                return;\r\n            }\r\n            pageNum.value = num + '';\r\n            await loadPage();\r\n        }\r\n\r\n        async function saveDatasetToFile() {\r\n            try {\r\n                datasetLoading.value = true;\r\n                await dataset.writeToFile();\r\n            } finally {\r\n                datasetLoading.value = false;\r\n            }\r\n        }\r\n\r\n        return {\r\n            datasetLoading,\r\n            datasetLength,\r\n            numOfPages,\r\n            pageNum,\r\n            pageData,\r\n            pageLoading,\r\n\r\n            loadPage,\r\n            prevPage,\r\n            nextPage,\r\n\r\n            saveDatasetToFile,\r\n        };\r\n    }\r\n});"],"names":[],"mappings":"8RAKA,MAAe,EAAgB,CAC3B,WAAY,CACR,UACA,SACA,SAEJ,OAAQ,MACE,GAAU,GAAI,GACd,EAAiB,EAAI,IACrB,EAAgB,EAAI,GACpB,EAAa,EAAI,GACjB,EAAU,EAAI,KACd,EAAW,EAA0B,IACrC,EAAc,EAAI,MAEd,gBAAkB,IACpB,GACe,MAAQ,QACjB,GAAQ,SACA,MAAQ,EAAQ,OACnB,MAAQ,EAAQ,0BAEZ,MAAQ,QAGrB,yBAGgB,IAClB,GACY,MAAQ,KACX,MAAQ,QACX,OACG,MAAQ,KAAM,GAAQ,QAAQ,OAAO,EAAQ,kBAE1C,MAAQ,sBAIF,MAChB,GAAM,KAAK,IAAI,EAAG,OAAO,EAAQ,OAAS,GAC5C,OAAO,EAAQ,SAAW,MAGtB,MAAQ,EAAM,QAChB,wBAGgB,MAChB,GAAM,KAAK,IAAI,EAAW,MAAO,OAAO,EAAQ,OAAS,GAC3D,OAAO,EAAQ,SAAW,MAGtB,MAAQ,EAAM,QAChB,wBAGyB,IAC3B,GACe,MAAQ,QACjB,GAAQ,wBAEC,MAAQ,UAIxB,CACH,iBACA,gBACA,aACA,UACA,WACA,cAEA,WACA,WACA,WAEA"}