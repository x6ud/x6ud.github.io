var Di=Object.defineProperty;var zi=(t,e,r)=>e in t?Di(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var c=(t,e,r)=>(zi(t,typeof e!="symbol"?e+"":e,r),r);import{_ as Fe,a as Yr}from"./index.8a8acc7b.js";import{w as fr,u as it,r as Bi,c as j,a as J,b as ue,d as $i,N as Yt,o as Re,e as Ve,C as Ui,f as pr,i as gr,g as vr,V as Gt,p as Kt,h as nt,j as Q,k as bt,l as we,m as Zt,n as Vi,q as ye,s as Ni,t as Wi,v as st,x as qt,y as Hi,z as Gr,A as ji,B as mr,D as Kr,E as _e,F as ne,G as Xi,H as Yi,I as Gi,J as Ki,K as Zi,L as br,M as wr,O as Zr,P as ve,Q as qr,R as qi,S as yr,T as Qi,U as at,W as Ne,X as _t,Y as Ji,Z as Qr,_ as en,$ as Jr,a0 as eo,a1 as Tt,a2 as tn,a3 as zt,a4 as rn,a5 as on,a6 as re,a7 as nn,a8 as sn,a9 as an,aa as ln,ab as cn,ac as dn,ad as Bt,ae as xr,af as $t,ag as un,ah as hn,ai as Pr,aj as ge,ak as xe,al as We,am as Ct,an as wt,ao as Ie,ap as Ke,aq as ce,ar as At,as as to,at as Ae,au as Qt,av as Jt,aw as He,ax as fn,ay as ro}from"./feature-buffers.02aa0128.js";import{f as Ut,W as pn}from"./Warning.4c433c86.js";import{e as se,o as $e,c as er,f as me,g as D,h as oo,w as Oe,i as Je,j as St,k as lt,F as Vt,C as gn,l as je,m as P,t as fe,p as ct,n as vn,q as tr,s as N,T as mn,u as yt,v as rr,x as Ze,y as _r,z as Nt,A as io,B as bn,r as qe,D as dt,E as ut,G as De,H as Wt,I as wn,J as yn,K as xn}from"./vendor.1d5e9611.js";const Pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},_n=me("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z",fill:"currentColor"},null,-1),Tn=me("path",{d:"M464 336a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1);var Cn=se({name:"InfoCircleOutlined",render:function(e,r){return $e(),er("svg",Pn,[_n,Tn])}});const An={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Sn=me("path",{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1c-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z",fill:"currentColor"},null,-1);var Mn=se({name:"SearchOutlined",render:function(e,r){return $e(),er("svg",An,[Sn])}});const Rn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},En=me("path",{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 0 0-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7c29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6c29.4 29.4 52.5 63.6 68.6 101.7c16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 0 1-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 0 0-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z",fill:"currentColor"},null,-1);var Ln=se({name:"UndoOutlined",render:function(e,r){return $e(),er("svg",Rn,[En])}});const kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Fn=me("path",{d:"M464 720a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z",fill:"currentColor"},null,-1);var In=se({name:"WarningOutlined",render:function(e,r){return $e(),er("svg",kn,[Fn])}});let or=[];const no=new WeakMap;function On(){or.forEach(t=>t(...no.get(t))),or=[]}function so(t,...e){no.set(t,e),!or.includes(t)&&or.push(t)===1&&requestAnimationFrame(On)}function Tr(t,e){let{target:r}=t;for(;r;){if(r.dataset&&r.dataset[e]!==void 0)return!0;r=r.parentElement}return!1}function Dn(t){const e=D(!!t.value);if(e.value)return oo(e);const r=Oe(t,o=>{o&&(e.value=!0,r())});return oo(e)}const zn=typeof window!="undefined";let Mt,Ht;const Bn=()=>{var t,e;Mt=zn?(e=(t=document)===null||t===void 0?void 0:t.fonts)===null||e===void 0?void 0:e.ready:void 0,Ht=!1,Mt!==void 0?Mt.then(()=>{Ht=!0}):Ht=!0};Bn();function $n(t){if(Ht)return;let e=!1;Je(()=>{Ht||Mt==null||Mt.then(()=>{e||t()})}),St(()=>{e=!0})}const Un=(typeof window=="undefined"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function Vn(){return Un}function ao(t,e=[],r){const o={};return e.forEach(i=>{o[i]=t[i]}),Object.assign(o,r)}function Nn(t,e=[],r){const o={};return Object.getOwnPropertyNames(t).forEach(s=>{e.includes(s)||(o[s]=t[s])}),Object.assign(o,r)}function Cr(t,e=!0,r=[]){return t.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&r.push(lt(String(o)));return}if(Array.isArray(o)){Cr(o,e,r);return}if(o.type===Vt){if(o.children===null)return;Array.isArray(o.children)&&Cr(o.children,e,r)}else o.type!==gn&&r.push(o)}}),r}function Wn(t){return Object.keys(t)}const Rt=(t,...e)=>typeof t=="function"?t(...e):typeof t=="string"?lt(t):typeof t=="number"?lt(String(t)):null;function Hn(t){switch(typeof t){case"string":return t||void 0;case"number":return String(t);default:return}}function lo(t,e="default",r=void 0){const o=t[e];if(!o)return fr("getFirstSlotVNode",`slot[${e}] is empty`),null;const i=Cr(o(r));return i.length===1?i[0]:(fr("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}const co=Symbol("modalBody"),uo=Symbol("drawerBody"),ho=Symbol("popoverBodyInjection"),Ar=Symbol("internal-select-menu"),fo=Symbol("internal-select-menu-body"),po="__disabled__";function ht(t){const e=je(co,null),r=je(uo,null),o=je(ho,null),i=je(fo,null);return it(()=>{var s;const{to:n}=t;return n!==void 0?n===!1?po:n===!0?"body":n:(e==null?void 0:e.value)?(s=e.value.$el)!==null&&s!==void 0?s:e.value:(r==null?void 0:r.value)?r.value:(o==null?void 0:o.value)?o.value:(i==null?void 0:i.value)?i.value:n!=null?n:"body"})}ht.tdkey=po;ht.propTo={type:[String,Object,Boolean],default:void 0};var jn=se({name:"Checkmark",render(){return P("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},P("g",{fill:"none"},P("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),Xn=Bi("close",P("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},P("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},P("g",{fill:"currentColor","fill-rule":"nonzero"},P("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),Yn=se({name:"Empty",render(){return P("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),P("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),Gn=j("base-close",`
 cursor: pointer;
 color: var(--close-color);
`,[J("&:hover",{color:"var(--close-color-hover)"}),J("&:active",{color:"var(--close-color-pressed)"}),ue("disabled",{cursor:"not-allowed!important",color:"var(--close-color-disabled)"})]),Kn=se({name:"BaseClose",props:{clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},onClick:Function},setup(t){return $i("BaseClose",Gn,fe(t,"clsPrefix")),()=>{const{clsPrefix:e,disabled:r}=t;return P(Yt,{role:"button",ariaDisabled:r,ariaLabel:"close",clsPrefix:e,class:[`${e}-base-close`,r&&`${e}-base-close--disabled`],onClick:r?void 0:t.onClick},{default:()=>P(Xn,null)})}}}),Zn=se({props:{onFocus:Function,onBlur:Function},setup(t){return()=>P("div",{style:"width: 0; height: 0",tabindex:0,onFocus:t.onFocus,onBlur:t.onBlur})}});function go(t){return Array.isArray(t)?t:[t]}const Sr={STOP:"STOP"};function vo(t,e){const r=e(t);t.children!==void 0&&r!==Sr.STOP&&t.children.forEach(o=>vo(o,e))}function qn(t,e={}){const{preserveGroup:r=!1}=e,o=[],i=r?n=>{n.isLeaf||(o.push(n.key),s(n.children))}:n=>{n.isLeaf||(n.isGroup||o.push(n.key),s(n.children))};function s(n){n.forEach(i)}return s(t),o}function Qn(t,e){const{isLeaf:r}=t;return r!==void 0?r:!e(t)}function Jn(t){return t.children}function es(t){return t.key}function ts(){return!1}function rs(t,e){const{isLeaf:r}=t;return!(r===!1&&!Array.isArray(e(t)))}function os(t){return t.disabled===!0}function is(t,e){return t.isLeaf===!1&&!Array.isArray(e(t))}function Mr(t){var e;return t==null?[]:Array.isArray(t)?t:(e=t.checkedKeys)!==null&&e!==void 0?e:[]}function Rr(t){var e;return t==null||Array.isArray(t)?[]:(e=t.indeterminateKeys)!==null&&e!==void 0?e:[]}function ns(t,e){const r=new Set(t);return e.forEach(o=>{r.has(o)||r.add(o)}),Array.from(r)}function ss(t,e){const r=new Set(t);return e.forEach(o=>{r.has(o)&&r.delete(o)}),Array.from(r)}function as(t){return(t==null?void 0:t.type)==="group"}function ls(t){const e=new Map;return t.forEach((r,o)=>{e.set(r.key,o)}),r=>{var o;return(o=e.get(r))!==null&&o!==void 0?o:null}}class cs extends Error{constructor(){super();this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function ds(t,e,r){return ir(e.concat(t),r)}function us(t,e){const r=new Set;return t.forEach(o=>{const i=e.treeNodeMap.get(o);if(i!==void 0){let s=i.parent;for(;s!==null&&!(s.disabled||r.has(s.key));)r.add(s.key),s=s.parent}}),r}function hs(t,e,r){const o=ir(e,r),i=ir(t,r,!0),s=us(t,r),n=[];return o.forEach(a=>{(i.has(a)||s.has(a))&&n.push(a)}),n.forEach(a=>o.delete(a)),o}function Er(t,e){const{checkedKeys:r,keysToCheck:o,keysToUncheck:i,indeterminateKeys:s,cascade:n,leafOnly:a,checkStrategy:l}=t;if(!n)return o!==void 0?{checkedKeys:ns(r,o),indeterminateKeys:Array.from(s)}:i!==void 0?{checkedKeys:ss(r,i),indeterminateKeys:Array.from(s)}:{checkedKeys:Array.from(r),indeterminateKeys:Array.from(s)};const{levelTreeNodeMap:d}=e;let u;i!==void 0?u=hs(i,r,e):o!==void 0?u=ds(o,r,e):u=ir(r,e);const h=l==="parent",p=l==="child"||a,f=u,y=new Set,x=Math.max.apply(null,Array.from(d.keys()));for(let w=x;w>=0;w-=1){const b=w===0,v=d.get(w);for(const m of v){if(m.isLeaf)continue;const{key:g,shallowLoaded:_}=m;if(p&&_&&m.children.forEach(L=>{!L.disabled&&!L.isLeaf&&L.shallowLoaded&&f.has(L.key)&&f.delete(L.key)}),m.disabled||!_)continue;let C=!0,S=!1,E=!0;for(const L of m.children){const z=L.key;if(!L.disabled){if(E&&(E=!1),f.has(z))S=!0;else if(y.has(z)){S=!0,C=!1;break}else if(C=!1,S)break}}C&&!E?(h&&m.children.forEach(L=>{!L.disabled&&f.has(L.key)&&f.delete(L.key)}),f.add(g)):S&&y.add(g),b&&p&&f.has(g)&&f.delete(g)}}return{checkedKeys:Array.from(f),indeterminateKeys:Array.from(y)}}function ir(t,e,r=!1){const{treeNodeMap:o,getChildren:i}=e,s=new Set,n=new Set(t);return t.forEach(a=>{const l=o.get(a);l!==void 0&&vo(l,d=>{if(d.disabled)return Sr.STOP;const{key:u}=d;if(!s.has(u)&&(s.add(u),n.add(u),is(d.rawNode,i))){if(r)return Sr.STOP;throw new cs}})}),n}function fs(t,{includeGroup:e=!1,includeSelf:r=!0},o){var i;const s=o.treeNodeMap;let n=t==null?null:(i=s.get(t))!==null&&i!==void 0?i:null;const a={keyPath:[],treeNodePath:[],treeNode:n};if(n==null?void 0:n.ignored)return a.treeNode=null,a;for(;n;)!n.ignored&&(e||!n.isGroup)&&a.treeNodePath.push(n),n=n.parent;return a.treeNodePath.reverse(),r||a.treeNodePath.pop(),a.keyPath=a.treeNodePath.map(l=>l.key),a}function ps(t){if(t.length===0)return null;const e=t[0];return e.isGroup||e.ignored||e.disabled?e.getNext():e}function gs(t,e){const r=t.siblings,o=r.length,{index:i}=t;return e?r[(i+1)%o]:i===r.length-1?null:r[i+1]}function mo(t,e,{loop:r=!1,includeDisabled:o=!1}={}){const i=e==="prev"?vs:gs,s={reverse:e==="prev"};let n=!1,a=null;function l(d){if(d!==null){if(d===t){if(!n)n=!0;else if(!t.disabled&&!t.isGroup){a=t;return}}else if((!d.disabled||o)&&!d.ignored&&!d.isGroup){a=d;return}if(d.isGroup){const u=Lr(d,s);u!==null?a=u:l(i(d,r))}else{const u=i(d,!1);if(u!==null)l(u);else{const h=ms(d);(h==null?void 0:h.isGroup)?l(i(h,r)):r&&l(i(d,!0))}}}}return l(t),a}function vs(t,e){const r=t.siblings,o=r.length,{index:i}=t;return e?r[(i-1+o)%o]:i===0?null:r[i-1]}function ms(t){return t.parent}function Lr(t,e={}){const{reverse:r=!1}=e,{children:o}=t;if(o){const{length:i}=o,s=r?i-1:0,n=r?-1:i,a=r?-1:1;for(let l=s;l!==n;l+=a){const d=o[l];if(!d.disabled&&!d.ignored)if(d.isGroup){const u=Lr(d,e);if(u!==null)return u}else return d}}return null}const bs={getChild(){return this.ignored?null:Lr(this)},getParent(){const{parent:t}=this;return(t==null?void 0:t.isGroup)?t.getParent():t},getNext(t={}){return mo(this,"next",t)},getPrev(t={}){return mo(this,"prev",t)}};function ws(t,e){const r=e?new Set(e):void 0,o=[];function i(s){s.forEach(n=>{o.push(n),!(n.isLeaf||!n.children||n.ignored)&&(n.isGroup||r===void 0||r.has(n.key))&&i(n.children)})}return i(t),o}function ys(t,e){const r=t.key;for(;e;){if(e.key===r)return!0;e=e.parent}return!1}function bo(t,e,r,o,i,s=null,n=0){const a=[];return t.forEach((l,d)=>{var u;const h=Object.create(o);if(h.rawNode=l,h.siblings=a,h.level=n,h.index=d,h.isFirstChild=d===0,h.isLastChild=d+1===t.length,h.parent=s,!h.ignored){const p=i(l);Array.isArray(p)&&(h.children=bo(p,e,r,o,i,h,n+1))}a.push(h),e.set(h.key,h),r.has(n)||r.set(n,[]),(u=r.get(n))===null||u===void 0||u.push(h)}),a}function xs(t,e={}){const r=new Map,o=new Map,{getDisabled:i=os,getIgnored:s=ts,getChildren:n=Jn,getIsGroup:a=as,getKey:l=es}=e,d=Object.assign({get key(){return l(this.rawNode)},get disabled(){return i(this.rawNode)},get isGroup(){return a(this.rawNode)},get isLeaf(){return Qn(this.rawNode,n)},get shallowLoaded(){return rs(this.rawNode,n)},get ignored(){return s(this.rawNode)},contains(v){return ys(this,v)}},bs),u=bo(t,r,o,d,n);function h(v){if(v==null)return null;const m=r.get(v);return m&&!m.isGroup&&!m.ignored?m:null}function p(v){if(v==null)return null;const m=r.get(v);return m&&!m.ignored?m:null}function f(v,m){const g=p(v);return g?g.getPrev(m):null}function y(v,m){const g=p(v);return g?g.getNext(m):null}function x(v){const m=p(v);return m?m.getParent():null}function w(v){const m=p(v);return m?m.getChild():null}const b={treeNodes:u,treeNodeMap:r,levelTreeNodeMap:o,maxLevel:Math.max(...o.keys()),getChildren:n,getFlattenedNodes(v){return ws(u,v)},getNode:h,getPrev:f,getNext:y,getParent:x,getChild:w,getFirstAvailableNode(){return ps(u)},getPath(v,m={}){return fs(v,m,b)},getCheckedKeys(v,m={}){const{cascade:g=!0,leafOnly:_=!1,checkStrategy:C="all"}=m;return Er({checkedKeys:Mr(v),indeterminateKeys:Rr(v),cascade:g,leafOnly:_,checkStrategy:C},b)},check(v,m,g={}){const{cascade:_=!0,leafOnly:C=!1,checkStrategy:S="all"}=g;return Er({checkedKeys:Mr(m),indeterminateKeys:Rr(m),keysToCheck:v==null?[]:go(v),cascade:_,leafOnly:C,checkStrategy:S},b)},uncheck(v,m,g={}){const{cascade:_=!0,leafOnly:C=!1,checkStrategy:S="all"}=g;return Er({checkedKeys:Mr(m),indeterminateKeys:Rr(m),keysToUncheck:v==null?[]:go(v),cascade:_,leafOnly:C,checkStrategy:S},b)},getNonLeafKeys(v={}){return qn(u,v)}};return b}function kr(t,e="default"){const r=t[e];if(r===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);return r()}function wo(t,e="default"){const r=t[e];if(r===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);const o=r();if(o.length===1)return o[0];throw new Error(`[vueuc/binder]: slot[${e}] should have exactly one child.`)}let pt=null;function yo(){if(pt===null&&(pt=document.getElementById("v-binder-view-measurer"),pt===null)){pt=document.createElement("div"),pt.id="v-binder-view-measurer";const{style:t}=pt;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(pt)}return pt.getBoundingClientRect()}function Ps(t,e){const r=yo();return{top:e,left:t,height:0,width:0,right:r.width-t,bottom:r.height-e}}function Fr(t){const e=t.getBoundingClientRect(),r=yo();return{left:e.left-r.left,top:e.top-r.top,bottom:r.height+r.top-e.bottom,right:r.width+r.left-e.right,width:e.width,height:e.height}}function _s(t){return t.nodeType===9?null:t.parentNode}function xo(t){if(t===null)return null;const e=_s(t);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:r,overflowX:o,overflowY:i}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(r+i+o))return e}return xo(e)}const Ts=se({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(t){var e;ct("VBinder",(e=vn())===null||e===void 0?void 0:e.proxy);const r=je("VBinder",null),o=D(null),i=b=>{o.value=b,r&&t.syncTargetWithParent&&r.setTargetRef(b)};let s=[];const n=()=>{let b=o.value;for(;b=xo(b),b!==null;)s.push(b);for(const v of s)Ve("scroll",v,h,!0)},a=()=>{for(const b of s)Re("scroll",b,h,!0);s=[]},l=new Set,d=b=>{l.size===0&&n(),l.has(b)||l.add(b)},u=b=>{l.has(b)&&l.delete(b),l.size===0&&a()},h=()=>{so(p)},p=()=>{l.forEach(b=>b())},f=new Set,y=b=>{f.size===0&&Ve("resize",window,w),f.has(b)||f.add(b)},x=b=>{f.has(b)&&f.delete(b),f.size===0&&Re("resize",window,w)},w=()=>{f.forEach(b=>b())};return St(()=>{Re("resize",window,w),a()}),{targetRef:o,setTargetRef:i,addScrollListener:d,removeScrollListener:u,addResizeListener:y,removeResizeListener:x}},render(){return kr(this.$slots)}});var Po=Ts,_o=se({name:"Target",setup(){const{setTargetRef:t,syncTarget:e}=je("VBinder");return{syncTarget:e,setTargetDirective:{mounted:t,updated:t}}},render(){const{syncTarget:t,setTargetDirective:e}=this;return t?tr(wo(this.$slots),[[e]]):wo(this.$slots)}});const Et="@@mmoContext",Cs={mounted(t,{value:e}){t[Et]={handler:void 0},typeof e=="function"&&(t[Et].handler=e,Ve("mousemoveoutside",t,e))},updated(t,{value:e}){const r=t[Et];typeof e=="function"?r.handler?r.handler!==e&&(Re("mousemoveoutside",t,r.handler),r.handler=e,Ve("mousemoveoutside",t,e)):(t[Et].handler=e,Ve("mousemoveoutside",t,e)):r.handler&&(Re("mousemoveoutside",t,r.handler),r.handler=void 0)},unmounted(t){const{handler:e}=t[Et];e&&Re("mousemoveoutside",t,e),t[Et].handler=void 0}};var As=Cs;const Lt="@@coContext",Ss={mounted(t,{value:e}){t[Lt]={handler:void 0},typeof e=="function"&&(t[Lt].handler=e,Ve("clickoutside",t,e))},updated(t,{value:e}){const r=t[Lt];typeof e=="function"?r.handler?r.handler!==e&&(Re("clickoutside",t,r.handler),r.handler=e,Ve("clickoutside",t,e)):(t[Lt].handler=e,Ve("clickoutside",t,e)):r.handler&&(Re("clickoutside",t,r.handler),r.handler=void 0)},unmounted(t){const{handler:e}=t[Lt];e&&Re("clickoutside",t,e),t[Lt].handler=void 0}};var nr=Ss;function Ms(t,e){console.error(`[vdirs/${t}]: ${e}`)}class Rs{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,r){const{elementZIndex:o}=this;if(r!==void 0){e.style.zIndex=`${r}`,o.delete(e);return}const{nextZIndex:i}=this;o.has(e)&&o.get(e)+1===this.nextZIndex||(e.style.zIndex=`${i}`,o.set(e,i),this.nextZIndex=i+1,this.squashState())}unregister(e){const{elementZIndex:r}=this;r.has(e)?r.delete(e):Ms("vdirs/z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort((r,o)=>r[1]-o[1]),this.nextZIndex=2e3,e.forEach(r=>{const o=r[0],i=this.nextZIndex++;`${i}`!==o.style.zIndex&&(o.style.zIndex=`${i}`)})}}var Ir=new Rs;const Or="@@ziContext",Es={mounted(t,e){const{value:r={}}=e,{zIndex:o,enabled:i}=r;Ir.ensureZIndex(t,o),t[Or]={enabled:i}},updated(t,e){const{value:r={}}=e,{zIndex:o,enabled:i}=r,s=t[Or].enabled;i&&!s&&Ir.ensureZIndex(t,o),t[Or].enabled=i},unmounted(t){Ir.unregister(t)}};var Ls=Es;const{c:gt}=Ui();function To(t){return t&-t}class ks{constructor(e,r){this.l=e,this.min=r;const o=new Array(e+1);for(let i=0;i<e+1;++i)o[i]=0;this.ft=o}add(e,r){if(r===0)return;const{l:o,ft:i}=this;for(e+=1;e<=o;)i[e]+=r,e+=To(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===0)return 0;const{ft:r,min:o,l:i}=this;if(e===void 0&&(e=i),e>i)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let s=e*o;for(;e>0;)s+=r[e],e-=To(e);return s}getBound(e){let r=0,o=this.l;for(;o>r;){const i=Math.floor((r+o)/2),s=this.sum(i);if(s>e){o=i;continue}else if(s<e){if(r===i)return this.sum(r+1)<=e?r+1:i;r=i}else return i}return r}}var Fs=se({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(t){return{showTeleport:Dn(fe(t,"show")),mergedTo:N(()=>{const{to:e}=t;return e!=null?e:"body"})}},render(){return this.showTeleport?this.disabled?kr(this.$slots):P(mn,{disabled:this.disabled,to:this.mergedTo},kr(this.$slots)):null}});const Dr={top:"bottom",bottom:"top",left:"right",right:"left"},Co={start:"end",center:"center",end:"start"},zr={top:"height",bottom:"height",left:"width",right:"width"},Is={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Os={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Ds={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"};function zs(t,e,r,o,i){if(!o||i)return t;const[s,n]=t.split("-");let a=n!=null?n:"center";if(n!=="center"){const d=Ds[t],u=Dr[d],h=zr[d];r[h]>e[h]&&e[d]+e[h]<=r[h]&&e[d]<e[u]&&(a=Co[n]),r[h]<e[h]&&e[u]<0&&e[d]>e[u]&&(a=Co[n])}let l=s;return!(e[s]>=r[zr[s]])&&e[Dr[s]]>=r[zr[s]]&&(l=Dr[s]),a!=="center"?`${l}-${a}`:l}function Bs(t,e){return e?Os[t]:Is[t]}function $s(t,e,r,o){if(o)switch(t){case"bottom-start":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left)}px`,transform:""};case"bottom-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:""};case"right-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateX(-50%)"}}}const Us=gt([gt(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),gt(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[gt("> *",{pointerEvents:"all"})])]);var Ao=se({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(t){const e=je("VBinder"),r=it(()=>t.enabled!==void 0?t.enabled:t.show),o=D(null),i=D(null),s=()=>{const{syncTrigger:p}=t;p.includes("scroll")&&e.addScrollListener(l),p.includes("resize")&&e.addResizeListener(l)},n=()=>{e.removeScrollListener(l),e.removeResizeListener(l)};Je(()=>{r.value&&(l(),s())});const a=pr();Us.mount({id:"vueuc/binder",head:!0,ssr:a}),St(()=>{n()}),$n(()=>{r.value&&l()});const l=()=>{if(!r.value)return;const p=o.value;if(p===null)return;const f=e.targetRef,{x:y,y:x,overlap:w}=t,b=y!==void 0&&x!==void 0?Ps(y,x):Fr(f),{width:v,minWidth:m,placement:g,flip:_}=t;p.setAttribute("v-placement",g),w?p.setAttribute("v-overlap",""):p.removeAttribute("v-overlap");const{style:C}=p;v==="target"?C.width=`${b.width}px`:v!==void 0?C.width=v:C.width="",m==="target"?C.minWidth=`${b.width}px`:m!==void 0?C.minWidth=m:C.minWidth="";const S=Fr(p),E=Fr(i.value),L=zs(g,b,S,_,w),z=Bs(L,w),{left:V,top:G,transform:I}=$s(L,E,b,w);p.setAttribute("v-placement",L),p.style.transform=`translateX(${V}) translateY(${G}) ${I}`,p.style.transformOrigin=z};Oe(r,p=>{p?(s(),d()):n()});const d=()=>{yt().then(l).catch(p=>console.error(p))};["placement","x","y","flip","width","overlap","minWidth"].forEach(p=>{Oe(fe(t,p),l)}),["teleportDisabled"].forEach(p=>{Oe(fe(t,p),d)}),Oe(fe(t,"syncTrigger"),p=>{p.includes("resize")?e.addResizeListener(l):e.removeResizeListener(l),p.includes("scroll")?e.addScrollListener(l):e.removeScrollListener(l)});const u=gr(),h=it(()=>{const{to:p}=t;if(p!==void 0)return p;!u.value});return{VBinder:e,mergedEnabled:r,offsetContainerRef:i,followerRef:o,mergedTo:h,syncPosition:l}},render(){return P(Fs,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{const t=P("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[P("div",{class:"v-binder-follower-content",ref:"followerRef"},this.$slots)]);return this.zindexable?tr(t,[[Ls,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});const Vs=gt(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[gt("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[gt("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var Ns=se({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(t){const e=pr();Vs.mount({id:"vueuc/virtual-list",head:!0,ssr:e}),Je(()=>{const{defaultScrollIndex:g,defaultScrollKey:_}=t;g!=null?h({index:g}):_!=null&&h({key:_})});const r=N(()=>{const g=new Map,{keyField:_}=t;return t.items.forEach((C,S)=>{g.set(C[_],S)}),g}),o=D(null),i=D(void 0),s=new Map,n=N(()=>{const{items:g,itemSize:_,keyField:C}=t,S=new ks(g.length,_);return g.forEach((E,L)=>{const z=E[C],V=s.get(z);V!==void 0&&S.add(L,V)}),S}),a=D(0),l=D(0),d=it(()=>Math.max(n.value.getBound(l.value-vr(t.paddingTop))-1,0)),u=N(()=>{const{value:g}=i;if(g===void 0)return[];const{items:_,itemSize:C}=t,S=d.value,E=Math.min(S+Math.ceil(g/C+1),_.length-1),L=[];for(let z=S;z<=E;++z)L.push(_[z]);return L}),h=g=>{const{left:_,top:C,index:S,key:E,position:L,behavior:z,debounce:V=!0}=g;if(_!==void 0||C!==void 0)f(_,C,z);else if(S!==void 0)p(S,z,V);else if(E!==void 0){const G=r.value.get(E);G!==void 0&&p(G,z,V)}else L==="bottom"?f(0,Number.MAX_SAFE_INTEGER,z):L==="top"&&f(0,0,z)};function p(g,_,C){const{value:S}=n,E=S.sum(g)+vr(t.paddingTop);if(!C)o.value.scrollTo({left:0,top:E,behavior:_});else{const{scrollTop:L,offsetHeight:z}=o.value;if(E>L){const V=S.get(g);E+V<=L+z||o.value.scrollTo({left:0,top:E+V-z,behavior:_})}else o.value.scrollTo({left:0,top:E,behavior:_})}b=g}function f(g,_,C){o.value.scrollTo({left:g,top:_,behavior:C})}function y(g,_){var C;if(t.ignoreItemResize)return;const{value:S}=n,E=r.value.get(g),L=_.target.offsetHeight;L-t.itemSize===0?s.delete(g):s.set(g,L-t.itemSize);const V=L-S.get(E);V!==0&&(v!==void 0&&E<=v&&((C=o.value)===null||C===void 0||C.scrollBy(0,V)),S.add(E,V),a.value++)}function x(g){so(m);const{onScroll:_}=t;_!==void 0&&_(g)}function w(g){i.value=g.contentRect.height;const{onResize:_}=t;_!==void 0&&_(g)}let b,v;function m(){const{value:g}=o;g!=null&&(v=b!=null?b:d.value,b=void 0,l.value=o.value.scrollTop)}return{listHeight:i,listStyle:{overflow:"auto"},keyToIndex:r,itemsStyle:N(()=>{const{itemResizable:g}=t,_=Kt(n.value.sum());return a.value,[t.itemsStyle,{boxSizing:"content-box",height:g?"":_,minHeight:g?_:"",paddingTop:Kt(t.paddingTop),paddingBottom:Kt(t.paddingBottom)}]}),visibleItemsStyle:N(()=>(a.value,{transform:`translate3d(0, ${Kt(n.value.sum(d.value))}, 0)`})),viewportItems:u,listElRef:o,itemsElRef:D(null),scrollTo:h,handleListResize:w,handleListScroll:x,handleItemResize:y}},render(){const{itemResizable:t,keyField:e,keyToIndex:r,visibleItemsTag:o}=this;return P(Gt,{onResize:this.handleListResize},{default:()=>{var i,s;return P("div",rr(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?P("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[P(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(n=>{const a=n[e],l=r.get(a),d=this.$slots.default({item:n,index:l})[0];return t?P(Gt,{key:a,onResize:u=>this.handleItemResize(a,u)},{default:()=>d}):(d.key=a,d)})})]):(s=(i=this.$slots).empty)===null||s===void 0?void 0:s.call(i)])}})}});const xt="v-hidden",Ws=gt("[v-hidden]",{display:"none!important"});var So=se({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(t,{slots:e}){const r=D(null),o=D(null);function i(){const{value:n}=r,{getCounter:a,getTail:l}=t;let d;if(a!==void 0?d=a():d=o.value,!n||!d)return;d.hasAttribute(xt)&&d.removeAttribute(xt);const{children:u}=n,h=n.offsetWidth,p=[],f=e.tail?l==null?void 0:l():null;let y=f?f.offsetWidth:0,x=!1;const w=n.children.length-(e.tail?1:0);for(let v=0;v<w-1;++v){if(v<0)continue;const m=u[v];if(x){m.hasAttribute(xt)||m.setAttribute(xt,"");continue}else m.hasAttribute(xt)&&m.removeAttribute(xt);const g=m.offsetWidth;if(y+=g,p[v]=g,y>h){const{updateCounter:_}=t;for(let C=v;C>=0;--C){const S=w-1-C;_!==void 0?_(S):d.textContent=`${S}`;const E=d.offsetWidth;if(y-=p[C],y+E<=h||C===0){x=!0,v=C-1,f&&(v===-1?(f.style.maxWidth=`${h-E}px`,f.style.boxSizing="border-box"):f.style.maxWidth="");break}}}}const{onUpdateOverflow:b}=t;x?b!==void 0&&b(!0):(b!==void 0&&b(!1),d.setAttribute(xt,""))}const s=pr();return Ws.mount({id:"vueuc/overflow",head:!0,ssr:s}),Je(i),{selfRef:r,counterRef:o,sync:i}},render(){const{$slots:t}=this;return yt(this.sync),P("div",{class:"v-overflow",ref:"selfRef"},[Ze(t,"default"),t.counter?t.counter():P("span",{style:{display:"inline-block"},ref:"counterRef"}),t.tail?t.tail():null])}}),Hs={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};const js=t=>{const{textColorDisabled:e,iconColor:r,textColor2:o,fontSizeSmall:i,fontSizeMedium:s,fontSizeLarge:n,fontSizeHuge:a}=t;return Object.assign(Object.assign({},Hs),{fontSizeSmall:i,fontSizeMedium:s,fontSizeLarge:n,fontSizeHuge:a,textColor:e,iconColor:r,extraTextColor:o})},Xs={name:"Empty",common:nt,self:js};var Mo=Xs,Ys=j("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--font-size);
`,[Q("icon",`
 width: var(--icon-size);
 height: var(--icon-size);
 font-size: var(--icon-size);
 line-height: var(--icon-size);
 color: var(--icon-color);
 transition:
 color .3s var(--bezier);
 `),Q("description",`
 margin-top: 8px;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `),Q("extra",`
 text-align: center;
 transition: color .3s var(--bezier);
 margin-top: 12px;
 color: var(--extra-text-color);
 `)]);const Gs=Object.assign(Object.assign({},we.props),{description:{type:String,default:void 0},showDescription:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function});var Ks=se({name:"Empty",props:Gs,setup(t){const{mergedClsPrefixRef:e}=bt(t),r=we("Empty","Empty",Ys,Mo,t,e),{localeRef:o}=Zt("Empty"),i=je(Vi,null),s=N(()=>{var a,l,d;return(a=t.description)!==null&&a!==void 0?a:(d=(l=i==null?void 0:i.mergedComponentPropsRef.value)===null||l===void 0?void 0:l.Empty)===null||d===void 0?void 0:d.description}),n=N(()=>{var a,l;return((l=(a=i==null?void 0:i.mergedComponentPropsRef.value)===null||a===void 0?void 0:a.Empty)===null||l===void 0?void 0:l.renderIcon)||(()=>P(Yn,null))});return{mergedClsPrefix:e,mergedRenderIcon:n,localizedDescription:N(()=>s.value||o.value.description),cssVars:N(()=>{const{size:a}=t,{common:{cubicBezierEaseInOut:l},self:{[ye("iconSize",a)]:d,[ye("fontSize",a)]:u,textColor:h,iconColor:p,extraTextColor:f}}=r.value;return{"--icon-size":d,"--font-size":u,"--bezier":l,"--text-color":h,"--icon-color":p,"--extra-text-color":f}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;return P("div",{class:`${e}-empty`,style:this.cssVars},P("div",{class:`${e}-empty__icon`},Ze(t,"icon",void 0,()=>[P(Yt,{clsPrefix:e},{default:this.mergedRenderIcon})])),this.showDescription?P("div",{class:`${e}-empty__description`},Ze(t,"default",void 0,()=>[this.localizedDescription])):null,t.extra?P("div",{class:`${e}-empty__extra`},Ze(t,"extra")):null)}});const Zs=t=>{const{scrollbarColor:e,scrollbarColorHover:r}=t;return{color:e,colorHover:r}},qs={name:"Scrollbar",common:nt,self:Zs};var Ro=qs,Qs=j("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[J(">",[j("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[J("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),J(">",[j("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])]),j("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 `,[ue("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--scrollbar-height);
 `,[J(">",[Q("scrollbar",`
 height: var(--scrollbar-height);
 border-radius: var(--scrollbar-border-radius);
 right: 0;
 `)])]),ue("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--scrollbar-width);
 `,[J(">",[Q("scrollbar",`
 width: var(--scrollbar-width);
 border-radius: var(--scrollbar-border-radius);
 bottom: 0;
 `)])]),ue("disabled",[J(">",[Q("scrollbar",{pointerEvents:"none"})])]),J(">",[Q("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--scrollbar-color);
 transition: background-color .2s var(--scrollbar-bezier);
 `,[Ni(),J("&:hover",{backgroundColor:"var(--scrollbar-color-hover)"})])])])])]);const Js=Object.assign(Object.assign({},we.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:{type:Boolean,default:!1},container:Function,content:Function,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function}),ea=se({name:"Scrollbar",props:Js,inheritAttrs:!1,setup(t){const{mergedClsPrefixRef:e}=bt(t),r=D(null),o=D(null),i=D(null),s=D(null),n=D(null),a=D(null),l=D(null),d=D(null),u=D(null),h=D(null),p=D(0),f=D(0),y=D(!1),x=D(!1);let w=!1,b=!1,v,m,g=0,_=0,C=0,S=0;const E=Vn(),L=N(()=>{const{value:F}=l,{value:U}=n,{value:K}=u;return F===null||U===null||K===null?0:Math.min(F,K*F/U+t.size*1.5)}),z=N(()=>`${L.value}px`),V=N(()=>{const{value:F}=d,{value:U}=a,{value:K}=h;return F===null||U===null||K===null?0:K*F/U+t.size*1.5}),G=N(()=>`${V.value}px`),I=N(()=>{const{value:F}=l,{value:U}=p,{value:K}=n,{value:ie}=u;return F===null||K===null||ie===null?0:U/(K-F)*(ie-L.value)}),$=N(()=>`${I.value}px`),B=N(()=>{const{value:F}=d,{value:U}=f,{value:K}=a,{value:ie}=h;return F===null||K===null||ie===null?0:U/(K-F)*(ie-V.value)}),A=N(()=>`${B.value}px`),M=N(()=>{const{value:F}=l,{value:U}=n;return F!==null&&U!==null&&U>F}),O=N(()=>{const{value:F}=d,{value:U}=a;return F!==null&&U!==null&&U>F}),Y=N(()=>{const{container:F}=t;return F?F():r.value}),ee=N(()=>{const{content:F}=t;return F?F():o.value}),te=Ce,de=F=>{const{onResize:U}=t;U&&U(F),Ce()},pe=(F,U)=>{if(!t.scrollable)return;if(typeof F=="number"){ae(F,U!=null?U:0,0,!1,"auto");return}const{left:K,top:ie,index:T,elSize:k,position:H,behavior:W,el:Z,debounce:le=!0}=F;(K!==void 0||ie!==void 0)&&ae(K!=null?K:0,ie!=null?ie:0,0,!1,W),Z!==void 0?ae(0,Z.offsetTop,Z.offsetHeight,le,W):T!==void 0&&k!==void 0?ae(0,T*k,k,le,W):H==="bottom"?ae(0,Number.MAX_SAFE_INTEGER,0,!1,W):H==="top"&&ae(0,0,0,!1,W)};function ae(F,U,K,ie,T){const{value:k}=Y;if(!!k){if(ie){const{scrollTop:H,offsetHeight:W}=k;if(U>H){U+K<=H+W||k.scrollTo({left:F,top:U+K-W,behavior:T});return}}k.scrollTo({left:F,top:U,behavior:T})}}function oe(){Ue(),Qe(),Ce()}function he(){Te()}function Te(){Be(),Pe()}function Be(){m!==void 0&&window.clearTimeout(m),m=window.setTimeout(()=>{x.value=!1},t.duration)}function Pe(){v!==void 0&&window.clearTimeout(v),v=window.setTimeout(()=>{y.value=!1},t.duration)}function Ue(){v!==void 0&&window.clearTimeout(v),y.value=!0}function Qe(){m!==void 0&&window.clearTimeout(m),x.value=!0}function Ye(F){const{onScroll:U}=t;U&&U(F),Se()}function Se(){const{value:F}=Y;F&&(p.value=F.scrollTop,f.value=F.scrollLeft)}function Ge(){const{value:F}=ee;F&&(n.value=F.offsetHeight,a.value=F.offsetWidth);const{value:U}=Y;U&&(l.value=U.offsetHeight,d.value=U.offsetWidth);const{value:K}=s,{value:ie}=i;K&&(h.value=K.offsetWidth),ie&&(u.value=ie.offsetHeight)}function Ce(){!t.scrollable||(Ge(),Se())}function ke(F){F.preventDefault(),F.stopPropagation(),b=!0,Ve("mousemove",window,R,!0),Ve("mouseup",window,X,!0),_=f.value,C=F.clientX}function R(F){if(!b)return;v!==void 0&&window.clearTimeout(v),m!==void 0&&window.clearTimeout(m);const{value:U}=d,{value:K}=a,{value:ie}=V;if(U===null||K===null)return;const k=(F.clientX-C)*(K-U)/(U-ie),H=K-U;let W=_+k;W=Math.min(H,W),W=Math.max(W,0);const{value:Z}=Y;if(Z){Z.scrollLeft=W;const{internalOnUpdateScrollLeft:le}=t;le&&le(W)}}function X(F){F.preventDefault(),F.stopPropagation(),Re("mousemove",window,R,!0),Re("mouseup",window,X,!0),b=!1,Ce();const{value:U}=Y;(U==null?void 0:U.contains(F.target))||Te()}function Me(F){F.preventDefault(),F.stopPropagation(),w=!0,Ve("mousemove",window,tt,!0),Ve("mouseup",window,rt,!0),g=p.value,S=F.clientY}function tt(F){if(!w)return;v!==void 0&&window.clearTimeout(v),m!==void 0&&window.clearTimeout(m);const{value:U}=l,{value:K}=n,{value:ie}=L;if(U===null||K===null)return;const k=(F.clientY-S)*(K-U)/(U-ie),H=K-U;let W=g+k;W=Math.min(H,W),W=Math.max(W,0);const{value:Z}=Y;Z&&(Z.scrollTop=W)}function rt(F){F.preventDefault(),F.stopPropagation(),Re("mousemove",window,tt,!0),Re("mouseup",window,rt,!0),w=!1,Ce();const{value:U}=Y;(U==null?void 0:U.contains(F.target))||Te()}_r(()=>{const{value:F}=O,{value:U}=M,{value:K}=e,{value:ie}=s,{value:T}=i;ie&&(F?ie.classList.remove(`${K}-scrollbar-rail--disabled`):ie.classList.add(`${K}-scrollbar-rail--disabled`)),T&&(U?T.classList.remove(`${K}-scrollbar-rail--disabled`):T.classList.add(`${K}-scrollbar-rail--disabled`))}),Je(()=>{t.container||Ce()}),St(()=>{v!==void 0&&window.clearTimeout(v),m!==void 0&&window.clearTimeout(m),Re("mousemove",window,tt,!0),Re("mouseup",window,rt,!0)});const Pt=we("Scrollbar","Scrollbar",Qs,Ro,t,e);return{sync:Ce,scrollTo:pe,mergedClsPrefix:e,containerScrollTop:p,containerRef:r,contentRef:o,yRailRef:i,xRailRef:s,needYBar:M,needXBar:O,yBarSizePx:z,xBarSizePx:G,yBarTopPx:$,xBarLeftPx:A,isShowXBar:y,isShowYBar:x,isIos:E,handleScroll:Ye,handleContentResize:te,handleContainerResize:de,handleMouseEnterWrapper:oe,handleMouseLeaveWrapper:he,handleYScrollMouseDown:Me,handleXScrollMouseDown:ke,cssVars:N(()=>{const{common:{cubicBezierEaseInOut:F,scrollbarBorderRadius:U,scrollbarHeight:K,scrollbarWidth:ie},self:{color:T,colorHover:k}}=Pt.value;return{"--scrollbar-bezier":F,"--scrollbar-color":T,"--scrollbar-color-hover":k,"--scrollbar-border-radius":U,"--scrollbar-width":ie,"--scrollbar-height":K}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;if(!this.scrollable)return Ze(t,"default");const r=()=>P("div",rr(this.$attrs,{class:`${e}-scrollbar`,style:this.cssVars,onMouseenter:this.handleMouseEnterWrapper,onMouseleave:this.handleMouseLeaveWrapper}),[this.container?Ze(t,"default"):P("div",{ref:"containerRef",class:`${e}-scrollbar-container`,style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},P(Gt,{onResize:this.handleContentResize},{default:()=>P("div",{ref:"contentRef",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${e}-scrollbar-content`,this.contentClass]},t)})),P("div",{ref:"yRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--vertical`,style:[this.horizontalRailStyle]},P(Nt,{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?P("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),P("div",{ref:"xRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--horizontal`,style:[this.verticalRailStyle]},P(Nt,{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?P("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,left:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))]);return this.container?r():P(Gt,{onResize:this.handleContainerResize},{default:r})}});var ta=ea;const ra=P(jn);function oa(t,e){return P(Nt,{name:"fade-in-scale-up-transition"},{default:()=>t?P(Yt,{clsPrefix:e,class:`${e}-base-select-option__check`},{default:()=>ra}):null})}var Eo=se({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(t){const{valueRef:e,pendingTmNodeRef:r,multipleRef:o,valueSetRef:i,renderLabelRef:s,renderOptionRef:n,handleOptionClick:a,handleOptionMouseEnter:l}=je(Ar),d=it(()=>{const{value:f}=r;return f?t.tmNode.key===f.key:!1});function u(f){const{tmNode:y}=t;y.disabled||a(f,y)}function h(f){const{tmNode:y}=t;y.disabled||l(f,y)}function p(f){const{tmNode:y}=t,{value:x}=d;y.disabled||x||l(f,y)}return{multiple:o,isGrouped:it(()=>{const{tmNode:f}=t,{parent:y}=f;return y&&y.rawNode.type==="group"}),isPending:d,isSelected:it(()=>{const{value:f}=e,{value:y}=o;if(f===null)return!1;const x=t.tmNode.rawNode.value;if(y){const{value:w}=i;return w.has(x)}else return f===x}),renderLabel:s,renderOption:n,handleMouseMove:p,handleMouseEnter:h,handleClick:u}},render(){const{clsPrefix:t,tmNode:{rawNode:e},isSelected:r,isPending:o,isGrouped:i,multiple:s,renderOption:n,renderLabel:a,handleClick:l,handleMouseEnter:d,handleMouseMove:u}=this,p=oa(s&&r,t),f=a?[a(e,r),p]:[Rt(e.label,e,r),p],y=P("div",{class:[`${t}-base-select-option`,e.class,{[`${t}-base-select-option--disabled`]:e.disabled,[`${t}-base-select-option--selected`]:r,[`${t}-base-select-option--grouped`]:i,[`${t}-base-select-option--pending`]:o}],style:e.style,onClick:l,onMouseenter:d,onMousemove:u},P("div",{class:`${t}-base-select-option__content`},f));return e.render?e.render({node:y,option:e,selected:r}):n?n({node:y,option:e,selected:r}):y}}),Lo=se({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:t,renderOptionRef:e}=je(Ar);return{renderLabel:t,renderOption:e}},render(){const{clsPrefix:t,renderLabel:e,renderOption:r,tmNode:{rawNode:o}}=this,i=e?e(o,!1):Rt(o.label,o,!1),s=P("div",{class:`${t}-base-select-group-header`},i);return o.render?o.render({node:s,option:o}):r?r({node:s,option:o,selected:!1}):s}});const{cubicBezierEaseIn:ko,cubicBezierEaseOut:Fo,transformDebounceScale:ia}=Wi;function Io({transformOrigin:t="inherit",duration:e=".2s",enterScale:r=".9",originalTransform:o="",originalTransition:i=""}={}){return[J("&.fade-in-scale-up-transition-leave-active",{transformOrigin:t,transition:`opacity ${e} ${ko}, transform ${e} ${ko} ${i&&","+i}`}),J("&.fade-in-scale-up-transition-enter-active",{transformOrigin:t,transition:`opacity ${e} ${Fo}, transform ${e} ${Fo} ${i&&","+i}`}),J("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${o} scale(${r})`}),J("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${o} scale(${ia})`})]}var na=j("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--border-radius);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 background-color: var(--color);
`,[ue("multiple",[j("base-select-option",`
 padding-right: 28px;
 `)]),j("scrollbar",`
 max-height: var(--height);
 `),j("virtual-list",`
 max-height: var(--height);
 `),j("base-select-option",`
 min-height: var(--option-height);
 font-size: var(--option-font-size);
 display: flex;
 align-items: center;
 `,[Q("content",`
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),j("base-select-group-header",`
 min-height: var(--option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),j("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),Q("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),Q("loading",`
 color: var(--loading-color);
 font-size: var(--loading-size);
 `),Q("action",`
 padding: 8px var(--option-padding-left);
 font-size: var(--option-font-size);
 transition: 
 color .3s var(--bezier);
 border-color .3s var(--bezier);
 border-top: 1px solid var(--action-divider-color);
 color: var(--action-text-color);
 `),j("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--option-padding);
 color: var(--group-header-text-color);
 `),j("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--option-padding);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 opacity .3s var(--bezier);
 box-sizing: border-box;
 color: var(--option-text-color);
 opacity: 1;
 `,[J("&:active",`
 color: var(--option-text-color-pressed);
 `),ue("grouped",`
 padding-left: calc(var(--option-padding-left) * 1.5);
 `),ue("pending",`
 background-color: var(--option-color-pending);
 `),ue("selected",`
 color: var(--option-text-color-active);
 background-color: var(--option-color-active);
 `),ue("disabled",`
 cursor: not-allowed;
 `,[st("selected",`
 color: var(--option-text-color-disabled);
 `),ue("selected",`
 opacity: var(--option-opacity-disabled);
 `)]),Q("check",`
 font-size: 16px;
 position: absolute;
 right: 8px;
 top: calc(50% - 7px);
 color: var(--option-check-color);
 transition: color .3s var(--bezier);
 `,[Io({enterScale:"0.5"})])])]),sa={height:"calc(var(--option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};const aa=t=>{const{borderRadius:e,popoverColor:r,textColor3:o,dividerColor:i,textColor2:s,primaryColorPressed:n,textColorDisabled:a,primaryColor:l,opacityDisabled:d,hoverColor:u,fontSizeSmall:h,fontSizeMedium:p,fontSizeLarge:f,fontSizeHuge:y,heightSmall:x,heightMedium:w,heightLarge:b,heightHuge:v}=t;return Object.assign(Object.assign({},sa),{optionFontSizeSmall:h,optionFontSizeMedium:p,optionFontSizeLarge:f,optionFontSizeHuge:y,optionHeightSmall:x,optionHeightMedium:w,optionHeightLarge:b,optionHeightHuge:v,borderRadius:e,color:r,groupHeaderTextColor:o,actionDividerColor:i,optionTextColor:s,optionTextColorPressed:n,optionTextColorDisabled:a,optionTextColorActive:l,optionOpacityDisabled:d,optionCheckColor:l,optionColorPending:u,optionColorActive:u,actionTextColor:s,loadingColor:l})},la=qt({name:"InternalSelectMenu",common:nt,peers:{Scrollbar:Ro,Empty:Mo},self:aa});var Oo=la,ca=se({name:"InternalSelectMenu",props:Object.assign(Object.assign({},we.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},width:[Number,String],autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onToggle:Function}),setup(t){const e=we("InternalSelectMenu","InternalSelectMenu",na,Oo,t,fe(t,"clsPrefix")),r=D(null),o=D(null),i=D(null),s=N(()=>t.treeMate.getFlattenedNodes()),n=N(()=>ls(s.value)),a=D(null);function l(){const{treeMate:A}=t;z(t.autoPending?t.value===null?A.getFirstAvailableNode():t.multiple?A.getNode((t.value||[])[(t.value||[]).length-1])||A.getFirstAvailableNode():A.getNode(t.value)||A.getFirstAvailableNode():null)}l(),Je(()=>{_r(()=>{t.show&&(l(),yt(V))})});const d=N(()=>vr(e.value.self[ye("optionHeight",t.size)])),u=N(()=>Gr(e.value.self[ye("padding",t.size)])),h=N(()=>t.multiple&&Array.isArray(t.value)?new Set(t.value):new Set),p=N(()=>{const A=s.value;return A&&A.length===0}),f=N(()=>[{width:Ut(t.width)},$.value]);Oe(fe(t,"treeMate"),()=>{if(t.autoPending){const A=t.treeMate.getFirstAvailableNode();z(A)}else z(null)});function y(A){const{onToggle:M}=t;M&&M(A)}function x(A){const{onScroll:M}=t;M&&M(A)}function w(A){var M;(M=i.value)===null||M===void 0||M.sync(),x(A)}function b(){var A;(A=i.value)===null||A===void 0||A.sync()}function v(){const{value:A}=a;return A||null}function m(A,M){M.disabled||z(M,!1)}function g(A,M){M.disabled||y(M)}function _(A){var M;Tr(A,"action")||(M=t.onKeyup)===null||M===void 0||M.call(t,A)}function C(A){var M;Tr(A,"action")||(M=t.onKeydown)===null||M===void 0||M.call(t,A)}function S(A){var M;(M=t.onMousedown)===null||M===void 0||M.call(t,A),!t.focusable&&A.preventDefault()}function E(){const{value:A}=a;A&&z(A.getNext({loop:!0}),!0)}function L(){const{value:A}=a;A&&z(A.getPrev({loop:!0}),!0)}function z(A,M=!1){a.value=A,M&&V()}function V(){var A,M;const O=a.value;if(!O)return;const Y=n.value(O.key);Y!==null&&(t.virtualScroll?(A=o.value)===null||A===void 0||A.scrollTo({index:Y}):(M=i.value)===null||M===void 0||M.scrollTo({index:Y,elSize:d.value}))}function G(A){var M,O;((M=r.value)===null||M===void 0?void 0:M.contains(A.target))&&((O=t.onFocus)===null||O===void 0||O.call(t,A))}function I(A){var M,O;((M=r.value)===null||M===void 0?void 0:M.contains(A.relatedTarget))||(O=t.onBlur)===null||O===void 0||O.call(t,A)}ct(Ar,{handleOptionMouseEnter:m,handleOptionClick:g,valueSetRef:h,multipleRef:fe(t,"multiple"),valueRef:fe(t,"value"),renderLabelRef:fe(t,"renderLabel"),renderOptionRef:fe(t,"renderOption"),pendingTmNodeRef:a}),ct(fo,r),Je(()=>{const{value:A}=i;A&&A.sync()});const $=N(()=>{const{size:A}=t,{common:{cubicBezierEaseInOut:M},self:{height:O,borderRadius:Y,color:ee,groupHeaderTextColor:te,actionDividerColor:de,optionTextColorPressed:pe,optionTextColor:ae,optionTextColorDisabled:oe,optionTextColorActive:he,optionOpacityDisabled:Te,optionCheckColor:Be,actionTextColor:Pe,optionColorPending:Ue,optionColorActive:Qe,loadingColor:Ye,loadingSize:Se,[ye("optionFontSize",A)]:Ge,[ye("optionHeight",A)]:Ce,[ye("optionPadding",A)]:ke}}=e.value;return{"--height":O,"--action-divider-color":de,"--action-text-color":Pe,"--bezier":M,"--border-radius":Y,"--color":ee,"--option-font-size":Ge,"--group-header-text-color":te,"--option-check-color":Be,"--option-color-pending":Ue,"--option-color-active":Qe,"--option-height":Ce,"--option-opacity-disabled":Te,"--option-text-color":ae,"--option-text-color-active":he,"--option-text-color-disabled":oe,"--option-text-color-pressed":pe,"--option-padding":ke,"--option-padding-left":Gr(ke,"left"),"--loading-color":Ye,"--loading-size":Se}});return Object.assign({mergedTheme:e,virtualListRef:o,scrollbarRef:i,style:f,itemSize:d,padding:u,flattenedNodes:s,empty:p,virtualListContainer(){const{value:A}=o;return A==null?void 0:A.listElRef},virtualListContent(){const{value:A}=o;return A==null?void 0:A.itemsElRef},doScroll:x,handleFocusin:G,handleFocusout:I,handleKeyUp:_,handleKeyDown:C,handleMouseDown:S,handleVirtualListResize:b,handleVirtualListScroll:w},{selfRef:r,next:E,prev:L,getPendingTmNode:v})},render(){const{$slots:t,virtualScroll:e,clsPrefix:r,mergedTheme:o}=this;return P("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${r}-base-select-menu`,this.multiple&&`${r}-base-select-menu--multiple`],style:this.style,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?P("div",{class:`${r}-base-select-menu__loading`},P(Hi,{clsPrefix:r,strokeWidth:20})):this.empty?P("div",{class:`${r}-base-select-menu__empty`},Ze(t,"empty",void 0,()=>[P(Ks,{theme:o.peers.Empty,themeOverrides:o.peerOverrides.Empty})])):P(ta,{ref:"scrollbarRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,scrollable:this.scrollable,container:e?this.virtualListContainer:void 0,content:e?this.virtualListContent:void 0,onScroll:e?void 0:this.doScroll},{default:()=>e?P(Ns,{ref:"virtualListRef",class:`${r}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:i})=>i.isGroup?P(Lo,{key:i.key,clsPrefix:r,tmNode:i}):i.ignored?null:P(Eo,{clsPrefix:r,key:i.key,tmNode:i})}):P("div",{class:`${r}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(i=>i.isGroup?P(Lo,{key:i.key,clsPrefix:r,tmNode:i}):P(Eo,{clsPrefix:r,key:i.key,tmNode:i})))}),t.action&&P("div",{class:`${r}-base-select-menu__action`,"data-action":!0},Ze(t,"action")),t.action&&P(Zn,{onFocus:this.onTabOut}))}}),da={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};const ua=t=>{const{boxShadow2:e,popoverColor:r,textColor2:o,borderRadius:i,fontSize:s,dividerColor:n}=t;return Object.assign(Object.assign({},da),{fontSize:s,borderRadius:i,color:r,dividerColor:n,textColor:o,boxShadow:e})},ha={name:"Popover",common:nt,self:ua};var Br=ha;const $r={top:"bottom",bottom:"top",left:"right",right:"left"};var fa=J([j("popover",`
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 transform-origin: inherit;
 position: relative;
 font-size: var(--font-size);
 color: var(--text-color);
 box-shadow: var(--box-shadow);
 `,[J("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),J("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),J("&.popover-transition-enter-active",`
 transition:
 opacity .15s var(--bezier-ease-out),
 transform .15s var(--bezier-ease-out);
 `),J("&.popover-transition-leave-active",`
 transition:
 opacity .15s var(--bezier-ease-in),
 transform .15s var(--bezier-ease-in);
 `),st("raw",`
 background-color: var(--color);
 border-radius: var(--border-radius);
 var(--padding);
 `,[st("show-header","padding: var(--padding);")]),Q("header",`
 padding: var(--padding);
 border-bottom: 1px solid var(--divider-color);
 transition: border-color .3s var(--bezier);
 `),Q("content",`
 padding: var(--padding);
 `),j("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[j("popover-arrow",`
 transition: background-color .3s var(--bezier);
 position: absolute;
 display: block;
 width: calc(var(--arrow-height) * 1.414);
 height: calc(var(--arrow-height) * 1.414);
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--color);
 pointer-events: all;
 `)])]),Xe("top-start",`
 top: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),Xe("top",`
 top: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),Xe("top-end",`
 top: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),Xe("bottom-start",`
 bottom: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),Xe("bottom",`
 bottom: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),Xe("bottom-end",`
 bottom: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),Xe("left-start",`
 left: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),Xe("left",`
 left: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),Xe("left-end",`
 left: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `),Xe("right-start",`
 right: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),Xe("right",`
 right: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),Xe("right-end",`
 right: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `)]);function Xe(t,e){const r=t.split("-")[0],o=["top","bottom"].includes(r)?"height: var(--space-arrow);":"width: var(--space-arrow);";return J(`[v-placement="${t}"] >`,[j("popover",`
 margin-${$r[r]}: var(--space);
 `,[ue("show-arrow",`
 margin-${$r[r]}: var(--space-arrow);
 `),ue("overlap",`
 margin: 0;
 `),ji("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${r}: 100%;
 ${$r[r]}: auto;
 ${o}
 `,[j("popover-arrow",e)])])])}const Do=Object.assign(Object.assign({},we.props),{to:ht.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowStyle:[String,Object],displayDirective:String,x:Number,y:Number,filp:Boolean,overlap:Boolean,placement:String,width:[Number,String],animated:Boolean,onClickoutside:Function,minWidth:Number,maxWidth:Number}),pa=({arrowStyle:t,clsPrefix:e})=>P("div",{key:"__popover-arrow__",class:`${e}-popover-arrow-wrapper`},P("div",{class:`${e}-popover-arrow`,style:t}));var ga=se({name:"PopoverBody",inheritAttrs:!1,props:Do,setup(t,{slots:e,attrs:r}){const{namespaceRef:o,mergedClsPrefixRef:i}=bt(t),s=we("Popover","Popover",fa,Br,t,i),n=D(null),a=je("NPopover"),l=D(null),d=D(t.show),u=N(()=>{const{trigger:g,onClickoutside:_}=t,C=[],{positionManuallyRef:{value:S}}=a;return S||(g==="click"&&!_&&C.push([nr,b]),g==="hover"&&C.push([As,w])),_&&C.push([nr,b]),t.displayDirective==="show"&&C.push([io,t.show]),C}),h=N(()=>[{width:t.width==="trigger"?"":Ut(t.width),maxWidth:Ut(t.maxWidth),minWidth:Ut(t.minWidth)},p.value]),p=N(()=>{const{common:{cubicBezierEaseInOut:g,cubicBezierEaseIn:_,cubicBezierEaseOut:C},self:{space:S,spaceArrow:E,padding:L,fontSize:z,textColor:V,dividerColor:G,color:I,boxShadow:$,borderRadius:B,arrowHeight:A,arrowOffset:M,arrowOffsetVertical:O}}=s.value;return{"--box-shadow":$,"--bezier":g,"--bezier-ease-in":_,"--bezier-ease-out":C,"--font-size":z,"--text-color":V,"--color":I,"--divider-color":G,"--border-radius":B,"--arrow-height":A,"--arrow-offset":M,"--arrow-offset-vertical":O,"--padding":L,"--space":S,"--space-arrow":E}});a.setBodyInstance({syncPosition:f}),St(()=>{a.setBodyInstance(null)}),Oe(fe(t,"show"),g=>{t.animated||(g?d.value=!0:d.value=!1)});function f(){var g;(g=n.value)===null||g===void 0||g.syncPosition()}function y(g){t.trigger==="hover"&&a.handleMouseEnter(g)}function x(g){t.trigger==="hover"&&a.handleMouseLeave(g)}function w(g){t.trigger==="hover"&&!v().contains(g.target)&&a.handleMouseMoveOutside(g)}function b(g){(t.trigger==="click"&&!v().contains(g.target)||t.onClickoutside)&&a.handleClickOutside(g)}function v(){return a.getTriggerElement()}ct(ho,l),ct(uo,null),ct(co,null);function m(){let g;const{internalRenderBodyRef:{value:_}}=a,{value:C}=i;if(_)g=_([`${C}-popover`,t.overlap&&`${C}-popover--overlap`],l,h.value,y,x);else{const{value:S}=a.extraClassRef;g=P("div",rr({class:[`${C}-popover`,S.map(E=>`${C}-${E}`),{[`${C}-popover--overlap`]:t.overlap,[`${C}-popover--show-arrow`]:t.showArrow,[`${C}-popover--show-header`]:!!e.header,[`${C}-popover--raw`]:t.raw}],ref:l,style:h.value,onMouseenter:y,onMouseleave:x},r),[e.header?P(Vt,null,P("div",{class:`${C}-popover__header`},e.header()),P("div",{class:`${C}-popover__content`},e)):Ze(e,"default"),t.showArrow?pa({arrowStyle:t.arrowStyle,clsPrefix:C}):null])}return t.displayDirective==="show"||t.show?tr(g,u.value):null}return{namespace:o,isMounted:a.isMountedRef,zIndex:a.zIndexRef,followerRef:n,adjustedTo:ht(t),followerEnabled:d,renderContentNode:m}},render(){return P(Ao,{zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,placement:this.placement,containerClass:this.namespace,ref:"followerRef",overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===ht.tdkey},{default:()=>this.animated?P(Nt,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{this.followerEnabled=!1}},{default:this.renderContentNode}):this.renderContentNode()})}});const va=Object.keys(Do),ma={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function ba(t,e,r){ma[e].forEach(o=>{t.props?t.props=Object.assign({},t.props):t.props={};const i=t.props[o],s=r[o];i?t.props[o]=(...n)=>{i(...n),s(...n)}:t.props[o]=s})}const wa=lt("").type,zo={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowStyle:[String,Object],filp:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,internalExtraClass:{type:Array,default:()=>[]},onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],zIndex:Number,to:ht.propTo,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},ya=Object.assign(Object.assign(Object.assign({},we.props),zo),{internalRenderBody:Function});var Ur=se({name:"Popover",inheritAttrs:!1,props:ya,__popover__:!0,setup(t){const e=gr(),r=D(null),o=N(()=>t.show),i=D(t.defaultShow),s=mr(o,i),n=it(()=>t.disabled?!1:s.value),a=()=>{if(t.disabled)return!0;const{getDisabled:I}=t;return!!(I==null?void 0:I())},l=()=>a()?!1:s.value,d=Kr(t,["arrow","showArrow"]),u=N(()=>t.overlap?!1:d.value);let h=null;const p=D(null),f=D(null),y=it(()=>t.x!==void 0&&t.y!==void 0);function x(I){const{"onUpdate:show":$,onUpdateShow:B,onShow:A,onHide:M}=t;i.value=I,$&&_e($,I),B&&_e(B,I),I&&A&&_e(A,!0),I&&M&&_e(M,!1)}function w(){h&&h.syncPosition()}function b(){const{value:I}=p;I&&(window.clearTimeout(I),p.value=null)}function v(){const{value:I}=f;I&&(window.clearTimeout(I),f.value=null)}function m(){const I=a();if(t.trigger==="focus"&&!I){if(l())return;x(!0)}}function g(){const I=a();if(t.trigger==="focus"&&!I){if(!l())return;x(!1)}}function _(){const I=a();if(t.trigger==="hover"&&!I){if(v(),p.value!==null||l())return;const $=()=>{x(!0),p.value=null},{delay:B}=t;B===0?$():p.value=window.setTimeout($,B)}}function C(){const I=a();if(t.trigger==="hover"&&!I){if(b(),f.value!==null||!l())return;const $=()=>{x(!1),f.value=null},{duration:B}=t;B===0?$():f.value=window.setTimeout($,B)}}function S(){C()}function E(I){var $;!l()||(t.trigger==="click"&&(b(),v(),x(!1)),($=t.onClickoutside)===null||$===void 0||$.call(t,I))}function L(){if(t.trigger==="click"&&!a()){b(),v();const I=!l();x(I)}}function z(I){i.value=I}function V(){var I;return(I=r.value)===null||I===void 0?void 0:I.targetRef}function G(I){h=I}return ct("NPopover",{getTriggerElement:V,handleMouseEnter:_,handleMouseLeave:C,handleClickOutside:E,handleMouseMoveOutside:S,setBodyInstance:G,positionManuallyRef:y,isMountedRef:e,zIndexRef:fe(t,"zIndex"),extraClassRef:fe(t,"internalExtraClass"),internalRenderBodyRef:fe(t,"internalRenderBody")}),{binderInstRef:r,positionManually:y,mergedShowConsideringDisabledProp:n,uncontrolledShow:i,mergedShowArrow:u,getMergedShow:l,setShow:z,handleClick:L,handleMouseEnter:_,handleMouseLeave:C,handleFocus:m,handleBlur:g,syncPosition:w}},render(){var t;const{positionManually:e,$slots:r}=this;let o,i=!1;if(!e&&(r.activator?o=lo(r,"activator"):o=lo(r,"trigger"),o)){o=bn(o),o=o.type===wa?P("span",[o]):o;const s={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if((t=o.type)===null||t===void 0?void 0:t.__popover__)i=!0,o.props||(o.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),o.props.internalSyncTargetWithParent=!0,o.props.internalInheritedEventHandlers?o.props.internalInheritedEventHandlers=[s,...o.props.internalInheritedEventHandlers]:o.props.internalInheritedEventHandlers=[s];else{const{internalInheritedEventHandlers:n}=this,a=[s,...n],l={onBlur:d=>{a.forEach(u=>{u.onBlur(d)})},onFocus:d=>{a.forEach(u=>{u.onBlur(d)})},onClick:d=>{a.forEach(u=>{u.onClick(d)})},onMouseenter:d=>{a.forEach(u=>{u.onMouseenter(d)})},onMouseleave:d=>{a.forEach(u=>{u.onMouseleave(d)})}};ba(o,n?"nested":e?"manual":this.trigger,l)}}return P(Po,{ref:"binderInstRef",syncTarget:!i,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const s=this.getMergedShow();return[e?null:P(_o,null,{default:()=>o}),P(ga,ao(this.$props,va,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:s})),r)]}})}}),xa={closeSizeSmall:"14px",closeSizeMedium:"14px",closeSizeLarge:"14px",padding:"0 7px",closeMargin:"0 0 0 3px",closeMarginRtl:"0 3px 0 0"};const Pa=t=>{const{textColor2:e,primaryColorHover:r,primaryColorPressed:o,primaryColor:i,infoColor:s,successColor:n,warningColor:a,errorColor:l,baseColor:d,borderColor:u,opacityDisabled:h,tagColor:p,closeColor:f,closeColorHover:y,closeColorPressed:x,borderRadiusSmall:w,fontSizeTiny:b,fontSizeSmall:v,fontSizeMedium:m,heightTiny:g,heightSmall:_,heightMedium:C}=t;return Object.assign(Object.assign({},xa),{heightSmall:g,heightMedium:_,heightLarge:C,borderRadius:w,opacityDisabled:h,fontSizeSmall:b,fontSizeMedium:v,fontSizeLarge:m,textColorCheckable:e,textColorHoverCheckable:r,textColorPressedCheckable:o,textColorChecked:d,colorCheckable:"#0000",colorHoverCheckable:"#0000",colorPressedCheckable:"#0000",colorChecked:i,colorCheckedHover:r,colorCheckedPressed:o,border:`1px solid ${u}`,textColor:e,color:p,closeColor:f,closeColorHover:y,closeColorPressed:x,borderPrimary:`1px solid ${ne(i,{alpha:.3})}`,textColorPrimary:i,colorPrimary:ne(i,{alpha:.1}),closeColorPrimary:ne(i,{alpha:.75}),closeColorHoverPrimary:ne(i,{alpha:.6}),closeColorPressedPrimary:ne(i,{alpha:.9}),borderInfo:`1px solid ${ne(s,{alpha:.3})}`,textColorInfo:s,colorInfo:ne(s,{alpha:.1}),closeColorInfo:ne(s,{alpha:.75}),closeColorHoverInfo:ne(s,{alpha:.6}),closeColorPressedInfo:ne(s,{alpha:.9}),borderSuccess:`1px solid ${ne(n,{alpha:.3})}`,textColorSuccess:n,colorSuccess:ne(n,{alpha:.1}),closeColorSuccess:ne(n,{alpha:.75}),closeColorHoverSuccess:ne(n,{alpha:.6}),closeColorPressedSuccess:ne(n,{alpha:.9}),borderWarning:`1px solid ${ne(a,{alpha:.35})}`,textColorWarning:a,colorWarning:ne(a,{alpha:.12}),closeColorWarning:ne(a,{alpha:.75}),closeColorHoverWarning:ne(a,{alpha:.6}),closeColorPressedWarning:ne(a,{alpha:.9}),borderError:`1px solid ${ne(l,{alpha:.23})}`,textColorError:l,colorError:ne(l,{alpha:.08}),closeColorError:ne(l,{alpha:.65}),closeColorHoverError:ne(l,{alpha:.5}),closeColorPressedError:ne(l,{alpha:.8})})},_a={name:"Tag",common:nt,self:Pa};var Ta=_a,Ca={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},Aa=j("tag",`
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--padding);
 border-radius: var(--border-radius);
 color: var(--text-color);
 background-color: var(--color);
 transition: 
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 opacity .3s var(--bezier);
 line-height: 1;
 height: var(--height);
 font-size: var(--font-size);
`,[Q("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--border);
 transition: border-color .3s var(--bezier);
 `),Q("avatar",`
 display: flex;
 margin-right: 6px;
 `),Q("close",`
 font-size: var(--close-size);
 margin: var(--close-margin);
 transition: color .3s var(--bezier);
 cursor: pointer;
 `),ue("round",`
 padding: 0 calc(var(--height) / 2);
 border-radius: calc(var(--height) / 2);
 `,[Q("avatar",`
 margin-left: calc((var(--height) - 8px) / -2);
 `)]),ue("disabled",`
 cursor: not-allowed !important;
 opacity: var(--opacity-disabled);
 `),ue("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--text-color-checkable);
 background-color: var(--color-checkable);
 `,[st("disabled",[J("&:hover",{backgroundColor:"var(--color-hover-checkable)"},[st("checked",{color:"var(--text-color-hover-checkable)"})]),J("&:active",{backgroundColor:"var(--color-pressed-checkable)"},[st("checked",{color:"var(--text-color-pressed-checkable)"})])]),ue("checked",{color:"var(--text-color-checked)",backgroundColor:"var(--color-checked)"},[st("disabled",[J("&:hover",{backgroundColor:"var(--color-checked-hover)"}),J("&:active",{backgroundColor:"var(--color-checked-pressed)"})])])])]);const Sa=Object.assign(Object.assign(Object.assign({},we.props),Ca),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalStopClickPropagation:Boolean,onCheckedChange:{type:Function,validator:()=>!0,default:void 0}}),Ma=Symbol("tag");var Vr=se({name:"Tag",props:Sa,setup(t){const e=D(null),{mergedBorderedRef:r,mergedClsPrefixRef:o,NConfigProvider:i}=bt(t),s=we("Tag","Tag",Aa,Ta,t,o);ct(Ma,{roundRef:fe(t,"round")});function n(u){if(!t.disabled&&t.checkable){const{checked:h,onCheckedChange:p,onUpdateChecked:f,"onUpdate:checked":y}=t;f&&f(!h),y&&y(!h),p&&p(!h)}}function a(u){if(t.internalStopClickPropagation&&u.stopPropagation(),!t.disabled){const{onClose:h}=t;h&&_e(h,u)}}const l={setTextContent(u){const{value:h}=e;h&&(h.textContent=u)}},d=Xi("Tag",i==null?void 0:i.mergedRtlRef,o);return Object.assign(Object.assign({},l),{rtlEnabled:d,mergedClsPrefix:o,contentRef:e,mergedBordered:r,handleClick:n,handleCloseClick:a,cssVars:N(()=>{const{type:u,size:h,color:{color:p,textColor:f}={}}=t,{common:{cubicBezierEaseInOut:y},self:{padding:x,closeMargin:w,closeMarginRtl:b,borderRadius:v,opacityDisabled:m,textColorCheckable:g,textColorHoverCheckable:_,textColorPressedCheckable:C,textColorChecked:S,colorCheckable:E,colorHoverCheckable:L,colorPressedCheckable:z,colorChecked:V,colorCheckedHover:G,colorCheckedPressed:I,[ye("closeSize",h)]:$,[ye("fontSize",h)]:B,[ye("height",h)]:A,[ye("color",u)]:M,[ye("textColor",u)]:O,[ye("border",u)]:Y,[ye("closeColor",u)]:ee,[ye("closeColorHover",u)]:te,[ye("closeColorPressed",u)]:de}}=s.value;return{"--avatar-size-override":`calc(${A} - 8px)`,"--bezier":y,"--border-radius":v,"--border":Y,"--close-color":ee,"--close-color-hover":te,"--close-color-pressed":de,"--close-margin":w,"--close-margin-rtl":b,"--close-size":$,"--color":p||M,"--color-checkable":E,"--color-checked":V,"--color-checked-hover":G,"--color-checked-pressed":I,"--color-hover-checkable":L,"--color-pressed-checkable":z,"--font-size":B,"--height":A,"--opacity-disabled":m,"--padding":x,"--text-color":f||O,"--text-color-checkable":g,"--text-color-checked":S,"--text-color-hover-checkable":_,"--text-color-pressed-checkable":C}})})},render(){const{mergedClsPrefix:t,rtlEnabled:e,color:{borderColor:r}={},$slots:o}=this;return P("div",{class:[`${t}-tag`,{[`${t}-tag--rtl`]:e,[`${t}-tag--disabled`]:this.disabled,[`${t}-tag--checkable`]:this.checkable,[`${t}-tag--checked`]:this.checkable&&this.checked,[`${t}-tag--round`]:this.round}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},o.avatar&&P("div",{class:`${t}-tag__avatar`},{default:o.avatar}),P("span",{class:`${t}-tag__content`,ref:"contentRef"},this.$slots),!this.checkable&&this.closable?P(Kn,{clsPrefix:t,class:`${t}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick}):null,!this.checkable&&this.mergedBordered?P("div",{class:`${t}-tag__border`,style:{borderColor:r}}):null)}}),Ra={paddingSingle:"0 26px 0 14px",clearSize:"16px",arrowSize:"16px"};const Ea=t=>{const{borderRadius:e,textColor2:r,textColorDisabled:o,inputColor:i,inputColorDisabled:s,primaryColor:n,primaryColorHover:a,warningColor:l,warningColorHover:d,errorColor:u,errorColorHover:h,borderColor:p,iconColor:f,iconColorDisabled:y,clearColor:x,clearColorHover:w,clearColorPressed:b,placeholderColor:v,placeholderColorDisabled:m,fontSizeTiny:g,fontSizeSmall:_,fontSizeMedium:C,fontSizeLarge:S,heightTiny:E,heightSmall:L,heightMedium:z,heightLarge:V}=t;return Object.assign(Object.assign({},Ra),{fontSizeTiny:g,fontSizeSmall:_,fontSizeMedium:C,fontSizeLarge:S,heightTiny:E,heightSmall:L,heightMedium:z,heightLarge:V,borderRadius:e,textColor:r,textColorDisabled:o,placeholderColor:v,placeholderColorDisabled:m,color:i,colorDisabled:s,colorActive:i,border:`1px solid ${p}`,borderHover:`1px solid ${a}`,borderActive:`1px solid ${n}`,borderFocus:`1px solid ${a}`,boxShadowHover:null,boxShadowActive:`0 0 0 2px ${ne(n,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${ne(n,{alpha:.2})}`,caretColor:n,arrowColor:f,arrowColorDisabled:y,loadingColor:n,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${d}`,borderActiveWarning:`1px solid ${l}`,borderFocusWarning:`1px solid ${d}`,boxShadowHoverWarning:null,boxShadowActiveWarning:`0 0 0 2px ${ne(l,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${ne(l,{alpha:.2})}`,colorActiveWarning:i,caretColorWarning:l,borderError:`1px solid ${u}`,borderHoverError:`1px solid ${h}`,borderActiveError:`1px solid ${u}`,borderFocusError:`1px solid ${h}`,boxShadowHoverError:null,boxShadowActiveError:`0 0 0 2px ${ne(u,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${ne(u,{alpha:.2})}`,colorActiveError:i,caretColorError:u,clearColor:x,clearColorHover:w,clearColorPressed:b})},La=qt({name:"InternalSelection",common:nt,peers:{Popover:Br},self:Ea});var Bo=La,ka=J([j("base-selection",`
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--border-radius);
 min-height: var(--height);
 line-height: 1.5;
 font-size: var(--font-size);
 `,[j("base-loading",`
 color: var(--loading-color);
 `),j("base-selection-tags",{minHeight:"var(--height)"}),Q("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `),Q("state-border",`
 z-index: 1;
 border-color: #0000;
 `),j("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[Q("arrow",`
 font-size: var(--arrow-size);
 color: var(--arrow-color);
 transition: color .3s var(--bezier);
 `)]),j("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 overflow: hidden;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--padding-single);
 transition: color .3s var(--bezier);
 `),j("base-selection-placeholder",`
 color: var(--placeholder-color);
 `),j("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: 3px 26px 0 14px;
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--color);
 border-radius: inherit;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 `),j("base-selection-label",`
 height: var(--height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 border-radius: inherit;
 background-color: var(--color);
 align-items: center;
 `,[j("base-selection-input",`
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--padding-single);
 background-color: #0000;
 color: var(--text-color);
 transition: color .3s var(--bezier);
 caret-color: var(--caret-color);
 `,[Q("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),Q("render-label",`
 color: var(--text-color);
 `)]),st("disabled",[J("&:hover",[Q("state-border",`
 box-shadow: var(--box-shadow-hover);
 border: var(--border-hover);
 `)]),ue("focus",[Q("state-border",`
 box-shadow: var(--box-shadow-focus);
 border: var(--border-focus);
 `)]),ue("active",[Q("state-border",`
 box-shadow: var(--box-shadow-active);
 border: var(--border-active);
 `),j("base-selection-label",{backgroundColor:"var(--color-active)"}),j("base-selection-tags",{backgroundColor:"var(--color-active)"})])]),ue("disabled",{cursor:"not-allowed"},[Q("arrow",`
 color: var(--arrow-color-disabled);
 `),j("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `,[j("base-selection-input",`
 cursor: not-allowed;
 color: var(--text-color-disabled);
 `),Q("render-label",`
 color: var(--text-color-disabled);
 `)]),j("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `),j("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--placeholder-color-disabled);
 `)]),j("base-selection-input-tag",`
 height: calc(var(--height) - 6px);
 line-height: calc(var(--height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[Q("input",`
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--text-color);
 caret-color: var(--caret-color);
 `),Q("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 opacity: 0;
 `)])]),j("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 `),j("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[J("&:last-child",{paddingRight:0}),j("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[Q("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 `)])]),["warning","error"].map(t=>Yi(t,j("base-selection",[Q("state-border",{border:`var(--border-${t})`}),st("disabled",[J("&:hover",[Q("state-border",`
 box-shadow: var(--box-shadow-hover-${t});
 border: var(--border-hover-${t});
 `)]),ue("active",[Q("state-border",`
 box-shadow: var(--box-shadow-active-${t});
 border: var(--border-active-${t});
 `),j("base-selection-label",{backgroundColor:`var(--color-active-${t})`}),j("base-selection-tags",{backgroundColor:`var(--box-shadow-active-${t})`})]),ue("focus",[Q("state-border",`
 box-shadow: var(--box-shadow-focus-${t});
 border: var(--border-focus-${t});
 `)])])])))]),Fa=se({name:"InternalSelection",props:Object.assign(Object.assign({},we.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:null},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeyup:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,renderLabel:Function}),setup(t){const e=D(null),r=D(null),o=D(null),i=D(null),s=D(null),n=D(null),a=D(null),l=D(null),d=D(null),u=D(null),h=D(!1),p=D(!1),f=D(!1),y=we("InternalSelection","InternalSelection",ka,Bo,t,fe(t,"clsPrefix")),x=N(()=>t.clearable&&!t.disabled&&(f.value||t.active)),w=N(()=>t.selectedOption?t.renderTag?t.renderTag({option:t.selectedOption,handleClose:()=>{}}):t.renderLabel?t.renderLabel(t.selectedOption,!0):Rt(t.selectedOption.label,t.selectedOption,!0):t.placeholder),b=N(()=>{const R=t.selectedOption;if(!!R)return R.label}),v=N(()=>t.multiple?!!(Array.isArray(t.selectedOptions)&&t.selectedOptions.length):t.selectedOption!==null);function m(){var R;const{value:X}=e;if(X){const{value:Me}=r;Me&&(Me.style.width=`${X.offsetWidth}px`,t.maxTagCount!=="responsive"&&((R=d.value)===null||R===void 0||R.sync()))}}function g(){const{value:R}=u;R&&(R.style.display="none")}function _(){const{value:R}=u;R&&(R.style.display="inline-block")}Oe(fe(t,"active"),R=>{R||g()}),Oe(fe(t,"pattern"),()=>{t.multiple&&yt(m)});function C(R){const{onFocus:X}=t;X&&X(R)}function S(R){const{onBlur:X}=t;X&&X(R)}function E(R){const{onDeleteOption:X}=t;X&&X(R)}function L(R){const{onClear:X}=t;X&&X(R)}function z(R){const{onPatternInput:X}=t;X&&X(R)}function V(R){var X;(!R.relatedTarget||!((X=o.value)===null||X===void 0?void 0:X.contains(R.relatedTarget)))&&C(R)}function G(R){var X;((X=o.value)===null||X===void 0?void 0:X.contains(R.relatedTarget))||S(R)}function I(R){L(R)}function $(){f.value=!0}function B(){f.value=!1}function A(R){!t.active||!t.filterable||R.target!==r.value&&R.preventDefault()}function M(R){E(R)}function O(R){if(R.code==="Backspace"&&!t.pattern.length){const{selectedOptions:X}=t;(X==null?void 0:X.length)&&M(X[X.length-1])}}const Y=D(!1);let ee=null;function te(R){const{value:X}=e;if(X){const Me=R.target.value;X.textContent=Me,m()}Y.value?ee=R:z(R)}function de(){Y.value=!0}function pe(){Y.value=!1,z(ee),ee=null}function ae(){p.value=!0}function oe(R){p.value=!1}function he(){if(t.filterable){p.value=!1;const{value:R}=n;R&&R.focus()}else if(t.multiple){const{value:R}=i;R==null||R.focus()}else{const{value:R}=s;R==null||R.focus()}}function Te(){const{value:R}=r;R&&(_(),R.focus())}function Be(){const{value:R}=r;R&&R.blur()}function Pe(R){const{value:X}=a;X&&X.setTextContent(`+${R}`)}function Ue(){const{value:R}=l;return R}function Qe(){return r.value}let Ye=null;function Se(){Ye!==null&&window.clearTimeout(Ye)}function Ge(){t.disabled||t.active||(Se(),Ye=window.setTimeout(()=>{h.value=!0},100))}function Ce(){Se()}function ke(R){R||(Se(),h.value=!1)}return Je(()=>{_r(()=>{const R=n.value;!R||(R.tabIndex=t.disabled||p.value?-1:0)})}),{mergedTheme:y,mergedClearable:x,patternInputFocused:p,filterablePlaceholder:w,label:b,selected:v,showTagsPanel:h,isCompositing:Y,counterRef:a,counterWrapperRef:l,patternInputMirrorRef:e,patternInputRef:r,selfRef:o,multipleElRef:i,singleElRef:s,patternInputWrapperRef:n,overflowRef:d,inputTagElRef:u,handleMouseDown:A,handleFocusin:V,handleClear:I,handleMouseEnter:$,handleMouseLeave:B,handleDeleteOption:M,handlePatternKeyDown:O,handlePatternInputInput:te,handlePatternInputBlur:oe,handlePatternInputFocus:ae,handleMouseEnterCounter:Ge,handleMouseLeaveCounter:Ce,handleFocusout:G,handleCompositionEnd:pe,handleCompositionStart:de,onPopoverUpdateShow:ke,focus:he,focusInput:Te,blurInput:Be,updateCounter:Pe,getCounter:Ue,getTail:Qe,renderLabel:t.renderLabel,cssVars:N(()=>{const{size:R}=t,{common:{cubicBezierEaseInOut:X},self:{borderRadius:Me,color:tt,placeholderColor:rt,textColor:Pt,paddingSingle:F,caretColor:U,colorDisabled:K,textColorDisabled:ie,placeholderColorDisabled:T,colorActive:k,boxShadowFocus:H,boxShadowActive:W,boxShadowHover:Z,border:le,borderFocus:ot,borderHover:Xt,borderActive:ci,arrowColor:di,arrowColorDisabled:ui,loadingColor:hi,colorActiveWarning:fi,boxShadowFocusWarning:pi,boxShadowActiveWarning:gi,boxShadowHoverWarning:vi,borderWarning:mi,borderFocusWarning:bi,borderHoverWarning:wi,borderActiveWarning:yi,colorActiveError:xi,boxShadowFocusError:Pi,boxShadowActiveError:_i,boxShadowHoverError:Ti,borderError:Ci,borderFocusError:Ai,borderHoverError:Si,borderActiveError:Mi,clearColor:Ri,clearColorHover:Ei,clearColorPressed:Li,clearSize:ki,arrowSize:Fi,[ye("height",R)]:Ii,[ye("fontSize",R)]:Oi}}=y.value;return{"--bezier":X,"--border":le,"--border-active":ci,"--border-focus":ot,"--border-hover":Xt,"--border-radius":Me,"--box-shadow-active":W,"--box-shadow-focus":H,"--box-shadow-hover":Z,"--caret-color":U,"--color":tt,"--color-active":k,"--color-disabled":K,"--font-size":Oi,"--height":Ii,"--padding-single":F,"--placeholder-color":rt,"--placeholder-color-disabled":T,"--text-color":Pt,"--text-color-disabled":ie,"--arrow-color":di,"--arrow-color-disabled":ui,"--loading-color":hi,"--color-active-warning":fi,"--box-shadow-focus-warning":pi,"--box-shadow-active-warning":gi,"--box-shadow-hover-warning":vi,"--border-warning":mi,"--border-focus-warning":bi,"--border-hover-warning":wi,"--border-active-warning":yi,"--color-active-error":xi,"--box-shadow-focus-error":Pi,"--box-shadow-active-error":_i,"--box-shadow-hover-error":Ti,"--border-error":Ci,"--border-focus-error":Ai,"--border-hover-error":Si,"--border-active-error":Mi,"--clear-size":ki,"--clear-color":Ri,"--clear-color-hover":Ei,"--clear-color-pressed":Li,"--arrow-size":Fi}})}},render(){const{multiple:t,size:e,disabled:r,filterable:o,maxTagCount:i,bordered:s,clsPrefix:n,renderTag:a,renderLabel:l}=this,d=i==="responsive",u=typeof i=="number",h=d||u,p=P(Gi,{clsPrefix:n,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear});let f;if(t){const y=S=>P("div",{class:`${n}-base-selection-tag-wrapper`,key:S.value},a?a({option:S,handleClose:()=>this.handleDeleteOption(S)}):P(Vr,{size:e,closable:!S.disabled,disabled:r,internalStopClickPropagation:!0,onClose:()=>this.handleDeleteOption(S)},{default:()=>l?l(S,!0):Rt(S.label,S,!0)})),x=(u?this.selectedOptions.slice(0,i):this.selectedOptions).map(y),w=o?P("div",{class:`${n}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},P("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:r,value:this.pattern,autofocus:this.autofocus,class:`${n}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),P("span",{ref:"patternInputMirrorRef",class:`${n}-base-selection-input-tag__mirror`},this.pattern?this.pattern:"")):null,b=d?()=>P("div",{class:`${n}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},P(Vr,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:r})):void 0;let v;if(u){const S=this.selectedOptions.length-i;S>0&&(v=P("div",{class:`${n}-base-selection-tag-wrapper`,key:"__counter__"},P(Vr,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:r},{default:()=>`+${S}`})))}const m=d?o?P(So,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>x,counter:b,tail:()=>w}):P(So,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>x,counter:b}):u?x.concat(v):x,g=h?()=>P("div",{class:`${n}-base-selection-popover`},d?x:this.selectedOptions.map(y)):void 0,_=h?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,C=!this.selected&&!this.pattern&&!this.isCompositing?P("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`},this.placeholder):null;if(o){const S=P("div",{ref:"patternInputWrapperRef",class:`${n}-base-selection-tags`},m,d?null:w,p);f=P(Vt,null,h?P(Ur,Object.assign({},_),{trigger:()=>S,default:g}):S,C)}else{const S=P("div",{ref:"multipleElRef",class:`${n}-base-selection-tags`,tabindex:r?void 0:0},m,p);f=P(Vt,null,h?P(Ur,Object.assign({},_),{trigger:()=>S,default:g}):S,C)}}else if(o){const y=!this.pattern&&(this.active||!this.selected)&&!this.isCompositing;f=P("div",{ref:"patternInputWrapperRef",class:`${n}-base-selection-label`},P("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${n}-base-selection-input`,value:this.patternInputFocused&&this.active?this.pattern:"",placeholder:"",readonly:r,disabled:r,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),y||this.patternInputFocused&&this.active?null:P("div",{class:`${n}-base-selection-label__render-label ${n}-base-selection-overlay`,key:"input"},a?a({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Rt(this.label,this.selectedOption,!0)),y?P("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`,key:"placeholder"},this.filterablePlaceholder):null,p)}else f=P("div",{ref:"singleElRef",class:`${n}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?P("div",{class:`${n}-base-selection-input`,title:Hn(this.label),key:"input"},P("div",{class:`${n}-base-selection-input__content`},a?a({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Rt(this.label,this.selectedOption,!0))):P("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`,key:"placeholder"},this.placeholder),p);return P("div",{ref:"selfRef",class:[`${n}-base-selection`,{[`${n}-base-selection--active`]:this.active,[`${n}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${n}-base-selection--disabled`]:this.disabled,[`${n}-base-selection--multiple`]:this.multiple,[`${n}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeyup:this.onKeyup,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},f,s?P("div",{class:`${n}-base-selection__border`}):null,s?P("div",{class:`${n}-base-selection__state-border`}):null)}});function Ia(t){return sr(t)?t.name||t.key||"key-required":t.value}function sr(t){return t.type==="group"}function $o(t){return t.type==="ignored"}const Oa={getKey:Ia,getIsGroup:sr,getIgnored:$o};function Uo(t,e){try{return!!(1+e.toString().toLowerCase().indexOf(t.trim().toLowerCase()))}catch{return!1}}function Da(t,e,r){if(!e)return t;function o(i){if(!Array.isArray(i))return[];const s=[];for(const n of i)if(sr(n)){const a=o(n.children);a.length&&s.push(Object.assign({},n,{children:a}))}else{if($o(n))continue;e(r,n)&&s.push(n)}return s}return o(t)}function za(t){const e=new Map;return t.forEach(r=>{sr(r)?r.children.forEach(o=>{e.set(o.value,o)}):e.set(r.value,r)}),e}function Ba(t,e){return e?typeof e.label=="string"?Uo(t,e.label):e.value!==void 0?Uo(t,String(e.value)):!1:!1}function $a(t){const{boxShadow2:e}=t;return{menuBoxShadow:e}}const Ua=qt({name:"Select",common:nt,peers:{InternalSelection:Bo,InternalSelectMenu:Oo},self:$a});var Va=Ua,Na=J([j("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),j("select-menu",`
 margin: 4px 0;
 box-shadow: var(--menu-box-shadow);
 `,[Io()])]);const Wa=Object.assign(Object.assign({},we.props),{to:ht.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:{type:Function,default:Ba},placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:{type:Function,default:t=>({label:t,value:t})},fallbackOption:{type:[Function,Boolean],default:()=>t=>({label:String(t),value:t})},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0},items:{type:Array,validator:()=>!0,default:void 0},displayDirective:{type:String,default:"show"}});var Ha=se({name:"Select",props:Wa,setup(t){const{mergedClsPrefixRef:e,mergedBorderedRef:r,namespaceRef:o}=bt(t),i=we("Select","Select",Na,Va,t,e),s=D(t.defaultValue),n=fe(t,"value"),a=mr(n,s),l=D(!1),d=D(""),u=N(()=>xs(L.value,Oa)),h=N(()=>za(E.value)),p=D(!1),f=mr(fe(t,"show"),p),y=D(null),x=D(null),w=D(null),{localeRef:b}=Zt("Select"),v=N(()=>{var T;return(T=t.placeholder)!==null&&T!==void 0?T:b.value.placeholder}),m=Kr(t,["items","options"]),g=D([]),_=D([]),C=D(new Map),S=N(()=>{const{fallbackOption:T}=t;return T?k=>Object.assign(T(k),{value:k}):!1}),E=N(()=>_.value.concat(g.value).concat(m.value)),L=N(()=>{if(t.remote)return m.value;{const{value:T}=E,{value:k}=d;if(!k.length||!t.filterable)return T;{const{filter:H}=t;return Da(T,H,k)}}});function z(T){const k=t.remote,{value:H}=C,{value:W}=h,{value:Z}=S,le=[];return T.forEach(ot=>{if(W.has(ot))le.push(W.get(ot));else if(k&&H.has(ot))le.push(H.get(ot));else if(Z){const Xt=Z(ot);Xt&&le.push(Xt)}}),le}const V=N(()=>{if(t.multiple){const{value:T}=a;return Array.isArray(T)?z(T):[]}return null}),G=N(()=>{const{value:T}=a;return!t.multiple&&!Array.isArray(T)?T===null?null:z([T])[0]||null:null}),I=Ki(t),{mergedSizeRef:$,mergedDisabledRef:B}=I;function A(T,k){const{onChange:H,"onUpdate:value":W,onUpdateValue:Z}=t,{nTriggerFormChange:le,nTriggerFormInput:ot}=I;H&&_e(H,T,k),Z&&_e(Z,T,k),W&&_e(W,T,k),s.value=T,le(),ot()}function M(T){const{onBlur:k}=t,{nTriggerFormBlur:H}=I;k&&_e(k,T),H()}function O(){const{onClear:T}=t;T&&_e(T)}function Y(T){const{onFocus:k}=t,{nTriggerFormFocus:H}=I;k&&_e(k,T),H()}function ee(T){const{onSearch:k}=t;k&&_e(k,T)}function te(T){const{onScroll:k}=t;k&&_e(k,T)}function de(){var T;const{remote:k,multiple:H}=t;if(k){const{value:W}=C;if(H)(T=V.value)===null||T===void 0||T.forEach(Z=>{W.set(Z.value,Z)});else{const Z=G.value;Z&&W.set(Z.value,Z)}}}function pe(T){const{onUpdateShow:k,"onUpdate:show":H}=t;k&&_e(k,T),H&&_e(H,T),p.value=T}function ae(){B.value||(d.value="",pe(!0),p.value=!0,t.filterable&&K())}function oe(){pe(!1)}function he(){d.value=""}function Te(){B.value||(f.value?t.filterable||oe():ae())}function Be(T){var k,H;((H=(k=w.value)===null||k===void 0?void 0:k.selfRef)===null||H===void 0?void 0:H.contains(T.relatedTarget))||(l.value=!1,M(T),oe())}function Pe(T){Y(T),l.value=!0}function Ue(T){l.value=!0}function Qe(T){var k;((k=y.value)===null||k===void 0?void 0:k.$el.contains(T.relatedTarget))||(l.value=!1,M(T),oe())}function Ye(){var T;(T=y.value)===null||T===void 0||T.focus(),oe()}function Se(T){var k;f.value&&(((k=y.value)===null||k===void 0?void 0:k.$el.contains(T.target))||oe())}function Ge(T){if(!Array.isArray(T))return[];if(S.value)return Array.from(T);{const{remote:k}=t,{value:H}=h;if(k){const{value:W}=C;return T.filter(Z=>H.has(Z)||W.has(Z))}else return T.filter(W=>H.has(W))}}function Ce(T){ke(T.rawNode)}function ke(T){if(B.value)return;const{tag:k,remote:H}=t;if(k&&!H){const{value:W}=_,Z=W[0]||null;Z&&(g.value.push(Z),_.value=[])}if(H&&C.value.set(T.value,T),t.multiple){const W=Ge(a.value),Z=W.findIndex(le=>le===T.value);if(~Z){if(W.splice(Z,1),k&&!H){const le=R(T.value);~le&&(g.value.splice(le,1),d.value="")}}else W.push(T.value),d.value="";A(W,z(W))}else{if(k&&!H){const W=R(T.value);~W?g.value=[g.value[W]]:g.value=[]}U(),oe(),A(T.value,T)}}function R(T){return g.value.findIndex(H=>H.value===T)}function X(T){f.value||ae();const{value:k}=T.target;d.value=k;const{tag:H,remote:W}=t;if(ee(k),H&&!W){if(!k){_.value=[];return}const Z=t.onCreate(k);m.value.some(le=>le.value===Z.value)||g.value.some(le=>le.value===Z.value)?_.value=[]:_.value=[Z]}}function Me(T){T.stopPropagation();const{multiple:k}=t;!k&&t.filterable&&oe(),O(),k?A([],[]):A(null,null)}function tt(T){Tr(T,"action")||T.preventDefault()}function rt(T){te(T)}function Pt(T){var k,H,W,Z;switch(T.code){case"Space":if(t.filterable)break;case"Enter":case"NumpadEnter":if(f.value){const le=(k=w.value)===null||k===void 0?void 0:k.getPendingTmNode();le?Ce(le):t.filterable||(oe(),U())}else ae();T.preventDefault();break;case"ArrowUp":if(t.loading)return;f.value&&((H=w.value)===null||H===void 0||H.prev());break;case"ArrowDown":if(t.loading)return;f.value?(W=w.value)===null||W===void 0||W.next():ae();break;case"Escape":oe(),(Z=y.value)===null||Z===void 0||Z.focus();break}}function F(T){switch(T.code){case"Space":t.filterable||T.preventDefault();break;case"ArrowUp":case"ArrowDown":T.preventDefault();break}}function U(){var T;(T=y.value)===null||T===void 0||T.focus()}function K(){var T;(T=y.value)===null||T===void 0||T.focusInput()}function ie(){var T;(T=x.value)===null||T===void 0||T.syncPosition()}return de(),Oe(fe(t,"options"),de),Oe(L,()=>{!f.value||yt(ie)}),Oe(a,()=>{!f.value||yt(ie)}),{mergedClsPrefix:e,mergedBordered:r,namespace:o,treeMate:u,isMounted:gr(),triggerRef:y,menuRef:w,pattern:d,uncontrolledShow:p,mergedShow:f,adjustedTo:ht(t),uncontrolledValue:s,mergedValue:a,followerRef:x,localizedPlaceholder:v,selectedOption:G,selectedOptions:V,mergedSize:$,mergedDisabled:B,focused:l,handleMenuFocus:Ue,handleMenuBlur:Qe,handleMenuTabOut:Ye,handleTriggerClick:Te,handleToggle:Ce,handleDeleteOption:ke,handlePatternInput:X,handleClear:Me,handleTriggerBlur:Be,handleTriggerFocus:Pe,handleKeyDown:F,handleKeyUp:Pt,syncPosition:ie,handleMenuAfterLeave:he,handleMenuClickOutside:Se,handleMenuScroll:rt,handleMenuKeyup:Pt,handleMenuKeydown:F,handleMenuMousedown:tt,mergedTheme:i,cssVars:N(()=>{const{self:{menuBoxShadow:T}}=i.value;return{"--menu-box-shadow":T}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;return P("div",{class:`${e}-select`},P(Po,null,{default:()=>[P(_o,null,{default:()=>P(Fa,{ref:"triggerRef",inputProps:this.inputProps,clsPrefix:e,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp})}),P(Ao,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===ht.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>P(Nt,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var r,o;return(this.mergedShow||this.displayDirective==="show")&&tr(P(ca,Object.assign({},this.menuProps,{ref:"menuRef",virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${e}-select-menu`,(r=this.menuProps)===null||r===void 0?void 0:r.class],clsPrefix:e,focusable:!0,autoPending:!0,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(o=this.menuProps)===null||o===void 0?void 0:o.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeyup:this.handleMenuKeyup,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow}),t),this.displayDirective==="show"?[[io,this.mergedShow],[nr,this.handleMenuClickOutside]]:[[nr,this.handleMenuClickOutside]])}})})]}))}});const ja=t=>{const{textColorBase:e,opacity1:r,opacity2:o,opacity3:i,opacity4:s,opacity5:n}=t;return{color:e,opacity1Depth:r,opacity2Depth:o,opacity3Depth:i,opacity4Depth:s,opacity5Depth:n}},Xa={name:"Icon",common:nt,self:ja};var Ya=Xa,Ga=j("icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[ue("color-transition",{transition:"color .3s var(--bezier)"}),ue("depth",{color:"var(--color)"},[J("svg",{opacity:"var(--opacity)",transition:"opacity .3s var(--bezier)"})]),J("svg",{height:"1em",width:"1em"})]),Vo=se({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:Object.assign(Object.assign({},we.props),{depth:[String,Number],size:[Number,String],color:String}),setup(t){const{mergedClsPrefixRef:e}=bt(t),r=we("Icon","Icon",Ga,Ya,t,e);return{mergedClsPrefix:e,mergedStyle:N(()=>{const{size:o,color:i}=t;return{fontSize:Ut(o),color:i}}),cssVars:N(()=>{const{depth:o}=t,{common:{cubicBezierEaseInOut:i},self:s}=r.value;if(o!==void 0){const{color:n,[`opacity${o}Depth`]:a}=s;return{"--bezier":i,"--color":n,"--opacity":a}}return{"--bezier":i}})}},render(){var t;const{$parent:e,depth:r,mergedClsPrefix:o}=this;return((t=e==null?void 0:e.$options)===null||t===void 0?void 0:t._n_icon__)&&fr("icon","don't wrap `n-icon` inside `n-icon`"),P("i",rr(this.$attrs,{role:"img",class:[`${o}-icon`,{[`${o}-icon--depth`]:r,[`${o}-icon--color-transition`]:r!==void 0}],style:Object.assign(this.cssVars,this.mergedStyle)}),this.$slots)}}),Ka={iconSize:"22px"};const Za=t=>{const{fontSize:e,warningColor:r}=t;return Object.assign(Object.assign({},Ka),{fontSize:e,iconColor:r})},qa=qt({name:"Popconfirm",common:nt,peers:{Button:Zi,Popover:Br},self:Za});var Qa=qa;const No=Symbol("popconfirm"),Wo={positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0}},Ho=Wn(Wo);var Ja=se({name:"NPopconfirmPanel",props:Wo,setup(t){const{localeRef:e}=Zt("Popconfirm"),{mergedClsPrefixRef:r,mergedThemeRef:o}=je(No);return Object.assign(Object.assign({},Zt("Popconfirm")),{mergedClsPrefix:r,cssVars:N(()=>{const{common:{cubicBezierEaseInOut:i},self:{fontSize:s,iconSize:n,iconColor:a}}=o.value;return{"--bezier":i,"--font-size":s,"--icon-size":n,"--icon-color":a}}),localizedPositiveText:N(()=>t.positiveText||e.value.positiveText),localizedNegativeText:N(()=>t.negativeText||e.value.negativeText),handlePositiveClick(i){t.onPositiveClick(i)},handleNegativeClick(i){t.onNegativeClick(i)}})},render(){const{mergedClsPrefix:t,$slots:e}=this,r=e.action?e.action():this.negativeText===null&&this.positiveText===null?null:[this.negativeText!==null&&P(br,{size:"small",onClick:this.handleNegativeClick},{default:()=>this.localizedNegativeText}),this.positiveText!==null&&P(br,{size:"small",type:"primary",onClick:this.handlePositiveClick},{default:()=>this.localizedPositiveText})];return P("div",{style:this.cssVars},P("div",{class:`${t}-popconfirm__body`},this.showIcon?P("div",{class:`${t}-popconfirm__icon`},Ze(e,"icon",void 0,()=>[P(Yt,{clsPrefix:t},{default:()=>P(pn,null)})])):null,Ze(e,"default")),r?P("div",{class:`${t}-popconfirm__action`},r):null)}}),el=j("popconfirm",[Q("body",`
 font-size: var(--font-size);
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 position: relative;
 `,[Q("icon",`
 display: flex;
 font-size: var(--icon-size);
 color: var(--icon-color);
 transition: color .3s var(--bezier);
 margin: 0 8px 0 0;
 `)]),Q("action",`
 margin-top: 8px;
 display: flex;
 justify-content: flex-end;
 `,[j("button",[J("&:not(:last-child)",{marginRight:"8px"})])])]);const tl=Object.assign(Object.assign(Object.assign({},we.props),zo),{positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},trigger:{type:String,default:"click"},onPositiveClick:Function,onNegativeClick:Function});var rl=se({name:"Popconfirm",props:tl,__popover__:!0,setup(t){const{mergedClsPrefixRef:e}=bt(),r=we("Popconfirm","Popconfirm",el,Qa,t,e),o=D(null);function i(n){const{onPositiveClick:a,"onUpdate:show":l}=t;Promise.resolve(a?a(n):!0).then(d=>{var u;d!==!1&&((u=o.value)===null||u===void 0||u.setShow(!1),l&&_e(l,!1))})}function s(n){const{onNegativeClick:a,"onUpdate:show":l}=t;Promise.resolve(a?a(n):!0).then(d=>{var u;d!==!1&&((u=o.value)===null||u===void 0||u.setShow(!1),l&&_e(l,!1))})}return ct(No,{mergedThemeRef:r,mergedClsPrefixRef:e}),{mergedTheme:r,popoverInstRef:o,handlePositiveClick:i,handleNegativeClick:s}},render(){const{$slots:t,$props:e,mergedTheme:r}=this;return P(Ur,Nn(e,Ho,{theme:r.peers.Popover,themeOverrides:r.peerOverrides.Popover,internalExtraClass:["popconfirm"],ref:"popoverInstRef"}),{trigger:t.activator||t.trigger,default:()=>{const o=ao(e,Ho);return P(Ja,Object.assign(Object.assign({},o),{onPositiveClick:this.handlePositiveClick,onNegativeClick:this.handleNegativeClick}),t)}})}}),q;(function(t){t.trunk="trunk",t.head="head",t.leftUpperArm="leftUpperArm",t.leftLowerArm="leftLowerArm",t.leftHand="leftHand",t.leftThigh="leftThigh",t.leftCalf="leftCalf",t.leftFoot="leftFoot",t.rightUpperArm="rightUpperArm",t.rightLowerArm="rightLowerArm",t.rightHand="rightHand",t.rightThigh="rightThigh",t.rightCalf="rightCalf",t.rightFoot="rightFoot"})(q||(q={}));class ze{constructor(){c(this,"vertexArr",[]);c(this,"normalArr",[]);c(this,"indexArr",[]);c(this,"_lowerX",0);c(this,"_lowerY",0);c(this,"_lowerZ",0);c(this,"_upperX",0);c(this,"_upperY",0);c(this,"_upperZ",0);c(this,"_xRange",0);c(this,"_yRange",0);c(this,"_zRange",0)}load(e){const r=this.vertexArr,o=this.normalArr,i=this.indexArr,s=e.split(`
`);let n=1/0,a=1/0,l=1/0,d=-1/0,u=-1/0,h=-1/0;for(let p=0,f=s.length;p<f;++p){const y=s[p].trim();if(!y)continue;const x=y.split(" ");switch(x[0]){case"v":{const w=Number(x[1])||0,b=Number(x[2])||0,v=Number(x[3])||0;r.push([w,b,v]),n=Math.min(n,w),a=Math.min(a,b),l=Math.min(l,v),d=Math.max(d,w),u=Math.max(u,b),h=Math.max(h,v)}break;case"vn":{const w=Number(x[1])||0,b=Number(x[2])||0,v=Number(x[3])||0;o.push([w,b,v])}break;case"f":{const w=[];for(let b=1,v=x.length;b<v;++b){const m=x[b].split("/");w.push([Number(m[0])-1,m[2]?Number(m[2])-1:-1])}i.push(w)}break}}return this._lowerX=n,this._lowerY=a,this._lowerZ=l,this._upperX=d,this._upperY=u,this._upperZ=h,this._xRange=d-n,this._yRange=u-a,this._zRange=h-l,this}translate(e,r,o){const i=this.vertexArr;for(let s=0,n=i.length;s<n;++s){const a=i[s];a[0]+=e,a[1]+=r,a[2]+=o}return this._lowerX+=e,this._upperX+=e,this._lowerY+=r,this._upperY+=r,this._lowerZ+=o,this._upperZ+=o,this}setGeometryVertices(e,r=[1,1,1,1]){const o=[],i=[],s=this.vertexArr,n=this.normalArr,a=this.indexArr;for(let l=0,d=a.length;l<d;++l){const u=a[l];if(u.length!==3&&u.length!==4)throw new Error("Illegal face vertices num");const h=o.length;for(let p=0,f=u.length;p<f;++p){const y=u[p],x=y[0],w=y[1],b=s[x],v=w<0?[0,0,0]:n[w];o.push({a_color:r,a_position:b,a_normal:v})}u.length===3?i.push(h,h+1,h+2):i.push(h,h+1,h+2,h,h+2,h+3)}e.setVertices(o),e.indices=i}get lowerX(){return this._lowerX}get lowerY(){return this._lowerY}get lowerZ(){return this._lowerZ}get upperX(){return this._upperX}get upperY(){return this._upperY}get upperZ(){return this._upperZ}get xRange(){return this._xRange}get yRange(){return this._yRange}get zRange(){return this._zRange}}class ol{constructor(e,r,o){c(this,"name");c(this,"componentSize");c(this,"vertices");c(this,"vbo");this.name=e,this.componentSize=r,this.vertices=o}}var jo;(function(t){t[t.TRIANGLES=0]="TRIANGLES",t[t.LINES=1]="LINES"})(jo||(jo={}));class jt{constructor(e=0){c(this,"type",0);c(this,"attributes",[]);c(this,"indices",[]);c(this,"ibo");c(this,"vao");this.type=e}setVertices(e){const r=e.length,o={};for(let i in e[0])if(e[0].hasOwnProperty(i)){const s=e[0][i].length;o[i]=new ol(i,s,new Float32Array(s*r))}for(let i=0;i<r;++i){const s=e[i];for(let n in s)if(s.hasOwnProperty(n)){const a=s[n];o[n].vertices.set(a,a.length*i)}}this.attributes=Object.values(o)}}c(jt,"TYPE_TRIANGLES",0),c(jt,"TYPE_LINES",1);const il=[1,1,1,1],nl=[1,1,1,.1];class Ee{constructor(){c(this,"translation",[0,0,0]);c(this,"forward",[0,0,1]);c(this,"up",[0,1,0]);c(this,"controlPoint");c(this,"landmarks",[]);c(this,"parent");c(this,"children",[]);c(this,"active",!0);c(this,"localRotation",wr());c(this,"localMatrix",Zr());c(this,"worldMatrix",Zr());c(this,"originWorldPosition",ve());c(this,"originViewPosition",ve());c(this,"controlPointWorldPosition",ve());c(this,"controlPointViewPosition",ve());c(this,"controlPointScreenPosition",ve());c(this,"landmarksWorldPositions",[]);c(this,"landmarksViewPosition",[]);c(this,"geometry",new jt)}render(e){e.uniform("u_mMatrix",this.worldMatrix),e.uniform("u_color",this.active?il:nl),e.drawGeometry(this.geometry)}dispose(e){e.drawGeometry(this.geometry)}}const sl=[0,0,0];var Cc,Ac,Sc,Mc,Rc,Ec,Lc,kc,Fc,Ic,Oc,Dc,zc,Bc;class Nr{constructor(){c(this,"root",new Ee);c(this,Cc,this.root);c(this,Ac,new Ee);c(this,Sc,new Ee);c(this,Mc,new Ee);c(this,Rc,new Ee);c(this,Ec,new Ee);c(this,Lc,new Ee);c(this,kc,new Ee);c(this,Fc,new Ee);c(this,Ic,new Ee);c(this,Oc,new Ee);c(this,Dc,new Ee);c(this,zc,new Ee);c(this,Bc,new Ee)}update(e,r=this.root){const o=[r];for(;;){const i=o.pop();if(!i)break;o.push(...i.children),qr(i.localRotation,i.forward,i.up),qi(i.localMatrix,i.localRotation,i.translation),i.parent?yr(i.worldMatrix,i.parent.worldMatrix,i.localMatrix):Qi(i.worldMatrix,i.localMatrix),at(i.originWorldPosition,sl,i.worldMatrix),at(i.originViewPosition,i.originWorldPosition,e.viewMatrix),i.controlPoint&&(at(i.controlPointWorldPosition,i.controlPoint,i.worldMatrix),at(i.controlPointViewPosition,i.controlPointWorldPosition,e.viewMatrix),at(i.controlPointScreenPosition,i.controlPointWorldPosition,e.pvMatrix)),i.landmarks.length!==i.landmarksWorldPositions.length&&(i.landmarksWorldPositions=i.landmarks.map(s=>[0,0,0]),i.landmarksViewPosition=i.landmarks.map(s=>[0,0,0]));for(let s=0,n=i.landmarks.length;s<n;++s)at(i.landmarksWorldPositions[s],i.landmarks[s],i.worldMatrix),at(i.landmarksViewPosition[s],i.landmarksWorldPositions[s],e.viewMatrix)}}render(e){const r=[this.root];for(;;){const o=r.pop();if(!o)break;r.push(...o.children),o.render(e)}}async init(){const e=new ze().load((await Fe(()=>import("./head.643b9ca2.js"),[])).default),r=new ze().load((await Fe(()=>import("./trunk.6456ff5d.js"),[])).default),o=new ze().load((await Fe(()=>import("./left-upper-arm.6bab6c42.js"),[])).default),i=new ze().load((await Fe(()=>import("./left-lower-arm.ebe30a6b.js"),[])).default),s=new ze().load((await Fe(()=>import("./left-hand.9f228153.js"),[])).default),n=new ze().load((await Fe(()=>import("./right-upper-arm.247f0ea0.js"),[])).default),a=new ze().load((await Fe(()=>import("./right-lower-arm.befeeb58.js"),[])).default),l=new ze().load((await Fe(()=>import("./right-hand.1a2b65b4.js"),[])).default),d=new ze().load((await Fe(()=>import("./left-thigh.ae8e3bcc.js"),[])).default),u=new ze().load((await Fe(()=>import("./left-calf.02fe224f.js"),[])).default),h=new ze().load((await Fe(()=>import("./left-foot.d9162ea3.js"),[])).default),p=new ze().load((await Fe(()=>import("./right-thigh.920c863c.js"),[])).default),f=new ze().load((await Fe(()=>import("./right-calf.20f1f9a3.js"),[])).default),y=new ze().load((await Fe(()=>import("./right-foot.478e8c23.js"),[])).default),x=[0,e.lowerY+e.yRange*.35,e.zRange*-.1],w=[o.lowerX+o.xRange*.3,o.lowerY+o.yRange*(1-.075),o.zRange*-.1],b=[i.lowerX-w[0]+i.xRange*.5,i.lowerY-w[1]+i.yRange*(1-.05),i.lowerZ-w[2]+i.zRange*.3],v=[s.lowerX-b[0]-w[0]+s.xRange*.85,s.lowerY-b[1]-w[1]+s.yRange*(1-.05),s.lowerZ-b[2]-w[2]+s.zRange*.65],m=[d.lowerX+d.xRange*.5,d.lowerY+d.yRange*(1-.05),d.zRange*.05],g=[u.lowerX-m[0]+u.xRange*.5,u.lowerY-m[1]+u.yRange*(1-.05),u.lowerZ-m[2]+u.zRange*.65],_=[h.lowerX-m[0]-g[0]+h.xRange*.3,h.lowerY-m[1]-g[1]+h.yRange*(1-.25),h.lowerZ-m[2]-g[2]+h.zRange*.25],C=[0,r.yRange*.75,0],S=[0,0,e.yRange*.5],E=[o.xRange*.3,o.yRange*-.85,o.zRange*-.3],L=[0,i.yRange*-.9,i.zRange*.4],z=[s.xRange*-.2,s.yRange*-.8,s.zRange*-.1],V=[d.xRange*-.15,d.yRange*-.87,d.zRange*-.25],G=[0,u.yRange*-.85,u.zRange*-.3],I=[h.xRange*.25,h.yRange*-.5,h.zRange*.6];function $(Pe){return[-Pe[0],Pe[1],Pe[2]]}const B=this.root;r.setGeometryVertices(B.geometry),B.controlPoint=C;const A=this.addChild(this.root,this.head);A.landmarks=[[-e.lowerX,e.yRange*.05,e.zRange*.15],[-e.upperX,e.yRange*.05,e.zRange*.15]],e.translate(-x[0],-x[1],-x[2]),e.setGeometryVertices(A.geometry),A.translation=x,A.controlPoint=S;const M=this.addChild(this.root,this.leftUpperArm);o.translate(-w[0],-w[1],-w[2]),o.setGeometryVertices(M.geometry),M.translation=w,M.controlPoint=E;const O=this.addChild(this.root,this.rightUpperArm);n.translate(+w[0],-w[1],-w[2]),n.setGeometryVertices(O.geometry),O.translation=$(w),O.controlPoint=$(E);const Y=this.addChild(M,this.leftLowerArm);i.translate(-b[0]-w[0],-b[1]-w[1],-b[2]-w[2]),i.setGeometryVertices(Y.geometry),Y.translation=b,Y.controlPoint=L;const ee=this.addChild(O,this.rightLowerArm);a.translate(+b[0]+w[0],-b[1]-w[1],-b[2]-w[2]),a.setGeometryVertices(ee.geometry),ee.translation=$(b),ee.controlPoint=$(L);const te=this.addChild(Y,this.leftHand);s.translate(-v[0]-b[0]-w[0],-v[1]-b[1]-w[1],-v[2]-b[2]-w[2]),s.setGeometryVertices(te.geometry),te.translation=v,te.controlPoint=z;const de=this.addChild(ee,this.rightHand);l.translate(+v[0]+b[0]+w[0],-v[1]-b[1]-w[1],-v[2]-b[2]-w[2]),l.setGeometryVertices(de.geometry),de.translation=$(v),de.controlPoint=$(z);const pe=this.addChild(B,this.leftThigh);d.translate(-m[0],-m[1],-m[2]),d.setGeometryVertices(pe.geometry),pe.translation=m,pe.controlPoint=V;const ae=this.addChild(B,this.rightThigh);p.translate(+m[0],-m[1],-m[2]),p.setGeometryVertices(ae.geometry),ae.translation=$(m),ae.controlPoint=$(V);const oe=this.addChild(pe,this.leftCalf);u.translate(-g[0]-m[0],-g[1]-m[1],-g[2]-m[2]),u.setGeometryVertices(oe.geometry),oe.translation=g,oe.controlPoint=G;const he=this.addChild(ae,this.rightCalf);f.translate(+g[0]+m[0],-g[1]-m[1],-g[2]-m[2]),f.setGeometryVertices(he.geometry),he.translation=$(g),he.controlPoint=$(G);const Te=this.addChild(oe,this.leftFoot);h.translate(-_[0]-g[0]-m[0],-_[1]-g[1]-m[1],-_[2]-g[2]-m[2]),h.setGeometryVertices(Te.geometry),Te.translation=_,Te.controlPoint=I;const Be=this.addChild(he,this.rightFoot);y.translate(+_[0]+g[0]+m[0],-_[1]-g[1]-m[1],-_[2]-g[2]-m[2]),y.setGeometryVertices(Be.geometry),Be.translation=$(_),Be.controlPoint=$(I)}addChild(e,r){return r=r||new Ee,e.children.push(r),r.parent=e,r}}Cc=q.trunk,Ac=q.head,Sc=q.leftUpperArm,Mc=q.leftLowerArm,Rc=q.leftHand,Ec=q.leftThigh,Lc=q.leftCalf,kc=q.leftFoot,Fc=q.rightUpperArm,Ic=q.rightLowerArm,Oc=q.rightHand,Dc=q.rightThigh,zc=q.rightCalf,Bc=q.rightFoot;function Wr(t,e,r,o,i,s,n,a,l,d,u,h,p){const f=i-e,y=s-r,x=n-o,w=Math.sqrt(f**2+y**2+x**2);if(w<=1e-8)return!1;const b=f/w,v=y/w,m=x/w,g=Math.sqrt(u**2+h**2+p**2);if(g<=1e-8)return!1;const _=1/g;u*=_,h*=_,p*=_;const C=b*u+v*h+m*p;if(Math.abs(C)<=1e-8)return!1;const S=-e+a,E=-r+l,L=-o+d,z=(S*u+E*h+L*p)/C,V=e+z*b,G=r+z*v,I=o+z*m;return Ne(t,V,G,I),z>=0}function al(t,e,r,o,i,s,n,a,l,d,u){let h=i-e,p=s-r,f=n-o;const y=e-a,x=r-l,w=o-d,b=h**2+p**2+f**2,v=2*(h*y+p*x+f*w),m=y**2+x**2+w**2-u**2,g=v**2-4*b*m;if(g<0)return!1;const _=Math.sqrt(g),C=(-v+_)/(2*b),S=(-v-_)/(2*b),E=Math.min(C,S);return t[0]=e+h*E,t[1]=r+p*E,t[2]=o+f*E,!0}class Xo{constructor(){c(this,"dragStartMousePosition",ve());c(this,"dragStartOriginPosition",ve());c(this,"dragStartTargetPosition",ve());c(this,"mousePosition",ve());c(this,"mouseRay0",ve());c(this,"mouseRay1",ve());c(this,"rayResult0",ve());c(this,"rayResult1",ve());c(this,"normal",ve());c(this,"radius",0);c(this,"offset",ve())}}function ll(t,e,r,o,i,s,n){Ne(t.dragStartMousePosition,e,r,0),Ne(t.dragStartTargetPosition,o,i,s),_t(t.normal,n.target,n.position)}function Yo(t,e,r,o){return t.dragStartMousePosition[2]=-1,o.screenToView(t.mouseRay0,t.dragStartMousePosition),t.dragStartMousePosition[2]=1,o.screenToView(t.mouseRay1,t.dragStartMousePosition),!Wr(t.rayResult0,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartTargetPosition[0],t.dragStartTargetPosition[1],t.dragStartTargetPosition[2],t.normal[0],t.normal[1],t.normal[2])||(Ne(t.mousePosition,e,r,-1),o.screenToView(t.mouseRay0,t.mousePosition),Ne(t.mousePosition,e,r,1),o.screenToView(t.mouseRay1,t.mousePosition),!Wr(t.rayResult1,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartTargetPosition[0],t.dragStartTargetPosition[1],t.dragStartTargetPosition[2],t.normal[0],t.normal[1],t.normal[2]))?!1:(_t(t.offset,t.rayResult1,t.rayResult0),!0)}function cl(t,e,r,o,i,s,n,a,l,d){Ne(t.dragStartMousePosition,e,r,0),Ne(t.dragStartOriginPosition,o,i,s),Ne(t.dragStartTargetPosition,n,a,l),_t(t.normal,t.dragStartTargetPosition,d.position),t.radius=Ji(t.dragStartOriginPosition,t.dragStartTargetPosition)}function dl(t,e,r,o){const i=Qr(t.normal,t.dragStartOriginPosition);return Qr(t.normal,t.dragStartTargetPosition)-i<=0?(Ne(t.mousePosition,e,r,-1),o.screenToView(t.mouseRay0,t.mousePosition),Ne(t.mousePosition,e,r,1),o.screenToView(t.mouseRay1,t.mousePosition),al(t.rayResult1,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartOriginPosition[0],t.dragStartOriginPosition[1],t.dragStartOriginPosition[2],t.radius)?!0:Wr(t.rayResult1,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartOriginPosition[0],t.dragStartOriginPosition[1],t.dragStartOriginPosition[2],t.normal[0],t.normal[1],t.normal[2])):Yo(t,e,r,o)}class ul{constructor(e,r,o,i,s,n){c(this,"perspective",!1);c(this,"_pvMatrix",new Float32Array(16));c(this,"_invPvMatrix",new Float32Array(16));c(this,"_projectionMatrix",new Float32Array(16));c(this,"_viewMatrix",new Float32Array(16));c(this,"_position",new Float32Array(3));c(this,"_target",new Float32Array(3));c(this,"_up",new Float32Array([0,1,0]));c(this,"_left");c(this,"_right");c(this,"_bottom");c(this,"_top");c(this,"_near");c(this,"_far");c(this,"matrixNeedsUpdate",!0);this._left=e,this._right=r,this._bottom=o,this._top=i,this._near=s,this._far=n}fitViewport(e,r){this.left=-e/2,this.right=e/2,this.bottom=-r/2,this.top=r/2}screenToView(e,r){at(e,r,this._invPvMatrix)}updateMatrix(){en(this._projectionMatrix,this._left,this._right,this._bottom,this._top,this._near,this._far),Jr(this._viewMatrix,this._position,this._target,this._up),yr(this._pvMatrix,this._projectionMatrix,this._viewMatrix),eo(this._invPvMatrix,this._pvMatrix),this.matrixNeedsUpdate=!1}get pvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._pvMatrix}get invPvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._invPvMatrix}get projectionMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._projectionMatrix}get viewMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._viewMatrix}get position(){return this._position}set position(e){Tt(e,this._position)||(this.matrixNeedsUpdate=!0,this._position.set(e))}get target(){return this._target}set target(e){Tt(e,this._target)||(this.matrixNeedsUpdate=!0,this._target.set(e))}get up(){return this._up}set up(e){Tt(e,this._up)||(this.matrixNeedsUpdate=!0,this._up.set(e))}get left(){return this._left}set left(e){e!==this._left&&(this.matrixNeedsUpdate=!0,this._left=e)}get right(){return this._right}set right(e){e!==this._right&&(this.matrixNeedsUpdate=!0,this._right=e)}get bottom(){return this._bottom}set bottom(e){e!==this._bottom&&(this.matrixNeedsUpdate=!0,this._bottom=e)}get top(){return this._top}set top(e){e!==this._top&&(this.matrixNeedsUpdate=!0,this._top=e)}get near(){return this._near}set near(e){e!==this._near&&(this.matrixNeedsUpdate=!0,this._near=e)}get far(){return this._far}set far(e){e!==this._far&&(this.matrixNeedsUpdate=!0,this._far=e)}}class hl{constructor(e,r,o,i){c(this,"perspective",!0);c(this,"_pvMatrix",new Float32Array(16));c(this,"_invPvMatrix",new Float32Array(16));c(this,"_projectionMatrix",new Float32Array(16));c(this,"_viewMatrix",new Float32Array(16));c(this,"_position",new Float32Array(3));c(this,"_target",new Float32Array(3));c(this,"_up",new Float32Array([0,1,0]));c(this,"_fovYRad");c(this,"_aspect");c(this,"_near");c(this,"_far");c(this,"matrixNeedsUpdate",!0);this._fovYRad=e,this._aspect=r,this._near=o,this._far=i}fitViewport(e,r){this.aspect=e/r}screenToView(e,r){at(e,r,this._invPvMatrix)}updateMatrix(){tn(this._projectionMatrix,this._fovYRad,this._aspect,this._near,this._far),Jr(this._viewMatrix,this._position,this._target,this._up),yr(this._pvMatrix,this._projectionMatrix,this._viewMatrix),eo(this._invPvMatrix,this._pvMatrix),this.matrixNeedsUpdate=!1}get pvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._pvMatrix}get invPvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._invPvMatrix}get projectionMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._projectionMatrix}get viewMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._viewMatrix}get position(){return this._position}set position(e){Tt(e,this._position)||(this.matrixNeedsUpdate=!0,this._position.set(e))}get target(){return this._target}set target(e){Tt(e,this._target)||(this.matrixNeedsUpdate=!0,this._target.set(e))}get up(){return this._up}set up(e){Tt(e,this._up)||(this.matrixNeedsUpdate=!0,this._up.set(e))}get fovYRad(){return this._fovYRad}set fovYRad(e){this._fovYRad!==e&&(this.matrixNeedsUpdate=!0,this._fovYRad=e)}get aspect(){return this._aspect}set aspect(e){this._aspect!==e&&(this.matrixNeedsUpdate=!0,this._aspect=e)}get near(){return this._near}set near(e){this._near!==e&&(this.matrixNeedsUpdate=!0,this._near=e)}get far(){return this._far}set far(e){this._far!==e&&(this.matrixNeedsUpdate=!0,this._far=e)}}const fl=.9,pl=-12,gl=1.2,vl=4;class Go{constructor(e=45/180*Math.PI,r=.1,o=1e3){c(this,"viewportWidth",1);c(this,"viewportHeight",1);c(this,"perspectiveCamera");c(this,"orthographicCamera");c(this,"perspective",!0);c(this,"far",2);c(this,"target",zt(0,0,0));c(this,"rotateX",0);c(this,"rotateY",0);c(this,"zoom",1);c(this,"position",zt(0,0,0));c(this,"orthographicZoomRatio",1.6);c(this,"defaultPosition",zt(0,0,1));c(this,"defaultUp",zt(0,1,0));c(this,"up",zt(0,0,0));c(this,"rotationQuat",wr());c(this,"draggingRotation",!1);c(this,"draggingPosition",!1);c(this,"dragStartProjectedMouseX",0);c(this,"dragStartProjectedMouseY",0);c(this,"dragStartRotateX",0);c(this,"dragStartRotateY",0);c(this,"positionDragContext",new Xo);this.perspectiveCamera=new hl(e,1,r,o),this.orthographicCamera=new ul(-1,1,-1,1,r,o)}screenToView(e,r){return(this.perspective?this.perspectiveCamera:this.orthographicCamera).screenToView(e,r),e}get pvMatrix(){return(this.perspective?this.perspectiveCamera:this.orthographicCamera).pvMatrix}get viewMatrix(){return(this.perspective?this.perspectiveCamera:this.orthographicCamera).viewMatrix}get camera(){return this.perspective?this.perspectiveCamera:this.orthographicCamera}fitViewport(e,r){this.viewportWidth=e,this.viewportHeight=r,this.update()}update(){const e=this.camera,r=this.zoom<=0?fl**-this.zoom:gl**this.zoom,o=r/25*(this.perspective?1:this.orthographicZoomRatio);e.fitViewport(this.viewportWidth*o,this.viewportHeight*o),rn(this.position,this.defaultPosition,this.far*r*2),on(this.rotationQuat,this.rotateX,this.rotateY,0),re(this.position,this.position,this.rotationQuat),nn(this.position,this.position,this.target),e.position=this.position,this.rotateX===90||this.rotateX===-90?(re(this.up,this.defaultUp,this.rotationQuat),e.up=this.up):e.up=this.defaultUp,e.target=this.target}onInput(e){const r=(-this.viewportWidth/2+e.mouseX)/this.viewportWidth*2,o=(+this.viewportHeight/2-e.mouseY)/this.viewportHeight*2;if(e.mouseMiddle)if(this.draggingRotation){const i=r-this.dragStartProjectedMouseX,s=o-this.dragStartProjectedMouseY;this.rotateX=Math.max(-90,Math.min(90,this.dragStartRotateX+s*90)),this.rotateY=(this.dragStartRotateY-i*90)%360}else this.draggingRotation=!0,this.dragStartProjectedMouseX=r,this.dragStartProjectedMouseY=o,this.dragStartRotateX=this.rotateX,this.dragStartRotateY=this.rotateY;else this.draggingRotation=!1;e.mouseRight?this.draggingPosition?Yo(this.positionDragContext,r,o,this.camera)&&_t(this.target,this.positionDragContext.dragStartTargetPosition,this.positionDragContext.offset):this.draggingRotation||(this.draggingPosition=!0,ll(this.positionDragContext,r,o,this.target[0],this.target[1],this.target[2],this.camera)):this.draggingPosition=!1,e.wheelDetY&&(this.zoom=Math.max(pl,Math.min(vl,this.zoom+e.wheelDetY))),this.update()}}var vt;(function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"})(vt||(vt={}));class ml{constructor(){c(this,"callback");c(this,"needsUpdate",!1);c(this,"mouseOver",!1);c(this,"mouseX",0);c(this,"mouseY",0);c(this,"mouseLeft",!1);c(this,"mouseLeftDownThisFrame",!1);c(this,"mouseRight",!1);c(this,"mouseRightDownThisFrame",!1);c(this,"mouseMiddle",!1);c(this,"mouseMiddleDownThisFrame",!1);c(this,"wheelDetX",0);c(this,"wheelDetY",0);c(this,"onContextmenu");c(this,"onMouseMove");c(this,"onMouseDown");c(this,"onMouseUp");c(this,"onMouseLeave");c(this,"onMouseOut");c(this,"onWheel");c(this,"onKeyDown");c(this,"onKeyUp");c(this,"onBlur");c(this,"keyMap",new Map);c(this,"timestamp",0);this.onContextmenu=e=>{e.preventDefault()},this.onMouseMove=e=>{this.mouseOver=!0,this.mouseX=e.offsetX,this.mouseY=e.offsetY,this.triggerCallback()},this.onMouseDown=e=>{switch(e.button){case vt.LEFT:this.mouseLeft=!0,this.mouseLeftDownThisFrame=!0;break;case vt.MIDDLE:this.mouseMiddle=!0,this.mouseMiddleDownThisFrame=!0;break;case vt.RIGHT:this.mouseRight=!0,this.mouseRightDownThisFrame=!0;break}this.triggerCallback()},this.onMouseUp=e=>{switch(e.button){case vt.LEFT:this.mouseLeft=!1,this.mouseLeftDownThisFrame=!1;break;case vt.MIDDLE:this.mouseMiddle=!1,this.mouseMiddleDownThisFrame=!1;break;case vt.RIGHT:this.mouseRight=!1,this.mouseLeftDownThisFrame=!1;break}this.triggerCallback()},this.onMouseLeave=()=>{this.mouseOver=!1,this.triggerCallback()},this.onMouseOut=e=>{(e.clientY<=0||e.clientX<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight)&&(this.mouseLeft=!1,this.mouseLeftDownThisFrame=!1,this.mouseRight=!1,this.mouseLeftDownThisFrame=!1),this.triggerCallback()},this.onWheel=e=>{e.preventDefault(),this.wheelDetX+=Math.round(e.deltaX/100),this.wheelDetY+=Math.round(e.deltaY/100),this.triggerCallback()},this.onKeyDown=e=>{const r=e.target;r&&"tagName"in r&&r.tagName==="INPUT"||(e.ctrlKey&&e.preventDefault(),this.keyMap.set(e.key,this.timestamp),this.triggerCallback())},this.onKeyUp=e=>{const r=e.target;r&&"tagName"in r&&r.tagName==="INPUT"||(this.keyMap.delete(e.key),this.triggerCallback())},this.onBlur=()=>{this.keyMap.clear(),this.triggerCallback()}}setup(e){e.addEventListener("contextmenu",this.onContextmenu),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseleave",this.onMouseLeave),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mouseout",this.onMouseOut),e.addEventListener("wheel",this.onWheel),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),window.addEventListener("blur",this.onBlur)}unload(e){e.removeEventListener("contextmenu",this.onContextmenu),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseleave",this.onMouseLeave),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mouseout",this.onMouseOut),e.removeEventListener("wheel",this.onWheel),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("blur",this.onBlur)}update(){this.mouseLeftDownThisFrame=!1,this.mouseRightDownThisFrame=!1,this.mouseMiddleDownThisFrame=!1,this.wheelDetX=0,this.wheelDetY=0,this.timestamp+=1}isKeyPressed(e){return this.keyMap.has(e)}isKeyPressedThisFrame(e){return this.keyMap.get(e)===this.timestamp}triggerCallback(){this.needsUpdate=!0,requestAnimationFrame(()=>{!this.needsUpdate||(this.needsUpdate=!1,this.callback&&this.callback(this),this.update())})}}function bl(t,e,r,o,i){return(t-r)**2+(e-o)**2<=i**2}const Ko="a_position",wl="a_texCoord",Zo="a_color",yl="u_texture";class xl{constructor(e){c(this,"glFrameBuffer");c(this,"textures",[]);c(this,"depthTexture");c(this,"stencilTexture");this.glFrameBuffer=e}get texture(){return this.textures[0]}}class ar{constructor(e,r,o,i,s,n,a,l){c(this,"glTexture");c(this,"level");c(this,"internalFormat");c(this,"width");c(this,"height");c(this,"border");c(this,"format");c(this,"type");c(this,"flipY",!1);c(this,"image");this.glTexture=e,this.level=r,this.internalFormat=o,this.width=i,this.height=s,this.border=n,this.format=a,this.type=l}}function Pl(t,e,r,o,i,s){if(e.substr(-3)==="[0]")switch(o){case t.FLOAT:return function(a){t.uniform1fv(i,a)};case t.INT:return function(a){t.uniform1iv(i,a)};case t.UNSIGNED_INT:return function(a){t.uniform1uiv(i,a)};case t.SAMPLER_2D:const n=new Int32Array(r);for(let a=0;a<r;++a)n[a]=s.count++;return function(a){t.uniform1iv(i,n);for(let l=0;l<r;++l){let d=a[l];d instanceof ar&&(d=d.glTexture),t.activeTexture(t.TEXTURE0+n[l]),t.bindTexture(t.TEXTURE_2D,d||null)}};default:throw new Error(`Unimplemented setter type (uniform: ${e}, type: ${o})`)}switch(o){case t.FLOAT:return function(a){t.uniform1f(i,a)};case t.FLOAT_VEC2:return function(a){t.uniform2fv(i,a)};case t.FLOAT_VEC3:return function(a){t.uniform3fv(i,a)};case t.FLOAT_VEC4:return function(a){t.uniform4fv(i,a)};case t.BOOL:case t.INT:return function(a){t.uniform1i(i,a)};case t.BOOL_VEC2:case t.INT_VEC2:return function(a){t.uniform2iv(i,a)};case t.BOOL_VEC3:case t.INT_VEC3:return function(a){t.uniform3iv(i,a)};case t.BOOL_VEC4:case t.INT_VEC4:return function(a){t.uniform4iv(i,a)};case t.FLOAT_MAT2:return function(a){t.uniformMatrix2fv(i,!1,a)};case t.FLOAT_MAT3:return function(a){t.uniformMatrix3fv(i,!1,a)};case t.FLOAT_MAT4:return function(a){t.uniformMatrix4fv(i,!1,a)};case t.SAMPLER_2D:const n=s.count++;return function(a){a instanceof ar&&(a=a.glTexture),t.uniform1i(i,n),t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,a||null)};default:throw new Error(`Unimplemented setter type (uniform: ${e}, type: ${o})`)}}class _l{constructor(e,r,o,i){c(this,"name");c(this,"size");c(this,"type");c(this,"location");this.name=e,this.size=r,this.type=o,this.location=i}}class Tl{constructor(e,r,o,i,s){c(this,"name");c(this,"size");c(this,"type");c(this,"location");c(this,"setter");this.name=e,this.size=r,this.type=o,this.location=i,this.setter=s}}class Cl{constructor(e,r,o){c(this,"vertShader");c(this,"fragShader");c(this,"program");c(this,"attributes",{});c(this,"uniforms",{});this.vertShader=e,this.fragShader=r,this.program=o}registerAttribute(e,r,o,i){this.attributes[e]=new _l(e,r,o,i)}registerUniform(e,r,o,i,s){e.endsWith("[0]")&&(e=e.substr(0,e.length-"[0]".length)),this.uniforms[e]=new Tl(e,r,o,i,s)}}var Al=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec4 v_color;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = v_color;\r
}\r
`,Sl=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec4 a_position;\r
in vec4 a_color;\r
\r
out vec4 v_color;\r
\r
void main() {\r
    v_color = a_color;\r
    gl_Position = a_position;\r
}\r
`,Ml=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec2 v_texCoord;\r
in vec4 v_color;\r
\r
uniform sampler2D u_texture;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = texture(u_texture, v_texCoord) * v_color;\r
}\r
`,qo=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec4 a_position;\r
in vec2 a_texCoord;\r
in vec4 a_color;\r
\r
out vec2 v_texCoord;\r
out vec4 v_color;\r
\r
void main() {\r
    v_texCoord = a_texCoord;\r
    v_color = a_color;\r
    gl_Position = a_position;\r
}\r
`,Qo;(function(t){t[t.NONE=0]="NONE",t[t.FRONT=1]="FRONT",t[t.BACK=2]="BACK"})(Qo||(Qo={}));var Jo;(function(t){t[t.MESH=0]="MESH",t[t.LINES=1]="LINES"})(Jo||(Jo={}));var ei;(function(t){t[t.OVERLAP=0]="OVERLAP",t[t.LIGHT=1]="LIGHT",t[t.PIGMENT=2]="PIGMENT"})(ei||(ei={}));const Dt=class{constructor(e,r=2e3){c(this,"SIDE_NONE",0);c(this,"SIDE_FRONT",1);c(this,"SIDE_BACK",2);c(this,"BLEND_MODE_OVERLAP",0);c(this,"BLEND_MODE_LIGHT",1);c(this,"BLEND_MODE_PIGMENT",2);c(this,"canvas");c(this,"gl");c(this,"attribLocations");c(this,"BLANK_WHITE");c(this,"IMAGE_2D_SHADER");c(this,"COLOR_2D_SHADER");c(this,"currentShader");c(this,"frameBufferStack",[]);c(this,"currentFrameBuffer");c(this,"batchSize");c(this,"batchPositionVertices");c(this,"batchTexCoordVertices");c(this,"batchColorVertices");c(this,"batchPositionBuffer");c(this,"batchTexCoordBuffer");c(this,"batchColorBuffer");c(this,"batchType",0);c(this,"batchTexture");c(this,"batchIndex",0);c(this,"drawing2D",!1);c(this,"state",{width:0,height:0,color:{r:1,g:1,b:1,a:1},cameraX:0,cameraY:0,zoom:1,blendMode:0});c(this,"stateStack",[]);let o,i=null;if(e?e instanceof HTMLCanvasElement?o=e:(o=e.canvas,i=e):o=document.createElement("canvas"),!i&&(i=o.getContext("webgl2",{alpha:!0,antialias:!1,depth:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1}),!i))throw new Error("Failed to create WebGL2 rendering context");this.canvas=o,this.gl=i,this.state.width=o.width,this.state.height=o.height,i.viewport(0,0,this.state.width,this.state.height),i.enable(i.BLEND),this.BLANK_WHITE=this.createTextureFromRgbaPixels(1,1,new Uint8Array([255,255,255,255])),this.IMAGE_2D_SHADER=this.createShader(qo,Ml),this.COLOR_2D_SHADER=this.createShader(Sl,Al),this.batchSize=r,this.batchPositionVertices=new Float32Array(r*3*2*2),this.batchPositionBuffer=this.createDynamicDrawBuffer(this.batchPositionVertices),this.batchTexCoordVertices=new Float32Array(r*3*2*2),this.batchTexCoordBuffer=this.createDynamicDrawBuffer(this.batchTexCoordVertices),this.batchColorVertices=new Float32Array(r*3*2*4),this.batchColorBuffer=this.createDynamicDrawBuffer(this.batchColorVertices)}static sharedInstance(){return Dt._sharedInstance||(Dt._sharedInstance=new Dt),Dt._sharedInstance}copyTo(e,r=0,o=0,i=this.state.width,s=this.state.height,n=0,a=0,l=this.state.width,d=this.state.height){e.drawImage(this.canvas,n,a,l,d,r,o,i,s)}viewport(e,r){this.state.width=e,this.state.height=r,this.gl.viewport(0,0,this.state.width,this.state.height)}resizeCanvas(e,r){(this.canvas.width!==e||this.canvas.height!==r)&&(this.canvas.width=e,this.canvas.height=r),this.viewport(e,r)}clearColor(e=0,r=0,o=0,i=0){this.gl.clearColor(e,r,o,i)}clear(e,r,o){this.flush2D(),this.switchFrameBuffer();const i=this.gl;let s=0;e&&(s|=i.COLOR_BUFFER_BIT),r&&(s|=i.DEPTH_BUFFER_BIT),o&&(s|=i.STENCIL_BUFFER_BIT),i.clear(s)}depthTest(e){const r=this.gl;e?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}depthMask(e){this.gl.depthMask(e)}cullFace(e){const r=this.gl;switch(e){case 0:r.disable(r.CULL_FACE);break;case 1:r.enable(r.CULL_FACE),r.cullFace(r.FRONT);break;case 2:r.enable(r.CULL_FACE),r.cullFace(r.BACK);break}}blendMode(e){if(e===this.state.blendMode)return;this.state.blendMode=e,this.flush2D();const r=this.gl;switch(e){case 0:r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO);break;case 1:r.blendEquation(r.FUNC_ADD),r.blendFunc(r.SRC_ALPHA,r.ONE);break;case 2:r.blendEquationSeparate(r.FUNC_ADD,r.MAX),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA);break}}useShader(e){e!==this.currentShader&&(this.flush2D(),this.currentShader=e,e&&this.gl.useProgram(e.program))}uniform(e,r){const o=this.currentShader;if(!o)return;this.flush2D();const i=o.uniforms[e];i==null||i.setter(r)}save(){if(this.stateStack.length>999)throw new Error("State stack has reach a max size of 999");const e=this.state,r=e.color;this.stateStack.push({width:e.width,height:e.height,color:{r:r.r,g:r.g,b:r.b,a:r.a},cameraX:e.cameraX,cameraY:e.cameraY,zoom:e.zoom,blendMode:e.blendMode})}restore(){const e=this.stateStack.pop();if(!e)throw new Error("State stack is empty");this.state.color.r=e.color.r,this.state.color.g=e.color.g,this.state.color.b=e.color.b,this.state.color.a=e.color.a,this.state.cameraX=e.cameraX,this.state.cameraY=e.cameraY,this.state.zoom=e.zoom,this.viewport(e.width,e.height),this.blendMode(e.blendMode)}createDynamicDrawBuffer(e){const r=this.gl,o=r.createBuffer();if(!o)throw new Error("Failed to create WebGL buffer");return r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,e,r.DYNAMIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),o}createVBO(e){const r=this.gl,o=r.createBuffer();if(!o)throw new Error("Failed to create WebGL buffer");return r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),o}createIBO(e){const r=this.gl,o=r.createBuffer();if(!o)throw new Error("Failed to create WebGL buffer");return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),o}bindVertexArrayAttribute(e,r,o=4,i=this.gl.FLOAT,s=!1,n=0,a=0){const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),l.enableVertexAttribArray(e),l.vertexAttribPointer(e,o,i,s,n,a),l.bindBuffer(l.ARRAY_BUFFER,null)}createEmptyTexture(e=this.state.width,r=this.state.height,o=!1){if(e<0||r<0)throw new Error("Negative width/height");const i=this.gl,s=i.createTexture();if(!s)throw new Error("Failed to create WebGL texture");i.bindTexture(i.TEXTURE_2D,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,r,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null);const n=new ar(s,0,i.RGBA,e,r,0,i.RGBA,i.UNSIGNED_BYTE);return n.flipY=o,n}createTexture(e){const r=this.createEmptyTexture(e.width,e.height),o=this.gl;return o.bindTexture(o.TEXTURE_2D,r.glTexture),o.texImage2D(o.TEXTURE_2D,r.level,r.internalFormat,r.format,r.type,e),o.bindTexture(o.TEXTURE_2D,null),r}createTextureFromImageUrl(e){return new Promise((r,o)=>{try{const i=new Image;i.onload=()=>{try{const s=this.createTexture(i);s.image=i,r(s)}catch(s){o(s)}},i.onabort=i.onerror=s=>{o(s)},i.src=e}catch(i){o(i)}})}createDepthTexture(e=this.state.width,r=this.state.height){if(e<0||r<0)throw new Error("Negative width/height");const o=this.gl,i=o.createTexture();if(!i)throw new Error("Failed to create WebGL texture");return o.bindTexture(o.TEXTURE_2D,i),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.DEPTH_COMPONENT32F,e,r,0,o.DEPTH_COMPONENT,o.FLOAT,null),o.bindTexture(o.TEXTURE_2D,null),new ar(i,0,o.DEPTH_COMPONENT32F,e,r,0,o.DEPTH_COMPONENT,o.FLOAT)}createTextureFromRgbaPixels(e,r,o){const i=this.createEmptyTexture(e,r),s=this.gl;return s.bindTexture(s.TEXTURE_2D,i.glTexture),s.texImage2D(s.TEXTURE_2D,i.level,i.internalFormat,e,r,i.border,i.format,i.type,o),s.bindTexture(s.TEXTURE_2D,null),i}setTextureFromPixels(e,r,o,i){const s=this.gl;if(!e.glTexture)throw new Error("Texture has been deleted");s.bindTexture(s.TEXTURE_2D,e.glTexture),s.texImage2D(s.TEXTURE_2D,e.level,e.internalFormat,r,o,e.border,e.format,e.type,i),s.bindTexture(s.TEXTURE_2D,null),e.width=r,e.height=o}deleteTexture(e){e.glTexture&&(this.gl.deleteTexture(e.glTexture),e.glTexture=void 0),e.width=0,e.height=0}resizeTexture(e,r=this.state.width,o=this.state.height,i=!1){if(r<0||o<0)throw new Error("Negative width/height");if(e.width===r&&e.height===o)return;const s=this.gl;if(!e.glTexture)throw new Error("Texture has been deleted");s.bindTexture(s.TEXTURE_2D,e.glTexture),s.texImage2D(s.TEXTURE_2D,e.level,e.internalFormat,r,o,e.border,e.format,e.type,null),s.bindTexture(s.TEXTURE_2D,null),e.width=r,e.height=o}createGlShader(e,r){const o=this.gl,i=o.createShader(r);if(!i)throw new Error("Failed to create WebGL shader");if(o.shaderSource(i,e),o.compileShader(i),!o.getShaderParameter(i,o.COMPILE_STATUS))throw new Error(`Failed to compile WebGL shader:

`+o.getShaderInfoLog(i));return i}createShader(e,r){const o=this.gl,i=this.createGlShader(e,o.VERTEX_SHADER),s=this.createGlShader(r,o.FRAGMENT_SHADER),n=o.createProgram();if(!n)throw new Error("Failed to create WebGL program");o.attachShader(n,i),o.attachShader(n,s);const a=this.attribLocations;if(a)for(let p in a)a.hasOwnProperty(p)&&o.bindAttribLocation(n,a[p],p);if(o.linkProgram(n),!o.getProgramParameter(n,o.LINK_STATUS))throw new Error(`Failed to link WebGL program:

`+o.getProgramInfoLog(n));const l=new Cl(i,s,n),d=o.getProgramParameter(n,o.ACTIVE_ATTRIBUTES);for(let p=0;p<d;++p){const f=o.getActiveAttrib(n,p);if(!f)throw new Error("Failed to get WebGL attribute info");const y=o.getAttribLocation(n,f.name);l.registerAttribute(f.name,f.size,f.type,y)}const u=o.getProgramParameter(n,o.ACTIVE_UNIFORMS),h={count:0};for(let p=0;p<u;++p){const f=o.getActiveUniform(n,p);if(!f)throw new Error("Failed to get WebGL uniform info");const y=o.getUniformLocation(n,f.name);if(y==null)throw new Error("Failed to get uniform location");l.registerUniform(f.name,f.size,f.type,y,Pl(o,f.name,f.size,f.type,y,h))}return l}deleteShader(e){const r=this.gl;e.program&&(r.deleteProgram(e.program),e.program=void 0),e.vertShader&&(r.deleteShader(e.vertShader),e.vertShader=void 0),e.fragShader&&(r.deleteShader(e.fragShader),e.fragShader=void 0),e.uniforms={},e.attributes={}}createFrameBuffer(){const r=this.gl.createFramebuffer();if(!r)throw new Error("Failed to create WebGL frame buffer");return new xl(r)}attachColorTexture(e,r){this.attachColorTextures(e,r?[r]:[])}attachColorTextures(e,r){const o=this.gl;if(!e.glFrameBuffer)throw new Error("Frame buffer has been deleted");o.bindFramebuffer(o.FRAMEBUFFER,e.glFrameBuffer),e.textures.length=r.length,r.forEach((i,s)=>{if(!i.glTexture)throw new Error("Texture has been deleted");o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+s,o.TEXTURE_2D,i.glTexture,i.level),e.textures[s]=i}),o.drawBuffers(r.map((i,s)=>o.COLOR_ATTACHMENT0+s)),o.bindFramebuffer(o.FRAMEBUFFER,null),this.currentFrameBuffer=void 0}attachDepthTexture(e,r){const o=this.gl;if(!e.glFrameBuffer)throw new Error("Frame buffer has been deleted");if(o.bindFramebuffer(o.FRAMEBUFFER,e.glFrameBuffer),r){if(!r.glTexture)throw new Error("Texture has been deleted");o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,r.glTexture,r.level),e.depthTexture=r}else o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,null,0),e.depthTexture=void 0;o.bindFramebuffer(o.FRAMEBUFFER,null),this.currentFrameBuffer=void 0}attachStencilTexture(e,r){const o=this.gl;if(!e.glFrameBuffer)throw new Error("Frame buffer has been deleted");if(o.bindFramebuffer(o.FRAMEBUFFER,e.glFrameBuffer),r){if(!r.glTexture)throw new Error("Texture has been deleted");o.framebufferTexture2D(o.FRAMEBUFFER,o.STENCIL_ATTACHMENT,o.TEXTURE_2D,r.glTexture,r.level),e.stencilTexture=r}else o.framebufferTexture2D(o.FRAMEBUFFER,o.STENCIL_ATTACHMENT,o.TEXTURE_2D,null,0),e.stencilTexture=void 0;o.bindFramebuffer(o.FRAMEBUFFER,null),this.currentFrameBuffer=void 0}deleteFrameBuffer(e,r=!1){e.glFrameBuffer&&(this.gl.deleteFramebuffer(e.glFrameBuffer),e.glFrameBuffer=void 0),r&&e.textures.forEach(o=>this.deleteTexture(o))}resizeFrameBuffer(e,r=this.state.width,o=this.state.height){e.textures.forEach(i=>this.resizeTexture(i,r,o)),e.depthTexture&&this.resizeTexture(e.depthTexture,r,o),e.stencilTexture&&this.resizeTexture(e.stencilTexture,r,o)}startCapture(e){this.flush2D(),this.frameBufferStack.push(e)}endCapture(){this.flush2D(),this.frameBufferStack.pop()}switchFrameBuffer(){const e=this.frameBufferStack,r=e.length?e[e.length-1]:void 0;if(r!==this.currentFrameBuffer){this.currentFrameBuffer=r||void 0;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,(r==null?void 0:r.glFrameBuffer)||null)}}disposeGeometry(e){const r=this.gl;e.vao&&(r.deleteVertexArray(e.vao),e.vao=void 0),e.ibo&&(r.deleteBuffer(e.ibo),e.ibo=void 0),e.attributes.forEach(o=>{o.vbo&&(r.deleteBuffer(o.vbo),o.vbo=void 0)})}drawGeometry(e){if(this.drawing2D)throw new Error("Renderer.end2D must be call before draw geometry");const r=this.gl;if(!e.vao){const o=r.createVertexArray();if(!o)throw new Error("Failed to create Vertex Array Object");e.vao=o,r.bindVertexArray(o);const i=this.currentShader;if(!i)throw new Error("Shader not set");const s=this.attribLocations;e.attributes.forEach(n=>{if(n.vbo||(n.vbo=this.createVBO(n.vertices)),s&&s.hasOwnProperty(n.name))this.bindVertexArrayAttribute(s[n.name],n.vbo,n.componentSize);else{const a=i.attributes[n.name];a&&this.bindVertexArrayAttribute(a.location,n.vbo,n.componentSize)}})}switch(r.bindVertexArray(e.vao),e.ibo||(e.ibo=this.createIBO(e.indices)),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.ibo),this.switchFrameBuffer(),e.type){case jt.TYPE_TRIANGLES:r.drawElements(r.TRIANGLES,e.indices.length,r.UNSIGNED_SHORT,0);break;case jt.TYPE_LINES:r.drawElements(r.LINES,e.indices.length,r.UNSIGNED_SHORT,0);break}r.bindVertexArray(null)}begin2D(){if(this.drawing2D)throw new Error("Renderer.end2D must be call before begin");this.drawing2D=!0}end2D(){if(!this.drawing2D)throw new Error("Renderer.begin2D must be call before end");this.flush2D(),this.drawing2D=!1}setCameraPosition(e,r){this.state.cameraX=e,this.state.cameraY=r}centerCamera(){this.setCameraPosition(this.state.width/2,this.state.height/2)}setZoom(e){this.state.zoom=e}setColor(e,r,o,i=1){this.state.color.r=e,this.state.color.g=r,this.state.color.b=o,this.state.color.a=i}flush2D(){if(!!this.drawing2D&&this.batchIndex!==0)switch(this.batchType){case 0:this.flushMesh();break;case 1:this.flushLines();break}}flushMesh(){var l;const e=this.batchTexture,r=this.batchIndex;this.batchIndex=0;const o=this.gl;let i=this.currentShader;if(i||(i=this.IMAGE_2D_SHADER),!i.program)throw new Error("Shader has been deleted");o.useProgram(i.program);const s=i.attributes[Ko];if(s){o.bindBuffer(o.ARRAY_BUFFER,this.batchPositionBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.batchPositionVertices);const d=s.location;o.enableVertexAttribArray(d),o.vertexAttribPointer(d,2,o.FLOAT,!1,0,0)}const n=i.attributes[wl];if(n){o.bindBuffer(o.ARRAY_BUFFER,this.batchTexCoordBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.batchTexCoordVertices);const d=n.location;o.enableVertexAttribArray(d),o.vertexAttribPointer(d,2,o.FLOAT,!1,0,0)}const a=i.attributes[Zo];if(a){o.bindBuffer(o.ARRAY_BUFFER,this.batchColorBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.batchColorVertices);const d=a.location;o.enableVertexAttribArray(d),o.vertexAttribPointer(d,4,o.FLOAT,!1,0,0)}(l=i.uniforms[yl])==null||l.setter(e==null?void 0:e.glTexture),this.switchFrameBuffer(),o.drawArrays(o.TRIANGLES,0,r*6)}flushLines(){const e=this.batchIndex;this.batchIndex=0;const r=this.gl;let o=this.currentShader;if(o||(o=this.COLOR_2D_SHADER),!o.program)throw new Error("Shader has been deleted");r.useProgram(o.program),r.bindBuffer(r.ARRAY_BUFFER,this.batchPositionBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.batchPositionVertices);const i=o.attributes[Ko].location;r.enableVertexAttribArray(i),r.vertexAttribPointer(i,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.batchColorBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.batchColorVertices);const s=o.attributes[Zo].location;r.enableVertexAttribArray(s),r.vertexAttribPointer(s,4,r.FLOAT,!1,0,0),this.switchFrameBuffer(),r.drawArrays(r.LINES,0,e*2)}drawLine(e,r,o,i){if(!this.drawing2D)throw new Error("Renderer.begin2D must be call before draw");(this.batchIndex>=this.batchSize*3||this.batchType!==1)&&this.flush2D(),this.batchType=1;const s=this.state.zoom,n=2/this.state.width*s,a=2/this.state.height*s,l=this.state.cameraX,d=this.state.cameraY,u=this.batchPositionVertices,h=this.batchIndex*2*2;u[h]=(e-l)*n,u[h+1]=(r-d)*a,u[h+2]=(o-l)*n,u[h+3]=(i-d)*a;const p=this.batchIndex*2*4,f=this.batchColorVertices,y=this.state.color;for(let x=0;x<2;++x){const w=x*4;f[p+w]=y.r,f[p+1+w]=y.g,f[p+2+w]=y.b,f[p+3+w]=y.a}this.batchIndex+=1}pushCwQuadVertices(e,r,o,i,s,n,a,l,d,u,h,p,f,y,x,w,b){if(!this.drawing2D)throw new Error("Renderer.begin2D must be call before draw");(this.batchIndex>=this.batchSize||e!==this.batchTexture||this.batchType!==0)&&this.flush2D(),this.batchType=0,this.batchTexture=e;const v=this.batchIndex*3*2*2,m=this.batchPositionVertices,g=this.batchTexCoordVertices;m[v]=r,m[v+1]=o,m[v+2]=i,m[v+3]=s,m[v+4]=l,m[v+5]=d,m[v+6]=i,m[v+7]=s,m[v+8]=n,m[v+9]=a,m[v+10]=l,m[v+11]=d,e.flipY&&([u,h,w,b]=[w,b,u,h],[p,f,y,x]=[y,x,p,f]),g[v]=u,g[v+1]=h,g[v+2]=p,g[v+3]=f,g[v+4]=w,g[v+5]=b,g[v+6]=p,g[v+7]=f,g[v+8]=y,g[v+9]=x,g[v+10]=w,g[v+11]=b;const _=this.batchIndex*3*2*4,C=this.batchColorVertices,S=this.state.color;for(let E=0;E<2*3;++E){const L=E*4;C[_+L]=S.r,C[_+1+L]=S.g,C[_+2+L]=S.b,C[_+3+L]=S.a}this.batchIndex+=1}drawCwQuad(e,r,o,i,s,n,a,l,d,u=0,h=e.height,p=e.width,f=e.height,y=e.width,x=0,w=0,b=0){const v=this.state.zoom,m=2/this.state.width*v,g=2/this.state.height*v,_=1/e.width,C=1/e.height,S=this.state.cameraX,E=this.state.cameraY;this.pushCwQuadVertices(e,(r-S)*m,(o-E)*g,(i-S)*m,(s-E)*g,(n-S)*m,(a-E)*g,(l-S)*m,(d-E)*g,u*_,h*C,p*_,f*C,y*_,x*C,w*_,b*C)}drawRect(e,r=0,o=0,i=e.width,s=e.height,n=!1,a=!1,l=0,d=0,u=e.width,h=e.height){const p=r,f=r+i,y=o+s,x=o;let w=l,b=l+u,v=d,m=d+h;n&&([w,b]=[b,w]),a&&([v,m]=[m,v]),this.drawCwQuad(e,p,x,f,x,f,y,p,y,w,m,b,m,b,v,w,v)}draw(e,r=0,o=0,i=e.width,s=e.height,n=!1,a=!1,l=0,d=0,u=e.width,h=e.height,p=0,f=0,y=0,x=0,w=0,b=1,v=1){const m=r,g=r+i,_=o+s,C=o,S=Math.cos(w),E=Math.sin(w),L=S*b,z=-E*v,V=-S*y*b+p+y+x*E*v,G=E*b,I=S*v,$=-S*x*v+f-y*E*b+x,B=m,A=C,M=g,O=C,Y=g,ee=_,te=m,de=_;let pe=l,ae=l+u,oe=d,he=d+h;n&&([pe,ae]=[ae,pe]),a&&([oe,he]=[he,oe]),this.drawCwQuad(e,L*B+z*A+V,G*B+I*A+$,L*M+z*O+V,G*M+I*O+$,L*Y+z*ee+V,G*Y+I*ee+$,L*te+z*de+V,G*te+I*de+$,pe,he,ae,he,ae,oe,pe,oe)}drawLabel(e,r=0,o=0,i=e.width,s=e.height,n=!1,a=!1,l=0,d=0,u=e.width,h=e.height,p=0,f=0,y=0,x=0,w=0,b=1,v=1){this.draw(e.texture(this),r,o,i,s,n,a,l,d,u,h,p,f,y,x,w,b,v)}};let Hr=Dt;c(Hr,"_sharedInstance");function ti(t,e,r,o,i=Math.min(8,e/2)){let s=0,n=e;const a=Math.ceil(2*Math.PI*e/(i/t.state.zoom)),l=Math.PI*2/a,d=Math.cos(l),u=Math.sin(l),h=r,p=o;for(let f=0;f<a;++f){const y=s*d-n*u,x=s*u+n*d;t.drawLine(s+h,n+p,y+h,x+p),s=y,n=x}}function mt(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}function be(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function Le(t){const e=1/Math.sqrt(t[0]**2+t[1]**2+t[2]**2);return[t[0]*e,t[1]*e,t[2]*e]}function et(t,e){let r=[0,0,0];return ln(r,t,e),Le(r)}function lr(t,e){return an([0,0,0],t,e)}function Rl(t,e){return qr([0,0,0,1],t,e)}function El(t){return sn([0,0,0,1],t)}function ft(t,e){return El(Rl(t,e))}function Ll(t){const e=t.map(Me=>Me.point);function r(...Me){return Me.reduce((tt,rt)=>tt+t[rt].visibility,0)/Me.length}const o=Le(be(mt(e[11],e[12]),mt(e[24],e[23]))),i=Le(be(mt(e[11],e[23]),mt(e[12],e[24]))),s=et(i,o),n=ft(s,o),a=r(11,12,23,24),l=be(mt(e[3],e[6]),mt(e[9],e[10])),d=et(be(e[7],e[8]),l);re(l,l,n),re(d,d,n);const u=r(8,6,5,4,1,2,3,7,0,9,10),h=Le(be(e[11],e[13])),p=et(i,h),f=ft(p,h);re(h,h,n),re(p,p,n);const y=r(11,13),x=Le(be(e[12],e[14])),w=et(i,x),b=ft(w,x);re(x,x,n),re(w,w,n);const v=r(12,14),m=Le(be(e[13],e[15])),g=et(i,m),_=ft(g,m);re(m,m,f),re(g,g,f);const C=r(13,15),S=Le(be(e[14],e[16])),E=et(i,S),L=ft(E,S);re(S,S,b),re(E,E,b);const z=r(14,16),V=Le(be(e[15],mt(e[17],e[19]))),G=lr(V,be(e[21],e[15]));re(V,V,_),re(G,G,_);const I=r(15,17,19,21),$=Le(be(e[16],mt(e[18],e[20]))),B=lr($,be(e[22],e[16]));re($,$,L),re(B,B,L);const A=r(16,18,20,22),M=Le(be(e[23],e[25])),O=et(i,M),Y=ft(O,M);re(M,M,n),re(O,O,n);const ee=r(23,25),te=Le(be(e[24],e[26])),de=et(i,te),pe=ft(de,te);re(te,te,n),re(de,de,n);const ae=r(24,26),oe=Le(be(e[25],e[27])),he=et(i,oe),Te=ft(he,oe);re(oe,oe,Y),re(he,he,Y);const Be=r(25,27),Pe=Le(be(e[26],e[28])),Ue=et(i,Pe),Qe=ft(Ue,Pe);re(Pe,Pe,pe),re(Ue,Ue,pe);const Ye=r(26,28),Se=Le(be(e[31],e[29])),Ge=lr(Se,be(e[27],e[31]));re(Se,Se,Te),re(Ge,Ge,Te);const Ce=r(27,29,31),ke=Le(be(e[32],e[30])),R=lr(ke,be(e[28],e[32]));re(ke,ke,Qe),re(R,R,Qe);const X=r(28,30,32);return{trunk:{up:o,forward:s,visibility:a},head:{up:l,forward:d,visibility:u},leftUpperArm:{up:h,forward:p,visibility:y},leftLowerArm:{up:m,forward:g,visibility:C},leftHand:{up:V,forward:G,visibility:I},leftThigh:{up:M,forward:O,visibility:ee},leftCalf:{up:oe,forward:he,visibility:Be},leftFoot:{up:Ge,forward:Se,visibility:Ce},rightUpperArm:{up:x,forward:w,visibility:v},rightLowerArm:{up:S,forward:E,visibility:z},rightHand:{up:$,forward:B,visibility:A},rightThigh:{up:te,forward:de,visibility:ae},rightCalf:{up:Pe,forward:Ue,visibility:Ye},rightFoot:{up:R,forward:ke,visibility:X}}}var kl=`#version 300 es\r
\r
precision highp float;\r
\r
in vec4 v_color;\r
in vec3 v_normal;\r
\r
uniform vec3 u_directionalLightDirection;\r
uniform vec4 u_color;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = v_color * u_color;\r
    float light = (dot(v_normal, -normalize(u_directionalLightDirection)) + 1.0) * 0.5;\r
    outColor.rgb *= (0.5 + 0.5 * light);\r
}\r
`,Fl=`#version 300 es\r
\r
in vec3 a_position;\r
in vec3 a_normal;\r
in vec4 a_color;\r
\r
uniform mat4 u_pvMatrix;\r
uniform mat4 u_mMatrix;\r
\r
out vec4 v_color;\r
out vec3 v_normal;\r
\r
void main() {\r
    gl_Position = u_pvMatrix * u_mMatrix * vec4(a_position, 1.0);\r
    v_color = a_color;\r
    v_normal = transpose(inverse(mat3(u_mMatrix))) * normalize(a_normal);\r
}\r
`,Il=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec2 v_texCoord;\r
in vec4 v_color;\r
\r
uniform sampler2D u_texture;\r
uniform sampler2D u_deep;\r
uniform float u_threshold;\r
\r
out vec4 outColor;\r
\r
vec4 getPixel(sampler2D texture, int dx, int dy) {\r
    ivec2 texSize = textureSize(texture, 0);\r
    ivec2 pos = ivec2(v_texCoord.xy * vec2(texSize.xy));\r
    int x = max(0, min(texSize.x - 1, pos.x + dx));\r
    int y = max(0, min(texSize.y - 1, pos.y + dy));\r
    return texelFetch(texture, ivec2(x, y), 0);\r
}\r
\r
void main() {\r
    float deep = texture(u_deep, v_texCoord).x;\r
    if (\r
    deep - getPixel(u_deep, -1, 0).x > u_threshold && getPixel(u_texture, -1, 0).a == 1.0\r
    || deep - getPixel(u_deep, 1, 0).x > u_threshold && getPixel(u_texture, 1, 0).a == 1.0\r
    || deep - getPixel(u_deep, 0, -1).x > u_threshold && getPixel(u_texture, 0, -1).a == 1.0\r
    || deep - getPixel(u_deep, 0, 1).x > u_threshold && getPixel(u_texture, 0, 1).a == 1.0\r
    ) {\r
        outColor = v_color;\r
    }\r
}\r
`;const jr=8;var Ol=se({components:{NSpin:cn,NIcon:Vo,NPopconfirm:rl,InfoCircleOutlined:Cn,UndoOutlined:Ln},props:{model:Nr,camera:Go,landmarks:Array,readonly:Boolean,highlights:Array},setup(t){const e=D(),r=D(),o=D(!1);let i=0,s=0,n,a,l,d,u,h;const p=[0,-1,0],f=t.camera||new Go;f.far=5;const y=new ml;y.callback=I;const x=t.model||new Nr;let w=null,b=!1,v=!1;const m=new Xo,g=ve(),_=ve(),C=ve(),S=wr(),E=ve(),L=ve();Je(async function(){try{o.value=!0,await x.init()}finally{o.value=!1}n=new Hr(r.value),a=n.createShader(Fl,kl),l=n.createShader(qo,Il),d=n.createEmptyTexture(),d.flipY=!0,u=n.createDepthTexture(),u.flipY=!0,h=n.createFrameBuffer(),n.attachColorTexture(h,d),n.attachDepthTexture(h,u),G(),y.setup(r.value),V(t.landmarks)}),St(function(){n.deleteShader(a),n.deleteShader(l),n.deleteFrameBuffer(h,!0),y.unload(r.value)}),Oe(()=>t.landmarks,V),Oe(()=>t.highlights,function(B){Object.keys(q).forEach(A=>{const M=x[A];(B==null?void 0:B.length)?M.active=!!B.includes(A):M.active=!0}),$()});function z(){Object.keys(q).forEach(B=>{const A=x[B];A.forward=[0,0,1],A.up=[0,1,0]}),f.zoom=1,f.rotateX=0,f.rotateY=0,Ne(f.target,0,0,0),f.update(),x.update(f.camera),$()}function V(B){if(B==null?void 0:B.length){const A=Ll(B);Object.keys(q).forEach(M=>{const O=x[M],Y=A[M];O.forward=Y.forward,O.up=Y.up,O.active=Y.visibility>dn})}else Object.keys(q).forEach(A=>{const M=x[A];M.forward=[0,0,1],M.up=[0,1,0],M.active=!0});f.zoom=1,f.rotateX=0,f.rotateY=0,Ne(f.target,0,0,0),f.update(),x.update(f.camera),$()}function G(){const B=e.value.getBoundingClientRect();i=B.width,s=B.height,n.resizeCanvas(i,s),n.resizeFrameBuffer(h),f.fitViewport(i,s)}function I(B){if(f.onInput(B),x.update(f.camera),!t.readonly){if(B.mouseLeft||(b=!1),v&&!B.isKeyPressed("Shift")&&(v=!1,b=!1),!b){w=null;let O=1/0;if(x.root){const Y=[x.root];for(;;){const ee=Y.pop();if(!ee)break;if(Y.push(...ee.children),!ee.controlPoint)continue;const te=(ee.controlPointScreenPosition[0]+1)/2*i,de=(ee.controlPointScreenPosition[1]+1)/2*s;bl(B.mouseX,s-B.mouseY,te,de,jr)&&ee.controlPointScreenPosition[2]<O&&(w=ee,O=ee.controlPointScreenPosition[2])}}}const A=(B.mouseX/i-.5)*2,M=(-B.mouseY/s+.5)*2;if((B.mouseLeft&&!b||B.isKeyPressedThisFrame("Shift")&&b)&&w){b=!0;const O=w;cl(m,A,M,O.originWorldPosition[0],O.originWorldPosition[1],O.originWorldPosition[2],O.controlPointWorldPosition[0],O.controlPointWorldPosition[1],O.controlPointWorldPosition[2],f.camera),Bt(g,O.originWorldPosition),Bt(_,O.controlPointWorldPosition),O.parent&&(xr(_,_,O.parent.worldMatrix),xr(g,g,O.parent.worldMatrix)),_t(_,_,g),$t(_,_),Bt(E,O.forward),Bt(L,O.up)}else if(B.mouseLeft&&b&&w){if(B.isKeyPressed("Shift")){v=!0;const O=A-m.dragStartMousePosition[0],Y=M-m.dragStartMousePosition[1],ee=O+Y;un(S,_,ee*Math.PI*2);const te=w;re(te.forward,E,S),$t(te.forward,te.forward),re(te.up,L,S),$t(te.up,te.up),x.update(f.camera,te)}else if(dl(m,A,M,f.camera)){const O=w;Bt(C,m.rayResult1),O.parent&&xr(C,C,O.parent.worldMatrix),_t(C,C,g),hn(S,_,C),re(O.forward,E,S),$t(O.forward,O.forward),re(O.up,L,S),$t(O.up,O.up),x.update(f.camera,O)}}}$()}function $(){if(n.blendMode(n.BLEND_MODE_PIGMENT),n.depthTest(!0),n.cullFace(n.SIDE_BACK),n.startCapture(h),n.clearColor(0,0,0,0),n.clear(!0,!0,!1),n.useShader(a),n.uniform("u_directionalLightDirection",p),n.uniform("u_pvMatrix",f.pvMatrix),x.render(n),n.endCapture(),n.save(),n.depthTest(!1),n.clearColor(242/255,242/255,242/255,1),n.clear(!0,!1,!1),n.centerCamera(),n.begin2D(),n.setColor(1,1,1,1),n.useShader(),n.draw(d),n.setColor(0,0,0,.5),n.useShader(l),n.uniform("u_threshold",1/1e3/(f.far/2)),n.uniform("u_deep",u),n.draw(d),n.end2D(),n.restore(),!t.readonly){n.depthTest(!1),n.useShader(),n.begin2D();const B=[x.root];for(;;){const A=B.pop();if(!A)break;if(B.push(...A.children),A.controlPoint){A.active?n.setColor(1,0,0,A===w?1:.25):n.setColor(0,0,0,A===w?1:.25);const M=A.controlPointScreenPosition;ti(n,jr,M[0]*i/2,M[1]*s/2),ti(n,jr-2,M[0]*i/2,M[1]*s/2)}}n.end2D()}}return{container:e,canvas:r,loading:o,reset:z}}});const Dl={class:"skeleton",ref:"container"},zl={ref:"canvas"},Bl={class:"anchor",style:{top:"4px",left:"4px"}},$l={href:"https://sketchfab.com/3d-models/skeleton-4de7b96a351a4a35b1b6e5415277ff07",target:"_blank",title:"Author of the original model"},Ul={key:0,class:"anchor",style:{top:"4px",right:"4px"}},Vl=lt(" Reset model? ");function Nl(t,e,r,o,i,s){const n=qe("n-spin"),a=qe("info-circle-outlined"),l=qe("n-icon"),d=qe("undo-outlined"),u=qe("n-popconfirm");return $e(),dt("div",Dl,[me(n,{show:t.loading},{default:ut(()=>[De("canvas",zl,null,512)]),_:1},8,["show"]),De("div",Bl,[De("a",$l,[me(l,{size:"16",color:"#000",class:"icon-btn"},{default:ut(()=>[me(a)]),_:1})])]),t.readonly?Wt("",!0):($e(),dt("div",Ul,[me(u,{onPositiveClick:t.reset},{trigger:ut(()=>[me(l,{size:"22",color:"#000",class:"icon-btn",title:"Reset"},{default:ut(()=>[me(d)]),_:1})]),default:ut(()=>[Vl]),_:1},8,["onPositiveClick"])]))],512)}var Wl=Yr(Ol,[["render",Nl]]);function Hl(){var t;return!!((t=document.createElement("canvas"))==null?void 0:t.getContext("webgl2"))}function jl(){return"PointerEvent"in window}class Xl{constructor(){c(this,"chunks",[])}async load(e){const r=await Pr.readJson("dataset/summary.json"),o=[],i=[];for(let a of r){const l=a.index;let d=Pr.readJson(`dataset/photos_${l}.json`);o.push(d);let u={};for(let h in ge){const p=u[h]=Pr.read(`dataset/f_${ge[h].filename}_${l}.dat`);o.push(p)}i.push({photos:d,buffers:u})}const s=o.length;let n=0;o.forEach(a=>a.then(()=>{n+=1,e(n,s)})),await Promise.all(o);for(let a of i){const l=await a.photos,d={};for(let u in a.buffers)d[u]=new Float32Array(await a.buffers[u]);this.chunks.push({photos:l,buffers:d})}}}const ri=Math.PI/180*45;class Yl{constructor(){c(this,"rotation",[0,0,0,0])}prepare(e){const r=xe(We(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),We(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),o=xe(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition);this.rotation=Ct(o,r)}match(e,r,o){const i=ge.chest.getChestRotation(r.chest,o);if(wt(i))return;const s=Ie(this.rotation,i),n=Ie(this.rotation,Ke(i));if(n>ri&&s>ri)return;const a=Math.PI-s,l=Math.PI-n;e.accepted=!0,a>l?e.score=a:(e.score=l,e.flipped=!0)}}const oi=Math.PI/180*45;class Gl{constructor(){c(this,"rotation",[0,0,0,0])}prepare(e){const r=xe(We(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),We(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),o=xe(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition);this.rotation=Ct(o,r)}match(e,r,o){const i=ge.crotch.getCrotchRotation(r.crotch,o);if(wt(i))return;const s=Ie(this.rotation,i),n=Ie(this.rotation,Ke(i));if(n>oi&&s>oi)return;const a=Math.PI-s,l=Math.PI-n;e.accepted=!0,a>l?e.score=a:(e.score=l,e.flipped=!0)}}const kt=Math.PI/180*45,cr=Math.PI/180*60,Ft=[0,0,1];class ii{constructor(e){c(this,"isLeft");c(this,"upperArmZAxisAngle",0);c(this,"lowerArmZAxisAngle",0);c(this,"elbowAngle",0);c(this,"elbowViewAngle",0);c(this,"upperArmLocalDir",[0,0,0]);c(this,"upperArmLocalDirMirror",[0,0,0]);c(this,"chestRotation",[0,0,0,1]);this.isLeft=e}prepare(e){let r=e.rightUpperArm.originViewPosition,o=e.rightUpperArm.controlPointViewPosition,i=e.rightLowerArm.controlPointViewPosition;this.isLeft&&(r=e.leftUpperArm.originViewPosition,o=e.leftUpperArm.controlPointViewPosition,i=e.leftLowerArm.controlPointViewPosition);const s=xe(r,o),n=xe(o,i);this.upperArmZAxisAngle=ce(Ft,s),this.lowerArmZAxisAngle=ce(Ft,n),this.elbowAngle=ce(s,n),this.elbowViewAngle=At(to(o,r,o,i))-Math.PI,this.isLeft?(this.upperArmLocalDir=Ae(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=Ae(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0)):(this.upperArmLocalDir=Ae(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=Ae(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0));const a=xe(We(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),We(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),l=xe(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition);this.chestRotation=Ct(l,a)}match(e,r,o){const i=ge.chest.getChestRotation(r.chest,o);if(wt(i))return;const s=ge.upperArm.getLeftUpperArmDir(r.upperArm,o),n=ge.lowerArm.getLeftLowerArmDir(r.lowerArm,o),a=ge.upperArm.getRightUpperArmDir(r.upperArm,o),l=ge.lowerArm.getRightLowerArmDir(r.lowerArm,o),d=ce(Ft,s),u=ce(Ft,n),h=ce(s,n),p=At(Qt(Jt(s),n))-Math.PI,f=Math.abs(this.upperArmZAxisAngle-d),y=Math.abs(this.lowerArmZAxisAngle-u),x=Math.abs(this.elbowAngle-h),w=Math.abs(this.elbowViewAngle-p*(this.isLeft?1:-1)),b=ce(s,this.isLeft?this.upperArmLocalDir:this.upperArmLocalDirMirror),v=Ie(this.chestRotation,this.isLeft?i:Ke(i));let m=(Math.PI-f)*(Math.PI-y)*(Math.PI-x)*(Math.PI*2-w)*(Math.PI-b)*(Math.PI-v);const g=ce(Ft,a),_=ce(Ft,l),C=ce(a,l),S=At(Qt(Jt(a),l))-Math.PI,E=Math.abs(this.upperArmZAxisAngle-g),L=Math.abs(this.lowerArmZAxisAngle-_),z=Math.abs(this.elbowAngle-C),V=Math.abs(this.elbowViewAngle-S*(this.isLeft?-1:1)),G=ce(a,this.isLeft?this.upperArmLocalDirMirror:this.upperArmLocalDir),I=Ie(this.chestRotation,this.isLeft?Ke(i):i);let $=(Math.PI-E)*(Math.PI-L)*(Math.PI-z)*(Math.PI*2-V)*(Math.PI-G)*(Math.PI-I);(He(s)||He(n)||f>kt||y>kt||x>cr||w>kt||b>cr)&&(m=-1/0),(He(a)||He(l)||E>kt||L>kt||z>cr||V>kt||G>cr)&&($=-1/0),isFinite(m)&&m>$?(e.accepted=!0,e.score=m,e.flipped=!this.isLeft):isFinite($)&&(e.accepted=!0,e.score=$,e.flipped=this.isLeft)}}const ni=Math.PI/180*45;class Kl{constructor(){c(this,"rotation",[0,0,0,0])}prepare(e){const r=e.head.landmarksViewPosition[0],o=e.head.landmarksViewPosition[1],i=xe(o,r),s=xe(e.head.originViewPosition,e.head.controlPointViewPosition);this.rotation=fn(i,s)}match(e,r,o){const i=ge.face.getFaceRotation(r.face,o);if(wt(i))return;const s=Ie(this.rotation,i),n=Ie(this.rotation,Ke(i));if(n>ni&&s>ni)return;const a=Math.PI-s,l=Math.PI-n;e.accepted=!0,a>l?e.score=a:(e.score=l,e.flipped=!0)}}const dr=Math.PI/180*45;class si{constructor(e){c(this,"isLeft");c(this,"thighLocalDir",[0,0,0]);c(this,"thighLocalDirMirror",[0,0,0]);c(this,"crotchRotation",[0,0,0,1]);this.isLeft=e}prepare(e){this.isLeft?(this.thighLocalDir=Ae(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=Ae(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0)):(this.thighLocalDir=Ae(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=Ae(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0));const r=xe(We(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),We(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),o=xe(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition);this.crotchRotation=Ct(o,r)}match(e,r,o){const i=ge.crotch.getCrotchRotation(r.crotch,o);if(wt(i))return;const s=ge.thigh.getLeftThighDir(r.thigh,o),n=ge.thigh.getRightThighDir(r.thigh,o),a=ce(s,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror),l=Ie(this.crotchRotation,this.isLeft?i:Ke(i)),d=ce(n,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir),u=Ie(this.crotchRotation,this.isLeft?Ke(i):i);let h=(Math.PI-a)*(Math.PI-l),p=(Math.PI-d)*(Math.PI-u);(He(s)||a>dr||l>dr)&&(h=-1/0),(He(n)||d>dr||u>dr)&&(p=-1/0),isFinite(h)&&h>p?(e.accepted=!0,e.score=h,e.flipped=!this.isLeft):isFinite(p)&&(e.accepted=!0,e.score=p,e.flipped=this.isLeft)}}const It=Math.PI/180*45,ur=Math.PI/180*60,Ot=[0,0,1];class ai{constructor(e){c(this,"isLeft");c(this,"thighZAxisAngle",0);c(this,"calfZAxisAngle",0);c(this,"kneeAngle",0);c(this,"kneeViewAngle",0);c(this,"thighLocalDir",[0,0,0]);c(this,"thighLocalDirMirror",[0,0,0]);c(this,"crotchRotation",[0,0,0,1]);this.isLeft=e}prepare(e){let r=e.rightThigh.originViewPosition,o=e.rightThigh.controlPointViewPosition,i=e.rightCalf.controlPointViewPosition;this.isLeft&&(r=e.leftThigh.originViewPosition,o=e.leftThigh.controlPointViewPosition,i=e.leftCalf.controlPointViewPosition);const s=xe(r,o),n=xe(o,i);this.thighZAxisAngle=ce(Ot,s),this.calfZAxisAngle=ce(Ot,n),this.kneeAngle=ce(s,n),this.kneeViewAngle=At(to(o,r,o,i))-Math.PI,this.isLeft?(this.thighLocalDir=Ae(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=Ae(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0)):(this.thighLocalDir=Ae(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=Ae(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0));const a=xe(We(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),We(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),l=xe(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition);this.crotchRotation=Ct(l,a)}match(e,r,o){const i=ge.crotch.getCrotchRotation(r.crotch,o);if(wt(i))return;const s=ge.thigh.getLeftThighDir(r.thigh,o),n=ge.calf.getLeftCalfDir(r.calf,o),a=ge.thigh.getRightThighDir(r.thigh,o),l=ge.calf.getRightCalfDir(r.calf,o),d=ce(Ot,s),u=ce(Ot,n),h=ce(s,n),p=At(Qt(Jt(s),n))-Math.PI,f=Math.abs(this.thighZAxisAngle-d),y=Math.abs(this.calfZAxisAngle-u),x=Math.abs(this.kneeAngle-h),w=Math.abs(this.kneeViewAngle-p*(this.isLeft?1:-1)),b=ce(s,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror),v=Ie(this.crotchRotation,this.isLeft?i:Ke(i));let m=(Math.PI-f)*(Math.PI-y)*(Math.PI-x)*(Math.PI*2-w)*(Math.PI-b)*(Math.PI-v);const g=ce(Ot,a),_=ce(Ot,l),C=ce(a,l),S=At(Qt(Jt(a),l))-Math.PI,E=Math.abs(this.thighZAxisAngle-g),L=Math.abs(this.calfZAxisAngle-_),z=Math.abs(this.kneeAngle-C),V=Math.abs(this.kneeViewAngle-S*(this.isLeft?-1:1)),G=ce(a,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir),I=Ie(this.crotchRotation,this.isLeft?Ke(i):i);let $=(Math.PI-E)*(Math.PI-L)*(Math.PI-z)*(Math.PI*2-V)*(Math.PI-G)*(Math.PI-I);(He(s)||He(n)||f>It||y>It||x>ur||w>It||b>ur)&&(m=-1/0),(He(a)||He(l)||E>It||L>It||z>ur||V>It||G>ur)&&($=-1/0),isFinite(m)&&m>$?(e.accepted=!0,e.score=m,e.flipped=!this.isLeft):isFinite($)&&(e.accepted=!0,e.score=$,e.flipped=this.isLeft)}}const hr=Math.PI/180*45;class li{constructor(e){c(this,"isLeft");c(this,"shoulderLocalDir",[0,0,0]);c(this,"shoulderLocalDirMirror",[0,0,0]);c(this,"chestRotation",[0,0,0,1]);this.isLeft=e}prepare(e){this.isLeft?(this.shoulderLocalDir=Ae(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=Ae(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0)):(this.shoulderLocalDir=Ae(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=Ae(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0));const r=xe(We(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),We(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),o=xe(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition);this.chestRotation=Ct(o,r)}match(e,r,o){const i=ge.chest.getChestRotation(r.chest,o);if(wt(i))return;const s=ge.upperArm.getLeftUpperArmDir(r.upperArm,o),n=ge.upperArm.getRightUpperArmDir(r.upperArm,o),a=ce(s,this.isLeft?this.shoulderLocalDir:this.shoulderLocalDirMirror),l=Ie(this.chestRotation,this.isLeft?i:Ke(i)),d=ce(n,this.isLeft?this.shoulderLocalDirMirror:this.shoulderLocalDir),u=Ie(this.chestRotation,this.isLeft?Ke(i):i);let h=(Math.PI-a)*(Math.PI-l),p=(Math.PI-d)*(Math.PI-u);(He(s)||a>hr||l>hr)&&(h=-1/0),(He(n)||d>hr||u>hr)&&(p=-1/0),isFinite(h)&&h>p?(e.accepted=!0,e.score=h,e.flipped=!this.isLeft):isFinite(p)&&(e.accepted=!0,e.score=p,e.flipped=this.isLeft)}}function Zl(t,e,r){r.prepare(t);const o={score:0,flipped:!1,accepted:!1},i=[];for(let s of e)for(let n=0,a=s.photos.length;n<a;++n)if(o.score=0,o.accepted=!1,o.flipped=!1,r.match(o,s.buffers,n),o.accepted){let l=i.length;for(let d=0,u=i.length;d<u;++d)if(i[d].score<=o.score){l=d;break}if(l<ro){const d=s.photos[n];i.splice(l,0,{id:d[0],url:d[1],score:o.score,flipped:o.flipped}),i.length>ro&&i.pop()}}return i}const Xr={Face:{matcher:new Kl,highlights:[q.head]},Chest:{matcher:new Yl,highlights:[q.trunk]},"Left Shoulder":{matcher:new li(!0),highlights:[q.trunk,q.leftUpperArm]},"Right Shoulder":{matcher:new li(!1),highlights:[q.trunk,q.rightUpperArm]},"Left Elbow":{matcher:new ii(!0),highlights:[q.leftUpperArm,q.leftLowerArm]},"Right Elbow":{matcher:new ii(!1),highlights:[q.rightUpperArm,q.rightLowerArm]},Crotch:{matcher:new Gl,highlights:[q.trunk]},"Left Hip":{matcher:new si(!0),highlights:[q.trunk,q.leftThigh]},"Right Hip":{matcher:new si(!1),highlights:[q.trunk,q.rightThigh]},"Left Knee":{matcher:new ai(!0),highlights:[q.leftThigh,q.leftCalf]},"Right Knee":{matcher:new ai(!1),highlights:[q.rightThigh,q.rightCalf]}};var ql=se({components:{NButton:br,NSelect:Ha,NIcon:Vo,WarningOutlined:In,SearchOutlined:Mn,SkeletonModelCanvas:Wl},setup(){const t=Hl(),e=jl(),r=new Xl,o=new Nr,i=D(!1),s=Object.keys(Xr).map(u=>({value:u,label:u})),n=D(),a=D(),l=D([]);Je(async function(){try{i.value=!0,await r.load(function(u,h){})}finally{i.value=!1}});async function d(){l.value=[],a.value.scrollTop=0,await yt(),l.value=Zl(o,r.chunks,Xr[n.value].matcher)}return{supportWebGL2:t,supportMouse:e,model:o,matchers:Xr,loadingData:i,bodyPartOptions:s,bodyPart:n,searchResultsContainerDom:a,searchResults:l,onSearch:d}}});const Ql={class:"container rows"},Jl={class:"cols",style:{"font-weight":"bold","align-items":"center"}},ec=De("a",{href:"https://www.human-anatomy-for-artist.com/",target:"_blank"},"Human Anatomy for Artist",-1),tc=lt(" \xA0Unofficial Search Helper "),rc={class:"fill cols"},oc={class:"rows",style:{width:"320px",height:"100%",overflow:"auto"}},ic={class:"cols"},nc=lt(" Search "),sc=De("div",{class:"description"},[De("div",null,"Wheel: Rotate Camera / Zoom"),De("div",null,"Mouse Right: Move Camera"),De("div",null,"Shift + Mouse Left: Rotate Joint")],-1),ac=yn('<div class="description"><div> This page is a third party search helper for <a href="https://www.human-anatomy-for-artist.com" target="_blank">human-anatomy-for-artist.com</a>. </div><div> I recorded the <a href="https://google.github.io/mediapipe/solutions/pose.html" target="_blank">AI-identified</a> poses of some of the photos to allow you to search for them by the 3D model above. </div><div> Currently less than 1% of the photos are included. More data will be added slowly. </div><div><a href="https://github.com/x6ud/x6ud.github.io/issues" target="_blank">Leave a message</a></div><div><a href="https://github.com/x6ud/human-anatomy-for-artist-search-helper" target="_blank"> Source code </a></div><div> Another <a href="https://x6ud.github.io/pose-search" target="_blank"> tool for searching photos by pose</a></div></div>',1),lc={class:"scroll-list fill",ref:"searchResultsContainerDom"},cc={key:0,class:"loading"},dc={key:1,class:"warning",style:{"font-size":"16px"}},uc={key:0},hc=lt(" This page requires WebGL2 but your system does not seem to support. Try updating your graphics card drivers or changing your browser. "),fc={key:1},pc=lt(" This page currently supports mouse operation only. "),gc=["data-id","href"],vc=["src"];function mc(t,e,r,o,i,s){var p,f,y;const n=qe("search-outlined"),a=qe("n-icon"),l=qe("n-select"),d=qe("n-button"),u=qe("skeleton-model-canvas"),h=qe("warning-outlined");return $e(),dt("div",Ql,[De("div",Jl,[me(a,{size:"20"},{default:ut(()=>[me(n)]),_:1}),ec,tc]),De("div",rc,[De("div",oc,[De("div",ic,[me(l,{class:"fill",size:"small",placeholder:"Joint / Body Part",filterable:"",clearable:"",options:t.bodyPartOptions,value:t.bodyPart,"onUpdate:value":e[0]||(e[0]=x=>t.bodyPart=x)},null,8,["options","value"]),me(d,{size:"small",type:"primary",onClick:t.onSearch,disabled:!t.bodyPart},{default:ut(()=>[nc]),_:1},8,["onClick","disabled"])]),sc,me(u,{style:{width:"100%",height:"400px","min-height":"400px"},model:t.model,highlights:(p=t.matchers[t.bodyPart])==null?void 0:p.highlights},null,8,["model","highlights"]),ac]),De("div",lc,[t.loadingData&&!((f=t.searchResults)==null?void 0:f.length)?($e(),dt("div",cc," Loading data... ")):Wt("",!0),!((y=t.searchResults)==null?void 0:y.length)&&(!t.supportWebGL2||!t.supportMouse)?($e(),dt("div",dc,[t.supportWebGL2?Wt("",!0):($e(),dt("div",uc,[me(a,null,{default:ut(()=>[me(h)]),_:1}),hc])),t.supportMouse?Wt("",!0):($e(),dt("div",fc,[me(a,null,{default:ut(()=>[me(h)]),_:1}),pc]))])):Wt("",!0),($e(!0),dt(Vt,null,wn(t.searchResults,x=>($e(),dt("a",{class:"item photo","data-id":x.id,href:`https://www.human-anatomy-for-artist.com/photos/show/id/${x.id}`,rel:"noreferrer",target:"_blank"},[De("img",{src:x.url,style:xn({transform:x.flipped?"scaleX(-1)":null}),alt:"",referrerpolicy:"no-referrer"},null,12,vc)],8,gc))),256))],512)])])}var _c=Yr(ql,[["render",mc]]);export{_c as default};
//# sourceMappingURL=Search.c44fff11.js.map
