var zi=Object.defineProperty;var Bi=(t,e,o)=>e in t?zi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var c=(t,e,o)=>(Bi(t,typeof e!="symbol"?e+"":e,o),o);import{_ as Ue,a as Ko}from"./index.9c0912b8.js";import{w as po,u as at,r as $i,c as X,a as J,b as he,d as Ui,N as Yt,o as De,e as Xe,C as Vi,f as go,i as vo,g as mo,V as Gt,p as Kt,h as lt,j as Q,k as wt,l as Te,m as Zt,n as Ni,q as Se,s as Wi,t as Hi,v as ct,x as qt,y as ji,z as Zo,A as Xi,B as bo,D as qo,E as Ee,F as oe,G as Yi,H as Gi,I as Ki,J as Zi,K as qi,L as wo,M as yo,O as Qo,P as ye,Q as Jo,R as Qi,S as xo,T as Ji,U as dt,W as Ye,X as _t,Y as en,Z as er,_ as tn,$ as tr,a0 as or,a1 as Tt,a2 as on,a3 as $t,a4 as rn,a5 as nn,a6 as ee,a7 as sn,a8 as an,a9 as ln,aa as cn,ab as dn,ac as un,ad as Ut,ae as Po,af as Vt,ag as hn,ah as fn,ai as _o,aj as ge,ak as Me,al as Ge,am as Ct,an as yt,ao as Ve,ap as Je,aq as le,ar as At,as as rr,at as Fe,au as Qt,av as Jt,aw as Ke,ax as pn,ay as ir}from"./feature-buffers.be4220ab.js";import{f as Nt,W as gn}from"./Warning.50ec4495.js";import{e as se,o as Ne,c as eo,f as xe,g as B,h as nr,w as We,i as rt,j as St,k as Ze,F as Mt,C as vn,l as qe,m as x,t as pe,p as ut,n as mn,q as to,s as N,T as bn,u as xt,v as oo,x as et,y as To,z as Wt,A as sr,B as wn,r as tt,D as it,E as ht,G as de,H as Rt,I as Co,J as yn,K as xn}from"./vendor.50301a75.js";const Pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},_n=xe("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z",fill:"currentColor"},null,-1),Tn=xe("path",{d:"M464 336a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1);var Cn=se({name:"InfoCircleOutlined",render:function(e,o){return Ne(),eo("svg",Pn,[_n,Tn])}});const An={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Sn=xe("path",{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1c-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z",fill:"currentColor"},null,-1);var Mn=se({name:"SearchOutlined",render:function(e,o){return Ne(),eo("svg",An,[Sn])}});const Rn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},En=xe("path",{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 0 0-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7c29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6c29.4 29.4 52.5 63.6 68.6 101.7c16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 0 1-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 0 0-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z",fill:"currentColor"},null,-1);var Ln=se({name:"UndoOutlined",render:function(e,o){return Ne(),eo("svg",Rn,[En])}});const kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Fn=xe("path",{d:"M464 720a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z",fill:"currentColor"},null,-1);var In=se({name:"WarningOutlined",render:function(e,o){return Ne(),eo("svg",kn,[Fn])}});let ro=[];const ar=new WeakMap;function On(){ro.forEach(t=>t(...ar.get(t))),ro=[]}function lr(t,...e){ar.set(t,e),!ro.includes(t)&&ro.push(t)===1&&requestAnimationFrame(On)}function Ao(t,e){let{target:o}=t;for(;o;){if(o.dataset&&o.dataset[e]!==void 0)return!0;o=o.parentElement}return!1}function Dn(t){const e=B(!!t.value);if(e.value)return nr(e);const o=We(t,r=>{r&&(e.value=!0,o())});return nr(e)}const zn=typeof window!="undefined";let Et,Ht;const Bn=()=>{var t,e;Et=zn?(e=(t=document)===null||t===void 0?void 0:t.fonts)===null||e===void 0?void 0:e.ready:void 0,Ht=!1,Et!==void 0?Et.then(()=>{Ht=!0}):Ht=!0};Bn();function $n(t){if(Ht)return;let e=!1;rt(()=>{Ht||Et==null||Et.then(()=>{e||t()})}),St(()=>{e=!0})}const Un=(typeof window=="undefined"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function Vn(){return Un}function cr(t,e=[],o){const r={};return e.forEach(i=>{r[i]=t[i]}),Object.assign(r,o)}function Nn(t,e=[],o){const r={};return Object.getOwnPropertyNames(t).forEach(s=>{e.includes(s)||(r[s]=t[s])}),Object.assign(r,o)}function So(t,e=!0,o=[]){return t.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&o.push(Ze(String(r)));return}if(Array.isArray(r)){So(r,e,o);return}if(r.type===Mt){if(r.children===null)return;Array.isArray(r.children)&&So(r.children,e,o)}else r.type!==vn&&o.push(r)}}),o}function Wn(t){return Object.keys(t)}const Lt=(t,...e)=>typeof t=="function"?t(...e):typeof t=="string"?Ze(t):typeof t=="number"?Ze(String(t)):null;function Hn(t){switch(typeof t){case"string":return t||void 0;case"number":return String(t);default:return}}function dr(t,e="default",o=void 0){const r=t[e];if(!r)return po("getFirstSlotVNode",`slot[${e}] is empty`),null;const i=So(r(o));return i.length===1?i[0]:(po("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}const ur=Symbol("modalBody"),hr=Symbol("drawerBody"),fr=Symbol("popoverBodyInjection"),Mo=Symbol("internal-select-menu"),pr=Symbol("internal-select-menu-body"),gr="__disabled__";function ft(t){const e=qe(ur,null),o=qe(hr,null),r=qe(fr,null),i=qe(pr,null);return at(()=>{var s;const{to:n}=t;return n!==void 0?n===!1?gr:n===!0?"body":n:(e==null?void 0:e.value)?(s=e.value.$el)!==null&&s!==void 0?s:e.value:(o==null?void 0:o.value)?o.value:(r==null?void 0:r.value)?r.value:(i==null?void 0:i.value)?i.value:n!=null?n:"body"})}ft.tdkey=gr;ft.propTo={type:[String,Object,Boolean],default:void 0};var jn=se({name:"Checkmark",render(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},x("g",{fill:"none"},x("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),Xn=$i("close",x("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},x("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},x("g",{fill:"currentColor","fill-rule":"nonzero"},x("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),Yn=se({name:"Empty",render(){return x("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},x("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),x("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),Gn=X("base-close",`
 cursor: pointer;
 color: var(--close-color);
`,[J("&:hover",{color:"var(--close-color-hover)"}),J("&:active",{color:"var(--close-color-pressed)"}),he("disabled",{cursor:"not-allowed!important",color:"var(--close-color-disabled)"})]),Kn=se({name:"BaseClose",props:{clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},onClick:Function},setup(t){return Ui("BaseClose",Gn,pe(t,"clsPrefix")),()=>{const{clsPrefix:e,disabled:o}=t;return x(Yt,{role:"button",ariaDisabled:o,ariaLabel:"close",clsPrefix:e,class:[`${e}-base-close`,o&&`${e}-base-close--disabled`],onClick:o?void 0:t.onClick},{default:()=>x(Xn,null)})}}}),Zn=se({props:{onFocus:Function,onBlur:Function},setup(t){return()=>x("div",{style:"width: 0; height: 0",tabindex:0,onFocus:t.onFocus,onBlur:t.onBlur})}});function vr(t){return Array.isArray(t)?t:[t]}const Ro={STOP:"STOP"};function mr(t,e){const o=e(t);t.children!==void 0&&o!==Ro.STOP&&t.children.forEach(r=>mr(r,e))}function qn(t,e={}){const{preserveGroup:o=!1}=e,r=[],i=o?n=>{n.isLeaf||(r.push(n.key),s(n.children))}:n=>{n.isLeaf||(n.isGroup||r.push(n.key),s(n.children))};function s(n){n.forEach(i)}return s(t),r}function Qn(t,e){const{isLeaf:o}=t;return o!==void 0?o:!e(t)}function Jn(t){return t.children}function es(t){return t.key}function ts(){return!1}function os(t,e){const{isLeaf:o}=t;return!(o===!1&&!Array.isArray(e(t)))}function rs(t){return t.disabled===!0}function is(t,e){return t.isLeaf===!1&&!Array.isArray(e(t))}function Eo(t){var e;return t==null?[]:Array.isArray(t)?t:(e=t.checkedKeys)!==null&&e!==void 0?e:[]}function Lo(t){var e;return t==null||Array.isArray(t)?[]:(e=t.indeterminateKeys)!==null&&e!==void 0?e:[]}function ns(t,e){const o=new Set(t);return e.forEach(r=>{o.has(r)||o.add(r)}),Array.from(o)}function ss(t,e){const o=new Set(t);return e.forEach(r=>{o.has(r)&&o.delete(r)}),Array.from(o)}function as(t){return(t==null?void 0:t.type)==="group"}function ls(t){const e=new Map;return t.forEach((o,r)=>{e.set(o.key,r)}),o=>{var r;return(r=e.get(o))!==null&&r!==void 0?r:null}}class cs extends Error{constructor(){super();this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function ds(t,e,o){return io(e.concat(t),o)}function us(t,e){const o=new Set;return t.forEach(r=>{const i=e.treeNodeMap.get(r);if(i!==void 0){let s=i.parent;for(;s!==null&&!(s.disabled||o.has(s.key));)o.add(s.key),s=s.parent}}),o}function hs(t,e,o){const r=io(e,o),i=io(t,o,!0),s=us(t,o),n=[];return r.forEach(a=>{(i.has(a)||s.has(a))&&n.push(a)}),n.forEach(a=>r.delete(a)),r}function ko(t,e){const{checkedKeys:o,keysToCheck:r,keysToUncheck:i,indeterminateKeys:s,cascade:n,leafOnly:a,checkStrategy:l}=t;if(!n)return r!==void 0?{checkedKeys:ns(o,r),indeterminateKeys:Array.from(s)}:i!==void 0?{checkedKeys:ss(o,i),indeterminateKeys:Array.from(s)}:{checkedKeys:Array.from(o),indeterminateKeys:Array.from(s)};const{levelTreeNodeMap:d}=e;let h;i!==void 0?h=hs(i,o,e):r!==void 0?h=ds(r,o,e):h=io(o,e);const f=l==="parent",p=l==="child"||a,u=h,y=new Set,w=Math.max.apply(null,Array.from(d.keys()));for(let A=w;A>=0;A-=1){const b=A===0,g=d.get(A);for(const m of g){if(m.isLeaf)continue;const{key:v,shallowLoaded:C}=m;if(p&&C&&m.children.forEach(L=>{!L.disabled&&!L.isLeaf&&L.shallowLoaded&&u.has(L.key)&&u.delete(L.key)}),m.disabled||!C)continue;let T=!0,S=!1,R=!0;for(const L of m.children){const $=L.key;if(!L.disabled){if(R&&(R=!1),u.has($))S=!0;else if(y.has($)){S=!0,T=!1;break}else if(T=!1,S)break}}T&&!R?(f&&m.children.forEach(L=>{!L.disabled&&u.has(L.key)&&u.delete(L.key)}),u.add(v)):S&&y.add(v),b&&p&&u.has(v)&&u.delete(v)}}return{checkedKeys:Array.from(u),indeterminateKeys:Array.from(y)}}function io(t,e,o=!1){const{treeNodeMap:r,getChildren:i}=e,s=new Set,n=new Set(t);return t.forEach(a=>{const l=r.get(a);l!==void 0&&mr(l,d=>{if(d.disabled)return Ro.STOP;const{key:h}=d;if(!s.has(h)&&(s.add(h),n.add(h),is(d.rawNode,i))){if(o)return Ro.STOP;throw new cs}})}),n}function fs(t,{includeGroup:e=!1,includeSelf:o=!0},r){var i;const s=r.treeNodeMap;let n=t==null?null:(i=s.get(t))!==null&&i!==void 0?i:null;const a={keyPath:[],treeNodePath:[],treeNode:n};if(n==null?void 0:n.ignored)return a.treeNode=null,a;for(;n;)!n.ignored&&(e||!n.isGroup)&&a.treeNodePath.push(n),n=n.parent;return a.treeNodePath.reverse(),o||a.treeNodePath.pop(),a.keyPath=a.treeNodePath.map(l=>l.key),a}function ps(t){if(t.length===0)return null;const e=t[0];return e.isGroup||e.ignored||e.disabled?e.getNext():e}function gs(t,e){const o=t.siblings,r=o.length,{index:i}=t;return e?o[(i+1)%r]:i===o.length-1?null:o[i+1]}function br(t,e,{loop:o=!1,includeDisabled:r=!1}={}){const i=e==="prev"?vs:gs,s={reverse:e==="prev"};let n=!1,a=null;function l(d){if(d!==null){if(d===t){if(!n)n=!0;else if(!t.disabled&&!t.isGroup){a=t;return}}else if((!d.disabled||r)&&!d.ignored&&!d.isGroup){a=d;return}if(d.isGroup){const h=Fo(d,s);h!==null?a=h:l(i(d,o))}else{const h=i(d,!1);if(h!==null)l(h);else{const f=ms(d);(f==null?void 0:f.isGroup)?l(i(f,o)):o&&l(i(d,!0))}}}}return l(t),a}function vs(t,e){const o=t.siblings,r=o.length,{index:i}=t;return e?o[(i-1+r)%r]:i===0?null:o[i-1]}function ms(t){return t.parent}function Fo(t,e={}){const{reverse:o=!1}=e,{children:r}=t;if(r){const{length:i}=r,s=o?i-1:0,n=o?-1:i,a=o?-1:1;for(let l=s;l!==n;l+=a){const d=r[l];if(!d.disabled&&!d.ignored)if(d.isGroup){const h=Fo(d,e);if(h!==null)return h}else return d}}return null}const bs={getChild(){return this.ignored?null:Fo(this)},getParent(){const{parent:t}=this;return(t==null?void 0:t.isGroup)?t.getParent():t},getNext(t={}){return br(this,"next",t)},getPrev(t={}){return br(this,"prev",t)}};function ws(t,e){const o=e?new Set(e):void 0,r=[];function i(s){s.forEach(n=>{r.push(n),!(n.isLeaf||!n.children||n.ignored)&&(n.isGroup||o===void 0||o.has(n.key))&&i(n.children)})}return i(t),r}function ys(t,e){const o=t.key;for(;e;){if(e.key===o)return!0;e=e.parent}return!1}function wr(t,e,o,r,i,s=null,n=0){const a=[];return t.forEach((l,d)=>{var h;const f=Object.create(r);if(f.rawNode=l,f.siblings=a,f.level=n,f.index=d,f.isFirstChild=d===0,f.isLastChild=d+1===t.length,f.parent=s,!f.ignored){const p=i(l);Array.isArray(p)&&(f.children=wr(p,e,o,r,i,f,n+1))}a.push(f),e.set(f.key,f),o.has(n)||o.set(n,[]),(h=o.get(n))===null||h===void 0||h.push(f)}),a}function xs(t,e={}){const o=new Map,r=new Map,{getDisabled:i=rs,getIgnored:s=ts,getChildren:n=Jn,getIsGroup:a=as,getKey:l=es}=e,d=Object.assign({get key(){return l(this.rawNode)},get disabled(){return i(this.rawNode)},get isGroup(){return a(this.rawNode)},get isLeaf(){return Qn(this.rawNode,n)},get shallowLoaded(){return os(this.rawNode,n)},get ignored(){return s(this.rawNode)},contains(g){return ys(this,g)}},bs),h=wr(t,o,r,d,n);function f(g){if(g==null)return null;const m=o.get(g);return m&&!m.isGroup&&!m.ignored?m:null}function p(g){if(g==null)return null;const m=o.get(g);return m&&!m.ignored?m:null}function u(g,m){const v=p(g);return v?v.getPrev(m):null}function y(g,m){const v=p(g);return v?v.getNext(m):null}function w(g){const m=p(g);return m?m.getParent():null}function A(g){const m=p(g);return m?m.getChild():null}const b={treeNodes:h,treeNodeMap:o,levelTreeNodeMap:r,maxLevel:Math.max(...r.keys()),getChildren:n,getFlattenedNodes(g){return ws(h,g)},getNode:f,getPrev:u,getNext:y,getParent:w,getChild:A,getFirstAvailableNode(){return ps(h)},getPath(g,m={}){return fs(g,m,b)},getCheckedKeys(g,m={}){const{cascade:v=!0,leafOnly:C=!1,checkStrategy:T="all"}=m;return ko({checkedKeys:Eo(g),indeterminateKeys:Lo(g),cascade:v,leafOnly:C,checkStrategy:T},b)},check(g,m,v={}){const{cascade:C=!0,leafOnly:T=!1,checkStrategy:S="all"}=v;return ko({checkedKeys:Eo(m),indeterminateKeys:Lo(m),keysToCheck:g==null?[]:vr(g),cascade:C,leafOnly:T,checkStrategy:S},b)},uncheck(g,m,v={}){const{cascade:C=!0,leafOnly:T=!1,checkStrategy:S="all"}=v;return ko({checkedKeys:Eo(m),indeterminateKeys:Lo(m),keysToUncheck:g==null?[]:vr(g),cascade:C,leafOnly:T,checkStrategy:S},b)},getNonLeafKeys(g={}){return qn(h,g)}};return b}function Io(t,e="default"){const o=t[e];if(o===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);return o()}function yr(t,e="default"){const o=t[e];if(o===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);const r=o();if(r.length===1)return r[0];throw new Error(`[vueuc/binder]: slot[${e}] should have exactly one child.`)}let gt=null;function xr(){if(gt===null&&(gt=document.getElementById("v-binder-view-measurer"),gt===null)){gt=document.createElement("div"),gt.id="v-binder-view-measurer";const{style:t}=gt;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(gt)}return gt.getBoundingClientRect()}function Ps(t,e){const o=xr();return{top:e,left:t,height:0,width:0,right:o.width-t,bottom:o.height-e}}function Oo(t){const e=t.getBoundingClientRect(),o=xr();return{left:e.left-o.left,top:e.top-o.top,bottom:o.height+o.top-e.bottom,right:o.width+o.left-e.right,width:e.width,height:e.height}}function _s(t){return t.nodeType===9?null:t.parentNode}function Pr(t){if(t===null)return null;const e=_s(t);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:o,overflowX:r,overflowY:i}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(o+i+r))return e}return Pr(e)}const Ts=se({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(t){var e;ut("VBinder",(e=mn())===null||e===void 0?void 0:e.proxy);const o=qe("VBinder",null),r=B(null),i=b=>{r.value=b,o&&t.syncTargetWithParent&&o.setTargetRef(b)};let s=[];const n=()=>{let b=r.value;for(;b=Pr(b),b!==null;)s.push(b);for(const g of s)Xe("scroll",g,f,!0)},a=()=>{for(const b of s)De("scroll",b,f,!0);s=[]},l=new Set,d=b=>{l.size===0&&n(),l.has(b)||l.add(b)},h=b=>{l.has(b)&&l.delete(b),l.size===0&&a()},f=()=>{lr(p)},p=()=>{l.forEach(b=>b())},u=new Set,y=b=>{u.size===0&&Xe("resize",window,A),u.has(b)||u.add(b)},w=b=>{u.has(b)&&u.delete(b),u.size===0&&De("resize",window,A)},A=()=>{u.forEach(b=>b())};return St(()=>{De("resize",window,A),a()}),{targetRef:r,setTargetRef:i,addScrollListener:d,removeScrollListener:h,addResizeListener:y,removeResizeListener:w}},render(){return Io(this.$slots)}});var _r=Ts,Tr=se({name:"Target",setup(){const{setTargetRef:t,syncTarget:e}=qe("VBinder");return{syncTarget:e,setTargetDirective:{mounted:t,updated:t}}},render(){const{syncTarget:t,setTargetDirective:e}=this;return t?to(yr(this.$slots),[[e]]):yr(this.$slots)}});const kt="@@mmoContext",Cs={mounted(t,{value:e}){t[kt]={handler:void 0},typeof e=="function"&&(t[kt].handler=e,Xe("mousemoveoutside",t,e))},updated(t,{value:e}){const o=t[kt];typeof e=="function"?o.handler?o.handler!==e&&(De("mousemoveoutside",t,o.handler),o.handler=e,Xe("mousemoveoutside",t,e)):(t[kt].handler=e,Xe("mousemoveoutside",t,e)):o.handler&&(De("mousemoveoutside",t,o.handler),o.handler=void 0)},unmounted(t){const{handler:e}=t[kt];e&&De("mousemoveoutside",t,e),t[kt].handler=void 0}};var As=Cs;const Ft="@@coContext",Ss={mounted(t,{value:e}){t[Ft]={handler:void 0},typeof e=="function"&&(t[Ft].handler=e,Xe("clickoutside",t,e))},updated(t,{value:e}){const o=t[Ft];typeof e=="function"?o.handler?o.handler!==e&&(De("clickoutside",t,o.handler),o.handler=e,Xe("clickoutside",t,e)):(t[Ft].handler=e,Xe("clickoutside",t,e)):o.handler&&(De("clickoutside",t,o.handler),o.handler=void 0)},unmounted(t){const{handler:e}=t[Ft];e&&De("clickoutside",t,e),t[Ft].handler=void 0}};var no=Ss;function Ms(t,e){console.error(`[vdirs/${t}]: ${e}`)}class Rs{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,o){const{elementZIndex:r}=this;if(o!==void 0){e.style.zIndex=`${o}`,r.delete(e);return}const{nextZIndex:i}=this;r.has(e)&&r.get(e)+1===this.nextZIndex||(e.style.zIndex=`${i}`,r.set(e,i),this.nextZIndex=i+1,this.squashState())}unregister(e){const{elementZIndex:o}=this;o.has(e)?o.delete(e):Ms("vdirs/z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort((o,r)=>o[1]-r[1]),this.nextZIndex=2e3,e.forEach(o=>{const r=o[0],i=this.nextZIndex++;`${i}`!==r.style.zIndex&&(r.style.zIndex=`${i}`)})}}var Do=new Rs;const zo="@@ziContext",Es={mounted(t,e){const{value:o={}}=e,{zIndex:r,enabled:i}=o;Do.ensureZIndex(t,r),t[zo]={enabled:i}},updated(t,e){const{value:o={}}=e,{zIndex:r,enabled:i}=o,s=t[zo].enabled;i&&!s&&Do.ensureZIndex(t,r),t[zo].enabled=i},unmounted(t){Do.unregister(t)}};var Ls=Es;const{c:vt}=Vi();function Cr(t){return t&-t}class ks{constructor(e,o){this.l=e,this.min=o;const r=new Array(e+1);for(let i=0;i<e+1;++i)r[i]=0;this.ft=r}add(e,o){if(o===0)return;const{l:r,ft:i}=this;for(e+=1;e<=r;)i[e]+=o,e+=Cr(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===0)return 0;const{ft:o,min:r,l:i}=this;if(e===void 0&&(e=i),e>i)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let s=e*r;for(;e>0;)s+=o[e],e-=Cr(e);return s}getBound(e){let o=0,r=this.l;for(;r>o;){const i=Math.floor((o+r)/2),s=this.sum(i);if(s>e){r=i;continue}else if(s<e){if(o===i)return this.sum(o+1)<=e?o+1:i;o=i}else return i}return o}}var Fs=se({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(t){return{showTeleport:Dn(pe(t,"show")),mergedTo:N(()=>{const{to:e}=t;return e!=null?e:"body"})}},render(){return this.showTeleport?this.disabled?Io(this.$slots):x(bn,{disabled:this.disabled,to:this.mergedTo},Io(this.$slots)):null}});const Bo={top:"bottom",bottom:"top",left:"right",right:"left"},Ar={start:"end",center:"center",end:"start"},$o={top:"height",bottom:"height",left:"width",right:"width"},Is={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Os={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Ds={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"};function zs(t,e,o,r,i){if(!r||i)return t;const[s,n]=t.split("-");let a=n!=null?n:"center";if(n!=="center"){const d=Ds[t],h=Bo[d],f=$o[d];o[f]>e[f]&&e[d]+e[f]<=o[f]&&e[d]<e[h]&&(a=Ar[n]),o[f]<e[f]&&e[h]<0&&e[d]>e[h]&&(a=Ar[n])}let l=s;return!(e[s]>=o[$o[s]])&&e[Bo[s]]>=o[$o[s]]&&(l=Bo[s]),a!=="center"?`${l}-${a}`:l}function Bs(t,e){return e?Os[t]:Is[t]}function $s(t,e,o,r){if(r)switch(t){case"bottom-start":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left)}px`,transform:""};case"bottom-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:""};case"right-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%)"}}}const Us=vt([vt(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),vt(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[vt("> *",{pointerEvents:"all"})])]);var Sr=se({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(t){const e=qe("VBinder"),o=at(()=>t.enabled!==void 0?t.enabled:t.show),r=B(null),i=B(null),s=()=>{const{syncTrigger:p}=t;p.includes("scroll")&&e.addScrollListener(l),p.includes("resize")&&e.addResizeListener(l)},n=()=>{e.removeScrollListener(l),e.removeResizeListener(l)};rt(()=>{o.value&&(l(),s())});const a=go();Us.mount({id:"vueuc/binder",head:!0,ssr:a}),St(()=>{n()}),$n(()=>{o.value&&l()});const l=()=>{if(!o.value)return;const p=r.value;if(p===null)return;const u=e.targetRef,{x:y,y:w,overlap:A}=t,b=y!==void 0&&w!==void 0?Ps(y,w):Oo(u),{width:g,minWidth:m,placement:v,flip:C}=t;p.setAttribute("v-placement",v),A?p.setAttribute("v-overlap",""):p.removeAttribute("v-overlap");const{style:T}=p;g==="target"?T.width=`${b.width}px`:g!==void 0?T.width=g:T.width="",m==="target"?T.minWidth=`${b.width}px`:m!==void 0?T.minWidth=m:T.minWidth="";const S=Oo(p),R=Oo(i.value),L=zs(v,b,S,C,A),$=Bs(L,A),{left:V,top:G,transform:z}=$s(L,R,b,A);p.setAttribute("v-placement",L),p.style.transform=`translateX(${V}) translateY(${G}) ${z}`,p.style.transformOrigin=$};We(o,p=>{p?(s(),d()):n()});const d=()=>{xt().then(l).catch(p=>console.error(p))};["placement","x","y","flip","width","overlap","minWidth"].forEach(p=>{We(pe(t,p),l)}),["teleportDisabled"].forEach(p=>{We(pe(t,p),d)}),We(pe(t,"syncTrigger"),p=>{p.includes("resize")?e.addResizeListener(l):e.removeResizeListener(l),p.includes("scroll")?e.addScrollListener(l):e.removeScrollListener(l)});const h=vo(),f=at(()=>{const{to:p}=t;if(p!==void 0)return p;!h.value});return{VBinder:e,mergedEnabled:o,offsetContainerRef:i,followerRef:r,mergedTo:f,syncPosition:l}},render(){return x(Fs,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{const t=x("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[x("div",{class:"v-binder-follower-content",ref:"followerRef"},this.$slots)]);return this.zindexable?to(t,[[Ls,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});const Vs=vt(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[vt("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[vt("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var Ns=se({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(t){const e=go();Vs.mount({id:"vueuc/virtual-list",head:!0,ssr:e}),rt(()=>{const{defaultScrollIndex:v,defaultScrollKey:C}=t;v!=null?f({index:v}):C!=null&&f({key:C})});const o=N(()=>{const v=new Map,{keyField:C}=t;return t.items.forEach((T,S)=>{v.set(T[C],S)}),v}),r=B(null),i=B(void 0),s=new Map,n=N(()=>{const{items:v,itemSize:C,keyField:T}=t,S=new ks(v.length,C);return v.forEach((R,L)=>{const $=R[T],V=s.get($);V!==void 0&&S.add(L,V)}),S}),a=B(0),l=B(0),d=at(()=>Math.max(n.value.getBound(l.value-mo(t.paddingTop))-1,0)),h=N(()=>{const{value:v}=i;if(v===void 0)return[];const{items:C,itemSize:T}=t,S=d.value,R=Math.min(S+Math.ceil(v/T+1),C.length-1),L=[];for(let $=S;$<=R;++$)L.push(C[$]);return L}),f=v=>{const{left:C,top:T,index:S,key:R,position:L,behavior:$,debounce:V=!0}=v;if(C!==void 0||T!==void 0)u(C,T,$);else if(S!==void 0)p(S,$,V);else if(R!==void 0){const G=o.value.get(R);G!==void 0&&p(G,$,V)}else L==="bottom"?u(0,Number.MAX_SAFE_INTEGER,$):L==="top"&&u(0,0,$)};function p(v,C,T){const{value:S}=n,R=S.sum(v)+mo(t.paddingTop);if(!T)r.value.scrollTo({left:0,top:R,behavior:C});else{const{scrollTop:L,offsetHeight:$}=r.value;if(R>L){const V=S.get(v);R+V<=L+$||r.value.scrollTo({left:0,top:R+V-$,behavior:C})}else r.value.scrollTo({left:0,top:R,behavior:C})}b=v}function u(v,C,T){r.value.scrollTo({left:v,top:C,behavior:T})}function y(v,C){var T;if(t.ignoreItemResize)return;const{value:S}=n,R=o.value.get(v),L=C.target.offsetHeight;L-t.itemSize===0?s.delete(v):s.set(v,L-t.itemSize);const V=L-S.get(R);V!==0&&(g!==void 0&&R<=g&&((T=r.value)===null||T===void 0||T.scrollBy(0,V)),S.add(R,V),a.value++)}function w(v){lr(m);const{onScroll:C}=t;C!==void 0&&C(v)}function A(v){i.value=v.contentRect.height;const{onResize:C}=t;C!==void 0&&C(v)}let b,g;function m(){const{value:v}=r;v!=null&&(g=b!=null?b:d.value,b=void 0,l.value=r.value.scrollTop)}return{listHeight:i,listStyle:{overflow:"auto"},keyToIndex:o,itemsStyle:N(()=>{const{itemResizable:v}=t,C=Kt(n.value.sum());return a.value,[t.itemsStyle,{boxSizing:"content-box",height:v?"":C,minHeight:v?C:"",paddingTop:Kt(t.paddingTop),paddingBottom:Kt(t.paddingBottom)}]}),visibleItemsStyle:N(()=>(a.value,{transform:`translate3d(0, ${Kt(n.value.sum(d.value))}, 0)`})),viewportItems:h,listElRef:r,itemsElRef:B(null),scrollTo:f,handleListResize:A,handleListScroll:w,handleItemResize:y}},render(){const{itemResizable:t,keyField:e,keyToIndex:o,visibleItemsTag:r}=this;return x(Gt,{onResize:this.handleListResize},{default:()=>{var i,s;return x("div",oo(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?x("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[x(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(n=>{const a=n[e],l=o.get(a),d=this.$slots.default({item:n,index:l})[0];return t?x(Gt,{key:a,onResize:h=>this.handleItemResize(a,h)},{default:()=>d}):(d.key=a,d)})})]):(s=(i=this.$slots).empty)===null||s===void 0?void 0:s.call(i)])}})}});const Pt="v-hidden",Ws=vt("[v-hidden]",{display:"none!important"});var Mr=se({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(t,{slots:e}){const o=B(null),r=B(null);function i(){const{value:n}=o,{getCounter:a,getTail:l}=t;let d;if(a!==void 0?d=a():d=r.value,!n||!d)return;d.hasAttribute(Pt)&&d.removeAttribute(Pt);const{children:h}=n,f=n.offsetWidth,p=[],u=e.tail?l==null?void 0:l():null;let y=u?u.offsetWidth:0,w=!1;const A=n.children.length-(e.tail?1:0);for(let g=0;g<A-1;++g){if(g<0)continue;const m=h[g];if(w){m.hasAttribute(Pt)||m.setAttribute(Pt,"");continue}else m.hasAttribute(Pt)&&m.removeAttribute(Pt);const v=m.offsetWidth;if(y+=v,p[g]=v,y>f){const{updateCounter:C}=t;for(let T=g;T>=0;--T){const S=A-1-T;C!==void 0?C(S):d.textContent=`${S}`;const R=d.offsetWidth;if(y-=p[T],y+R<=f||T===0){w=!0,g=T-1,u&&(g===-1?(u.style.maxWidth=`${f-R}px`,u.style.boxSizing="border-box"):u.style.maxWidth="");break}}}}const{onUpdateOverflow:b}=t;w?b!==void 0&&b(!0):(b!==void 0&&b(!1),d.setAttribute(Pt,""))}const s=go();return Ws.mount({id:"vueuc/overflow",head:!0,ssr:s}),rt(i),{selfRef:o,counterRef:r,sync:i}},render(){const{$slots:t}=this;return xt(this.sync),x("div",{class:"v-overflow",ref:"selfRef"},[et(t,"default"),t.counter?t.counter():x("span",{style:{display:"inline-block"},ref:"counterRef"}),t.tail?t.tail():null])}}),Hs={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};const js=t=>{const{textColorDisabled:e,iconColor:o,textColor2:r,fontSizeSmall:i,fontSizeMedium:s,fontSizeLarge:n,fontSizeHuge:a}=t;return Object.assign(Object.assign({},Hs),{fontSizeSmall:i,fontSizeMedium:s,fontSizeLarge:n,fontSizeHuge:a,textColor:e,iconColor:o,extraTextColor:r})},Xs={name:"Empty",common:lt,self:js};var Rr=Xs,Ys=X("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--font-size);
`,[Q("icon",`
 width: var(--icon-size);
 height: var(--icon-size);
 font-size: var(--icon-size);
 line-height: var(--icon-size);
 color: var(--icon-color);
 transition:
 color .3s var(--bezier);
 `),Q("description",`
 margin-top: 8px;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `),Q("extra",`
 text-align: center;
 transition: color .3s var(--bezier);
 margin-top: 12px;
 color: var(--extra-text-color);
 `)]);const Gs=Object.assign(Object.assign({},Te.props),{description:{type:String,default:void 0},showDescription:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function});var Ks=se({name:"Empty",props:Gs,setup(t){const{mergedClsPrefixRef:e}=wt(t),o=Te("Empty","Empty",Ys,Rr,t,e),{localeRef:r}=Zt("Empty"),i=qe(Ni,null),s=N(()=>{var a,l,d;return(a=t.description)!==null&&a!==void 0?a:(d=(l=i==null?void 0:i.mergedComponentPropsRef.value)===null||l===void 0?void 0:l.Empty)===null||d===void 0?void 0:d.description}),n=N(()=>{var a,l;return((l=(a=i==null?void 0:i.mergedComponentPropsRef.value)===null||a===void 0?void 0:a.Empty)===null||l===void 0?void 0:l.renderIcon)||(()=>x(Yn,null))});return{mergedClsPrefix:e,mergedRenderIcon:n,localizedDescription:N(()=>s.value||r.value.description),cssVars:N(()=>{const{size:a}=t,{common:{cubicBezierEaseInOut:l},self:{[Se("iconSize",a)]:d,[Se("fontSize",a)]:h,textColor:f,iconColor:p,extraTextColor:u}}=o.value;return{"--icon-size":d,"--font-size":h,"--bezier":l,"--text-color":f,"--icon-color":p,"--extra-text-color":u}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;return x("div",{class:`${e}-empty`,style:this.cssVars},x("div",{class:`${e}-empty__icon`},et(t,"icon",void 0,()=>[x(Yt,{clsPrefix:e},{default:this.mergedRenderIcon})])),this.showDescription?x("div",{class:`${e}-empty__description`},et(t,"default",void 0,()=>[this.localizedDescription])):null,t.extra?x("div",{class:`${e}-empty__extra`},et(t,"extra")):null)}});const Zs=t=>{const{scrollbarColor:e,scrollbarColorHover:o}=t;return{color:e,colorHover:o}},qs={name:"Scrollbar",common:lt,self:Zs};var Er=qs,Qs=X("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[J(">",[X("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[J("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),J(">",[X("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])]),X("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 `,[he("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--scrollbar-height);
 `,[J(">",[Q("scrollbar",`
 height: var(--scrollbar-height);
 border-radius: var(--scrollbar-border-radius);
 right: 0;
 `)])]),he("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--scrollbar-width);
 `,[J(">",[Q("scrollbar",`
 width: var(--scrollbar-width);
 border-radius: var(--scrollbar-border-radius);
 bottom: 0;
 `)])]),he("disabled",[J(">",[Q("scrollbar",{pointerEvents:"none"})])]),J(">",[Q("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--scrollbar-color);
 transition: background-color .2s var(--scrollbar-bezier);
 `,[Wi(),J("&:hover",{backgroundColor:"var(--scrollbar-color-hover)"})])])])])]);const Js=Object.assign(Object.assign({},Te.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:{type:Boolean,default:!1},container:Function,content:Function,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function}),ea=se({name:"Scrollbar",props:Js,inheritAttrs:!1,setup(t){const{mergedClsPrefixRef:e}=wt(t),o=B(null),r=B(null),i=B(null),s=B(null),n=B(null),a=B(null),l=B(null),d=B(null),h=B(null),f=B(null),p=B(0),u=B(0),y=B(!1),w=B(!1);let A=!1,b=!1,g,m,v=0,C=0,T=0,S=0;const R=Vn(),L=N(()=>{const{value:O}=l,{value:U}=n,{value:K}=h;return O===null||U===null||K===null?0:Math.min(O,K*O/U+t.size*1.5)}),$=N(()=>`${L.value}px`),V=N(()=>{const{value:O}=d,{value:U}=a,{value:K}=f;return O===null||U===null||K===null?0:K*O/U+t.size*1.5}),G=N(()=>`${V.value}px`),z=N(()=>{const{value:O}=l,{value:U}=p,{value:K}=n,{value:te}=h;return O===null||K===null||te===null?0:U/(K-O)*(te-L.value)}),I=N(()=>`${z.value}px`),F=N(()=>{const{value:O}=d,{value:U}=u,{value:K}=a,{value:te}=f;return O===null||K===null||te===null?0:U/(K-O)*(te-V.value)}),_=N(()=>`${F.value}px`),M=N(()=>{const{value:O}=l,{value:U}=n;return O!==null&&U!==null&&U>O}),k=N(()=>{const{value:O}=d,{value:U}=a;return O!==null&&U!==null&&U>O}),Y=N(()=>{const{container:O}=t;return O?O():o.value}),ie=N(()=>{const{content:O}=t;return O?O():r.value}),re=be,ue=O=>{const{onResize:U}=t;U&&U(O),be()},_e=(O,U)=>{if(!t.scrollable)return;if(typeof O=="number"){ce(O,U!=null?U:0,0,!1,"auto");return}const{left:K,top:te,index:P,elSize:D,position:j,behavior:W,el:Z,debounce:ae=!0}=O;(K!==void 0||te!==void 0)&&ce(K!=null?K:0,te!=null?te:0,0,!1,W),Z!==void 0?ce(0,Z.offsetTop,Z.offsetHeight,ae,W):P!==void 0&&D!==void 0?ce(0,P*D,D,ae,W):j==="bottom"?ce(0,Number.MAX_SAFE_INTEGER,0,!1,W):j==="top"&&ce(0,0,0,!1,W)};function ce(O,U,K,te,P){const{value:D}=Y;if(!!D){if(te){const{scrollTop:j,offsetHeight:W}=D;if(U>j){U+K<=j+W||D.scrollTo({left:O,top:U+K-W,behavior:P});return}}D.scrollTo({left:O,top:U,behavior:P})}}function ne(){Re(),Oe(),be()}function ve(){Ie()}function Ie(){fe(),Ce()}function fe(){m!==void 0&&window.clearTimeout(m),m=window.setTimeout(()=>{w.value=!1},t.duration)}function Ce(){g!==void 0&&window.clearTimeout(g),g=window.setTimeout(()=>{y.value=!1},t.duration)}function Re(){g!==void 0&&window.clearTimeout(g),y.value=!0}function Oe(){m!==void 0&&window.clearTimeout(m),w.value=!0}function Le(O){const{onScroll:U}=t;U&&U(O),me()}function me(){const{value:O}=Y;O&&(p.value=O.scrollTop,u.value=O.scrollLeft)}function ke(){const{value:O}=ie;O&&(n.value=O.offsetHeight,a.value=O.offsetWidth);const{value:U}=Y;U&&(l.value=U.offsetHeight,d.value=U.offsetWidth);const{value:K}=s,{value:te}=i;K&&(f.value=K.offsetWidth),te&&(h.value=te.offsetHeight)}function be(){!t.scrollable||(ke(),me())}function Ae(O){O.preventDefault(),O.stopPropagation(),b=!0,Xe("mousemove",window,E,!0),Xe("mouseup",window,H,!0),C=u.value,T=O.clientX}function E(O){if(!b)return;g!==void 0&&window.clearTimeout(g),m!==void 0&&window.clearTimeout(m);const{value:U}=d,{value:K}=a,{value:te}=V;if(U===null||K===null)return;const D=(O.clientX-T)*(K-U)/(U-te),j=K-U;let W=C+D;W=Math.min(j,W),W=Math.max(W,0);const{value:Z}=Y;if(Z){Z.scrollLeft=W;const{internalOnUpdateScrollLeft:ae}=t;ae&&ae(W)}}function H(O){O.preventDefault(),O.stopPropagation(),De("mousemove",window,E,!0),De("mouseup",window,H,!0),b=!1,be();const{value:U}=Y;(U==null?void 0:U.contains(O.target))||Ie()}function we(O){O.preventDefault(),O.stopPropagation(),A=!0,Xe("mousemove",window,$e,!0),Xe("mouseup",window,je,!0),v=p.value,S=O.clientY}function $e(O){if(!A)return;g!==void 0&&window.clearTimeout(g),m!==void 0&&window.clearTimeout(m);const{value:U}=l,{value:K}=n,{value:te}=L;if(U===null||K===null)return;const D=(O.clientY-S)*(K-U)/(U-te),j=K-U;let W=v+D;W=Math.min(j,W),W=Math.max(W,0);const{value:Z}=Y;Z&&(Z.scrollTop=W)}function je(O){O.preventDefault(),O.stopPropagation(),De("mousemove",window,$e,!0),De("mouseup",window,je,!0),A=!1,be();const{value:U}=Y;(U==null?void 0:U.contains(O.target))||Ie()}To(()=>{const{value:O}=k,{value:U}=M,{value:K}=e,{value:te}=s,{value:P}=i;te&&(O?te.classList.remove(`${K}-scrollbar-rail--disabled`):te.classList.add(`${K}-scrollbar-rail--disabled`)),P&&(U?P.classList.remove(`${K}-scrollbar-rail--disabled`):P.classList.add(`${K}-scrollbar-rail--disabled`))}),rt(()=>{t.container||be()}),St(()=>{g!==void 0&&window.clearTimeout(g),m!==void 0&&window.clearTimeout(m),De("mousemove",window,$e,!0),De("mouseup",window,je,!0)});const ot=Te("Scrollbar","Scrollbar",Qs,Er,t,e);return{sync:be,scrollTo:_e,mergedClsPrefix:e,containerScrollTop:p,containerRef:o,contentRef:r,yRailRef:i,xRailRef:s,needYBar:M,needXBar:k,yBarSizePx:$,xBarSizePx:G,yBarTopPx:I,xBarLeftPx:_,isShowXBar:y,isShowYBar:w,isIos:R,handleScroll:Le,handleContentResize:re,handleContainerResize:ue,handleMouseEnterWrapper:ne,handleMouseLeaveWrapper:ve,handleYScrollMouseDown:we,handleXScrollMouseDown:Ae,cssVars:N(()=>{const{common:{cubicBezierEaseInOut:O,scrollbarBorderRadius:U,scrollbarHeight:K,scrollbarWidth:te},self:{color:P,colorHover:D}}=ot.value;return{"--scrollbar-bezier":O,"--scrollbar-color":P,"--scrollbar-color-hover":D,"--scrollbar-border-radius":U,"--scrollbar-width":te,"--scrollbar-height":K}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;if(!this.scrollable)return et(t,"default");const o=()=>x("div",oo(this.$attrs,{class:`${e}-scrollbar`,style:this.cssVars,onMouseenter:this.handleMouseEnterWrapper,onMouseleave:this.handleMouseLeaveWrapper}),[this.container?et(t,"default"):x("div",{ref:"containerRef",class:`${e}-scrollbar-container`,style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},x(Gt,{onResize:this.handleContentResize},{default:()=>x("div",{ref:"contentRef",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${e}-scrollbar-content`,this.contentClass]},t)})),x("div",{ref:"yRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--vertical`,style:[this.horizontalRailStyle]},x(Wt,{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?x("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),x("div",{ref:"xRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--horizontal`,style:[this.verticalRailStyle]},x(Wt,{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?x("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,left:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))]);return this.container?o():x(Gt,{onResize:this.handleContainerResize},{default:o})}});var ta=ea;const oa=x(jn);function ra(t,e){return x(Wt,{name:"fade-in-scale-up-transition"},{default:()=>t?x(Yt,{clsPrefix:e,class:`${e}-base-select-option__check`},{default:()=>oa}):null})}var Lr=se({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(t){const{valueRef:e,pendingTmNodeRef:o,multipleRef:r,valueSetRef:i,renderLabelRef:s,renderOptionRef:n,handleOptionClick:a,handleOptionMouseEnter:l}=qe(Mo),d=at(()=>{const{value:u}=o;return u?t.tmNode.key===u.key:!1});function h(u){const{tmNode:y}=t;y.disabled||a(u,y)}function f(u){const{tmNode:y}=t;y.disabled||l(u,y)}function p(u){const{tmNode:y}=t,{value:w}=d;y.disabled||w||l(u,y)}return{multiple:r,isGrouped:at(()=>{const{tmNode:u}=t,{parent:y}=u;return y&&y.rawNode.type==="group"}),isPending:d,isSelected:at(()=>{const{value:u}=e,{value:y}=r;if(u===null)return!1;const w=t.tmNode.rawNode.value;if(y){const{value:A}=i;return A.has(w)}else return u===w}),renderLabel:s,renderOption:n,handleMouseMove:p,handleMouseEnter:f,handleClick:h}},render(){const{clsPrefix:t,tmNode:{rawNode:e},isSelected:o,isPending:r,isGrouped:i,multiple:s,renderOption:n,renderLabel:a,handleClick:l,handleMouseEnter:d,handleMouseMove:h}=this,p=ra(s&&o,t),u=a?[a(e,o),p]:[Lt(e.label,e,o),p],y=x("div",{class:[`${t}-base-select-option`,e.class,{[`${t}-base-select-option--disabled`]:e.disabled,[`${t}-base-select-option--selected`]:o,[`${t}-base-select-option--grouped`]:i,[`${t}-base-select-option--pending`]:r}],style:e.style,onClick:l,onMouseenter:d,onMousemove:h},x("div",{class:`${t}-base-select-option__content`},u));return e.render?e.render({node:y,option:e,selected:o}):n?n({node:y,option:e,selected:o}):y}}),kr=se({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:t,renderOptionRef:e}=qe(Mo);return{renderLabel:t,renderOption:e}},render(){const{clsPrefix:t,renderLabel:e,renderOption:o,tmNode:{rawNode:r}}=this,i=e?e(r,!1):Lt(r.label,r,!1),s=x("div",{class:`${t}-base-select-group-header`},i);return r.render?r.render({node:s,option:r}):o?o({node:s,option:r,selected:!1}):s}});const{cubicBezierEaseIn:Fr,cubicBezierEaseOut:Ir,transformDebounceScale:ia}=Hi;function Or({transformOrigin:t="inherit",duration:e=".2s",enterScale:o=".9",originalTransform:r="",originalTransition:i=""}={}){return[J("&.fade-in-scale-up-transition-leave-active",{transformOrigin:t,transition:`opacity ${e} ${Fr}, transform ${e} ${Fr} ${i&&","+i}`}),J("&.fade-in-scale-up-transition-enter-active",{transformOrigin:t,transition:`opacity ${e} ${Ir}, transform ${e} ${Ir} ${i&&","+i}`}),J("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${r} scale(${o})`}),J("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${r} scale(${ia})`})]}var na=X("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--border-radius);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 background-color: var(--color);
`,[he("multiple",[X("base-select-option",`
 padding-right: 28px;
 `)]),X("scrollbar",`
 max-height: var(--height);
 `),X("virtual-list",`
 max-height: var(--height);
 `),X("base-select-option",`
 min-height: var(--option-height);
 font-size: var(--option-font-size);
 display: flex;
 align-items: center;
 `,[Q("content",`
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),X("base-select-group-header",`
 min-height: var(--option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),X("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),Q("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),Q("loading",`
 color: var(--loading-color);
 font-size: var(--loading-size);
 `),Q("action",`
 padding: 8px var(--option-padding-left);
 font-size: var(--option-font-size);
 transition: 
 color .3s var(--bezier);
 border-color .3s var(--bezier);
 border-top: 1px solid var(--action-divider-color);
 color: var(--action-text-color);
 `),X("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--option-padding);
 color: var(--group-header-text-color);
 `),X("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--option-padding);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 opacity .3s var(--bezier);
 box-sizing: border-box;
 color: var(--option-text-color);
 opacity: 1;
 `,[J("&:active",`
 color: var(--option-text-color-pressed);
 `),he("grouped",`
 padding-left: calc(var(--option-padding-left) * 1.5);
 `),he("pending",`
 background-color: var(--option-color-pending);
 `),he("selected",`
 color: var(--option-text-color-active);
 background-color: var(--option-color-active);
 `),he("disabled",`
 cursor: not-allowed;
 `,[ct("selected",`
 color: var(--option-text-color-disabled);
 `),he("selected",`
 opacity: var(--option-opacity-disabled);
 `)]),Q("check",`
 font-size: 16px;
 position: absolute;
 right: 8px;
 top: calc(50% - 7px);
 color: var(--option-check-color);
 transition: color .3s var(--bezier);
 `,[Or({enterScale:"0.5"})])])]),sa={height:"calc(var(--option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};const aa=t=>{const{borderRadius:e,popoverColor:o,textColor3:r,dividerColor:i,textColor2:s,primaryColorPressed:n,textColorDisabled:a,primaryColor:l,opacityDisabled:d,hoverColor:h,fontSizeSmall:f,fontSizeMedium:p,fontSizeLarge:u,fontSizeHuge:y,heightSmall:w,heightMedium:A,heightLarge:b,heightHuge:g}=t;return Object.assign(Object.assign({},sa),{optionFontSizeSmall:f,optionFontSizeMedium:p,optionFontSizeLarge:u,optionFontSizeHuge:y,optionHeightSmall:w,optionHeightMedium:A,optionHeightLarge:b,optionHeightHuge:g,borderRadius:e,color:o,groupHeaderTextColor:r,actionDividerColor:i,optionTextColor:s,optionTextColorPressed:n,optionTextColorDisabled:a,optionTextColorActive:l,optionOpacityDisabled:d,optionCheckColor:l,optionColorPending:h,optionColorActive:h,actionTextColor:s,loadingColor:l})},la=qt({name:"InternalSelectMenu",common:lt,peers:{Scrollbar:Er,Empty:Rr},self:aa});var Dr=la,ca=se({name:"InternalSelectMenu",props:Object.assign(Object.assign({},Te.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},width:[Number,String],autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onToggle:Function}),setup(t){const e=Te("InternalSelectMenu","InternalSelectMenu",na,Dr,t,pe(t,"clsPrefix")),o=B(null),r=B(null),i=B(null),s=N(()=>t.treeMate.getFlattenedNodes()),n=N(()=>ls(s.value)),a=B(null);function l(){const{treeMate:_}=t;$(t.autoPending?t.value===null?_.getFirstAvailableNode():t.multiple?_.getNode((t.value||[])[(t.value||[]).length-1])||_.getFirstAvailableNode():_.getNode(t.value)||_.getFirstAvailableNode():null)}l(),rt(()=>{To(()=>{t.show&&(l(),xt(V))})});const d=N(()=>mo(e.value.self[Se("optionHeight",t.size)])),h=N(()=>Zo(e.value.self[Se("padding",t.size)])),f=N(()=>t.multiple&&Array.isArray(t.value)?new Set(t.value):new Set),p=N(()=>{const _=s.value;return _&&_.length===0}),u=N(()=>[{width:Nt(t.width)},I.value]);We(pe(t,"treeMate"),()=>{if(t.autoPending){const _=t.treeMate.getFirstAvailableNode();$(_)}else $(null)});function y(_){const{onToggle:M}=t;M&&M(_)}function w(_){const{onScroll:M}=t;M&&M(_)}function A(_){var M;(M=i.value)===null||M===void 0||M.sync(),w(_)}function b(){var _;(_=i.value)===null||_===void 0||_.sync()}function g(){const{value:_}=a;return _||null}function m(_,M){M.disabled||$(M,!1)}function v(_,M){M.disabled||y(M)}function C(_){var M;Ao(_,"action")||(M=t.onKeyup)===null||M===void 0||M.call(t,_)}function T(_){var M;Ao(_,"action")||(M=t.onKeydown)===null||M===void 0||M.call(t,_)}function S(_){var M;(M=t.onMousedown)===null||M===void 0||M.call(t,_),!t.focusable&&_.preventDefault()}function R(){const{value:_}=a;_&&$(_.getNext({loop:!0}),!0)}function L(){const{value:_}=a;_&&$(_.getPrev({loop:!0}),!0)}function $(_,M=!1){a.value=_,M&&V()}function V(){var _,M;const k=a.value;if(!k)return;const Y=n.value(k.key);Y!==null&&(t.virtualScroll?(_=r.value)===null||_===void 0||_.scrollTo({index:Y}):(M=i.value)===null||M===void 0||M.scrollTo({index:Y,elSize:d.value}))}function G(_){var M,k;((M=o.value)===null||M===void 0?void 0:M.contains(_.target))&&((k=t.onFocus)===null||k===void 0||k.call(t,_))}function z(_){var M,k;((M=o.value)===null||M===void 0?void 0:M.contains(_.relatedTarget))||(k=t.onBlur)===null||k===void 0||k.call(t,_)}ut(Mo,{handleOptionMouseEnter:m,handleOptionClick:v,valueSetRef:f,multipleRef:pe(t,"multiple"),valueRef:pe(t,"value"),renderLabelRef:pe(t,"renderLabel"),renderOptionRef:pe(t,"renderOption"),pendingTmNodeRef:a}),ut(pr,o),rt(()=>{const{value:_}=i;_&&_.sync()});const I=N(()=>{const{size:_}=t,{common:{cubicBezierEaseInOut:M},self:{height:k,borderRadius:Y,color:ie,groupHeaderTextColor:re,actionDividerColor:ue,optionTextColorPressed:_e,optionTextColor:ce,optionTextColorDisabled:ne,optionTextColorActive:ve,optionOpacityDisabled:Ie,optionCheckColor:fe,actionTextColor:Ce,optionColorPending:Re,optionColorActive:Oe,loadingColor:Le,loadingSize:me,[Se("optionFontSize",_)]:ke,[Se("optionHeight",_)]:be,[Se("optionPadding",_)]:Ae}}=e.value;return{"--height":k,"--action-divider-color":ue,"--action-text-color":Ce,"--bezier":M,"--border-radius":Y,"--color":ie,"--option-font-size":ke,"--group-header-text-color":re,"--option-check-color":fe,"--option-color-pending":Re,"--option-color-active":Oe,"--option-height":be,"--option-opacity-disabled":Ie,"--option-text-color":ce,"--option-text-color-active":ve,"--option-text-color-disabled":ne,"--option-text-color-pressed":_e,"--option-padding":Ae,"--option-padding-left":Zo(Ae,"left"),"--loading-color":Le,"--loading-size":me}});return Object.assign({mergedTheme:e,virtualListRef:r,scrollbarRef:i,style:u,itemSize:d,padding:h,flattenedNodes:s,empty:p,virtualListContainer(){const{value:_}=r;return _==null?void 0:_.listElRef},virtualListContent(){const{value:_}=r;return _==null?void 0:_.itemsElRef},doScroll:w,handleFocusin:G,handleFocusout:z,handleKeyUp:C,handleKeyDown:T,handleMouseDown:S,handleVirtualListResize:b,handleVirtualListScroll:A},{selfRef:o,next:R,prev:L,getPendingTmNode:g})},render(){const{$slots:t,virtualScroll:e,clsPrefix:o,mergedTheme:r}=this;return x("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${o}-base-select-menu`,this.multiple&&`${o}-base-select-menu--multiple`],style:this.style,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?x("div",{class:`${o}-base-select-menu__loading`},x(ji,{clsPrefix:o,strokeWidth:20})):this.empty?x("div",{class:`${o}-base-select-menu__empty`},et(t,"empty",void 0,()=>[x(Ks,{theme:r.peers.Empty,themeOverrides:r.peerOverrides.Empty})])):x(ta,{ref:"scrollbarRef",theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar,scrollable:this.scrollable,container:e?this.virtualListContainer:void 0,content:e?this.virtualListContent:void 0,onScroll:e?void 0:this.doScroll},{default:()=>e?x(Ns,{ref:"virtualListRef",class:`${o}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:i})=>i.isGroup?x(kr,{key:i.key,clsPrefix:o,tmNode:i}):i.ignored?null:x(Lr,{clsPrefix:o,key:i.key,tmNode:i})}):x("div",{class:`${o}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(i=>i.isGroup?x(kr,{key:i.key,clsPrefix:o,tmNode:i}):x(Lr,{clsPrefix:o,key:i.key,tmNode:i})))}),t.action&&x("div",{class:`${o}-base-select-menu__action`,"data-action":!0},et(t,"action")),t.action&&x(Zn,{onFocus:this.onTabOut}))}}),da={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};const ua=t=>{const{boxShadow2:e,popoverColor:o,textColor2:r,borderRadius:i,fontSize:s,dividerColor:n}=t;return Object.assign(Object.assign({},da),{fontSize:s,borderRadius:i,color:o,dividerColor:n,textColor:r,boxShadow:e})},ha={name:"Popover",common:lt,self:ua};var Uo=ha;const Vo={top:"bottom",bottom:"top",left:"right",right:"left"};var fa=J([X("popover",`
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 transform-origin: inherit;
 position: relative;
 font-size: var(--font-size);
 color: var(--text-color);
 box-shadow: var(--box-shadow);
 `,[J("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),J("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),J("&.popover-transition-enter-active",`
 transition:
 opacity .15s var(--bezier-ease-out),
 transform .15s var(--bezier-ease-out);
 `),J("&.popover-transition-leave-active",`
 transition:
 opacity .15s var(--bezier-ease-in),
 transform .15s var(--bezier-ease-in);
 `),ct("raw",`
 background-color: var(--color);
 border-radius: var(--border-radius);
 var(--padding);
 `,[ct("show-header","padding: var(--padding);")]),Q("header",`
 padding: var(--padding);
 border-bottom: 1px solid var(--divider-color);
 transition: border-color .3s var(--bezier);
 `),Q("content",`
 padding: var(--padding);
 `),X("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[X("popover-arrow",`
 transition: background-color .3s var(--bezier);
 position: absolute;
 display: block;
 width: calc(var(--arrow-height) * 1.414);
 height: calc(var(--arrow-height) * 1.414);
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--color);
 pointer-events: all;
 `)])]),Qe("top-start",`
 top: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),Qe("top",`
 top: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),Qe("top-end",`
 top: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),Qe("bottom-start",`
 bottom: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),Qe("bottom",`
 bottom: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),Qe("bottom-end",`
 bottom: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),Qe("left-start",`
 left: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),Qe("left",`
 left: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),Qe("left-end",`
 left: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `),Qe("right-start",`
 right: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),Qe("right",`
 right: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),Qe("right-end",`
 right: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `)]);function Qe(t,e){const o=t.split("-")[0],r=["top","bottom"].includes(o)?"height: var(--space-arrow);":"width: var(--space-arrow);";return J(`[v-placement="${t}"] >`,[X("popover",`
 margin-${Vo[o]}: var(--space);
 `,[he("show-arrow",`
 margin-${Vo[o]}: var(--space-arrow);
 `),he("overlap",`
 margin: 0;
 `),Xi("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${o}: 100%;
 ${Vo[o]}: auto;
 ${r}
 `,[X("popover-arrow",e)])])])}const zr=Object.assign(Object.assign({},Te.props),{to:ft.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowStyle:[String,Object],displayDirective:String,x:Number,y:Number,filp:Boolean,overlap:Boolean,placement:String,width:[Number,String],animated:Boolean,onClickoutside:Function,minWidth:Number,maxWidth:Number}),pa=({arrowStyle:t,clsPrefix:e})=>x("div",{key:"__popover-arrow__",class:`${e}-popover-arrow-wrapper`},x("div",{class:`${e}-popover-arrow`,style:t}));var ga=se({name:"PopoverBody",inheritAttrs:!1,props:zr,setup(t,{slots:e,attrs:o}){const{namespaceRef:r,mergedClsPrefixRef:i}=wt(t),s=Te("Popover","Popover",fa,Uo,t,i),n=B(null),a=qe("NPopover"),l=B(null),d=B(t.show),h=N(()=>{const{trigger:v,onClickoutside:C}=t,T=[],{positionManuallyRef:{value:S}}=a;return S||(v==="click"&&!C&&T.push([no,b]),v==="hover"&&T.push([As,A])),C&&T.push([no,b]),t.displayDirective==="show"&&T.push([sr,t.show]),T}),f=N(()=>[{width:t.width==="trigger"?"":Nt(t.width),maxWidth:Nt(t.maxWidth),minWidth:Nt(t.minWidth)},p.value]),p=N(()=>{const{common:{cubicBezierEaseInOut:v,cubicBezierEaseIn:C,cubicBezierEaseOut:T},self:{space:S,spaceArrow:R,padding:L,fontSize:$,textColor:V,dividerColor:G,color:z,boxShadow:I,borderRadius:F,arrowHeight:_,arrowOffset:M,arrowOffsetVertical:k}}=s.value;return{"--box-shadow":I,"--bezier":v,"--bezier-ease-in":C,"--bezier-ease-out":T,"--font-size":$,"--text-color":V,"--color":z,"--divider-color":G,"--border-radius":F,"--arrow-height":_,"--arrow-offset":M,"--arrow-offset-vertical":k,"--padding":L,"--space":S,"--space-arrow":R}});a.setBodyInstance({syncPosition:u}),St(()=>{a.setBodyInstance(null)}),We(pe(t,"show"),v=>{t.animated||(v?d.value=!0:d.value=!1)});function u(){var v;(v=n.value)===null||v===void 0||v.syncPosition()}function y(v){t.trigger==="hover"&&a.handleMouseEnter(v)}function w(v){t.trigger==="hover"&&a.handleMouseLeave(v)}function A(v){t.trigger==="hover"&&!g().contains(v.target)&&a.handleMouseMoveOutside(v)}function b(v){(t.trigger==="click"&&!g().contains(v.target)||t.onClickoutside)&&a.handleClickOutside(v)}function g(){return a.getTriggerElement()}ut(fr,l),ut(hr,null),ut(ur,null);function m(){let v;const{internalRenderBodyRef:{value:C}}=a,{value:T}=i;if(C)v=C([`${T}-popover`,t.overlap&&`${T}-popover--overlap`],l,f.value,y,w);else{const{value:S}=a.extraClassRef;v=x("div",oo({class:[`${T}-popover`,S.map(R=>`${T}-${R}`),{[`${T}-popover--overlap`]:t.overlap,[`${T}-popover--show-arrow`]:t.showArrow,[`${T}-popover--show-header`]:!!e.header,[`${T}-popover--raw`]:t.raw}],ref:l,style:f.value,onMouseenter:y,onMouseleave:w},o),[e.header?x(Mt,null,x("div",{class:`${T}-popover__header`},e.header()),x("div",{class:`${T}-popover__content`},e)):et(e,"default"),t.showArrow?pa({arrowStyle:t.arrowStyle,clsPrefix:T}):null])}return t.displayDirective==="show"||t.show?to(v,h.value):null}return{namespace:r,isMounted:a.isMountedRef,zIndex:a.zIndexRef,followerRef:n,adjustedTo:ft(t),followerEnabled:d,renderContentNode:m}},render(){return x(Sr,{zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,placement:this.placement,containerClass:this.namespace,ref:"followerRef",overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===ft.tdkey},{default:()=>this.animated?x(Wt,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{this.followerEnabled=!1}},{default:this.renderContentNode}):this.renderContentNode()})}});const va=Object.keys(zr),ma={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function ba(t,e,o){ma[e].forEach(r=>{t.props?t.props=Object.assign({},t.props):t.props={};const i=t.props[r],s=o[r];i?t.props[r]=(...n)=>{i(...n),s(...n)}:t.props[r]=s})}const wa=Ze("").type,Br={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowStyle:[String,Object],filp:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,internalExtraClass:{type:Array,default:()=>[]},onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],zIndex:Number,to:ft.propTo,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},ya=Object.assign(Object.assign(Object.assign({},Te.props),Br),{internalRenderBody:Function});var No=se({name:"Popover",inheritAttrs:!1,props:ya,__popover__:!0,setup(t){const e=vo(),o=B(null),r=N(()=>t.show),i=B(t.defaultShow),s=bo(r,i),n=at(()=>t.disabled?!1:s.value),a=()=>{if(t.disabled)return!0;const{getDisabled:z}=t;return!!(z==null?void 0:z())},l=()=>a()?!1:s.value,d=qo(t,["arrow","showArrow"]),h=N(()=>t.overlap?!1:d.value);let f=null;const p=B(null),u=B(null),y=at(()=>t.x!==void 0&&t.y!==void 0);function w(z){const{"onUpdate:show":I,onUpdateShow:F,onShow:_,onHide:M}=t;i.value=z,I&&Ee(I,z),F&&Ee(F,z),z&&_&&Ee(_,!0),z&&M&&Ee(M,!1)}function A(){f&&f.syncPosition()}function b(){const{value:z}=p;z&&(window.clearTimeout(z),p.value=null)}function g(){const{value:z}=u;z&&(window.clearTimeout(z),u.value=null)}function m(){const z=a();if(t.trigger==="focus"&&!z){if(l())return;w(!0)}}function v(){const z=a();if(t.trigger==="focus"&&!z){if(!l())return;w(!1)}}function C(){const z=a();if(t.trigger==="hover"&&!z){if(g(),p.value!==null||l())return;const I=()=>{w(!0),p.value=null},{delay:F}=t;F===0?I():p.value=window.setTimeout(I,F)}}function T(){const z=a();if(t.trigger==="hover"&&!z){if(b(),u.value!==null||!l())return;const I=()=>{w(!1),u.value=null},{duration:F}=t;F===0?I():u.value=window.setTimeout(I,F)}}function S(){T()}function R(z){var I;!l()||(t.trigger==="click"&&(b(),g(),w(!1)),(I=t.onClickoutside)===null||I===void 0||I.call(t,z))}function L(){if(t.trigger==="click"&&!a()){b(),g();const z=!l();w(z)}}function $(z){i.value=z}function V(){var z;return(z=o.value)===null||z===void 0?void 0:z.targetRef}function G(z){f=z}return ut("NPopover",{getTriggerElement:V,handleMouseEnter:C,handleMouseLeave:T,handleClickOutside:R,handleMouseMoveOutside:S,setBodyInstance:G,positionManuallyRef:y,isMountedRef:e,zIndexRef:pe(t,"zIndex"),extraClassRef:pe(t,"internalExtraClass"),internalRenderBodyRef:pe(t,"internalRenderBody")}),{binderInstRef:o,positionManually:y,mergedShowConsideringDisabledProp:n,uncontrolledShow:i,mergedShowArrow:h,getMergedShow:l,setShow:$,handleClick:L,handleMouseEnter:C,handleMouseLeave:T,handleFocus:m,handleBlur:v,syncPosition:A}},render(){var t;const{positionManually:e,$slots:o}=this;let r,i=!1;if(!e&&(o.activator?r=dr(o,"activator"):r=dr(o,"trigger"),r)){r=wn(r),r=r.type===wa?x("span",[r]):r;const s={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if((t=r.type)===null||t===void 0?void 0:t.__popover__)i=!0,r.props||(r.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),r.props.internalSyncTargetWithParent=!0,r.props.internalInheritedEventHandlers?r.props.internalInheritedEventHandlers=[s,...r.props.internalInheritedEventHandlers]:r.props.internalInheritedEventHandlers=[s];else{const{internalInheritedEventHandlers:n}=this,a=[s,...n],l={onBlur:d=>{a.forEach(h=>{h.onBlur(d)})},onFocus:d=>{a.forEach(h=>{h.onBlur(d)})},onClick:d=>{a.forEach(h=>{h.onClick(d)})},onMouseenter:d=>{a.forEach(h=>{h.onMouseenter(d)})},onMouseleave:d=>{a.forEach(h=>{h.onMouseleave(d)})}};ba(r,n?"nested":e?"manual":this.trigger,l)}}return x(_r,{ref:"binderInstRef",syncTarget:!i,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const s=this.getMergedShow();return[e?null:x(Tr,null,{default:()=>r}),x(ga,cr(this.$props,va,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:s})),o)]}})}}),xa={closeSizeSmall:"14px",closeSizeMedium:"14px",closeSizeLarge:"14px",padding:"0 7px",closeMargin:"0 0 0 3px",closeMarginRtl:"0 3px 0 0"};const Pa=t=>{const{textColor2:e,primaryColorHover:o,primaryColorPressed:r,primaryColor:i,infoColor:s,successColor:n,warningColor:a,errorColor:l,baseColor:d,borderColor:h,opacityDisabled:f,tagColor:p,closeColor:u,closeColorHover:y,closeColorPressed:w,borderRadiusSmall:A,fontSizeTiny:b,fontSizeSmall:g,fontSizeMedium:m,heightTiny:v,heightSmall:C,heightMedium:T}=t;return Object.assign(Object.assign({},xa),{heightSmall:v,heightMedium:C,heightLarge:T,borderRadius:A,opacityDisabled:f,fontSizeSmall:b,fontSizeMedium:g,fontSizeLarge:m,textColorCheckable:e,textColorHoverCheckable:o,textColorPressedCheckable:r,textColorChecked:d,colorCheckable:"#0000",colorHoverCheckable:"#0000",colorPressedCheckable:"#0000",colorChecked:i,colorCheckedHover:o,colorCheckedPressed:r,border:`1px solid ${h}`,textColor:e,color:p,closeColor:u,closeColorHover:y,closeColorPressed:w,borderPrimary:`1px solid ${oe(i,{alpha:.3})}`,textColorPrimary:i,colorPrimary:oe(i,{alpha:.1}),closeColorPrimary:oe(i,{alpha:.75}),closeColorHoverPrimary:oe(i,{alpha:.6}),closeColorPressedPrimary:oe(i,{alpha:.9}),borderInfo:`1px solid ${oe(s,{alpha:.3})}`,textColorInfo:s,colorInfo:oe(s,{alpha:.1}),closeColorInfo:oe(s,{alpha:.75}),closeColorHoverInfo:oe(s,{alpha:.6}),closeColorPressedInfo:oe(s,{alpha:.9}),borderSuccess:`1px solid ${oe(n,{alpha:.3})}`,textColorSuccess:n,colorSuccess:oe(n,{alpha:.1}),closeColorSuccess:oe(n,{alpha:.75}),closeColorHoverSuccess:oe(n,{alpha:.6}),closeColorPressedSuccess:oe(n,{alpha:.9}),borderWarning:`1px solid ${oe(a,{alpha:.35})}`,textColorWarning:a,colorWarning:oe(a,{alpha:.12}),closeColorWarning:oe(a,{alpha:.75}),closeColorHoverWarning:oe(a,{alpha:.6}),closeColorPressedWarning:oe(a,{alpha:.9}),borderError:`1px solid ${oe(l,{alpha:.23})}`,textColorError:l,colorError:oe(l,{alpha:.08}),closeColorError:oe(l,{alpha:.65}),closeColorHoverError:oe(l,{alpha:.5}),closeColorPressedError:oe(l,{alpha:.8})})},_a={name:"Tag",common:lt,self:Pa};var Ta=_a,Ca={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},Aa=X("tag",`
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--padding);
 border-radius: var(--border-radius);
 color: var(--text-color);
 background-color: var(--color);
 transition: 
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 opacity .3s var(--bezier);
 line-height: 1;
 height: var(--height);
 font-size: var(--font-size);
`,[Q("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--border);
 transition: border-color .3s var(--bezier);
 `),Q("avatar",`
 display: flex;
 margin-right: 6px;
 `),Q("close",`
 font-size: var(--close-size);
 margin: var(--close-margin);
 transition: color .3s var(--bezier);
 cursor: pointer;
 `),he("round",`
 padding: 0 calc(var(--height) / 2);
 border-radius: calc(var(--height) / 2);
 `,[Q("avatar",`
 margin-left: calc((var(--height) - 8px) / -2);
 `)]),he("disabled",`
 cursor: not-allowed !important;
 opacity: var(--opacity-disabled);
 `),he("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--text-color-checkable);
 background-color: var(--color-checkable);
 `,[ct("disabled",[J("&:hover",{backgroundColor:"var(--color-hover-checkable)"},[ct("checked",{color:"var(--text-color-hover-checkable)"})]),J("&:active",{backgroundColor:"var(--color-pressed-checkable)"},[ct("checked",{color:"var(--text-color-pressed-checkable)"})])]),he("checked",{color:"var(--text-color-checked)",backgroundColor:"var(--color-checked)"},[ct("disabled",[J("&:hover",{backgroundColor:"var(--color-checked-hover)"}),J("&:active",{backgroundColor:"var(--color-checked-pressed)"})])])])]);const Sa=Object.assign(Object.assign(Object.assign({},Te.props),Ca),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalStopClickPropagation:Boolean,onCheckedChange:{type:Function,validator:()=>!0,default:void 0}}),Ma=Symbol("tag");var Wo=se({name:"Tag",props:Sa,setup(t){const e=B(null),{mergedBorderedRef:o,mergedClsPrefixRef:r,NConfigProvider:i}=wt(t),s=Te("Tag","Tag",Aa,Ta,t,r);ut(Ma,{roundRef:pe(t,"round")});function n(h){if(!t.disabled&&t.checkable){const{checked:f,onCheckedChange:p,onUpdateChecked:u,"onUpdate:checked":y}=t;u&&u(!f),y&&y(!f),p&&p(!f)}}function a(h){if(t.internalStopClickPropagation&&h.stopPropagation(),!t.disabled){const{onClose:f}=t;f&&Ee(f,h)}}const l={setTextContent(h){const{value:f}=e;f&&(f.textContent=h)}},d=Yi("Tag",i==null?void 0:i.mergedRtlRef,r);return Object.assign(Object.assign({},l),{rtlEnabled:d,mergedClsPrefix:r,contentRef:e,mergedBordered:o,handleClick:n,handleCloseClick:a,cssVars:N(()=>{const{type:h,size:f,color:{color:p,textColor:u}={}}=t,{common:{cubicBezierEaseInOut:y},self:{padding:w,closeMargin:A,closeMarginRtl:b,borderRadius:g,opacityDisabled:m,textColorCheckable:v,textColorHoverCheckable:C,textColorPressedCheckable:T,textColorChecked:S,colorCheckable:R,colorHoverCheckable:L,colorPressedCheckable:$,colorChecked:V,colorCheckedHover:G,colorCheckedPressed:z,[Se("closeSize",f)]:I,[Se("fontSize",f)]:F,[Se("height",f)]:_,[Se("color",h)]:M,[Se("textColor",h)]:k,[Se("border",h)]:Y,[Se("closeColor",h)]:ie,[Se("closeColorHover",h)]:re,[Se("closeColorPressed",h)]:ue}}=s.value;return{"--avatar-size-override":`calc(${_} - 8px)`,"--bezier":y,"--border-radius":g,"--border":Y,"--close-color":ie,"--close-color-hover":re,"--close-color-pressed":ue,"--close-margin":A,"--close-margin-rtl":b,"--close-size":I,"--color":p||M,"--color-checkable":R,"--color-checked":V,"--color-checked-hover":G,"--color-checked-pressed":z,"--color-hover-checkable":L,"--color-pressed-checkable":$,"--font-size":F,"--height":_,"--opacity-disabled":m,"--padding":w,"--text-color":u||k,"--text-color-checkable":v,"--text-color-checked":S,"--text-color-hover-checkable":C,"--text-color-pressed-checkable":T}})})},render(){const{mergedClsPrefix:t,rtlEnabled:e,color:{borderColor:o}={},$slots:r}=this;return x("div",{class:[`${t}-tag`,{[`${t}-tag--rtl`]:e,[`${t}-tag--disabled`]:this.disabled,[`${t}-tag--checkable`]:this.checkable,[`${t}-tag--checked`]:this.checkable&&this.checked,[`${t}-tag--round`]:this.round}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},r.avatar&&x("div",{class:`${t}-tag__avatar`},{default:r.avatar}),x("span",{class:`${t}-tag__content`,ref:"contentRef"},this.$slots),!this.checkable&&this.closable?x(Kn,{clsPrefix:t,class:`${t}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick}):null,!this.checkable&&this.mergedBordered?x("div",{class:`${t}-tag__border`,style:{borderColor:o}}):null)}}),Ra={paddingSingle:"0 26px 0 14px",clearSize:"16px",arrowSize:"16px"};const Ea=t=>{const{borderRadius:e,textColor2:o,textColorDisabled:r,inputColor:i,inputColorDisabled:s,primaryColor:n,primaryColorHover:a,warningColor:l,warningColorHover:d,errorColor:h,errorColorHover:f,borderColor:p,iconColor:u,iconColorDisabled:y,clearColor:w,clearColorHover:A,clearColorPressed:b,placeholderColor:g,placeholderColorDisabled:m,fontSizeTiny:v,fontSizeSmall:C,fontSizeMedium:T,fontSizeLarge:S,heightTiny:R,heightSmall:L,heightMedium:$,heightLarge:V}=t;return Object.assign(Object.assign({},Ra),{fontSizeTiny:v,fontSizeSmall:C,fontSizeMedium:T,fontSizeLarge:S,heightTiny:R,heightSmall:L,heightMedium:$,heightLarge:V,borderRadius:e,textColor:o,textColorDisabled:r,placeholderColor:g,placeholderColorDisabled:m,color:i,colorDisabled:s,colorActive:i,border:`1px solid ${p}`,borderHover:`1px solid ${a}`,borderActive:`1px solid ${n}`,borderFocus:`1px solid ${a}`,boxShadowHover:null,boxShadowActive:`0 0 0 2px ${oe(n,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${oe(n,{alpha:.2})}`,caretColor:n,arrowColor:u,arrowColorDisabled:y,loadingColor:n,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${d}`,borderActiveWarning:`1px solid ${l}`,borderFocusWarning:`1px solid ${d}`,boxShadowHoverWarning:null,boxShadowActiveWarning:`0 0 0 2px ${oe(l,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${oe(l,{alpha:.2})}`,colorActiveWarning:i,caretColorWarning:l,borderError:`1px solid ${h}`,borderHoverError:`1px solid ${f}`,borderActiveError:`1px solid ${h}`,borderFocusError:`1px solid ${f}`,boxShadowHoverError:null,boxShadowActiveError:`0 0 0 2px ${oe(h,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${oe(h,{alpha:.2})}`,colorActiveError:i,caretColorError:h,clearColor:w,clearColorHover:A,clearColorPressed:b})},La=qt({name:"InternalSelection",common:lt,peers:{Popover:Uo},self:Ea});var $r=La,ka=J([X("base-selection",`
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--border-radius);
 min-height: var(--height);
 line-height: 1.5;
 font-size: var(--font-size);
 `,[X("base-loading",`
 color: var(--loading-color);
 `),X("base-selection-tags",{minHeight:"var(--height)"}),Q("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `),Q("state-border",`
 z-index: 1;
 border-color: #0000;
 `),X("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[Q("arrow",`
 font-size: var(--arrow-size);
 color: var(--arrow-color);
 transition: color .3s var(--bezier);
 `)]),X("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 overflow: hidden;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--padding-single);
 transition: color .3s var(--bezier);
 `),X("base-selection-placeholder",`
 color: var(--placeholder-color);
 `),X("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: 3px 26px 0 14px;
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--color);
 border-radius: inherit;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 `),X("base-selection-label",`
 height: var(--height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 border-radius: inherit;
 background-color: var(--color);
 align-items: center;
 `,[X("base-selection-input",`
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--padding-single);
 background-color: #0000;
 color: var(--text-color);
 transition: color .3s var(--bezier);
 caret-color: var(--caret-color);
 `,[Q("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),Q("render-label",`
 color: var(--text-color);
 `)]),ct("disabled",[J("&:hover",[Q("state-border",`
 box-shadow: var(--box-shadow-hover);
 border: var(--border-hover);
 `)]),he("focus",[Q("state-border",`
 box-shadow: var(--box-shadow-focus);
 border: var(--border-focus);
 `)]),he("active",[Q("state-border",`
 box-shadow: var(--box-shadow-active);
 border: var(--border-active);
 `),X("base-selection-label",{backgroundColor:"var(--color-active)"}),X("base-selection-tags",{backgroundColor:"var(--color-active)"})])]),he("disabled",{cursor:"not-allowed"},[Q("arrow",`
 color: var(--arrow-color-disabled);
 `),X("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `,[X("base-selection-input",`
 cursor: not-allowed;
 color: var(--text-color-disabled);
 `),Q("render-label",`
 color: var(--text-color-disabled);
 `)]),X("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `),X("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--placeholder-color-disabled);
 `)]),X("base-selection-input-tag",`
 height: calc(var(--height) - 6px);
 line-height: calc(var(--height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[Q("input",`
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--text-color);
 caret-color: var(--caret-color);
 `),Q("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 opacity: 0;
 `)])]),X("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 `),X("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[J("&:last-child",{paddingRight:0}),X("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[Q("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 `)])]),["warning","error"].map(t=>Gi(t,X("base-selection",[Q("state-border",{border:`var(--border-${t})`}),ct("disabled",[J("&:hover",[Q("state-border",`
 box-shadow: var(--box-shadow-hover-${t});
 border: var(--border-hover-${t});
 `)]),he("active",[Q("state-border",`
 box-shadow: var(--box-shadow-active-${t});
 border: var(--border-active-${t});
 `),X("base-selection-label",{backgroundColor:`var(--color-active-${t})`}),X("base-selection-tags",{backgroundColor:`var(--box-shadow-active-${t})`})]),he("focus",[Q("state-border",`
 box-shadow: var(--box-shadow-focus-${t});
 border: var(--border-focus-${t});
 `)])])])))]),Fa=se({name:"InternalSelection",props:Object.assign(Object.assign({},Te.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:null},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeyup:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,renderLabel:Function}),setup(t){const e=B(null),o=B(null),r=B(null),i=B(null),s=B(null),n=B(null),a=B(null),l=B(null),d=B(null),h=B(null),f=B(!1),p=B(!1),u=B(!1),y=Te("InternalSelection","InternalSelection",ka,$r,t,pe(t,"clsPrefix")),w=N(()=>t.clearable&&!t.disabled&&(u.value||t.active)),A=N(()=>t.selectedOption?t.renderTag?t.renderTag({option:t.selectedOption,handleClose:()=>{}}):t.renderLabel?t.renderLabel(t.selectedOption,!0):Lt(t.selectedOption.label,t.selectedOption,!0):t.placeholder),b=N(()=>{const E=t.selectedOption;if(!!E)return E.label}),g=N(()=>t.multiple?!!(Array.isArray(t.selectedOptions)&&t.selectedOptions.length):t.selectedOption!==null);function m(){var E;const{value:H}=e;if(H){const{value:we}=o;we&&(we.style.width=`${H.offsetWidth}px`,t.maxTagCount!=="responsive"&&((E=d.value)===null||E===void 0||E.sync()))}}function v(){const{value:E}=h;E&&(E.style.display="none")}function C(){const{value:E}=h;E&&(E.style.display="inline-block")}We(pe(t,"active"),E=>{E||v()}),We(pe(t,"pattern"),()=>{t.multiple&&xt(m)});function T(E){const{onFocus:H}=t;H&&H(E)}function S(E){const{onBlur:H}=t;H&&H(E)}function R(E){const{onDeleteOption:H}=t;H&&H(E)}function L(E){const{onClear:H}=t;H&&H(E)}function $(E){const{onPatternInput:H}=t;H&&H(E)}function V(E){var H;(!E.relatedTarget||!((H=r.value)===null||H===void 0?void 0:H.contains(E.relatedTarget)))&&T(E)}function G(E){var H;((H=r.value)===null||H===void 0?void 0:H.contains(E.relatedTarget))||S(E)}function z(E){L(E)}function I(){u.value=!0}function F(){u.value=!1}function _(E){!t.active||!t.filterable||E.target!==o.value&&E.preventDefault()}function M(E){R(E)}function k(E){if(E.code==="Backspace"&&!t.pattern.length){const{selectedOptions:H}=t;(H==null?void 0:H.length)&&M(H[H.length-1])}}const Y=B(!1);let ie=null;function re(E){const{value:H}=e;if(H){const we=E.target.value;H.textContent=we,m()}Y.value?ie=E:$(E)}function ue(){Y.value=!0}function _e(){Y.value=!1,$(ie),ie=null}function ce(){p.value=!0}function ne(E){p.value=!1}function ve(){if(t.filterable){p.value=!1;const{value:E}=n;E&&E.focus()}else if(t.multiple){const{value:E}=i;E==null||E.focus()}else{const{value:E}=s;E==null||E.focus()}}function Ie(){const{value:E}=o;E&&(C(),E.focus())}function fe(){const{value:E}=o;E&&E.blur()}function Ce(E){const{value:H}=a;H&&H.setTextContent(`+${E}`)}function Re(){const{value:E}=l;return E}function Oe(){return o.value}let Le=null;function me(){Le!==null&&window.clearTimeout(Le)}function ke(){t.disabled||t.active||(me(),Le=window.setTimeout(()=>{f.value=!0},100))}function be(){me()}function Ae(E){E||(me(),f.value=!1)}return rt(()=>{To(()=>{const E=n.value;!E||(E.tabIndex=t.disabled||p.value?-1:0)})}),{mergedTheme:y,mergedClearable:w,patternInputFocused:p,filterablePlaceholder:A,label:b,selected:g,showTagsPanel:f,isCompositing:Y,counterRef:a,counterWrapperRef:l,patternInputMirrorRef:e,patternInputRef:o,selfRef:r,multipleElRef:i,singleElRef:s,patternInputWrapperRef:n,overflowRef:d,inputTagElRef:h,handleMouseDown:_,handleFocusin:V,handleClear:z,handleMouseEnter:I,handleMouseLeave:F,handleDeleteOption:M,handlePatternKeyDown:k,handlePatternInputInput:re,handlePatternInputBlur:ne,handlePatternInputFocus:ce,handleMouseEnterCounter:ke,handleMouseLeaveCounter:be,handleFocusout:G,handleCompositionEnd:_e,handleCompositionStart:ue,onPopoverUpdateShow:Ae,focus:ve,focusInput:Ie,blurInput:fe,updateCounter:Ce,getCounter:Re,getTail:Oe,renderLabel:t.renderLabel,cssVars:N(()=>{const{size:E}=t,{common:{cubicBezierEaseInOut:H},self:{borderRadius:we,color:$e,placeholderColor:je,textColor:ot,paddingSingle:O,caretColor:U,colorDisabled:K,textColorDisabled:te,placeholderColorDisabled:P,colorActive:D,boxShadowFocus:j,boxShadowActive:W,boxShadowHover:Z,border:ae,borderFocus:st,borderHover:Xt,borderActive:di,arrowColor:ui,arrowColorDisabled:hi,loadingColor:fi,colorActiveWarning:pi,boxShadowFocusWarning:gi,boxShadowActiveWarning:vi,boxShadowHoverWarning:mi,borderWarning:bi,borderFocusWarning:wi,borderHoverWarning:yi,borderActiveWarning:xi,colorActiveError:Pi,boxShadowFocusError:_i,boxShadowActiveError:Ti,boxShadowHoverError:Ci,borderError:Ai,borderFocusError:Si,borderHoverError:Mi,borderActiveError:Ri,clearColor:Ei,clearColorHover:Li,clearColorPressed:ki,clearSize:Fi,arrowSize:Ii,[Se("height",E)]:Oi,[Se("fontSize",E)]:Di}}=y.value;return{"--bezier":H,"--border":ae,"--border-active":di,"--border-focus":st,"--border-hover":Xt,"--border-radius":we,"--box-shadow-active":W,"--box-shadow-focus":j,"--box-shadow-hover":Z,"--caret-color":U,"--color":$e,"--color-active":D,"--color-disabled":K,"--font-size":Di,"--height":Oi,"--padding-single":O,"--placeholder-color":je,"--placeholder-color-disabled":P,"--text-color":ot,"--text-color-disabled":te,"--arrow-color":ui,"--arrow-color-disabled":hi,"--loading-color":fi,"--color-active-warning":pi,"--box-shadow-focus-warning":gi,"--box-shadow-active-warning":vi,"--box-shadow-hover-warning":mi,"--border-warning":bi,"--border-focus-warning":wi,"--border-hover-warning":yi,"--border-active-warning":xi,"--color-active-error":Pi,"--box-shadow-focus-error":_i,"--box-shadow-active-error":Ti,"--box-shadow-hover-error":Ci,"--border-error":Ai,"--border-focus-error":Si,"--border-hover-error":Mi,"--border-active-error":Ri,"--clear-size":Fi,"--clear-color":Ei,"--clear-color-hover":Li,"--clear-color-pressed":ki,"--arrow-size":Ii}})}},render(){const{multiple:t,size:e,disabled:o,filterable:r,maxTagCount:i,bordered:s,clsPrefix:n,renderTag:a,renderLabel:l}=this,d=i==="responsive",h=typeof i=="number",f=d||h,p=x(Ki,{clsPrefix:n,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear});let u;if(t){const y=S=>x("div",{class:`${n}-base-selection-tag-wrapper`,key:S.value},a?a({option:S,handleClose:()=>this.handleDeleteOption(S)}):x(Wo,{size:e,closable:!S.disabled,disabled:o,internalStopClickPropagation:!0,onClose:()=>this.handleDeleteOption(S)},{default:()=>l?l(S,!0):Lt(S.label,S,!0)})),w=(h?this.selectedOptions.slice(0,i):this.selectedOptions).map(y),A=r?x("div",{class:`${n}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},x("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:o,value:this.pattern,autofocus:this.autofocus,class:`${n}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),x("span",{ref:"patternInputMirrorRef",class:`${n}-base-selection-input-tag__mirror`},this.pattern?this.pattern:"")):null,b=d?()=>x("div",{class:`${n}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},x(Wo,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:o})):void 0;let g;if(h){const S=this.selectedOptions.length-i;S>0&&(g=x("div",{class:`${n}-base-selection-tag-wrapper`,key:"__counter__"},x(Wo,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:o},{default:()=>`+${S}`})))}const m=d?r?x(Mr,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>w,counter:b,tail:()=>A}):x(Mr,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>w,counter:b}):h?w.concat(g):w,v=f?()=>x("div",{class:`${n}-base-selection-popover`},d?w:this.selectedOptions.map(y)):void 0,C=f?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,T=!this.selected&&!this.pattern&&!this.isCompositing?x("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`},this.placeholder):null;if(r){const S=x("div",{ref:"patternInputWrapperRef",class:`${n}-base-selection-tags`},m,d?null:A,p);u=x(Mt,null,f?x(No,Object.assign({},C),{trigger:()=>S,default:v}):S,T)}else{const S=x("div",{ref:"multipleElRef",class:`${n}-base-selection-tags`,tabindex:o?void 0:0},m,p);u=x(Mt,null,f?x(No,Object.assign({},C),{trigger:()=>S,default:v}):S,T)}}else if(r){const y=!this.pattern&&(this.active||!this.selected)&&!this.isCompositing;u=x("div",{ref:"patternInputWrapperRef",class:`${n}-base-selection-label`},x("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${n}-base-selection-input`,value:this.patternInputFocused&&this.active?this.pattern:"",placeholder:"",readonly:o,disabled:o,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),y||this.patternInputFocused&&this.active?null:x("div",{class:`${n}-base-selection-label__render-label ${n}-base-selection-overlay`,key:"input"},a?a({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Lt(this.label,this.selectedOption,!0)),y?x("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`,key:"placeholder"},this.filterablePlaceholder):null,p)}else u=x("div",{ref:"singleElRef",class:`${n}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?x("div",{class:`${n}-base-selection-input`,title:Hn(this.label),key:"input"},x("div",{class:`${n}-base-selection-input__content`},a?a({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Lt(this.label,this.selectedOption,!0))):x("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`,key:"placeholder"},this.placeholder),p);return x("div",{ref:"selfRef",class:[`${n}-base-selection`,{[`${n}-base-selection--active`]:this.active,[`${n}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${n}-base-selection--disabled`]:this.disabled,[`${n}-base-selection--multiple`]:this.multiple,[`${n}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeyup:this.onKeyup,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},u,s?x("div",{class:`${n}-base-selection__border`}):null,s?x("div",{class:`${n}-base-selection__state-border`}):null)}});function Ia(t){return so(t)?t.name||t.key||"key-required":t.value}function so(t){return t.type==="group"}function Ur(t){return t.type==="ignored"}const Oa={getKey:Ia,getIsGroup:so,getIgnored:Ur};function Vr(t,e){try{return!!(1+e.toString().toLowerCase().indexOf(t.trim().toLowerCase()))}catch{return!1}}function Da(t,e,o){if(!e)return t;function r(i){if(!Array.isArray(i))return[];const s=[];for(const n of i)if(so(n)){const a=r(n.children);a.length&&s.push(Object.assign({},n,{children:a}))}else{if(Ur(n))continue;e(o,n)&&s.push(n)}return s}return r(t)}function za(t){const e=new Map;return t.forEach(o=>{so(o)?o.children.forEach(r=>{e.set(r.value,r)}):e.set(o.value,o)}),e}function Ba(t,e){return e?typeof e.label=="string"?Vr(t,e.label):e.value!==void 0?Vr(t,String(e.value)):!1:!1}function $a(t){const{boxShadow2:e}=t;return{menuBoxShadow:e}}const Ua=qt({name:"Select",common:lt,peers:{InternalSelection:$r,InternalSelectMenu:Dr},self:$a});var Va=Ua,Na=J([X("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),X("select-menu",`
 margin: 4px 0;
 box-shadow: var(--menu-box-shadow);
 `,[Or()])]);const Wa=Object.assign(Object.assign({},Te.props),{to:ft.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:{type:Function,default:Ba},placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:{type:Function,default:t=>({label:t,value:t})},fallbackOption:{type:[Function,Boolean],default:()=>t=>({label:String(t),value:t})},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0},items:{type:Array,validator:()=>!0,default:void 0},displayDirective:{type:String,default:"show"}});var Ha=se({name:"Select",props:Wa,setup(t){const{mergedClsPrefixRef:e,mergedBorderedRef:o,namespaceRef:r}=wt(t),i=Te("Select","Select",Na,Va,t,e),s=B(t.defaultValue),n=pe(t,"value"),a=bo(n,s),l=B(!1),d=B(""),h=N(()=>xs(L.value,Oa)),f=N(()=>za(R.value)),p=B(!1),u=bo(pe(t,"show"),p),y=B(null),w=B(null),A=B(null),{localeRef:b}=Zt("Select"),g=N(()=>{var P;return(P=t.placeholder)!==null&&P!==void 0?P:b.value.placeholder}),m=qo(t,["items","options"]),v=B([]),C=B([]),T=B(new Map),S=N(()=>{const{fallbackOption:P}=t;return P?D=>Object.assign(P(D),{value:D}):!1}),R=N(()=>C.value.concat(v.value).concat(m.value)),L=N(()=>{if(t.remote)return m.value;{const{value:P}=R,{value:D}=d;if(!D.length||!t.filterable)return P;{const{filter:j}=t;return Da(P,j,D)}}});function $(P){const D=t.remote,{value:j}=T,{value:W}=f,{value:Z}=S,ae=[];return P.forEach(st=>{if(W.has(st))ae.push(W.get(st));else if(D&&j.has(st))ae.push(j.get(st));else if(Z){const Xt=Z(st);Xt&&ae.push(Xt)}}),ae}const V=N(()=>{if(t.multiple){const{value:P}=a;return Array.isArray(P)?$(P):[]}return null}),G=N(()=>{const{value:P}=a;return!t.multiple&&!Array.isArray(P)?P===null?null:$([P])[0]||null:null}),z=Zi(t),{mergedSizeRef:I,mergedDisabledRef:F}=z;function _(P,D){const{onChange:j,"onUpdate:value":W,onUpdateValue:Z}=t,{nTriggerFormChange:ae,nTriggerFormInput:st}=z;j&&Ee(j,P,D),Z&&Ee(Z,P,D),W&&Ee(W,P,D),s.value=P,ae(),st()}function M(P){const{onBlur:D}=t,{nTriggerFormBlur:j}=z;D&&Ee(D,P),j()}function k(){const{onClear:P}=t;P&&Ee(P)}function Y(P){const{onFocus:D}=t,{nTriggerFormFocus:j}=z;D&&Ee(D,P),j()}function ie(P){const{onSearch:D}=t;D&&Ee(D,P)}function re(P){const{onScroll:D}=t;D&&Ee(D,P)}function ue(){var P;const{remote:D,multiple:j}=t;if(D){const{value:W}=T;if(j)(P=V.value)===null||P===void 0||P.forEach(Z=>{W.set(Z.value,Z)});else{const Z=G.value;Z&&W.set(Z.value,Z)}}}function _e(P){const{onUpdateShow:D,"onUpdate:show":j}=t;D&&Ee(D,P),j&&Ee(j,P),p.value=P}function ce(){F.value||(d.value="",_e(!0),p.value=!0,t.filterable&&K())}function ne(){_e(!1)}function ve(){d.value=""}function Ie(){F.value||(u.value?t.filterable||ne():ce())}function fe(P){var D,j;((j=(D=A.value)===null||D===void 0?void 0:D.selfRef)===null||j===void 0?void 0:j.contains(P.relatedTarget))||(l.value=!1,M(P),ne())}function Ce(P){Y(P),l.value=!0}function Re(P){l.value=!0}function Oe(P){var D;((D=y.value)===null||D===void 0?void 0:D.$el.contains(P.relatedTarget))||(l.value=!1,M(P),ne())}function Le(){var P;(P=y.value)===null||P===void 0||P.focus(),ne()}function me(P){var D;u.value&&(((D=y.value)===null||D===void 0?void 0:D.$el.contains(P.target))||ne())}function ke(P){if(!Array.isArray(P))return[];if(S.value)return Array.from(P);{const{remote:D}=t,{value:j}=f;if(D){const{value:W}=T;return P.filter(Z=>j.has(Z)||W.has(Z))}else return P.filter(W=>j.has(W))}}function be(P){Ae(P.rawNode)}function Ae(P){if(F.value)return;const{tag:D,remote:j}=t;if(D&&!j){const{value:W}=C,Z=W[0]||null;Z&&(v.value.push(Z),C.value=[])}if(j&&T.value.set(P.value,P),t.multiple){const W=ke(a.value),Z=W.findIndex(ae=>ae===P.value);if(~Z){if(W.splice(Z,1),D&&!j){const ae=E(P.value);~ae&&(v.value.splice(ae,1),d.value="")}}else W.push(P.value),d.value="";_(W,$(W))}else{if(D&&!j){const W=E(P.value);~W?v.value=[v.value[W]]:v.value=[]}U(),ne(),_(P.value,P)}}function E(P){return v.value.findIndex(j=>j.value===P)}function H(P){u.value||ce();const{value:D}=P.target;d.value=D;const{tag:j,remote:W}=t;if(ie(D),j&&!W){if(!D){C.value=[];return}const Z=t.onCreate(D);m.value.some(ae=>ae.value===Z.value)||v.value.some(ae=>ae.value===Z.value)?C.value=[]:C.value=[Z]}}function we(P){P.stopPropagation();const{multiple:D}=t;!D&&t.filterable&&ne(),k(),D?_([],[]):_(null,null)}function $e(P){Ao(P,"action")||P.preventDefault()}function je(P){re(P)}function ot(P){var D,j,W,Z;switch(P.code){case"Space":if(t.filterable)break;case"Enter":case"NumpadEnter":if(u.value){const ae=(D=A.value)===null||D===void 0?void 0:D.getPendingTmNode();ae?be(ae):t.filterable||(ne(),U())}else ce();P.preventDefault();break;case"ArrowUp":if(t.loading)return;u.value&&((j=A.value)===null||j===void 0||j.prev());break;case"ArrowDown":if(t.loading)return;u.value?(W=A.value)===null||W===void 0||W.next():ce();break;case"Escape":ne(),(Z=y.value)===null||Z===void 0||Z.focus();break}}function O(P){switch(P.code){case"Space":t.filterable||P.preventDefault();break;case"ArrowUp":case"ArrowDown":P.preventDefault();break}}function U(){var P;(P=y.value)===null||P===void 0||P.focus()}function K(){var P;(P=y.value)===null||P===void 0||P.focusInput()}function te(){var P;(P=w.value)===null||P===void 0||P.syncPosition()}return ue(),We(pe(t,"options"),ue),We(L,()=>{!u.value||xt(te)}),We(a,()=>{!u.value||xt(te)}),{mergedClsPrefix:e,mergedBordered:o,namespace:r,treeMate:h,isMounted:vo(),triggerRef:y,menuRef:A,pattern:d,uncontrolledShow:p,mergedShow:u,adjustedTo:ft(t),uncontrolledValue:s,mergedValue:a,followerRef:w,localizedPlaceholder:g,selectedOption:G,selectedOptions:V,mergedSize:I,mergedDisabled:F,focused:l,handleMenuFocus:Re,handleMenuBlur:Oe,handleMenuTabOut:Le,handleTriggerClick:Ie,handleToggle:be,handleDeleteOption:Ae,handlePatternInput:H,handleClear:we,handleTriggerBlur:fe,handleTriggerFocus:Ce,handleKeyDown:O,handleKeyUp:ot,syncPosition:te,handleMenuAfterLeave:ve,handleMenuClickOutside:me,handleMenuScroll:je,handleMenuKeyup:ot,handleMenuKeydown:O,handleMenuMousedown:$e,mergedTheme:i,cssVars:N(()=>{const{self:{menuBoxShadow:P}}=i.value;return{"--menu-box-shadow":P}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;return x("div",{class:`${e}-select`},x(_r,null,{default:()=>[x(Tr,null,{default:()=>x(Fa,{ref:"triggerRef",inputProps:this.inputProps,clsPrefix:e,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp})}),x(Sr,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===ft.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>x(Wt,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var o,r;return(this.mergedShow||this.displayDirective==="show")&&to(x(ca,Object.assign({},this.menuProps,{ref:"menuRef",virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${e}-select-menu`,(o=this.menuProps)===null||o===void 0?void 0:o.class],clsPrefix:e,focusable:!0,autoPending:!0,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(r=this.menuProps)===null||r===void 0?void 0:r.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeyup:this.handleMenuKeyup,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow}),t),this.displayDirective==="show"?[[sr,this.mergedShow],[no,this.handleMenuClickOutside]]:[[no,this.handleMenuClickOutside]])}})})]}))}});const ja=t=>{const{textColorBase:e,opacity1:o,opacity2:r,opacity3:i,opacity4:s,opacity5:n}=t;return{color:e,opacity1Depth:o,opacity2Depth:r,opacity3Depth:i,opacity4Depth:s,opacity5Depth:n}},Xa={name:"Icon",common:lt,self:ja};var Ya=Xa,Ga=X("icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[he("color-transition",{transition:"color .3s var(--bezier)"}),he("depth",{color:"var(--color)"},[J("svg",{opacity:"var(--opacity)",transition:"opacity .3s var(--bezier)"})]),J("svg",{height:"1em",width:"1em"})]),Nr=se({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:Object.assign(Object.assign({},Te.props),{depth:[String,Number],size:[Number,String],color:String}),setup(t){const{mergedClsPrefixRef:e}=wt(t),o=Te("Icon","Icon",Ga,Ya,t,e);return{mergedClsPrefix:e,mergedStyle:N(()=>{const{size:r,color:i}=t;return{fontSize:Nt(r),color:i}}),cssVars:N(()=>{const{depth:r}=t,{common:{cubicBezierEaseInOut:i},self:s}=o.value;if(r!==void 0){const{color:n,[`opacity${r}Depth`]:a}=s;return{"--bezier":i,"--color":n,"--opacity":a}}return{"--bezier":i}})}},render(){var t;const{$parent:e,depth:o,mergedClsPrefix:r}=this;return((t=e==null?void 0:e.$options)===null||t===void 0?void 0:t._n_icon__)&&po("icon","don't wrap `n-icon` inside `n-icon`"),x("i",oo(this.$attrs,{role:"img",class:[`${r}-icon`,{[`${r}-icon--depth`]:o,[`${r}-icon--color-transition`]:o!==void 0}],style:Object.assign(this.cssVars,this.mergedStyle)}),this.$slots)}}),Ka={iconSize:"22px"};const Za=t=>{const{fontSize:e,warningColor:o}=t;return Object.assign(Object.assign({},Ka),{fontSize:e,iconColor:o})},qa=qt({name:"Popconfirm",common:lt,peers:{Button:qi,Popover:Uo},self:Za});var Qa=qa;const Wr=Symbol("popconfirm"),Hr={positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0}},jr=Wn(Hr);var Ja=se({name:"NPopconfirmPanel",props:Hr,setup(t){const{localeRef:e}=Zt("Popconfirm"),{mergedClsPrefixRef:o,mergedThemeRef:r}=qe(Wr);return Object.assign(Object.assign({},Zt("Popconfirm")),{mergedClsPrefix:o,cssVars:N(()=>{const{common:{cubicBezierEaseInOut:i},self:{fontSize:s,iconSize:n,iconColor:a}}=r.value;return{"--bezier":i,"--font-size":s,"--icon-size":n,"--icon-color":a}}),localizedPositiveText:N(()=>t.positiveText||e.value.positiveText),localizedNegativeText:N(()=>t.negativeText||e.value.negativeText),handlePositiveClick(i){t.onPositiveClick(i)},handleNegativeClick(i){t.onNegativeClick(i)}})},render(){const{mergedClsPrefix:t,$slots:e}=this,o=e.action?e.action():this.negativeText===null&&this.positiveText===null?null:[this.negativeText!==null&&x(wo,{size:"small",onClick:this.handleNegativeClick},{default:()=>this.localizedNegativeText}),this.positiveText!==null&&x(wo,{size:"small",type:"primary",onClick:this.handlePositiveClick},{default:()=>this.localizedPositiveText})];return x("div",{style:this.cssVars},x("div",{class:`${t}-popconfirm__body`},this.showIcon?x("div",{class:`${t}-popconfirm__icon`},et(e,"icon",void 0,()=>[x(Yt,{clsPrefix:t},{default:()=>x(gn,null)})])):null,et(e,"default")),o?x("div",{class:`${t}-popconfirm__action`},o):null)}}),el=X("popconfirm",[Q("body",`
 font-size: var(--font-size);
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 position: relative;
 `,[Q("icon",`
 display: flex;
 font-size: var(--icon-size);
 color: var(--icon-color);
 transition: color .3s var(--bezier);
 margin: 0 8px 0 0;
 `)]),Q("action",`
 margin-top: 8px;
 display: flex;
 justify-content: flex-end;
 `,[X("button",[J("&:not(:last-child)",{marginRight:"8px"})])])]);const tl=Object.assign(Object.assign(Object.assign({},Te.props),Br),{positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},trigger:{type:String,default:"click"},onPositiveClick:Function,onNegativeClick:Function});var ol=se({name:"Popconfirm",props:tl,__popover__:!0,setup(t){const{mergedClsPrefixRef:e}=wt(),o=Te("Popconfirm","Popconfirm",el,Qa,t,e),r=B(null);function i(n){const{onPositiveClick:a,"onUpdate:show":l}=t;Promise.resolve(a?a(n):!0).then(d=>{var h;d!==!1&&((h=r.value)===null||h===void 0||h.setShow(!1),l&&Ee(l,!1))})}function s(n){const{onNegativeClick:a,"onUpdate:show":l}=t;Promise.resolve(a?a(n):!0).then(d=>{var h;d!==!1&&((h=r.value)===null||h===void 0||h.setShow(!1),l&&Ee(l,!1))})}return ut(Wr,{mergedThemeRef:o,mergedClsPrefixRef:e}),{mergedTheme:o,popoverInstRef:r,handlePositiveClick:i,handleNegativeClick:s}},render(){const{$slots:t,$props:e,mergedTheme:o}=this;return x(No,Nn(e,jr,{theme:o.peers.Popover,themeOverrides:o.peerOverrides.Popover,internalExtraClass:["popconfirm"],ref:"popoverInstRef"}),{trigger:t.activator||t.trigger,default:()=>{const r=cr(e,jr);return x(Ja,Object.assign(Object.assign({},r),{onPositiveClick:this.handlePositiveClick,onNegativeClick:this.handleNegativeClick}),t)}})}}),q;(function(t){t.trunk="trunk",t.head="head",t.leftUpperArm="leftUpperArm",t.leftLowerArm="leftLowerArm",t.leftHand="leftHand",t.leftThigh="leftThigh",t.leftCalf="leftCalf",t.leftFoot="leftFoot",t.rightUpperArm="rightUpperArm",t.rightLowerArm="rightLowerArm",t.rightHand="rightHand",t.rightThigh="rightThigh",t.rightCalf="rightCalf",t.rightFoot="rightFoot"})(q||(q={}));class He{constructor(){c(this,"vertexArr",[]);c(this,"normalArr",[]);c(this,"indexArr",[]);c(this,"_lowerX",0);c(this,"_lowerY",0);c(this,"_lowerZ",0);c(this,"_upperX",0);c(this,"_upperY",0);c(this,"_upperZ",0);c(this,"_xRange",0);c(this,"_yRange",0);c(this,"_zRange",0)}load(e){const o=this.vertexArr,r=this.normalArr,i=this.indexArr,s=e.split(`
`);let n=1/0,a=1/0,l=1/0,d=-1/0,h=-1/0,f=-1/0;for(let p=0,u=s.length;p<u;++p){const y=s[p].trim();if(!y)continue;const w=y.split(" ");switch(w[0]){case"v":{const A=Number(w[1])||0,b=Number(w[2])||0,g=Number(w[3])||0;o.push([A,b,g]),n=Math.min(n,A),a=Math.min(a,b),l=Math.min(l,g),d=Math.max(d,A),h=Math.max(h,b),f=Math.max(f,g)}break;case"vn":{const A=Number(w[1])||0,b=Number(w[2])||0,g=Number(w[3])||0;r.push([A,b,g])}break;case"f":{const A=[];for(let b=1,g=w.length;b<g;++b){const m=w[b].split("/");A.push([Number(m[0])-1,m[2]?Number(m[2])-1:-1])}i.push(A)}break}}return this._lowerX=n,this._lowerY=a,this._lowerZ=l,this._upperX=d,this._upperY=h,this._upperZ=f,this._xRange=d-n,this._yRange=h-a,this._zRange=f-l,this}translate(e,o,r){const i=this.vertexArr;for(let s=0,n=i.length;s<n;++s){const a=i[s];a[0]+=e,a[1]+=o,a[2]+=r}return this._lowerX+=e,this._upperX+=e,this._lowerY+=o,this._upperY+=o,this._lowerZ+=r,this._upperZ+=r,this}setGeometryVertices(e,o=[1,1,1,1]){const r=[],i=[],s=this.vertexArr,n=this.normalArr,a=this.indexArr;for(let l=0,d=a.length;l<d;++l){const h=a[l];if(h.length!==3&&h.length!==4)throw new Error("Illegal face vertices num");const f=r.length;for(let p=0,u=h.length;p<u;++p){const y=h[p],w=y[0],A=y[1],b=s[w],g=A<0?[0,0,0]:n[A];r.push({a_color:o,a_position:b,a_normal:g})}h.length===3?i.push(f,f+1,f+2):i.push(f,f+1,f+2,f,f+2,f+3)}e.setVertices(r),e.indices=i}get lowerX(){return this._lowerX}get lowerY(){return this._lowerY}get lowerZ(){return this._lowerZ}get upperX(){return this._upperX}get upperY(){return this._upperY}get upperZ(){return this._upperZ}get xRange(){return this._xRange}get yRange(){return this._yRange}get zRange(){return this._zRange}}class rl{constructor(e,o,r){c(this,"name");c(this,"componentSize");c(this,"vertices");c(this,"vbo");this.name=e,this.componentSize=o,this.vertices=r}}var Xr;(function(t){t[t.TRIANGLES=0]="TRIANGLES",t[t.LINES=1]="LINES"})(Xr||(Xr={}));class jt{constructor(e=0){c(this,"type",0);c(this,"attributes",[]);c(this,"indices",[]);c(this,"ibo");c(this,"vao");this.type=e}setVertices(e){const o=e.length,r={};for(let i in e[0])if(e[0].hasOwnProperty(i)){const s=e[0][i].length;r[i]=new rl(i,s,new Float32Array(s*o))}for(let i=0;i<o;++i){const s=e[i];for(let n in s)if(s.hasOwnProperty(n)){const a=s[n];r[n].vertices.set(a,a.length*i)}}this.attributes=Object.values(r)}}c(jt,"TYPE_TRIANGLES",0),c(jt,"TYPE_LINES",1);const il=[1,1,1,1],nl=[1,1,1,.1];class ze{constructor(){c(this,"translation",[0,0,0]);c(this,"forward",[0,0,1]);c(this,"up",[0,1,0]);c(this,"controlPoint");c(this,"landmarks",[]);c(this,"parent");c(this,"children",[]);c(this,"active",!0);c(this,"localRotation",yo());c(this,"localMatrix",Qo());c(this,"worldMatrix",Qo());c(this,"originWorldPosition",ye());c(this,"originViewPosition",ye());c(this,"controlPointWorldPosition",ye());c(this,"controlPointViewPosition",ye());c(this,"controlPointScreenPosition",ye());c(this,"landmarksWorldPositions",[]);c(this,"landmarksViewPosition",[]);c(this,"geometry",new jt)}render(e){e.uniform("u_mMatrix",this.worldMatrix),e.uniform("u_color",this.active?il:nl),e.drawGeometry(this.geometry)}dispose(e){e.drawGeometry(this.geometry)}}const sl=[0,0,0];var kc,Fc,Ic,Oc,Dc,zc,Bc,$c,Uc,Vc,Nc,Wc,Hc,jc;class Ho{constructor(){c(this,"root",new ze);c(this,kc,this.root);c(this,Fc,new ze);c(this,Ic,new ze);c(this,Oc,new ze);c(this,Dc,new ze);c(this,zc,new ze);c(this,Bc,new ze);c(this,$c,new ze);c(this,Uc,new ze);c(this,Vc,new ze);c(this,Nc,new ze);c(this,Wc,new ze);c(this,Hc,new ze);c(this,jc,new ze)}update(e,o=this.root){const r=[o];for(;;){const i=r.pop();if(!i)break;r.push(...i.children),Jo(i.localRotation,i.forward,i.up),Qi(i.localMatrix,i.localRotation,i.translation),i.parent?xo(i.worldMatrix,i.parent.worldMatrix,i.localMatrix):Ji(i.worldMatrix,i.localMatrix),dt(i.originWorldPosition,sl,i.worldMatrix),dt(i.originViewPosition,i.originWorldPosition,e.viewMatrix),i.controlPoint&&(dt(i.controlPointWorldPosition,i.controlPoint,i.worldMatrix),dt(i.controlPointViewPosition,i.controlPointWorldPosition,e.viewMatrix),dt(i.controlPointScreenPosition,i.controlPointWorldPosition,e.pvMatrix)),i.landmarks.length!==i.landmarksWorldPositions.length&&(i.landmarksWorldPositions=i.landmarks.map(s=>[0,0,0]),i.landmarksViewPosition=i.landmarks.map(s=>[0,0,0]));for(let s=0,n=i.landmarks.length;s<n;++s)dt(i.landmarksWorldPositions[s],i.landmarks[s],i.worldMatrix),dt(i.landmarksViewPosition[s],i.landmarksWorldPositions[s],e.viewMatrix)}}render(e){const o=[this.root];for(;;){const r=o.pop();if(!r)break;o.push(...r.children),r.render(e)}}async init(){const e=Ue(()=>import("./head.643b9ca2.js"),[]),o=Ue(()=>import("./trunk.6456ff5d.js"),[]),r=Ue(()=>import("./left-upper-arm.6bab6c42.js"),[]),i=Ue(()=>import("./left-lower-arm.ebe30a6b.js"),[]),s=Ue(()=>import("./left-hand.9f228153.js"),[]),n=Ue(()=>import("./right-upper-arm.247f0ea0.js"),[]),a=Ue(()=>import("./right-lower-arm.befeeb58.js"),[]),l=Ue(()=>import("./right-hand.1a2b65b4.js"),[]),d=Ue(()=>import("./left-thigh.ae8e3bcc.js"),[]),h=Ue(()=>import("./left-calf.02fe224f.js"),[]),f=Ue(()=>import("./left-foot.d9162ea3.js"),[]),p=Ue(()=>import("./right-thigh.920c863c.js"),[]),u=Ue(()=>import("./right-calf.20f1f9a3.js"),[]),y=Ue(()=>import("./right-foot.478e8c23.js"),[]);await Promise.all([e,o,r,i,s,n,a,l,d,h,f,p,u,y]);const w=new He().load((await e).default),A=new He().load((await o).default),b=new He().load((await r).default),g=new He().load((await i).default),m=new He().load((await s).default),v=new He().load((await n).default),C=new He().load((await a).default),T=new He().load((await l).default),S=new He().load((await d).default),R=new He().load((await h).default),L=new He().load((await f).default),$=new He().load((await p).default),V=new He().load((await u).default),G=new He().load((await y).default),z=[0,w.lowerY+w.yRange*.35,w.zRange*-.1],I=[b.lowerX+b.xRange*.3,b.lowerY+b.yRange*(1-.075),b.zRange*-.1],F=[g.lowerX-I[0]+g.xRange*.5,g.lowerY-I[1]+g.yRange*(1-.05),g.lowerZ-I[2]+g.zRange*.3],_=[m.lowerX-F[0]-I[0]+m.xRange*.85,m.lowerY-F[1]-I[1]+m.yRange*(1-.05),m.lowerZ-F[2]-I[2]+m.zRange*.65],M=[S.lowerX+S.xRange*.5,S.lowerY+S.yRange*(1-.05),S.zRange*.05],k=[R.lowerX-M[0]+R.xRange*.5,R.lowerY-M[1]+R.yRange*(1-.05),R.lowerZ-M[2]+R.zRange*.65],Y=[L.lowerX-M[0]-k[0]+L.xRange*.3,L.lowerY-M[1]-k[1]+L.yRange*(1-.25),L.lowerZ-M[2]-k[2]+L.zRange*.25],ie=[0,A.yRange*.75,0],re=[0,0,w.yRange*.5],ue=[b.xRange*.3,b.yRange*-.85,b.zRange*-.3],_e=[0,g.yRange*-.9,g.zRange*.4],ce=[m.xRange*-.2,m.yRange*-.8,m.zRange*-.1],ne=[S.xRange*-.15,S.yRange*-.87,S.zRange*-.25],ve=[0,R.yRange*-.85,R.zRange*-.3],Ie=[L.xRange*.25,L.yRange*-.5,L.zRange*.6];function fe(O){return[-O[0],O[1],O[2]]}const Ce=this.root;A.setGeometryVertices(Ce.geometry),Ce.controlPoint=ie;const Re=this.addChild(this.root,this.head);Re.landmarks=[[-w.lowerX,w.yRange*.05,w.zRange*.15],[-w.upperX,w.yRange*.05,w.zRange*.15]],w.translate(-z[0],-z[1],-z[2]),w.setGeometryVertices(Re.geometry),Re.translation=z,Re.controlPoint=re;const Oe=this.addChild(this.root,this.leftUpperArm);b.translate(-I[0],-I[1],-I[2]),b.setGeometryVertices(Oe.geometry),Oe.translation=I,Oe.controlPoint=ue;const Le=this.addChild(this.root,this.rightUpperArm);v.translate(+I[0],-I[1],-I[2]),v.setGeometryVertices(Le.geometry),Le.translation=fe(I),Le.controlPoint=fe(ue);const me=this.addChild(Oe,this.leftLowerArm);g.translate(-F[0]-I[0],-F[1]-I[1],-F[2]-I[2]),g.setGeometryVertices(me.geometry),me.translation=F,me.controlPoint=_e;const ke=this.addChild(Le,this.rightLowerArm);C.translate(+F[0]+I[0],-F[1]-I[1],-F[2]-I[2]),C.setGeometryVertices(ke.geometry),ke.translation=fe(F),ke.controlPoint=fe(_e);const be=this.addChild(me,this.leftHand);m.translate(-_[0]-F[0]-I[0],-_[1]-F[1]-I[1],-_[2]-F[2]-I[2]),m.setGeometryVertices(be.geometry),be.translation=_,be.controlPoint=ce;const Ae=this.addChild(ke,this.rightHand);T.translate(+_[0]+F[0]+I[0],-_[1]-F[1]-I[1],-_[2]-F[2]-I[2]),T.setGeometryVertices(Ae.geometry),Ae.translation=fe(_),Ae.controlPoint=fe(ce);const E=this.addChild(Ce,this.leftThigh);S.translate(-M[0],-M[1],-M[2]),S.setGeometryVertices(E.geometry),E.translation=M,E.controlPoint=ne;const H=this.addChild(Ce,this.rightThigh);$.translate(+M[0],-M[1],-M[2]),$.setGeometryVertices(H.geometry),H.translation=fe(M),H.controlPoint=fe(ne);const we=this.addChild(E,this.leftCalf);R.translate(-k[0]-M[0],-k[1]-M[1],-k[2]-M[2]),R.setGeometryVertices(we.geometry),we.translation=k,we.controlPoint=ve;const $e=this.addChild(H,this.rightCalf);V.translate(+k[0]+M[0],-k[1]-M[1],-k[2]-M[2]),V.setGeometryVertices($e.geometry),$e.translation=fe(k),$e.controlPoint=fe(ve);const je=this.addChild(we,this.leftFoot);L.translate(-Y[0]-k[0]-M[0],-Y[1]-k[1]-M[1],-Y[2]-k[2]-M[2]),L.setGeometryVertices(je.geometry),je.translation=Y,je.controlPoint=Ie;const ot=this.addChild($e,this.rightFoot);G.translate(+Y[0]+k[0]+M[0],-Y[1]-k[1]-M[1],-Y[2]-k[2]-M[2]),G.setGeometryVertices(ot.geometry),ot.translation=fe(Y),ot.controlPoint=fe(Ie)}addChild(e,o){return o=o||new ze,e.children.push(o),o.parent=e,o}}kc=q.trunk,Fc=q.head,Ic=q.leftUpperArm,Oc=q.leftLowerArm,Dc=q.leftHand,zc=q.leftThigh,Bc=q.leftCalf,$c=q.leftFoot,Uc=q.rightUpperArm,Vc=q.rightLowerArm,Nc=q.rightHand,Wc=q.rightThigh,Hc=q.rightCalf,jc=q.rightFoot;function jo(t,e,o,r,i,s,n,a,l,d,h,f,p){const u=i-e,y=s-o,w=n-r,A=Math.sqrt(u**2+y**2+w**2);if(A<=1e-8)return!1;const b=u/A,g=y/A,m=w/A,v=Math.sqrt(h**2+f**2+p**2);if(v<=1e-8)return!1;const C=1/v;h*=C,f*=C,p*=C;const T=b*h+g*f+m*p;if(Math.abs(T)<=1e-8)return!1;const S=-e+a,R=-o+l,L=-r+d,$=(S*h+R*f+L*p)/T,V=e+$*b,G=o+$*g,z=r+$*m;return Ye(t,V,G,z),$>=0}function al(t,e,o,r,i,s,n,a,l,d,h){let f=i-e,p=s-o,u=n-r;const y=e-a,w=o-l,A=r-d,b=f**2+p**2+u**2,g=2*(f*y+p*w+u*A),m=y**2+w**2+A**2-h**2,v=g**2-4*b*m;if(v<0)return!1;const C=Math.sqrt(v),T=(-g+C)/(2*b),S=(-g-C)/(2*b),R=Math.min(T,S);return t[0]=e+f*R,t[1]=o+p*R,t[2]=r+u*R,!0}class Yr{constructor(){c(this,"dragStartMousePosition",ye());c(this,"dragStartOriginPosition",ye());c(this,"dragStartTargetPosition",ye());c(this,"mousePosition",ye());c(this,"mouseRay0",ye());c(this,"mouseRay1",ye());c(this,"rayResult0",ye());c(this,"rayResult1",ye());c(this,"normal",ye());c(this,"radius",0);c(this,"offset",ye())}}function ll(t,e,o,r,i,s,n){Ye(t.dragStartMousePosition,e,o,0),Ye(t.dragStartTargetPosition,r,i,s),_t(t.normal,n.target,n.position)}function Gr(t,e,o,r){return t.dragStartMousePosition[2]=-1,r.screenToView(t.mouseRay0,t.dragStartMousePosition),t.dragStartMousePosition[2]=1,r.screenToView(t.mouseRay1,t.dragStartMousePosition),!jo(t.rayResult0,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartTargetPosition[0],t.dragStartTargetPosition[1],t.dragStartTargetPosition[2],t.normal[0],t.normal[1],t.normal[2])||(Ye(t.mousePosition,e,o,-1),r.screenToView(t.mouseRay0,t.mousePosition),Ye(t.mousePosition,e,o,1),r.screenToView(t.mouseRay1,t.mousePosition),!jo(t.rayResult1,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartTargetPosition[0],t.dragStartTargetPosition[1],t.dragStartTargetPosition[2],t.normal[0],t.normal[1],t.normal[2]))?!1:(_t(t.offset,t.rayResult1,t.rayResult0),!0)}function cl(t,e,o,r,i,s,n,a,l,d){Ye(t.dragStartMousePosition,e,o,0),Ye(t.dragStartOriginPosition,r,i,s),Ye(t.dragStartTargetPosition,n,a,l),_t(t.normal,t.dragStartTargetPosition,d.position),t.radius=en(t.dragStartOriginPosition,t.dragStartTargetPosition)}function dl(t,e,o,r){const i=er(t.normal,t.dragStartOriginPosition);return er(t.normal,t.dragStartTargetPosition)-i<=0?(Ye(t.mousePosition,e,o,-1),r.screenToView(t.mouseRay0,t.mousePosition),Ye(t.mousePosition,e,o,1),r.screenToView(t.mouseRay1,t.mousePosition),al(t.rayResult1,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartOriginPosition[0],t.dragStartOriginPosition[1],t.dragStartOriginPosition[2],t.radius)?!0:jo(t.rayResult1,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartOriginPosition[0],t.dragStartOriginPosition[1],t.dragStartOriginPosition[2],t.normal[0],t.normal[1],t.normal[2])):Gr(t,e,o,r)}class ul{constructor(e,o,r,i,s,n){c(this,"perspective",!1);c(this,"_pvMatrix",new Float32Array(16));c(this,"_invPvMatrix",new Float32Array(16));c(this,"_projectionMatrix",new Float32Array(16));c(this,"_viewMatrix",new Float32Array(16));c(this,"_position",new Float32Array(3));c(this,"_target",new Float32Array(3));c(this,"_up",new Float32Array([0,1,0]));c(this,"_left");c(this,"_right");c(this,"_bottom");c(this,"_top");c(this,"_near");c(this,"_far");c(this,"matrixNeedsUpdate",!0);this._left=e,this._right=o,this._bottom=r,this._top=i,this._near=s,this._far=n}fitViewport(e,o){this.left=-e/2,this.right=e/2,this.bottom=-o/2,this.top=o/2}screenToView(e,o){dt(e,o,this._invPvMatrix)}updateMatrix(){tn(this._projectionMatrix,this._left,this._right,this._bottom,this._top,this._near,this._far),tr(this._viewMatrix,this._position,this._target,this._up),xo(this._pvMatrix,this._projectionMatrix,this._viewMatrix),or(this._invPvMatrix,this._pvMatrix),this.matrixNeedsUpdate=!1}get pvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._pvMatrix}get invPvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._invPvMatrix}get projectionMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._projectionMatrix}get viewMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._viewMatrix}get position(){return this._position}set position(e){Tt(e,this._position)||(this.matrixNeedsUpdate=!0,this._position.set(e))}get target(){return this._target}set target(e){Tt(e,this._target)||(this.matrixNeedsUpdate=!0,this._target.set(e))}get up(){return this._up}set up(e){Tt(e,this._up)||(this.matrixNeedsUpdate=!0,this._up.set(e))}get left(){return this._left}set left(e){e!==this._left&&(this.matrixNeedsUpdate=!0,this._left=e)}get right(){return this._right}set right(e){e!==this._right&&(this.matrixNeedsUpdate=!0,this._right=e)}get bottom(){return this._bottom}set bottom(e){e!==this._bottom&&(this.matrixNeedsUpdate=!0,this._bottom=e)}get top(){return this._top}set top(e){e!==this._top&&(this.matrixNeedsUpdate=!0,this._top=e)}get near(){return this._near}set near(e){e!==this._near&&(this.matrixNeedsUpdate=!0,this._near=e)}get far(){return this._far}set far(e){e!==this._far&&(this.matrixNeedsUpdate=!0,this._far=e)}}class hl{constructor(e,o,r,i){c(this,"perspective",!0);c(this,"_pvMatrix",new Float32Array(16));c(this,"_invPvMatrix",new Float32Array(16));c(this,"_projectionMatrix",new Float32Array(16));c(this,"_viewMatrix",new Float32Array(16));c(this,"_position",new Float32Array(3));c(this,"_target",new Float32Array(3));c(this,"_up",new Float32Array([0,1,0]));c(this,"_fovYRad");c(this,"_aspect");c(this,"_near");c(this,"_far");c(this,"matrixNeedsUpdate",!0);this._fovYRad=e,this._aspect=o,this._near=r,this._far=i}fitViewport(e,o){this.aspect=e/o}screenToView(e,o){dt(e,o,this._invPvMatrix)}updateMatrix(){on(this._projectionMatrix,this._fovYRad,this._aspect,this._near,this._far),tr(this._viewMatrix,this._position,this._target,this._up),xo(this._pvMatrix,this._projectionMatrix,this._viewMatrix),or(this._invPvMatrix,this._pvMatrix),this.matrixNeedsUpdate=!1}get pvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._pvMatrix}get invPvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._invPvMatrix}get projectionMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._projectionMatrix}get viewMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._viewMatrix}get position(){return this._position}set position(e){Tt(e,this._position)||(this.matrixNeedsUpdate=!0,this._position.set(e))}get target(){return this._target}set target(e){Tt(e,this._target)||(this.matrixNeedsUpdate=!0,this._target.set(e))}get up(){return this._up}set up(e){Tt(e,this._up)||(this.matrixNeedsUpdate=!0,this._up.set(e))}get fovYRad(){return this._fovYRad}set fovYRad(e){this._fovYRad!==e&&(this.matrixNeedsUpdate=!0,this._fovYRad=e)}get aspect(){return this._aspect}set aspect(e){this._aspect!==e&&(this.matrixNeedsUpdate=!0,this._aspect=e)}get near(){return this._near}set near(e){this._near!==e&&(this.matrixNeedsUpdate=!0,this._near=e)}get far(){return this._far}set far(e){this._far!==e&&(this.matrixNeedsUpdate=!0,this._far=e)}}const fl=.9,pl=-12,gl=1.2,vl=4;class Kr{constructor(e=45/180*Math.PI,o=.1,r=1e3){c(this,"viewportWidth",1);c(this,"viewportHeight",1);c(this,"perspectiveCamera");c(this,"orthographicCamera");c(this,"perspective",!0);c(this,"far",2);c(this,"target",$t(0,0,0));c(this,"rotateX",0);c(this,"rotateY",0);c(this,"zoom",1);c(this,"position",$t(0,0,0));c(this,"orthographicZoomRatio",1.6);c(this,"defaultPosition",$t(0,0,1));c(this,"defaultUp",$t(0,1,0));c(this,"up",$t(0,0,0));c(this,"rotationQuat",yo());c(this,"draggingRotation",!1);c(this,"draggingPosition",!1);c(this,"dragStartProjectedMouseX",0);c(this,"dragStartProjectedMouseY",0);c(this,"dragStartRotateX",0);c(this,"dragStartRotateY",0);c(this,"positionDragContext",new Yr);this.perspectiveCamera=new hl(e,1,o,r),this.orthographicCamera=new ul(-1,1,-1,1,o,r)}screenToView(e,o){return(this.perspective?this.perspectiveCamera:this.orthographicCamera).screenToView(e,o),e}get pvMatrix(){return(this.perspective?this.perspectiveCamera:this.orthographicCamera).pvMatrix}get viewMatrix(){return(this.perspective?this.perspectiveCamera:this.orthographicCamera).viewMatrix}get camera(){return this.perspective?this.perspectiveCamera:this.orthographicCamera}fitViewport(e,o){this.viewportWidth=e,this.viewportHeight=o,this.update()}update(){const e=this.camera,o=this.zoom<=0?fl**-this.zoom:gl**this.zoom,r=o/25*(this.perspective?1:this.orthographicZoomRatio);e.fitViewport(this.viewportWidth*r,this.viewportHeight*r),rn(this.position,this.defaultPosition,this.far*o*2),nn(this.rotationQuat,this.rotateX,this.rotateY,0),ee(this.position,this.position,this.rotationQuat),sn(this.position,this.position,this.target),e.position=this.position,this.rotateX===90||this.rotateX===-90?(ee(this.up,this.defaultUp,this.rotationQuat),e.up=this.up):e.up=this.defaultUp,e.target=this.target}onInput(e){const o=(-this.viewportWidth/2+e.mouseX)/this.viewportWidth*2,r=(+this.viewportHeight/2-e.mouseY)/this.viewportHeight*2;if(e.mouseMiddle)if(this.draggingRotation){const i=o-this.dragStartProjectedMouseX,s=r-this.dragStartProjectedMouseY;this.rotateX=Math.max(-90,Math.min(90,this.dragStartRotateX+s*90)),this.rotateY=(this.dragStartRotateY-i*90)%360}else this.draggingRotation=!0,this.dragStartProjectedMouseX=o,this.dragStartProjectedMouseY=r,this.dragStartRotateX=this.rotateX,this.dragStartRotateY=this.rotateY;else this.draggingRotation=!1;e.mouseRight?this.draggingPosition?Gr(this.positionDragContext,o,r,this.camera)&&_t(this.target,this.positionDragContext.dragStartTargetPosition,this.positionDragContext.offset):this.draggingRotation||(this.draggingPosition=!0,ll(this.positionDragContext,o,r,this.target[0],this.target[1],this.target[2],this.camera)):this.draggingPosition=!1,e.wheelDetY&&(this.zoom=Math.max(pl,Math.min(vl,this.zoom+e.wheelDetY))),this.update()}}var mt;(function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"})(mt||(mt={}));class ml{constructor(){c(this,"callback");c(this,"needsUpdate",!1);c(this,"mouseOver",!1);c(this,"mouseX",0);c(this,"mouseY",0);c(this,"mouseLeft",!1);c(this,"mouseLeftDownThisFrame",!1);c(this,"mouseRight",!1);c(this,"mouseRightDownThisFrame",!1);c(this,"mouseMiddle",!1);c(this,"mouseMiddleDownThisFrame",!1);c(this,"wheelDetX",0);c(this,"wheelDetY",0);c(this,"onContextmenu");c(this,"onMouseMove");c(this,"onMouseDown");c(this,"onMouseUp");c(this,"onMouseLeave");c(this,"onMouseOut");c(this,"onWheel");c(this,"onKeyDown");c(this,"onKeyUp");c(this,"onBlur");c(this,"keyMap",new Map);c(this,"timestamp",0);this.onContextmenu=e=>{e.preventDefault()},this.onMouseMove=e=>{this.mouseOver=!0,this.mouseX=e.offsetX,this.mouseY=e.offsetY,this.triggerCallback()},this.onMouseDown=e=>{switch(e.button){case mt.LEFT:this.mouseLeft=!0,this.mouseLeftDownThisFrame=!0;break;case mt.MIDDLE:this.mouseMiddle=!0,this.mouseMiddleDownThisFrame=!0;break;case mt.RIGHT:this.mouseRight=!0,this.mouseRightDownThisFrame=!0;break}this.triggerCallback()},this.onMouseUp=e=>{switch(e.button){case mt.LEFT:this.mouseLeft=!1,this.mouseLeftDownThisFrame=!1;break;case mt.MIDDLE:this.mouseMiddle=!1,this.mouseMiddleDownThisFrame=!1;break;case mt.RIGHT:this.mouseRight=!1,this.mouseLeftDownThisFrame=!1;break}this.triggerCallback()},this.onMouseLeave=()=>{this.mouseOver=!1,this.triggerCallback()},this.onMouseOut=e=>{(e.clientY<=0||e.clientX<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight)&&(this.mouseLeft=!1,this.mouseLeftDownThisFrame=!1,this.mouseRight=!1,this.mouseLeftDownThisFrame=!1),this.triggerCallback()},this.onWheel=e=>{e.preventDefault(),this.wheelDetX+=Math.round(e.deltaX/100),this.wheelDetY+=Math.round(e.deltaY/100),this.triggerCallback()},this.onKeyDown=e=>{const o=e.target;o&&"tagName"in o&&o.tagName==="INPUT"||(e.ctrlKey&&e.preventDefault(),this.keyMap.set(e.key,this.timestamp),this.triggerCallback())},this.onKeyUp=e=>{const o=e.target;o&&"tagName"in o&&o.tagName==="INPUT"||(this.keyMap.delete(e.key),this.triggerCallback())},this.onBlur=()=>{this.keyMap.clear(),this.triggerCallback()}}setup(e){e.addEventListener("contextmenu",this.onContextmenu),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseleave",this.onMouseLeave),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mouseout",this.onMouseOut),e.addEventListener("wheel",this.onWheel),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),window.addEventListener("blur",this.onBlur)}unload(e){e.removeEventListener("contextmenu",this.onContextmenu),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseleave",this.onMouseLeave),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mouseout",this.onMouseOut),e.removeEventListener("wheel",this.onWheel),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("blur",this.onBlur)}update(){this.mouseLeftDownThisFrame=!1,this.mouseRightDownThisFrame=!1,this.mouseMiddleDownThisFrame=!1,this.wheelDetX=0,this.wheelDetY=0,this.timestamp+=1}isKeyPressed(e){return this.keyMap.has(e)}isKeyPressedThisFrame(e){return this.keyMap.get(e)===this.timestamp}triggerCallback(){this.needsUpdate=!0,requestAnimationFrame(()=>{!this.needsUpdate||(this.needsUpdate=!1,this.callback&&this.callback(this),this.update())})}}function bl(t,e,o,r,i){return(t-o)**2+(e-r)**2<=i**2}const Zr="a_position",wl="a_texCoord",qr="a_color",yl="u_texture";class xl{constructor(e){c(this,"glFrameBuffer");c(this,"textures",[]);c(this,"depthTexture");c(this,"stencilTexture");this.glFrameBuffer=e}get texture(){return this.textures[0]}}class ao{constructor(e,o,r,i,s,n,a,l){c(this,"glTexture");c(this,"level");c(this,"internalFormat");c(this,"width");c(this,"height");c(this,"border");c(this,"format");c(this,"type");c(this,"flipY",!1);c(this,"image");this.glTexture=e,this.level=o,this.internalFormat=r,this.width=i,this.height=s,this.border=n,this.format=a,this.type=l}}function Pl(t,e,o,r,i,s){if(e.substr(-3)==="[0]")switch(r){case t.FLOAT:return function(a){t.uniform1fv(i,a)};case t.INT:return function(a){t.uniform1iv(i,a)};case t.UNSIGNED_INT:return function(a){t.uniform1uiv(i,a)};case t.SAMPLER_2D:const n=new Int32Array(o);for(let a=0;a<o;++a)n[a]=s.count++;return function(a){t.uniform1iv(i,n);for(let l=0;l<o;++l){let d=a[l];d instanceof ao&&(d=d.glTexture),t.activeTexture(t.TEXTURE0+n[l]),t.bindTexture(t.TEXTURE_2D,d||null)}};default:throw new Error(`Unimplemented setter type (uniform: ${e}, type: ${r})`)}switch(r){case t.FLOAT:return function(a){t.uniform1f(i,a)};case t.FLOAT_VEC2:return function(a){t.uniform2fv(i,a)};case t.FLOAT_VEC3:return function(a){t.uniform3fv(i,a)};case t.FLOAT_VEC4:return function(a){t.uniform4fv(i,a)};case t.BOOL:case t.INT:return function(a){t.uniform1i(i,a)};case t.BOOL_VEC2:case t.INT_VEC2:return function(a){t.uniform2iv(i,a)};case t.BOOL_VEC3:case t.INT_VEC3:return function(a){t.uniform3iv(i,a)};case t.BOOL_VEC4:case t.INT_VEC4:return function(a){t.uniform4iv(i,a)};case t.FLOAT_MAT2:return function(a){t.uniformMatrix2fv(i,!1,a)};case t.FLOAT_MAT3:return function(a){t.uniformMatrix3fv(i,!1,a)};case t.FLOAT_MAT4:return function(a){t.uniformMatrix4fv(i,!1,a)};case t.SAMPLER_2D:const n=s.count++;return function(a){a instanceof ao&&(a=a.glTexture),t.uniform1i(i,n),t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,a||null)};default:throw new Error(`Unimplemented setter type (uniform: ${e}, type: ${r})`)}}class _l{constructor(e,o,r,i){c(this,"name");c(this,"size");c(this,"type");c(this,"location");this.name=e,this.size=o,this.type=r,this.location=i}}class Tl{constructor(e,o,r,i,s){c(this,"name");c(this,"size");c(this,"type");c(this,"location");c(this,"setter");this.name=e,this.size=o,this.type=r,this.location=i,this.setter=s}}class Cl{constructor(e,o,r){c(this,"vertShader");c(this,"fragShader");c(this,"program");c(this,"attributes",{});c(this,"uniforms",{});this.vertShader=e,this.fragShader=o,this.program=r}registerAttribute(e,o,r,i){this.attributes[e]=new _l(e,o,r,i)}registerUniform(e,o,r,i,s){e.endsWith("[0]")&&(e=e.substr(0,e.length-"[0]".length)),this.uniforms[e]=new Tl(e,o,r,i,s)}}var Al=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec4 v_color;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = v_color;\r
}\r
`,Sl=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec4 a_position;\r
in vec4 a_color;\r
\r
out vec4 v_color;\r
\r
void main() {\r
    v_color = a_color;\r
    gl_Position = a_position;\r
}\r
`,Ml=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec2 v_texCoord;\r
in vec4 v_color;\r
\r
uniform sampler2D u_texture;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = texture(u_texture, v_texCoord) * v_color;\r
}\r
`,Qr=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec4 a_position;\r
in vec2 a_texCoord;\r
in vec4 a_color;\r
\r
out vec2 v_texCoord;\r
out vec4 v_color;\r
\r
void main() {\r
    v_texCoord = a_texCoord;\r
    v_color = a_color;\r
    gl_Position = a_position;\r
}\r
`,Jr;(function(t){t[t.NONE=0]="NONE",t[t.FRONT=1]="FRONT",t[t.BACK=2]="BACK"})(Jr||(Jr={}));var ei;(function(t){t[t.MESH=0]="MESH",t[t.LINES=1]="LINES"})(ei||(ei={}));var ti;(function(t){t[t.OVERLAP=0]="OVERLAP",t[t.LIGHT=1]="LIGHT",t[t.PIGMENT=2]="PIGMENT"})(ti||(ti={}));const Bt=class{constructor(e,o=2e3){c(this,"SIDE_NONE",0);c(this,"SIDE_FRONT",1);c(this,"SIDE_BACK",2);c(this,"BLEND_MODE_OVERLAP",0);c(this,"BLEND_MODE_LIGHT",1);c(this,"BLEND_MODE_PIGMENT",2);c(this,"canvas");c(this,"gl");c(this,"attribLocations");c(this,"BLANK_WHITE");c(this,"IMAGE_2D_SHADER");c(this,"COLOR_2D_SHADER");c(this,"currentShader");c(this,"frameBufferStack",[]);c(this,"currentFrameBuffer");c(this,"batchSize");c(this,"batchPositionVertices");c(this,"batchTexCoordVertices");c(this,"batchColorVertices");c(this,"batchPositionBuffer");c(this,"batchTexCoordBuffer");c(this,"batchColorBuffer");c(this,"batchType",0);c(this,"batchTexture");c(this,"batchIndex",0);c(this,"drawing2D",!1);c(this,"state",{width:0,height:0,color:{r:1,g:1,b:1,a:1},cameraX:0,cameraY:0,zoom:1,blendMode:0});c(this,"stateStack",[]);let r,i=null;if(e?e instanceof HTMLCanvasElement?r=e:(r=e.canvas,i=e):r=document.createElement("canvas"),!i&&(i=r.getContext("webgl2",{alpha:!0,antialias:!1,depth:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1}),!i))throw new Error("Failed to create WebGL2 rendering context");this.canvas=r,this.gl=i,this.state.width=r.width,this.state.height=r.height,i.viewport(0,0,this.state.width,this.state.height),i.enable(i.BLEND),this.BLANK_WHITE=this.createTextureFromRgbaPixels(1,1,new Uint8Array([255,255,255,255])),this.IMAGE_2D_SHADER=this.createShader(Qr,Ml),this.COLOR_2D_SHADER=this.createShader(Sl,Al),this.batchSize=o,this.batchPositionVertices=new Float32Array(o*3*2*2),this.batchPositionBuffer=this.createDynamicDrawBuffer(this.batchPositionVertices),this.batchTexCoordVertices=new Float32Array(o*3*2*2),this.batchTexCoordBuffer=this.createDynamicDrawBuffer(this.batchTexCoordVertices),this.batchColorVertices=new Float32Array(o*3*2*4),this.batchColorBuffer=this.createDynamicDrawBuffer(this.batchColorVertices)}static sharedInstance(){return Bt._sharedInstance||(Bt._sharedInstance=new Bt),Bt._sharedInstance}copyTo(e,o=0,r=0,i=this.state.width,s=this.state.height,n=0,a=0,l=this.state.width,d=this.state.height){e.drawImage(this.canvas,n,a,l,d,o,r,i,s)}viewport(e,o){this.state.width=e,this.state.height=o,this.gl.viewport(0,0,this.state.width,this.state.height)}resizeCanvas(e,o){(this.canvas.width!==e||this.canvas.height!==o)&&(this.canvas.width=e,this.canvas.height=o),this.viewport(e,o)}clearColor(e=0,o=0,r=0,i=0){this.gl.clearColor(e,o,r,i)}clear(e,o,r){this.flush2D(),this.switchFrameBuffer();const i=this.gl;let s=0;e&&(s|=i.COLOR_BUFFER_BIT),o&&(s|=i.DEPTH_BUFFER_BIT),r&&(s|=i.STENCIL_BUFFER_BIT),i.clear(s)}depthTest(e){const o=this.gl;e?(o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL)):o.disable(o.DEPTH_TEST)}depthMask(e){this.gl.depthMask(e)}cullFace(e){const o=this.gl;switch(e){case 0:o.disable(o.CULL_FACE);break;case 1:o.enable(o.CULL_FACE),o.cullFace(o.FRONT);break;case 2:o.enable(o.CULL_FACE),o.cullFace(o.BACK);break}}blendMode(e){if(e===this.state.blendMode)return;this.state.blendMode=e,this.flush2D();const o=this.gl;switch(e){case 0:o.blendEquation(o.FUNC_ADD),o.blendFunc(o.ONE,o.ZERO);break;case 1:o.blendEquation(o.FUNC_ADD),o.blendFunc(o.SRC_ALPHA,o.ONE);break;case 2:o.blendEquationSeparate(o.FUNC_ADD,o.MAX),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA);break}}useShader(e){e!==this.currentShader&&(this.flush2D(),this.currentShader=e,e&&this.gl.useProgram(e.program))}uniform(e,o){const r=this.currentShader;if(!r)return;this.flush2D();const i=r.uniforms[e];i==null||i.setter(o)}save(){if(this.stateStack.length>999)throw new Error("State stack has reach a max size of 999");const e=this.state,o=e.color;this.stateStack.push({width:e.width,height:e.height,color:{r:o.r,g:o.g,b:o.b,a:o.a},cameraX:e.cameraX,cameraY:e.cameraY,zoom:e.zoom,blendMode:e.blendMode})}restore(){const e=this.stateStack.pop();if(!e)throw new Error("State stack is empty");this.state.color.r=e.color.r,this.state.color.g=e.color.g,this.state.color.b=e.color.b,this.state.color.a=e.color.a,this.state.cameraX=e.cameraX,this.state.cameraY=e.cameraY,this.state.zoom=e.zoom,this.viewport(e.width,e.height),this.blendMode(e.blendMode)}createDynamicDrawBuffer(e){const o=this.gl,r=o.createBuffer();if(!r)throw new Error("Failed to create WebGL buffer");return o.bindBuffer(o.ARRAY_BUFFER,r),o.bufferData(o.ARRAY_BUFFER,e,o.DYNAMIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),r}createVBO(e){const o=this.gl,r=o.createBuffer();if(!r)throw new Error("Failed to create WebGL buffer");return o.bindBuffer(o.ARRAY_BUFFER,r),o.bufferData(o.ARRAY_BUFFER,e,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),r}createIBO(e){const o=this.gl,r=o.createBuffer();if(!r)throw new Error("Failed to create WebGL buffer");return o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,r),o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),o.STATIC_DRAW),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),r}bindVertexArrayAttribute(e,o,r=4,i=this.gl.FLOAT,s=!1,n=0,a=0){const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,o),l.enableVertexAttribArray(e),l.vertexAttribPointer(e,r,i,s,n,a),l.bindBuffer(l.ARRAY_BUFFER,null)}createEmptyTexture(e=this.state.width,o=this.state.height,r=!1){if(e<0||o<0)throw new Error("Negative width/height");const i=this.gl,s=i.createTexture();if(!s)throw new Error("Failed to create WebGL texture");i.bindTexture(i.TEXTURE_2D,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,o,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null);const n=new ao(s,0,i.RGBA,e,o,0,i.RGBA,i.UNSIGNED_BYTE);return n.flipY=r,n}createTexture(e){const o=this.createEmptyTexture(e.width,e.height),r=this.gl;return r.bindTexture(r.TEXTURE_2D,o.glTexture),r.texImage2D(r.TEXTURE_2D,o.level,o.internalFormat,o.format,o.type,e),r.bindTexture(r.TEXTURE_2D,null),o}createTextureFromImageUrl(e){return new Promise((o,r)=>{try{const i=new Image;i.onload=()=>{try{const s=this.createTexture(i);s.image=i,o(s)}catch(s){r(s)}},i.onabort=i.onerror=s=>{r(s)},i.src=e}catch(i){r(i)}})}createDepthTexture(e=this.state.width,o=this.state.height){if(e<0||o<0)throw new Error("Negative width/height");const r=this.gl,i=r.createTexture();if(!i)throw new Error("Failed to create WebGL texture");return r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.DEPTH_COMPONENT32F,e,o,0,r.DEPTH_COMPONENT,r.FLOAT,null),r.bindTexture(r.TEXTURE_2D,null),new ao(i,0,r.DEPTH_COMPONENT32F,e,o,0,r.DEPTH_COMPONENT,r.FLOAT)}createTextureFromRgbaPixels(e,o,r){const i=this.createEmptyTexture(e,o),s=this.gl;return s.bindTexture(s.TEXTURE_2D,i.glTexture),s.texImage2D(s.TEXTURE_2D,i.level,i.internalFormat,e,o,i.border,i.format,i.type,r),s.bindTexture(s.TEXTURE_2D,null),i}setTextureFromPixels(e,o,r,i){const s=this.gl;if(!e.glTexture)throw new Error("Texture has been deleted");s.bindTexture(s.TEXTURE_2D,e.glTexture),s.texImage2D(s.TEXTURE_2D,e.level,e.internalFormat,o,r,e.border,e.format,e.type,i),s.bindTexture(s.TEXTURE_2D,null),e.width=o,e.height=r}deleteTexture(e){e.glTexture&&(this.gl.deleteTexture(e.glTexture),e.glTexture=void 0),e.width=0,e.height=0}resizeTexture(e,o=this.state.width,r=this.state.height,i=!1){if(o<0||r<0)throw new Error("Negative width/height");if(e.width===o&&e.height===r)return;const s=this.gl;if(!e.glTexture)throw new Error("Texture has been deleted");s.bindTexture(s.TEXTURE_2D,e.glTexture),s.texImage2D(s.TEXTURE_2D,e.level,e.internalFormat,o,r,e.border,e.format,e.type,null),s.bindTexture(s.TEXTURE_2D,null),e.width=o,e.height=r}createGlShader(e,o){const r=this.gl,i=r.createShader(o);if(!i)throw new Error("Failed to create WebGL shader");if(r.shaderSource(i,e),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS))throw new Error(`Failed to compile WebGL shader:

`+r.getShaderInfoLog(i));return i}createShader(e,o){const r=this.gl,i=this.createGlShader(e,r.VERTEX_SHADER),s=this.createGlShader(o,r.FRAGMENT_SHADER),n=r.createProgram();if(!n)throw new Error("Failed to create WebGL program");r.attachShader(n,i),r.attachShader(n,s);const a=this.attribLocations;if(a)for(let p in a)a.hasOwnProperty(p)&&r.bindAttribLocation(n,a[p],p);if(r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw new Error(`Failed to link WebGL program:

`+r.getProgramInfoLog(n));const l=new Cl(i,s,n),d=r.getProgramParameter(n,r.ACTIVE_ATTRIBUTES);for(let p=0;p<d;++p){const u=r.getActiveAttrib(n,p);if(!u)throw new Error("Failed to get WebGL attribute info");const y=r.getAttribLocation(n,u.name);l.registerAttribute(u.name,u.size,u.type,y)}const h=r.getProgramParameter(n,r.ACTIVE_UNIFORMS),f={count:0};for(let p=0;p<h;++p){const u=r.getActiveUniform(n,p);if(!u)throw new Error("Failed to get WebGL uniform info");const y=r.getUniformLocation(n,u.name);if(y==null)throw new Error("Failed to get uniform location");l.registerUniform(u.name,u.size,u.type,y,Pl(r,u.name,u.size,u.type,y,f))}return l}deleteShader(e){const o=this.gl;e.program&&(o.deleteProgram(e.program),e.program=void 0),e.vertShader&&(o.deleteShader(e.vertShader),e.vertShader=void 0),e.fragShader&&(o.deleteShader(e.fragShader),e.fragShader=void 0),e.uniforms={},e.attributes={}}createFrameBuffer(){const o=this.gl.createFramebuffer();if(!o)throw new Error("Failed to create WebGL frame buffer");return new xl(o)}attachColorTexture(e,o){this.attachColorTextures(e,o?[o]:[])}attachColorTextures(e,o){const r=this.gl;if(!e.glFrameBuffer)throw new Error("Frame buffer has been deleted");r.bindFramebuffer(r.FRAMEBUFFER,e.glFrameBuffer),e.textures.length=o.length,o.forEach((i,s)=>{if(!i.glTexture)throw new Error("Texture has been deleted");r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+s,r.TEXTURE_2D,i.glTexture,i.level),e.textures[s]=i}),r.drawBuffers(o.map((i,s)=>r.COLOR_ATTACHMENT0+s)),r.bindFramebuffer(r.FRAMEBUFFER,null),this.currentFrameBuffer=void 0}attachDepthTexture(e,o){const r=this.gl;if(!e.glFrameBuffer)throw new Error("Frame buffer has been deleted");if(r.bindFramebuffer(r.FRAMEBUFFER,e.glFrameBuffer),o){if(!o.glTexture)throw new Error("Texture has been deleted");r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,o.glTexture,o.level),e.depthTexture=o}else r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,null,0),e.depthTexture=void 0;r.bindFramebuffer(r.FRAMEBUFFER,null),this.currentFrameBuffer=void 0}attachStencilTexture(e,o){const r=this.gl;if(!e.glFrameBuffer)throw new Error("Frame buffer has been deleted");if(r.bindFramebuffer(r.FRAMEBUFFER,e.glFrameBuffer),o){if(!o.glTexture)throw new Error("Texture has been deleted");r.framebufferTexture2D(r.FRAMEBUFFER,r.STENCIL_ATTACHMENT,r.TEXTURE_2D,o.glTexture,o.level),e.stencilTexture=o}else r.framebufferTexture2D(r.FRAMEBUFFER,r.STENCIL_ATTACHMENT,r.TEXTURE_2D,null,0),e.stencilTexture=void 0;r.bindFramebuffer(r.FRAMEBUFFER,null),this.currentFrameBuffer=void 0}deleteFrameBuffer(e,o=!1){e.glFrameBuffer&&(this.gl.deleteFramebuffer(e.glFrameBuffer),e.glFrameBuffer=void 0),o&&e.textures.forEach(r=>this.deleteTexture(r))}resizeFrameBuffer(e,o=this.state.width,r=this.state.height){e.textures.forEach(i=>this.resizeTexture(i,o,r)),e.depthTexture&&this.resizeTexture(e.depthTexture,o,r),e.stencilTexture&&this.resizeTexture(e.stencilTexture,o,r)}startCapture(e){this.flush2D(),this.frameBufferStack.push(e)}endCapture(){this.flush2D(),this.frameBufferStack.pop()}switchFrameBuffer(){const e=this.frameBufferStack,o=e.length?e[e.length-1]:void 0;if(o!==this.currentFrameBuffer){this.currentFrameBuffer=o||void 0;const r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,(o==null?void 0:o.glFrameBuffer)||null)}}disposeGeometry(e){const o=this.gl;e.vao&&(o.deleteVertexArray(e.vao),e.vao=void 0),e.ibo&&(o.deleteBuffer(e.ibo),e.ibo=void 0),e.attributes.forEach(r=>{r.vbo&&(o.deleteBuffer(r.vbo),r.vbo=void 0)})}drawGeometry(e){if(this.drawing2D)throw new Error("Renderer.end2D must be call before draw geometry");const o=this.gl;if(!e.vao){const r=o.createVertexArray();if(!r)throw new Error("Failed to create Vertex Array Object");e.vao=r,o.bindVertexArray(r);const i=this.currentShader;if(!i)throw new Error("Shader not set");const s=this.attribLocations;e.attributes.forEach(n=>{if(n.vbo||(n.vbo=this.createVBO(n.vertices)),s&&s.hasOwnProperty(n.name))this.bindVertexArrayAttribute(s[n.name],n.vbo,n.componentSize);else{const a=i.attributes[n.name];a&&this.bindVertexArrayAttribute(a.location,n.vbo,n.componentSize)}})}switch(o.bindVertexArray(e.vao),e.ibo||(e.ibo=this.createIBO(e.indices)),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.ibo),this.switchFrameBuffer(),e.type){case jt.TYPE_TRIANGLES:o.drawElements(o.TRIANGLES,e.indices.length,o.UNSIGNED_SHORT,0);break;case jt.TYPE_LINES:o.drawElements(o.LINES,e.indices.length,o.UNSIGNED_SHORT,0);break}o.bindVertexArray(null)}begin2D(){if(this.drawing2D)throw new Error("Renderer.end2D must be call before begin");this.drawing2D=!0}end2D(){if(!this.drawing2D)throw new Error("Renderer.begin2D must be call before end");this.flush2D(),this.drawing2D=!1}setCameraPosition(e,o){this.state.cameraX=e,this.state.cameraY=o}centerCamera(){this.setCameraPosition(this.state.width/2,this.state.height/2)}setZoom(e){this.state.zoom=e}setColor(e,o,r,i=1){this.state.color.r=e,this.state.color.g=o,this.state.color.b=r,this.state.color.a=i}flush2D(){if(!!this.drawing2D&&this.batchIndex!==0)switch(this.batchType){case 0:this.flushMesh();break;case 1:this.flushLines();break}}flushMesh(){var l;const e=this.batchTexture,o=this.batchIndex;this.batchIndex=0;const r=this.gl;let i=this.currentShader;if(i||(i=this.IMAGE_2D_SHADER),!i.program)throw new Error("Shader has been deleted");r.useProgram(i.program);const s=i.attributes[Zr];if(s){r.bindBuffer(r.ARRAY_BUFFER,this.batchPositionBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.batchPositionVertices);const d=s.location;r.enableVertexAttribArray(d),r.vertexAttribPointer(d,2,r.FLOAT,!1,0,0)}const n=i.attributes[wl];if(n){r.bindBuffer(r.ARRAY_BUFFER,this.batchTexCoordBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.batchTexCoordVertices);const d=n.location;r.enableVertexAttribArray(d),r.vertexAttribPointer(d,2,r.FLOAT,!1,0,0)}const a=i.attributes[qr];if(a){r.bindBuffer(r.ARRAY_BUFFER,this.batchColorBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.batchColorVertices);const d=a.location;r.enableVertexAttribArray(d),r.vertexAttribPointer(d,4,r.FLOAT,!1,0,0)}(l=i.uniforms[yl])==null||l.setter(e==null?void 0:e.glTexture),this.switchFrameBuffer(),r.drawArrays(r.TRIANGLES,0,o*6)}flushLines(){const e=this.batchIndex;this.batchIndex=0;const o=this.gl;let r=this.currentShader;if(r||(r=this.COLOR_2D_SHADER),!r.program)throw new Error("Shader has been deleted");o.useProgram(r.program),o.bindBuffer(o.ARRAY_BUFFER,this.batchPositionBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.batchPositionVertices);const i=r.attributes[Zr].location;o.enableVertexAttribArray(i),o.vertexAttribPointer(i,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.batchColorBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.batchColorVertices);const s=r.attributes[qr].location;o.enableVertexAttribArray(s),o.vertexAttribPointer(s,4,o.FLOAT,!1,0,0),this.switchFrameBuffer(),o.drawArrays(o.LINES,0,e*2)}drawLine(e,o,r,i){if(!this.drawing2D)throw new Error("Renderer.begin2D must be call before draw");(this.batchIndex>=this.batchSize*3||this.batchType!==1)&&this.flush2D(),this.batchType=1;const s=this.state.zoom,n=2/this.state.width*s,a=2/this.state.height*s,l=this.state.cameraX,d=this.state.cameraY,h=this.batchPositionVertices,f=this.batchIndex*2*2;h[f]=(e-l)*n,h[f+1]=(o-d)*a,h[f+2]=(r-l)*n,h[f+3]=(i-d)*a;const p=this.batchIndex*2*4,u=this.batchColorVertices,y=this.state.color;for(let w=0;w<2;++w){const A=w*4;u[p+A]=y.r,u[p+1+A]=y.g,u[p+2+A]=y.b,u[p+3+A]=y.a}this.batchIndex+=1}pushCwQuadVertices(e,o,r,i,s,n,a,l,d,h,f,p,u,y,w,A,b){if(!this.drawing2D)throw new Error("Renderer.begin2D must be call before draw");(this.batchIndex>=this.batchSize||e!==this.batchTexture||this.batchType!==0)&&this.flush2D(),this.batchType=0,this.batchTexture=e;const g=this.batchIndex*3*2*2,m=this.batchPositionVertices,v=this.batchTexCoordVertices;m[g]=o,m[g+1]=r,m[g+2]=i,m[g+3]=s,m[g+4]=l,m[g+5]=d,m[g+6]=i,m[g+7]=s,m[g+8]=n,m[g+9]=a,m[g+10]=l,m[g+11]=d,e.flipY&&([h,f,A,b]=[A,b,h,f],[p,u,y,w]=[y,w,p,u]),v[g]=h,v[g+1]=f,v[g+2]=p,v[g+3]=u,v[g+4]=A,v[g+5]=b,v[g+6]=p,v[g+7]=u,v[g+8]=y,v[g+9]=w,v[g+10]=A,v[g+11]=b;const C=this.batchIndex*3*2*4,T=this.batchColorVertices,S=this.state.color;for(let R=0;R<2*3;++R){const L=R*4;T[C+L]=S.r,T[C+1+L]=S.g,T[C+2+L]=S.b,T[C+3+L]=S.a}this.batchIndex+=1}drawCwQuad(e,o,r,i,s,n,a,l,d,h=0,f=e.height,p=e.width,u=e.height,y=e.width,w=0,A=0,b=0){const g=this.state.zoom,m=2/this.state.width*g,v=2/this.state.height*g,C=1/e.width,T=1/e.height,S=this.state.cameraX,R=this.state.cameraY;this.pushCwQuadVertices(e,(o-S)*m,(r-R)*v,(i-S)*m,(s-R)*v,(n-S)*m,(a-R)*v,(l-S)*m,(d-R)*v,h*C,f*T,p*C,u*T,y*C,w*T,A*C,b*T)}drawRect(e,o=0,r=0,i=e.width,s=e.height,n=!1,a=!1,l=0,d=0,h=e.width,f=e.height){const p=o,u=o+i,y=r+s,w=r;let A=l,b=l+h,g=d,m=d+f;n&&([A,b]=[b,A]),a&&([g,m]=[m,g]),this.drawCwQuad(e,p,w,u,w,u,y,p,y,A,m,b,m,b,g,A,g)}draw(e,o=0,r=0,i=e.width,s=e.height,n=!1,a=!1,l=0,d=0,h=e.width,f=e.height,p=0,u=0,y=0,w=0,A=0,b=1,g=1){const m=o,v=o+i,C=r+s,T=r,S=Math.cos(A),R=Math.sin(A),L=S*b,$=-R*g,V=-S*y*b+p+y+w*R*g,G=R*b,z=S*g,I=-S*w*g+u-y*R*b+w,F=m,_=T,M=v,k=T,Y=v,ie=C,re=m,ue=C;let _e=l,ce=l+h,ne=d,ve=d+f;n&&([_e,ce]=[ce,_e]),a&&([ne,ve]=[ve,ne]),this.drawCwQuad(e,L*F+$*_+V,G*F+z*_+I,L*M+$*k+V,G*M+z*k+I,L*Y+$*ie+V,G*Y+z*ie+I,L*re+$*ue+V,G*re+z*ue+I,_e,ve,ce,ve,ce,ne,_e,ne)}drawLabel(e,o=0,r=0,i=e.width,s=e.height,n=!1,a=!1,l=0,d=0,h=e.width,f=e.height,p=0,u=0,y=0,w=0,A=0,b=1,g=1){this.draw(e.texture(this),o,r,i,s,n,a,l,d,h,f,p,u,y,w,A,b,g)}};let Xo=Bt;c(Xo,"_sharedInstance");function oi(t,e,o,r,i=Math.min(8,e/2)){let s=0,n=e;const a=Math.ceil(2*Math.PI*e/(i/t.state.zoom)),l=Math.PI*2/a,d=Math.cos(l),h=Math.sin(l),f=o,p=r;for(let u=0;u<a;++u){const y=s*d-n*h,w=s*h+n*d;t.drawLine(s+f,n+p,y+f,w+p),s=y,n=w}}function bt(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}function Pe(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function Be(t){const e=1/Math.sqrt(t[0]**2+t[1]**2+t[2]**2);return[t[0]*e,t[1]*e,t[2]*e]}function nt(t,e){let o=[0,0,0];return cn(o,t,e),Be(o)}function lo(t,e){return ln([0,0,0],t,e)}function Rl(t,e){return Jo([0,0,0,1],t,e)}function El(t){return an([0,0,0,1],t)}function pt(t,e){return El(Rl(t,e))}function Ll(t){const e=t.map(we=>we.point);function o(...we){return we.reduce(($e,je)=>$e+t[je].visibility,0)/we.length}const r=Be(Pe(bt(e[11],e[12]),bt(e[24],e[23]))),i=Be(Pe(bt(e[11],e[23]),bt(e[12],e[24]))),s=nt(i,r),n=pt(s,r),a=o(11,12,23,24),l=Pe(bt(e[3],e[6]),bt(e[9],e[10])),d=nt(Pe(e[7],e[8]),l);ee(l,l,n),ee(d,d,n);const h=o(8,6,5,4,1,2,3,7,0,9,10),f=Be(Pe(e[11],e[13])),p=nt(i,f),u=pt(p,f);ee(f,f,n),ee(p,p,n);const y=o(11,13),w=Be(Pe(e[12],e[14])),A=nt(i,w),b=pt(A,w);ee(w,w,n),ee(A,A,n);const g=o(12,14),m=Be(Pe(e[13],e[15])),v=nt(i,m),C=pt(v,m);ee(m,m,u),ee(v,v,u);const T=o(13,15),S=Be(Pe(e[14],e[16])),R=nt(i,S),L=pt(R,S);ee(S,S,b),ee(R,R,b);const $=o(14,16),V=Be(Pe(e[15],bt(e[17],e[19]))),G=lo(V,Pe(e[21],e[15]));ee(V,V,C),ee(G,G,C);const z=o(15,17,19,21),I=Be(Pe(e[16],bt(e[18],e[20]))),F=lo(I,Pe(e[22],e[16]));ee(I,I,L),ee(F,F,L);const _=o(16,18,20,22),M=Be(Pe(e[23],e[25])),k=nt(i,M),Y=pt(k,M);ee(M,M,n),ee(k,k,n);const ie=o(23,25),re=Be(Pe(e[24],e[26])),ue=nt(i,re),_e=pt(ue,re);ee(re,re,n),ee(ue,ue,n);const ce=o(24,26),ne=Be(Pe(e[25],e[27])),ve=nt(i,ne),Ie=pt(ve,ne);ee(ne,ne,Y),ee(ve,ve,Y);const fe=o(25,27),Ce=Be(Pe(e[26],e[28])),Re=nt(i,Ce),Oe=pt(Re,Ce);ee(Ce,Ce,_e),ee(Re,Re,_e);const Le=o(26,28),me=Be(Pe(e[31],e[29])),ke=lo(me,Pe(e[27],e[31]));ee(me,me,Ie),ee(ke,ke,Ie);const be=o(27,29,31),Ae=Be(Pe(e[32],e[30])),E=lo(Ae,Pe(e[28],e[32]));ee(Ae,Ae,Oe),ee(E,E,Oe);const H=o(28,30,32);return{trunk:{up:r,forward:s,visibility:a},head:{up:l,forward:d,visibility:h},leftUpperArm:{up:f,forward:p,visibility:y},leftLowerArm:{up:m,forward:v,visibility:T},leftHand:{up:V,forward:G,visibility:z},leftThigh:{up:M,forward:k,visibility:ie},leftCalf:{up:ne,forward:ve,visibility:fe},leftFoot:{up:ke,forward:me,visibility:be},rightUpperArm:{up:w,forward:A,visibility:g},rightLowerArm:{up:S,forward:R,visibility:$},rightHand:{up:I,forward:F,visibility:_},rightThigh:{up:re,forward:ue,visibility:ce},rightCalf:{up:Ce,forward:Re,visibility:Le},rightFoot:{up:E,forward:Ae,visibility:H}}}var kl=`#version 300 es\r
\r
precision highp float;\r
\r
in vec4 v_color;\r
in vec3 v_normal;\r
\r
uniform vec3 u_directionalLightDirection;\r
uniform vec4 u_color;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = v_color * u_color;\r
    float light = (dot(v_normal, -normalize(u_directionalLightDirection)) + 1.0) * 0.5;\r
    outColor.rgb *= (0.5 + 0.5 * light);\r
}\r
`,Fl=`#version 300 es\r
\r
in vec3 a_position;\r
in vec3 a_normal;\r
in vec4 a_color;\r
\r
uniform mat4 u_pvMatrix;\r
uniform mat4 u_mMatrix;\r
\r
out vec4 v_color;\r
out vec3 v_normal;\r
\r
void main() {\r
    gl_Position = u_pvMatrix * u_mMatrix * vec4(a_position, 1.0);\r
    v_color = a_color;\r
    v_normal = transpose(inverse(mat3(u_mMatrix))) * normalize(a_normal);\r
}\r
`,Il=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec2 v_texCoord;\r
in vec4 v_color;\r
\r
uniform sampler2D u_texture;\r
uniform sampler2D u_deep;\r
uniform float u_threshold;\r
\r
out vec4 outColor;\r
\r
vec4 getPixel(sampler2D texture, int dx, int dy) {\r
    ivec2 texSize = textureSize(texture, 0);\r
    ivec2 pos = ivec2(v_texCoord.xy * vec2(texSize.xy));\r
    int x = max(0, min(texSize.x - 1, pos.x + dx));\r
    int y = max(0, min(texSize.y - 1, pos.y + dy));\r
    return texelFetch(texture, ivec2(x, y), 0);\r
}\r
\r
void main() {\r
    float deep = texture(u_deep, v_texCoord).x;\r
    if (\r
    deep - getPixel(u_deep, -1, 0).x > u_threshold && getPixel(u_texture, -1, 0).a == 1.0\r
    || deep - getPixel(u_deep, 1, 0).x > u_threshold && getPixel(u_texture, 1, 0).a == 1.0\r
    || deep - getPixel(u_deep, 0, -1).x > u_threshold && getPixel(u_texture, 0, -1).a == 1.0\r
    || deep - getPixel(u_deep, 0, 1).x > u_threshold && getPixel(u_texture, 0, 1).a == 1.0\r
    ) {\r
        outColor = v_color;\r
    }\r
}\r
`;const Yo=8;var Ol=se({components:{NSpin:dn,NIcon:Nr,NPopconfirm:ol,InfoCircleOutlined:Cn,UndoOutlined:Ln},props:{model:Ho,camera:Kr,landmarks:Array,readonly:Boolean,highlights:Array},setup(t){const e=B(),o=B(),r=B(!1);let i=0,s=0,n,a,l,d,h,f;const p=[0,-1,0],u=t.camera||new Kr;u.far=5;const y=new ml;y.callback=z;const w=t.model||new Ho;let A=null,b=!1,g=!1;const m=new Yr,v=ye(),C=ye(),T=ye(),S=yo(),R=ye(),L=ye();rt(async function(){try{r.value=!0,await w.init()}finally{r.value=!1}n=new Xo(o.value),a=n.createShader(Fl,kl),l=n.createShader(Qr,Il),d=n.createEmptyTexture(),d.flipY=!0,h=n.createDepthTexture(),h.flipY=!0,f=n.createFrameBuffer(),n.attachColorTexture(f,d),n.attachDepthTexture(f,h),G(),y.setup(o.value),V(t.landmarks)}),St(function(){n.deleteShader(a),n.deleteShader(l),n.deleteFrameBuffer(f,!0),y.unload(o.value)}),We(()=>t.landmarks,V),We(()=>t.highlights,function(F){Object.keys(q).forEach(_=>{const M=w[_];(F==null?void 0:F.length)?M.active=!!F.includes(_):M.active=!0}),I()});function $(){Object.keys(q).forEach(F=>{const _=w[F];_.forward=[0,0,1],_.up=[0,1,0]}),u.zoom=1,u.rotateX=0,u.rotateY=0,Ye(u.target,0,0,0),u.update(),w.update(u.camera),I()}function V(F){if(F==null?void 0:F.length){const _=Ll(F);Object.keys(q).forEach(M=>{const k=w[M],Y=_[M];k.forward=Y.forward,k.up=Y.up,k.active=Y.visibility>un})}else Object.keys(q).forEach(_=>{const M=w[_];M.forward=[0,0,1],M.up=[0,1,0],M.active=!0});u.zoom=1,u.rotateX=0,u.rotateY=0,Ye(u.target,0,0,0),u.update(),w.update(u.camera),I()}function G(){const F=e.value.getBoundingClientRect();i=F.width,s=F.height,n.resizeCanvas(i,s),n.resizeFrameBuffer(f),u.fitViewport(i,s)}function z(F){if(u.onInput(F),w.update(u.camera),!t.readonly){if(F.mouseLeft||(b=!1),g&&!F.isKeyPressed("Shift")&&(g=!1,b=!1),!b){A=null;let k=1/0;if(w.root){const Y=[w.root];for(;;){const ie=Y.pop();if(!ie)break;if(Y.push(...ie.children),!ie.controlPoint)continue;const re=(ie.controlPointScreenPosition[0]+1)/2*i,ue=(ie.controlPointScreenPosition[1]+1)/2*s;bl(F.mouseX,s-F.mouseY,re,ue,Yo)&&ie.controlPointScreenPosition[2]<k&&(A=ie,k=ie.controlPointScreenPosition[2])}}}const _=(F.mouseX/i-.5)*2,M=(-F.mouseY/s+.5)*2;if((F.mouseLeft&&!b||F.isKeyPressedThisFrame("Shift")&&b)&&A){b=!0;const k=A;cl(m,_,M,k.originWorldPosition[0],k.originWorldPosition[1],k.originWorldPosition[2],k.controlPointWorldPosition[0],k.controlPointWorldPosition[1],k.controlPointWorldPosition[2],u.camera),Ut(v,k.originWorldPosition),Ut(C,k.controlPointWorldPosition),k.parent&&(Po(C,C,k.parent.worldMatrix),Po(v,v,k.parent.worldMatrix)),_t(C,C,v),Vt(C,C),Ut(R,k.forward),Ut(L,k.up)}else if(F.mouseLeft&&b&&A){if(F.isKeyPressed("Shift")){g=!0;const k=_-m.dragStartMousePosition[0],Y=M-m.dragStartMousePosition[1],ie=k+Y;hn(S,C,ie*Math.PI*2);const re=A;ee(re.forward,R,S),Vt(re.forward,re.forward),ee(re.up,L,S),Vt(re.up,re.up),w.update(u.camera,re)}else if(dl(m,_,M,u.camera)){const k=A;Ut(T,m.rayResult1),k.parent&&Po(T,T,k.parent.worldMatrix),_t(T,T,v),fn(S,C,T),ee(k.forward,R,S),Vt(k.forward,k.forward),ee(k.up,L,S),Vt(k.up,k.up),w.update(u.camera,k)}}}I()}function I(){if(n.blendMode(n.BLEND_MODE_PIGMENT),n.depthTest(!0),n.cullFace(n.SIDE_BACK),n.startCapture(f),n.clearColor(0,0,0,0),n.clear(!0,!0,!1),n.useShader(a),n.uniform("u_directionalLightDirection",p),n.uniform("u_pvMatrix",u.pvMatrix),w.render(n),n.endCapture(),n.save(),n.depthTest(!1),n.clearColor(242/255,242/255,242/255,1),n.clear(!0,!1,!1),n.centerCamera(),n.begin2D(),n.setColor(1,1,1,1),n.useShader(),n.draw(d),n.setColor(0,0,0,.5),n.useShader(l),n.uniform("u_threshold",1/1e3/(u.far/2)),n.uniform("u_deep",h),n.draw(d),n.end2D(),n.restore(),!t.readonly){n.depthTest(!1),n.useShader(),n.begin2D();const F=[w.root];for(;;){const _=F.pop();if(!_)break;if(F.push(..._.children),_.controlPoint){_.active?n.setColor(1,0,0,_===A?1:.25):n.setColor(0,0,0,_===A?1:.25);const M=_.controlPointScreenPosition;oi(n,Yo,M[0]*i/2,M[1]*s/2),oi(n,Yo-2,M[0]*i/2,M[1]*s/2)}}n.end2D()}}return{container:e,canvas:o,loading:r,reset:$}}});const Dl={class:"skeleton",ref:"container"},zl={ref:"canvas"},Bl={class:"anchor",style:{top:"4px",left:"4px"}},$l={href:"https://sketchfab.com/3d-models/skeleton-4de7b96a351a4a35b1b6e5415277ff07",target:"_blank",title:"Author of the original model"},Ul={key:0,class:"anchor",style:{top:"4px",right:"4px"}},Vl=Ze(" Reset model? ");function Nl(t,e,o,r,i,s){const n=tt("n-spin"),a=tt("info-circle-outlined"),l=tt("n-icon"),d=tt("undo-outlined"),h=tt("n-popconfirm");return Ne(),it("div",Dl,[xe(n,{show:t.loading},{default:ht(()=>[de("canvas",zl,null,512)]),_:1},8,["show"]),de("div",Bl,[de("a",$l,[xe(l,{size:"16",color:"#000",class:"icon-btn"},{default:ht(()=>[xe(a)]),_:1})])]),t.readonly?Rt("",!0):(Ne(),it("div",Ul,[xe(h,{onPositiveClick:t.reset},{trigger:ht(()=>[xe(l,{size:"22",color:"#000",class:"icon-btn",title:"Reset"},{default:ht(()=>[xe(d)]),_:1})]),default:ht(()=>[Vl]),_:1},8,["onPositiveClick"])]))],512)}var Wl=Ko(Ol,[["render",Nl]]);function Hl(){var t;return!!((t=document.createElement("canvas"))==null?void 0:t.getContext("webgl2"))}function jl(){return"PointerEvent"in window}class Xl{constructor(){c(this,"chunks",[])}async load(e){const o=await _o.readJson("dataset/summary.json"),r=[],i=[];for(let a of o){const l=a.index;let d=_o.readJson(`dataset/photos_${l}.json`);r.push(d);let h={};for(let f in ge){const p=h[f]=_o.read(`dataset/f_${ge[f].filename}_${l}.dat`);r.push(p)}i.push({photos:d,buffers:h})}const s=r.length;let n=0;r.forEach(a=>a.then(()=>{n+=1,e(n,s)})),await Promise.all(r);for(let a of i){const l=await a.photos,d={};for(let h in a.buffers)d[h]=new Float32Array(await a.buffers[h]);this.chunks.push({photos:l,buffers:d})}}}const ri=Math.PI/180*45;class Yl{constructor(){c(this,"rotation",[0,0,0,0])}prepare(e){const o=Me(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),r=Me(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition);this.rotation=Ct(r,o)}match(e,o,r){const i=ge.chest.getChestRotation(o.chest,r);if(yt(i))return;const s=Ve(this.rotation,i),n=Ve(this.rotation,Je(i));if(n>ri&&s>ri)return;const a=Math.PI-s,l=Math.PI-n;e.accepted=!0,a>l?e.score=a:(e.score=l,e.flipped=!0)}}const ii=Math.PI/180*45;class Gl{constructor(){c(this,"rotation",[0,0,0,0])}prepare(e){const o=Me(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),r=Me(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition);this.rotation=Ct(r,o)}match(e,o,r){const i=ge.crotch.getCrotchRotation(o.crotch,r);if(yt(i))return;const s=Ve(this.rotation,i),n=Ve(this.rotation,Je(i));if(n>ii&&s>ii)return;const a=Math.PI-s,l=Math.PI-n;e.accepted=!0,a>l?e.score=a:(e.score=l,e.flipped=!0)}}const It=Math.PI/180*45,co=Math.PI/180*60,Ot=[0,0,1];class ni{constructor(e){c(this,"isLeft");c(this,"upperArmZAxisAngle",0);c(this,"lowerArmZAxisAngle",0);c(this,"elbowAngle",0);c(this,"elbowViewAngle",0);c(this,"upperArmLocalDir",[0,0,0]);c(this,"upperArmLocalDirMirror",[0,0,0]);c(this,"chestRotation",[0,0,0,1]);this.isLeft=e}prepare(e){let o=e.rightUpperArm.originViewPosition,r=e.rightUpperArm.controlPointViewPosition,i=e.rightLowerArm.controlPointViewPosition;this.isLeft&&(o=e.leftUpperArm.originViewPosition,r=e.leftUpperArm.controlPointViewPosition,i=e.leftLowerArm.controlPointViewPosition);const s=Me(o,r),n=Me(r,i);this.upperArmZAxisAngle=le(Ot,s),this.lowerArmZAxisAngle=le(Ot,n),this.elbowAngle=le(s,n),this.elbowViewAngle=At(rr(r,o,r,i))-Math.PI,this.isLeft?(this.upperArmLocalDir=Fe(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=Fe(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0)):(this.upperArmLocalDir=Fe(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=Fe(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0));const a=Me(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),l=Me(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition);this.chestRotation=Ct(l,a)}match(e,o,r){const i=ge.chest.getChestRotation(o.chest,r);if(yt(i))return;const s=ge.upperArm.getLeftUpperArmDir(o.upperArm,r),n=ge.lowerArm.getLeftLowerArmDir(o.lowerArm,r),a=ge.upperArm.getRightUpperArmDir(o.upperArm,r),l=ge.lowerArm.getRightLowerArmDir(o.lowerArm,r),d=le(Ot,s),h=le(Ot,n),f=le(s,n),p=At(Qt(Jt(s),n))-Math.PI,u=Math.abs(this.upperArmZAxisAngle-d),y=Math.abs(this.lowerArmZAxisAngle-h),w=Math.abs(this.elbowAngle-f),A=Math.abs(this.elbowViewAngle-p*(this.isLeft?1:-1)),b=le(s,this.isLeft?this.upperArmLocalDir:this.upperArmLocalDirMirror),g=Ve(this.chestRotation,this.isLeft?i:Je(i));let m=(Math.PI-u)*(Math.PI-y)*(Math.PI-w)*(Math.PI*2-A)*(Math.PI-b)*(Math.PI-g);const v=le(Ot,a),C=le(Ot,l),T=le(a,l),S=At(Qt(Jt(a),l))-Math.PI,R=Math.abs(this.upperArmZAxisAngle-v),L=Math.abs(this.lowerArmZAxisAngle-C),$=Math.abs(this.elbowAngle-T),V=Math.abs(this.elbowViewAngle-S*(this.isLeft?-1:1)),G=le(a,this.isLeft?this.upperArmLocalDirMirror:this.upperArmLocalDir),z=Ve(this.chestRotation,this.isLeft?Je(i):i);let I=(Math.PI-R)*(Math.PI-L)*(Math.PI-$)*(Math.PI*2-V)*(Math.PI-G)*(Math.PI-z);(Ke(s)||Ke(n)||u>It||y>It||w>co||A>It||b>co)&&(m=-1/0),(Ke(a)||Ke(l)||R>It||L>It||$>co||V>It||G>co)&&(I=-1/0),isFinite(m)&&m>I?(e.accepted=!0,e.score=m,e.flipped=!this.isLeft):isFinite(I)&&(e.accepted=!0,e.score=I,e.flipped=this.isLeft)}}const si=Math.PI/180*45;class Kl{constructor(){c(this,"rotation",[0,0,0,0])}prepare(e){const o=e.head.landmarksViewPosition[0],r=e.head.landmarksViewPosition[1],i=Me(r,o),s=Me(e.head.originViewPosition,e.head.controlPointViewPosition);this.rotation=pn(i,s)}match(e,o,r){const i=ge.face.getFaceRotation(o.face,r);if(yt(i))return;const s=Ve(this.rotation,i),n=Ve(this.rotation,Je(i));if(n>si&&s>si)return;const a=Math.PI-s,l=Math.PI-n;e.accepted=!0,a>l?e.score=a:(e.score=l,e.flipped=!0)}}const uo=Math.PI/180*45;class ai{constructor(e){c(this,"isLeft");c(this,"thighLocalDir",[0,0,0]);c(this,"thighLocalDirMirror",[0,0,0]);c(this,"crotchRotation",[0,0,0,1]);this.isLeft=e}prepare(e){this.isLeft?(this.thighLocalDir=Fe(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=Fe(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0)):(this.thighLocalDir=Fe(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=Fe(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0));const o=Me(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),r=Me(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition);this.crotchRotation=Ct(r,o)}match(e,o,r){const i=ge.crotch.getCrotchRotation(o.crotch,r);if(yt(i))return;const s=ge.thigh.getLeftThighDir(o.thigh,r),n=ge.thigh.getRightThighDir(o.thigh,r),a=le(s,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror),l=Ve(this.crotchRotation,this.isLeft?i:Je(i)),d=le(n,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir),h=Ve(this.crotchRotation,this.isLeft?Je(i):i);let f=(Math.PI-a)*(Math.PI-l),p=(Math.PI-d)*(Math.PI-h);(Ke(s)||a>uo||l>uo)&&(f=-1/0),(Ke(n)||d>uo||h>uo)&&(p=-1/0),isFinite(f)&&f>p?(e.accepted=!0,e.score=f,e.flipped=!this.isLeft):isFinite(p)&&(e.accepted=!0,e.score=p,e.flipped=this.isLeft)}}const Dt=Math.PI/180*45,ho=Math.PI/180*60,zt=[0,0,1];class li{constructor(e){c(this,"isLeft");c(this,"thighZAxisAngle",0);c(this,"calfZAxisAngle",0);c(this,"kneeAngle",0);c(this,"kneeViewAngle",0);c(this,"thighLocalDir",[0,0,0]);c(this,"thighLocalDirMirror",[0,0,0]);c(this,"crotchRotation",[0,0,0,1]);this.isLeft=e}prepare(e){let o=e.rightThigh.originViewPosition,r=e.rightThigh.controlPointViewPosition,i=e.rightCalf.controlPointViewPosition;this.isLeft&&(o=e.leftThigh.originViewPosition,r=e.leftThigh.controlPointViewPosition,i=e.leftCalf.controlPointViewPosition);const s=Me(o,r),n=Me(r,i);this.thighZAxisAngle=le(zt,s),this.calfZAxisAngle=le(zt,n),this.kneeAngle=le(s,n),this.kneeViewAngle=At(rr(r,o,r,i))-Math.PI,this.isLeft?(this.thighLocalDir=Fe(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=Fe(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0)):(this.thighLocalDir=Fe(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=Fe(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0));const a=Me(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),l=Me(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition);this.crotchRotation=Ct(l,a)}match(e,o,r){const i=ge.crotch.getCrotchRotation(o.crotch,r);if(yt(i))return;const s=ge.thigh.getLeftThighDir(o.thigh,r),n=ge.calf.getLeftCalfDir(o.calf,r),a=ge.thigh.getRightThighDir(o.thigh,r),l=ge.calf.getRightCalfDir(o.calf,r),d=le(zt,s),h=le(zt,n),f=le(s,n),p=At(Qt(Jt(s),n))-Math.PI,u=Math.abs(this.thighZAxisAngle-d),y=Math.abs(this.calfZAxisAngle-h),w=Math.abs(this.kneeAngle-f),A=Math.abs(this.kneeViewAngle-p*(this.isLeft?1:-1)),b=le(s,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror),g=Ve(this.crotchRotation,this.isLeft?i:Je(i));let m=(Math.PI-u)*(Math.PI-y)*(Math.PI-w)*(Math.PI*2-A)*(Math.PI-b)*(Math.PI-g);const v=le(zt,a),C=le(zt,l),T=le(a,l),S=At(Qt(Jt(a),l))-Math.PI,R=Math.abs(this.thighZAxisAngle-v),L=Math.abs(this.calfZAxisAngle-C),$=Math.abs(this.kneeAngle-T),V=Math.abs(this.kneeViewAngle-S*(this.isLeft?-1:1)),G=le(a,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir),z=Ve(this.crotchRotation,this.isLeft?Je(i):i);let I=(Math.PI-R)*(Math.PI-L)*(Math.PI-$)*(Math.PI*2-V)*(Math.PI-G)*(Math.PI-z);(Ke(s)||Ke(n)||u>Dt||y>Dt||w>ho||A>Dt||b>ho)&&(m=-1/0),(Ke(a)||Ke(l)||R>Dt||L>Dt||$>ho||V>Dt||G>ho)&&(I=-1/0),isFinite(m)&&m>I?(e.accepted=!0,e.score=m,e.flipped=!this.isLeft):isFinite(I)&&(e.accepted=!0,e.score=I,e.flipped=this.isLeft)}}const fo=Math.PI/180*45;class ci{constructor(e){c(this,"isLeft");c(this,"shoulderLocalDir",[0,0,0]);c(this,"shoulderLocalDirMirror",[0,0,0]);c(this,"chestRotation",[0,0,0,1]);this.isLeft=e}prepare(e){this.isLeft?(this.shoulderLocalDir=Fe(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=Fe(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0)):(this.shoulderLocalDir=Fe(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=Fe(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0));const o=Me(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),r=Me(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition);this.chestRotation=Ct(r,o)}match(e,o,r){const i=ge.chest.getChestRotation(o.chest,r);if(yt(i))return;const s=ge.upperArm.getLeftUpperArmDir(o.upperArm,r),n=ge.upperArm.getRightUpperArmDir(o.upperArm,r),a=le(s,this.isLeft?this.shoulderLocalDir:this.shoulderLocalDirMirror),l=Ve(this.chestRotation,this.isLeft?i:Je(i)),d=le(n,this.isLeft?this.shoulderLocalDirMirror:this.shoulderLocalDir),h=Ve(this.chestRotation,this.isLeft?Je(i):i);let f=(Math.PI-a)*(Math.PI-l),p=(Math.PI-d)*(Math.PI-h);(Ke(s)||a>fo||l>fo)&&(f=-1/0),(Ke(n)||d>fo||h>fo)&&(p=-1/0),isFinite(f)&&f>p?(e.accepted=!0,e.score=f,e.flipped=!this.isLeft):isFinite(p)&&(e.accepted=!0,e.score=p,e.flipped=this.isLeft)}}function Zl(t,e,o){o.prepare(t);const r={score:0,flipped:!1,accepted:!1},i=[];for(let s of e)for(let n=0,a=s.photos.length;n<a;++n)if(r.score=0,r.accepted=!1,r.flipped=!1,o.match(r,s.buffers,n),r.accepted){let l=i.length;for(let d=0,h=i.length;d<h;++d)if(i[d].score<=r.score){l=d;break}if(l<ir){const d=s.photos[n];i.splice(l,0,{id:d[0],url:d[1],score:r.score,flipped:r.flipped}),i.length>ir&&i.pop()}}return i}const Go={Face:{matcher:new Kl,highlights:[q.head]},Chest:{matcher:new Yl,highlights:[q.trunk]},"Left Shoulder":{matcher:new ci(!0),highlights:[q.trunk,q.leftUpperArm]},"Right Shoulder":{matcher:new ci(!1),highlights:[q.trunk,q.rightUpperArm]},"Left Elbow":{matcher:new ni(!0),highlights:[q.leftUpperArm,q.leftLowerArm]},"Right Elbow":{matcher:new ni(!1),highlights:[q.rightUpperArm,q.rightLowerArm]},Crotch:{matcher:new Gl,highlights:[q.trunk]},"Left Hip":{matcher:new ai(!0),highlights:[q.trunk,q.leftThigh]},"Right Hip":{matcher:new ai(!1),highlights:[q.trunk,q.rightThigh]},"Left Knee":{matcher:new li(!0),highlights:[q.leftThigh,q.leftCalf]},"Right Knee":{matcher:new li(!1),highlights:[q.rightThigh,q.rightCalf]}};var ql=se({components:{NButton:wo,NSelect:Ha,NIcon:Nr,WarningOutlined:In,SearchOutlined:Mn,SkeletonModelCanvas:Wl},setup(){const t=Hl(),e=jl(),o=new Xl,r=new Ho,i=B(!1),s=B(0),n=B(0),a=B(0),l=Object.keys(Go).map(u=>({value:u,label:u})),d=B(),h=B(),f=B([]);rt(async function(){try{i.value=!0,await o.load(function(u,y){s.value=u,n.value=y}),a.value=o.chunks.reduce((u,y)=>u+y.photos.length,0)}finally{i.value=!1}});async function p(){f.value=[],h.value.scrollTop=0,await xt(),f.value=Zl(r,o.chunks,Go[d.value].matcher)}return{supportWebGL2:t,supportMouse:e,model:r,matchers:Go,loadingData:i,loadingProgress:s,loadingTotal:n,photosNum:a,bodyPartOptions:l,bodyPart:d,searchResultsContainerDom:h,searchResults:f,onSearch:p}}});const Ql={class:"container rows"},Jl={class:"cols",style:{"font-weight":"bold","align-items":"center"}},ec=de("a",{href:"https://www.human-anatomy-for-artist.com/",target:"_blank"},"Human Anatomy for Artist",-1),tc=Ze(" \xA0Unofficial Search Helper "),oc={class:"fill cols"},rc={class:"rows",style:{width:"320px",height:"100%",overflow:"auto"}},ic={class:"cols"},nc=Ze(" Search "),sc=de("div",{class:"description"},[de("div",null,"Wheel: Rotate Camera / Zoom"),de("div",null,"Mouse Right: Move Camera"),de("div",null,"Shift + Mouse Left: Rotate Joint")],-1),ac={class:"description"},lc=Ze(" This page is a third party search helper for "),cc=de("a",{href:"https://www.human-anatomy-for-artist.com",target:"_blank"},"human-anatomy-for-artist.com",-1),dc=Ze(". "),uc=de("div",null,[de("a",{href:"https://github.com/x6ud/x6ud.github.io/issues",target:"_blank"},"Leave a message")],-1),hc=de("div",null,[de("a",{href:"https://github.com/x6ud/human-anatomy-for-artist-search-helper",target:"_blank"}," Source code ")],-1),fc=de("div",null,[de("a",{href:"https://x6ud.github.io/female-anatomy-for-artist-search-helper",target:"_blank"}," Female body art reference search ")],-1),pc=de("div",null,[de("a",{href:"https://x6ud.github.io/pose-search",target:"_blank"}," Another page for searching photos by pose")],-1),gc={class:"scroll-list fill",ref:"searchResultsContainerDom"},vc={key:0,class:"loading"},mc={key:1,class:"warning",style:{"font-size":"16px"}},bc={key:0},wc=Ze(" This page requires WebGL2 but your system does not seem to support. Try updating your graphics card drivers or changing your browser. "),yc={key:1},xc=Ze(" This page currently supports mouse operation only. "),Pc=["data-id","href"],_c=["src"];function Tc(t,e,o,r,i,s){var p,u,y;const n=tt("search-outlined"),a=tt("n-icon"),l=tt("n-select"),d=tt("n-button"),h=tt("skeleton-model-canvas"),f=tt("warning-outlined");return Ne(),it("div",Ql,[de("div",Jl,[xe(a,{size:"20"},{default:ht(()=>[xe(n)]),_:1}),ec,tc]),de("div",oc,[de("div",rc,[de("div",ic,[xe(l,{class:"fill",size:"small",placeholder:"Joint / Body Part",filterable:"",clearable:"",options:t.bodyPartOptions,value:t.bodyPart,"onUpdate:value":e[0]||(e[0]=w=>t.bodyPart=w)},null,8,["options","value"]),xe(d,{size:"small",type:"primary",onClick:t.onSearch,disabled:!t.bodyPart},{default:ht(()=>[nc]),_:1},8,["onClick","disabled"])]),sc,xe(h,{style:{width:"100%",height:"400px","min-height":"400px"},model:t.model,highlights:(p=t.matchers[t.bodyPart])==null?void 0:p.highlights},null,8,["model","highlights"]),de("div",ac,[de("div",null,[lc,cc,dc,t.photosNum?(Ne(),it(Mt,{key:0},[Ze(" The current dataset crawled the first "+Co(t.photosNum)+" photos on the site. More data will be added slowly. ",1)],64)):Rt("",!0)]),uc,hc,fc,pc])]),de("div",gc,[t.loadingData&&!((u=t.searchResults)==null?void 0:u.length)?(Ne(),it("div",vc," Loading data... ("+Co(t.loadingProgress)+"/"+Co(t.loadingTotal)+") ",1)):Rt("",!0),!((y=t.searchResults)==null?void 0:y.length)&&(!t.supportWebGL2||!t.supportMouse)?(Ne(),it("div",mc,[t.supportWebGL2?Rt("",!0):(Ne(),it("div",bc,[xe(a,null,{default:ht(()=>[xe(f)]),_:1}),wc])),t.supportMouse?Rt("",!0):(Ne(),it("div",yc,[xe(a,null,{default:ht(()=>[xe(f)]),_:1}),xc]))])):Rt("",!0),(Ne(!0),it(Mt,null,yn(t.searchResults,w=>(Ne(),it("a",{class:"item photo","data-id":w.id,href:`https://www.human-anatomy-for-artist.com/photos/show/id/${w.id}`,rel:"noreferrer",target:"_blank"},[de("img",{src:w.url,style:xn({transform:w.flipped?"scaleX(-1)":null}),alt:"",referrerpolicy:"no-referrer"},null,12,_c)],8,Pc))),256))],512)])])}var Ec=Ko(ql,[["render",Tc]]);export{Ec as default};
//# sourceMappingURL=Search.b3b26460.js.map
