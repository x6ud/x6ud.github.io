var Di=Object.defineProperty;var zi=(t,e,r)=>e in t?Di(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var c=(t,e,r)=>(zi(t,typeof e!="symbol"?e+"":e,r),r);import{_ as $e,a as Yr}from"./index.b2c4a6cc.js";import{w as fr,u as nt,r as Bi,c as X,a as J,b as ue,d as $i,N as Yt,o as Oe,e as Xe,C as Ui,f as pr,i as gr,g as vr,V as Gt,p as Kt,h as st,j as Q,k as wt,l as _e,m as Zt,n as Vi,q as Ae,s as Ni,t as Wi,v as at,x as qt,y as Hi,z as Gr,A as ji,B as mr,D as Kr,E as Re,F as re,G as Xi,H as Yi,I as Gi,J as Ki,K as Zi,L as br,M as wr,O as Zr,P as we,Q as qr,R as qi,S as yr,T as Qi,U as lt,W as Ye,X as _t,Y as Ji,Z as Qr,_ as en,$ as Jr,a0 as eo,a1 as Tt,a2 as tn,a3 as zt,a4 as rn,a5 as on,a6 as ee,a7 as nn,a8 as sn,a9 as an,aa as ln,ab as cn,ac as dn,ad as Bt,ae as xr,af as $t,ag as un,ah as hn,ai as Pr,aj as pe,ak as Se,al as Ge,am as Ct,an as yt,ao as Ue,ap as Qe,aq as le,ar as At,as as to,at as ke,au as Qt,av as Jt,aw as Ke,ax as fn,ay as ro}from"./feature-buffers.02aa0128.js";import{f as Ut,W as pn}from"./Warning.4c433c86.js";import{e as se,o as je,c as er,f as ye,g as B,h as oo,w as Ve,i as rt,j as St,k as ct,F as Vt,C as gn,l as Ze,m as x,t as fe,p as dt,n as vn,q as tr,s as N,T as mn,u as xt,v as rr,x as Je,y as _r,z as Nt,A as io,B as bn,r as et,D as ut,E as ht,G as Ne,H as Wt,I as wn,J as yn,K as xn}from"./vendor.1d5e9611.js";const Pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},_n=ye("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z",fill:"currentColor"},null,-1),Tn=ye("path",{d:"M464 336a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1);var Cn=se({name:"InfoCircleOutlined",render:function(e,r){return je(),er("svg",Pn,[_n,Tn])}});const An={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Sn=ye("path",{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1c-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z",fill:"currentColor"},null,-1);var Mn=se({name:"SearchOutlined",render:function(e,r){return je(),er("svg",An,[Sn])}});const Rn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},En=ye("path",{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 0 0-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7c29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6c29.4 29.4 52.5 63.6 68.6 101.7c16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 0 1-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 0 0-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z",fill:"currentColor"},null,-1);var Ln=se({name:"UndoOutlined",render:function(e,r){return je(),er("svg",Rn,[En])}});const kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Fn=ye("path",{d:"M464 720a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z",fill:"currentColor"},null,-1);var In=se({name:"WarningOutlined",render:function(e,r){return je(),er("svg",kn,[Fn])}});let or=[];const no=new WeakMap;function On(){or.forEach(t=>t(...no.get(t))),or=[]}function so(t,...e){no.set(t,e),!or.includes(t)&&or.push(t)===1&&requestAnimationFrame(On)}function Tr(t,e){let{target:r}=t;for(;r;){if(r.dataset&&r.dataset[e]!==void 0)return!0;r=r.parentElement}return!1}function Dn(t){const e=B(!!t.value);if(e.value)return oo(e);const r=Ve(t,o=>{o&&(e.value=!0,r())});return oo(e)}const zn=typeof window!="undefined";let Mt,Ht;const Bn=()=>{var t,e;Mt=zn?(e=(t=document)===null||t===void 0?void 0:t.fonts)===null||e===void 0?void 0:e.ready:void 0,Ht=!1,Mt!==void 0?Mt.then(()=>{Ht=!0}):Ht=!0};Bn();function $n(t){if(Ht)return;let e=!1;rt(()=>{Ht||Mt==null||Mt.then(()=>{e||t()})}),St(()=>{e=!0})}const Un=(typeof window=="undefined"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function Vn(){return Un}function ao(t,e=[],r){const o={};return e.forEach(i=>{o[i]=t[i]}),Object.assign(o,r)}function Nn(t,e=[],r){const o={};return Object.getOwnPropertyNames(t).forEach(s=>{e.includes(s)||(o[s]=t[s])}),Object.assign(o,r)}function Cr(t,e=!0,r=[]){return t.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&r.push(ct(String(o)));return}if(Array.isArray(o)){Cr(o,e,r);return}if(o.type===Vt){if(o.children===null)return;Array.isArray(o.children)&&Cr(o.children,e,r)}else o.type!==gn&&r.push(o)}}),r}function Wn(t){return Object.keys(t)}const Rt=(t,...e)=>typeof t=="function"?t(...e):typeof t=="string"?ct(t):typeof t=="number"?ct(String(t)):null;function Hn(t){switch(typeof t){case"string":return t||void 0;case"number":return String(t);default:return}}function lo(t,e="default",r=void 0){const o=t[e];if(!o)return fr("getFirstSlotVNode",`slot[${e}] is empty`),null;const i=Cr(o(r));return i.length===1?i[0]:(fr("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}const co=Symbol("modalBody"),uo=Symbol("drawerBody"),ho=Symbol("popoverBodyInjection"),Ar=Symbol("internal-select-menu"),fo=Symbol("internal-select-menu-body"),po="__disabled__";function ft(t){const e=Ze(co,null),r=Ze(uo,null),o=Ze(ho,null),i=Ze(fo,null);return nt(()=>{var s;const{to:n}=t;return n!==void 0?n===!1?po:n===!0?"body":n:(e==null?void 0:e.value)?(s=e.value.$el)!==null&&s!==void 0?s:e.value:(r==null?void 0:r.value)?r.value:(o==null?void 0:o.value)?o.value:(i==null?void 0:i.value)?i.value:n!=null?n:"body"})}ft.tdkey=po;ft.propTo={type:[String,Object,Boolean],default:void 0};var jn=se({name:"Checkmark",render(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},x("g",{fill:"none"},x("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),Xn=Bi("close",x("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},x("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},x("g",{fill:"currentColor","fill-rule":"nonzero"},x("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),Yn=se({name:"Empty",render(){return x("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},x("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),x("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),Gn=X("base-close",`
 cursor: pointer;
 color: var(--close-color);
`,[J("&:hover",{color:"var(--close-color-hover)"}),J("&:active",{color:"var(--close-color-pressed)"}),ue("disabled",{cursor:"not-allowed!important",color:"var(--close-color-disabled)"})]),Kn=se({name:"BaseClose",props:{clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},onClick:Function},setup(t){return $i("BaseClose",Gn,fe(t,"clsPrefix")),()=>{const{clsPrefix:e,disabled:r}=t;return x(Yt,{role:"button",ariaDisabled:r,ariaLabel:"close",clsPrefix:e,class:[`${e}-base-close`,r&&`${e}-base-close--disabled`],onClick:r?void 0:t.onClick},{default:()=>x(Xn,null)})}}}),Zn=se({props:{onFocus:Function,onBlur:Function},setup(t){return()=>x("div",{style:"width: 0; height: 0",tabindex:0,onFocus:t.onFocus,onBlur:t.onBlur})}});function go(t){return Array.isArray(t)?t:[t]}const Sr={STOP:"STOP"};function vo(t,e){const r=e(t);t.children!==void 0&&r!==Sr.STOP&&t.children.forEach(o=>vo(o,e))}function qn(t,e={}){const{preserveGroup:r=!1}=e,o=[],i=r?n=>{n.isLeaf||(o.push(n.key),s(n.children))}:n=>{n.isLeaf||(n.isGroup||o.push(n.key),s(n.children))};function s(n){n.forEach(i)}return s(t),o}function Qn(t,e){const{isLeaf:r}=t;return r!==void 0?r:!e(t)}function Jn(t){return t.children}function es(t){return t.key}function ts(){return!1}function rs(t,e){const{isLeaf:r}=t;return!(r===!1&&!Array.isArray(e(t)))}function os(t){return t.disabled===!0}function is(t,e){return t.isLeaf===!1&&!Array.isArray(e(t))}function Mr(t){var e;return t==null?[]:Array.isArray(t)?t:(e=t.checkedKeys)!==null&&e!==void 0?e:[]}function Rr(t){var e;return t==null||Array.isArray(t)?[]:(e=t.indeterminateKeys)!==null&&e!==void 0?e:[]}function ns(t,e){const r=new Set(t);return e.forEach(o=>{r.has(o)||r.add(o)}),Array.from(r)}function ss(t,e){const r=new Set(t);return e.forEach(o=>{r.has(o)&&r.delete(o)}),Array.from(r)}function as(t){return(t==null?void 0:t.type)==="group"}function ls(t){const e=new Map;return t.forEach((r,o)=>{e.set(r.key,o)}),r=>{var o;return(o=e.get(r))!==null&&o!==void 0?o:null}}class cs extends Error{constructor(){super();this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function ds(t,e,r){return ir(e.concat(t),r)}function us(t,e){const r=new Set;return t.forEach(o=>{const i=e.treeNodeMap.get(o);if(i!==void 0){let s=i.parent;for(;s!==null&&!(s.disabled||r.has(s.key));)r.add(s.key),s=s.parent}}),r}function hs(t,e,r){const o=ir(e,r),i=ir(t,r,!0),s=us(t,r),n=[];return o.forEach(a=>{(i.has(a)||s.has(a))&&n.push(a)}),n.forEach(a=>o.delete(a)),o}function Er(t,e){const{checkedKeys:r,keysToCheck:o,keysToUncheck:i,indeterminateKeys:s,cascade:n,leafOnly:a,checkStrategy:l}=t;if(!n)return o!==void 0?{checkedKeys:ns(r,o),indeterminateKeys:Array.from(s)}:i!==void 0?{checkedKeys:ss(r,i),indeterminateKeys:Array.from(s)}:{checkedKeys:Array.from(r),indeterminateKeys:Array.from(s)};const{levelTreeNodeMap:d}=e;let u;i!==void 0?u=hs(i,r,e):o!==void 0?u=ds(o,r,e):u=ir(r,e);const f=l==="parent",p=l==="child"||a,h=u,y=new Set,w=Math.max.apply(null,Array.from(d.keys()));for(let A=w;A>=0;A-=1){const b=A===0,g=d.get(A);for(const m of g){if(m.isLeaf)continue;const{key:v,shallowLoaded:C}=m;if(p&&C&&m.children.forEach(L=>{!L.disabled&&!L.isLeaf&&L.shallowLoaded&&h.has(L.key)&&h.delete(L.key)}),m.disabled||!C)continue;let T=!0,S=!1,R=!0;for(const L of m.children){const $=L.key;if(!L.disabled){if(R&&(R=!1),h.has($))S=!0;else if(y.has($)){S=!0,T=!1;break}else if(T=!1,S)break}}T&&!R?(f&&m.children.forEach(L=>{!L.disabled&&h.has(L.key)&&h.delete(L.key)}),h.add(v)):S&&y.add(v),b&&p&&h.has(v)&&h.delete(v)}}return{checkedKeys:Array.from(h),indeterminateKeys:Array.from(y)}}function ir(t,e,r=!1){const{treeNodeMap:o,getChildren:i}=e,s=new Set,n=new Set(t);return t.forEach(a=>{const l=o.get(a);l!==void 0&&vo(l,d=>{if(d.disabled)return Sr.STOP;const{key:u}=d;if(!s.has(u)&&(s.add(u),n.add(u),is(d.rawNode,i))){if(r)return Sr.STOP;throw new cs}})}),n}function fs(t,{includeGroup:e=!1,includeSelf:r=!0},o){var i;const s=o.treeNodeMap;let n=t==null?null:(i=s.get(t))!==null&&i!==void 0?i:null;const a={keyPath:[],treeNodePath:[],treeNode:n};if(n==null?void 0:n.ignored)return a.treeNode=null,a;for(;n;)!n.ignored&&(e||!n.isGroup)&&a.treeNodePath.push(n),n=n.parent;return a.treeNodePath.reverse(),r||a.treeNodePath.pop(),a.keyPath=a.treeNodePath.map(l=>l.key),a}function ps(t){if(t.length===0)return null;const e=t[0];return e.isGroup||e.ignored||e.disabled?e.getNext():e}function gs(t,e){const r=t.siblings,o=r.length,{index:i}=t;return e?r[(i+1)%o]:i===r.length-1?null:r[i+1]}function mo(t,e,{loop:r=!1,includeDisabled:o=!1}={}){const i=e==="prev"?vs:gs,s={reverse:e==="prev"};let n=!1,a=null;function l(d){if(d!==null){if(d===t){if(!n)n=!0;else if(!t.disabled&&!t.isGroup){a=t;return}}else if((!d.disabled||o)&&!d.ignored&&!d.isGroup){a=d;return}if(d.isGroup){const u=Lr(d,s);u!==null?a=u:l(i(d,r))}else{const u=i(d,!1);if(u!==null)l(u);else{const f=ms(d);(f==null?void 0:f.isGroup)?l(i(f,r)):r&&l(i(d,!0))}}}}return l(t),a}function vs(t,e){const r=t.siblings,o=r.length,{index:i}=t;return e?r[(i-1+o)%o]:i===0?null:r[i-1]}function ms(t){return t.parent}function Lr(t,e={}){const{reverse:r=!1}=e,{children:o}=t;if(o){const{length:i}=o,s=r?i-1:0,n=r?-1:i,a=r?-1:1;for(let l=s;l!==n;l+=a){const d=o[l];if(!d.disabled&&!d.ignored)if(d.isGroup){const u=Lr(d,e);if(u!==null)return u}else return d}}return null}const bs={getChild(){return this.ignored?null:Lr(this)},getParent(){const{parent:t}=this;return(t==null?void 0:t.isGroup)?t.getParent():t},getNext(t={}){return mo(this,"next",t)},getPrev(t={}){return mo(this,"prev",t)}};function ws(t,e){const r=e?new Set(e):void 0,o=[];function i(s){s.forEach(n=>{o.push(n),!(n.isLeaf||!n.children||n.ignored)&&(n.isGroup||r===void 0||r.has(n.key))&&i(n.children)})}return i(t),o}function ys(t,e){const r=t.key;for(;e;){if(e.key===r)return!0;e=e.parent}return!1}function bo(t,e,r,o,i,s=null,n=0){const a=[];return t.forEach((l,d)=>{var u;const f=Object.create(o);if(f.rawNode=l,f.siblings=a,f.level=n,f.index=d,f.isFirstChild=d===0,f.isLastChild=d+1===t.length,f.parent=s,!f.ignored){const p=i(l);Array.isArray(p)&&(f.children=bo(p,e,r,o,i,f,n+1))}a.push(f),e.set(f.key,f),r.has(n)||r.set(n,[]),(u=r.get(n))===null||u===void 0||u.push(f)}),a}function xs(t,e={}){const r=new Map,o=new Map,{getDisabled:i=os,getIgnored:s=ts,getChildren:n=Jn,getIsGroup:a=as,getKey:l=es}=e,d=Object.assign({get key(){return l(this.rawNode)},get disabled(){return i(this.rawNode)},get isGroup(){return a(this.rawNode)},get isLeaf(){return Qn(this.rawNode,n)},get shallowLoaded(){return rs(this.rawNode,n)},get ignored(){return s(this.rawNode)},contains(g){return ys(this,g)}},bs),u=bo(t,r,o,d,n);function f(g){if(g==null)return null;const m=r.get(g);return m&&!m.isGroup&&!m.ignored?m:null}function p(g){if(g==null)return null;const m=r.get(g);return m&&!m.ignored?m:null}function h(g,m){const v=p(g);return v?v.getPrev(m):null}function y(g,m){const v=p(g);return v?v.getNext(m):null}function w(g){const m=p(g);return m?m.getParent():null}function A(g){const m=p(g);return m?m.getChild():null}const b={treeNodes:u,treeNodeMap:r,levelTreeNodeMap:o,maxLevel:Math.max(...o.keys()),getChildren:n,getFlattenedNodes(g){return ws(u,g)},getNode:f,getPrev:h,getNext:y,getParent:w,getChild:A,getFirstAvailableNode(){return ps(u)},getPath(g,m={}){return fs(g,m,b)},getCheckedKeys(g,m={}){const{cascade:v=!0,leafOnly:C=!1,checkStrategy:T="all"}=m;return Er({checkedKeys:Mr(g),indeterminateKeys:Rr(g),cascade:v,leafOnly:C,checkStrategy:T},b)},check(g,m,v={}){const{cascade:C=!0,leafOnly:T=!1,checkStrategy:S="all"}=v;return Er({checkedKeys:Mr(m),indeterminateKeys:Rr(m),keysToCheck:g==null?[]:go(g),cascade:C,leafOnly:T,checkStrategy:S},b)},uncheck(g,m,v={}){const{cascade:C=!0,leafOnly:T=!1,checkStrategy:S="all"}=v;return Er({checkedKeys:Mr(m),indeterminateKeys:Rr(m),keysToUncheck:g==null?[]:go(g),cascade:C,leafOnly:T,checkStrategy:S},b)},getNonLeafKeys(g={}){return qn(u,g)}};return b}function kr(t,e="default"){const r=t[e];if(r===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);return r()}function wo(t,e="default"){const r=t[e];if(r===void 0)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);const o=r();if(o.length===1)return o[0];throw new Error(`[vueuc/binder]: slot[${e}] should have exactly one child.`)}let gt=null;function yo(){if(gt===null&&(gt=document.getElementById("v-binder-view-measurer"),gt===null)){gt=document.createElement("div"),gt.id="v-binder-view-measurer";const{style:t}=gt;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(gt)}return gt.getBoundingClientRect()}function Ps(t,e){const r=yo();return{top:e,left:t,height:0,width:0,right:r.width-t,bottom:r.height-e}}function Fr(t){const e=t.getBoundingClientRect(),r=yo();return{left:e.left-r.left,top:e.top-r.top,bottom:r.height+r.top-e.bottom,right:r.width+r.left-e.right,width:e.width,height:e.height}}function _s(t){return t.nodeType===9?null:t.parentNode}function xo(t){if(t===null)return null;const e=_s(t);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:r,overflowX:o,overflowY:i}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(r+i+o))return e}return xo(e)}const Ts=se({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(t){var e;dt("VBinder",(e=vn())===null||e===void 0?void 0:e.proxy);const r=Ze("VBinder",null),o=B(null),i=b=>{o.value=b,r&&t.syncTargetWithParent&&r.setTargetRef(b)};let s=[];const n=()=>{let b=o.value;for(;b=xo(b),b!==null;)s.push(b);for(const g of s)Xe("scroll",g,f,!0)},a=()=>{for(const b of s)Oe("scroll",b,f,!0);s=[]},l=new Set,d=b=>{l.size===0&&n(),l.has(b)||l.add(b)},u=b=>{l.has(b)&&l.delete(b),l.size===0&&a()},f=()=>{so(p)},p=()=>{l.forEach(b=>b())},h=new Set,y=b=>{h.size===0&&Xe("resize",window,A),h.has(b)||h.add(b)},w=b=>{h.has(b)&&h.delete(b),h.size===0&&Oe("resize",window,A)},A=()=>{h.forEach(b=>b())};return St(()=>{Oe("resize",window,A),a()}),{targetRef:o,setTargetRef:i,addScrollListener:d,removeScrollListener:u,addResizeListener:y,removeResizeListener:w}},render(){return kr(this.$slots)}});var Po=Ts,_o=se({name:"Target",setup(){const{setTargetRef:t,syncTarget:e}=Ze("VBinder");return{syncTarget:e,setTargetDirective:{mounted:t,updated:t}}},render(){const{syncTarget:t,setTargetDirective:e}=this;return t?tr(wo(this.$slots),[[e]]):wo(this.$slots)}});const Et="@@mmoContext",Cs={mounted(t,{value:e}){t[Et]={handler:void 0},typeof e=="function"&&(t[Et].handler=e,Xe("mousemoveoutside",t,e))},updated(t,{value:e}){const r=t[Et];typeof e=="function"?r.handler?r.handler!==e&&(Oe("mousemoveoutside",t,r.handler),r.handler=e,Xe("mousemoveoutside",t,e)):(t[Et].handler=e,Xe("mousemoveoutside",t,e)):r.handler&&(Oe("mousemoveoutside",t,r.handler),r.handler=void 0)},unmounted(t){const{handler:e}=t[Et];e&&Oe("mousemoveoutside",t,e),t[Et].handler=void 0}};var As=Cs;const Lt="@@coContext",Ss={mounted(t,{value:e}){t[Lt]={handler:void 0},typeof e=="function"&&(t[Lt].handler=e,Xe("clickoutside",t,e))},updated(t,{value:e}){const r=t[Lt];typeof e=="function"?r.handler?r.handler!==e&&(Oe("clickoutside",t,r.handler),r.handler=e,Xe("clickoutside",t,e)):(t[Lt].handler=e,Xe("clickoutside",t,e)):r.handler&&(Oe("clickoutside",t,r.handler),r.handler=void 0)},unmounted(t){const{handler:e}=t[Lt];e&&Oe("clickoutside",t,e),t[Lt].handler=void 0}};var nr=Ss;function Ms(t,e){console.error(`[vdirs/${t}]: ${e}`)}class Rs{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,r){const{elementZIndex:o}=this;if(r!==void 0){e.style.zIndex=`${r}`,o.delete(e);return}const{nextZIndex:i}=this;o.has(e)&&o.get(e)+1===this.nextZIndex||(e.style.zIndex=`${i}`,o.set(e,i),this.nextZIndex=i+1,this.squashState())}unregister(e){const{elementZIndex:r}=this;r.has(e)?r.delete(e):Ms("vdirs/z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort((r,o)=>r[1]-o[1]),this.nextZIndex=2e3,e.forEach(r=>{const o=r[0],i=this.nextZIndex++;`${i}`!==o.style.zIndex&&(o.style.zIndex=`${i}`)})}}var Ir=new Rs;const Or="@@ziContext",Es={mounted(t,e){const{value:r={}}=e,{zIndex:o,enabled:i}=r;Ir.ensureZIndex(t,o),t[Or]={enabled:i}},updated(t,e){const{value:r={}}=e,{zIndex:o,enabled:i}=r,s=t[Or].enabled;i&&!s&&Ir.ensureZIndex(t,o),t[Or].enabled=i},unmounted(t){Ir.unregister(t)}};var Ls=Es;const{c:vt}=Ui();function To(t){return t&-t}class ks{constructor(e,r){this.l=e,this.min=r;const o=new Array(e+1);for(let i=0;i<e+1;++i)o[i]=0;this.ft=o}add(e,r){if(r===0)return;const{l:o,ft:i}=this;for(e+=1;e<=o;)i[e]+=r,e+=To(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===0)return 0;const{ft:r,min:o,l:i}=this;if(e===void 0&&(e=i),e>i)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let s=e*o;for(;e>0;)s+=r[e],e-=To(e);return s}getBound(e){let r=0,o=this.l;for(;o>r;){const i=Math.floor((r+o)/2),s=this.sum(i);if(s>e){o=i;continue}else if(s<e){if(r===i)return this.sum(r+1)<=e?r+1:i;r=i}else return i}return r}}var Fs=se({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(t){return{showTeleport:Dn(fe(t,"show")),mergedTo:N(()=>{const{to:e}=t;return e!=null?e:"body"})}},render(){return this.showTeleport?this.disabled?kr(this.$slots):x(mn,{disabled:this.disabled,to:this.mergedTo},kr(this.$slots)):null}});const Dr={top:"bottom",bottom:"top",left:"right",right:"left"},Co={start:"end",center:"center",end:"start"},zr={top:"height",bottom:"height",left:"width",right:"width"},Is={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Os={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Ds={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"};function zs(t,e,r,o,i){if(!o||i)return t;const[s,n]=t.split("-");let a=n!=null?n:"center";if(n!=="center"){const d=Ds[t],u=Dr[d],f=zr[d];r[f]>e[f]&&e[d]+e[f]<=r[f]&&e[d]<e[u]&&(a=Co[n]),r[f]<e[f]&&e[u]<0&&e[d]>e[u]&&(a=Co[n])}let l=s;return!(e[s]>=r[zr[s]])&&e[Dr[s]]>=r[zr[s]]&&(l=Dr[s]),a!=="center"?`${l}-${a}`:l}function Bs(t,e){return e?Os[t]:Is[t]}function $s(t,e,r,o){if(o)switch(t){case"bottom-start":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left)}px`,transform:""};case"bottom-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:""};case"right-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateX(-50%)"}}}const Us=vt([vt(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),vt(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[vt("> *",{pointerEvents:"all"})])]);var Ao=se({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(t){const e=Ze("VBinder"),r=nt(()=>t.enabled!==void 0?t.enabled:t.show),o=B(null),i=B(null),s=()=>{const{syncTrigger:p}=t;p.includes("scroll")&&e.addScrollListener(l),p.includes("resize")&&e.addResizeListener(l)},n=()=>{e.removeScrollListener(l),e.removeResizeListener(l)};rt(()=>{r.value&&(l(),s())});const a=pr();Us.mount({id:"vueuc/binder",head:!0,ssr:a}),St(()=>{n()}),$n(()=>{r.value&&l()});const l=()=>{if(!r.value)return;const p=o.value;if(p===null)return;const h=e.targetRef,{x:y,y:w,overlap:A}=t,b=y!==void 0&&w!==void 0?Ps(y,w):Fr(h),{width:g,minWidth:m,placement:v,flip:C}=t;p.setAttribute("v-placement",v),A?p.setAttribute("v-overlap",""):p.removeAttribute("v-overlap");const{style:T}=p;g==="target"?T.width=`${b.width}px`:g!==void 0?T.width=g:T.width="",m==="target"?T.minWidth=`${b.width}px`:m!==void 0?T.minWidth=m:T.minWidth="";const S=Fr(p),R=Fr(i.value),L=zs(v,b,S,C,A),$=Bs(L,A),{left:V,top:G,transform:z}=$s(L,R,b,A);p.setAttribute("v-placement",L),p.style.transform=`translateX(${V}) translateY(${G}) ${z}`,p.style.transformOrigin=$};Ve(r,p=>{p?(s(),d()):n()});const d=()=>{xt().then(l).catch(p=>console.error(p))};["placement","x","y","flip","width","overlap","minWidth"].forEach(p=>{Ve(fe(t,p),l)}),["teleportDisabled"].forEach(p=>{Ve(fe(t,p),d)}),Ve(fe(t,"syncTrigger"),p=>{p.includes("resize")?e.addResizeListener(l):e.removeResizeListener(l),p.includes("scroll")?e.addScrollListener(l):e.removeScrollListener(l)});const u=gr(),f=nt(()=>{const{to:p}=t;if(p!==void 0)return p;!u.value});return{VBinder:e,mergedEnabled:r,offsetContainerRef:i,followerRef:o,mergedTo:f,syncPosition:l}},render(){return x(Fs,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{const t=x("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[x("div",{class:"v-binder-follower-content",ref:"followerRef"},this.$slots)]);return this.zindexable?tr(t,[[Ls,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});const Vs=vt(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[vt("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[vt("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var Ns=se({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(t){const e=pr();Vs.mount({id:"vueuc/virtual-list",head:!0,ssr:e}),rt(()=>{const{defaultScrollIndex:v,defaultScrollKey:C}=t;v!=null?f({index:v}):C!=null&&f({key:C})});const r=N(()=>{const v=new Map,{keyField:C}=t;return t.items.forEach((T,S)=>{v.set(T[C],S)}),v}),o=B(null),i=B(void 0),s=new Map,n=N(()=>{const{items:v,itemSize:C,keyField:T}=t,S=new ks(v.length,C);return v.forEach((R,L)=>{const $=R[T],V=s.get($);V!==void 0&&S.add(L,V)}),S}),a=B(0),l=B(0),d=nt(()=>Math.max(n.value.getBound(l.value-vr(t.paddingTop))-1,0)),u=N(()=>{const{value:v}=i;if(v===void 0)return[];const{items:C,itemSize:T}=t,S=d.value,R=Math.min(S+Math.ceil(v/T+1),C.length-1),L=[];for(let $=S;$<=R;++$)L.push(C[$]);return L}),f=v=>{const{left:C,top:T,index:S,key:R,position:L,behavior:$,debounce:V=!0}=v;if(C!==void 0||T!==void 0)h(C,T,$);else if(S!==void 0)p(S,$,V);else if(R!==void 0){const G=r.value.get(R);G!==void 0&&p(G,$,V)}else L==="bottom"?h(0,Number.MAX_SAFE_INTEGER,$):L==="top"&&h(0,0,$)};function p(v,C,T){const{value:S}=n,R=S.sum(v)+vr(t.paddingTop);if(!T)o.value.scrollTo({left:0,top:R,behavior:C});else{const{scrollTop:L,offsetHeight:$}=o.value;if(R>L){const V=S.get(v);R+V<=L+$||o.value.scrollTo({left:0,top:R+V-$,behavior:C})}else o.value.scrollTo({left:0,top:R,behavior:C})}b=v}function h(v,C,T){o.value.scrollTo({left:v,top:C,behavior:T})}function y(v,C){var T;if(t.ignoreItemResize)return;const{value:S}=n,R=r.value.get(v),L=C.target.offsetHeight;L-t.itemSize===0?s.delete(v):s.set(v,L-t.itemSize);const V=L-S.get(R);V!==0&&(g!==void 0&&R<=g&&((T=o.value)===null||T===void 0||T.scrollBy(0,V)),S.add(R,V),a.value++)}function w(v){so(m);const{onScroll:C}=t;C!==void 0&&C(v)}function A(v){i.value=v.contentRect.height;const{onResize:C}=t;C!==void 0&&C(v)}let b,g;function m(){const{value:v}=o;v!=null&&(g=b!=null?b:d.value,b=void 0,l.value=o.value.scrollTop)}return{listHeight:i,listStyle:{overflow:"auto"},keyToIndex:r,itemsStyle:N(()=>{const{itemResizable:v}=t,C=Kt(n.value.sum());return a.value,[t.itemsStyle,{boxSizing:"content-box",height:v?"":C,minHeight:v?C:"",paddingTop:Kt(t.paddingTop),paddingBottom:Kt(t.paddingBottom)}]}),visibleItemsStyle:N(()=>(a.value,{transform:`translate3d(0, ${Kt(n.value.sum(d.value))}, 0)`})),viewportItems:u,listElRef:o,itemsElRef:B(null),scrollTo:f,handleListResize:A,handleListScroll:w,handleItemResize:y}},render(){const{itemResizable:t,keyField:e,keyToIndex:r,visibleItemsTag:o}=this;return x(Gt,{onResize:this.handleListResize},{default:()=>{var i,s;return x("div",rr(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?x("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[x(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(n=>{const a=n[e],l=r.get(a),d=this.$slots.default({item:n,index:l})[0];return t?x(Gt,{key:a,onResize:u=>this.handleItemResize(a,u)},{default:()=>d}):(d.key=a,d)})})]):(s=(i=this.$slots).empty)===null||s===void 0?void 0:s.call(i)])}})}});const Pt="v-hidden",Ws=vt("[v-hidden]",{display:"none!important"});var So=se({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(t,{slots:e}){const r=B(null),o=B(null);function i(){const{value:n}=r,{getCounter:a,getTail:l}=t;let d;if(a!==void 0?d=a():d=o.value,!n||!d)return;d.hasAttribute(Pt)&&d.removeAttribute(Pt);const{children:u}=n,f=n.offsetWidth,p=[],h=e.tail?l==null?void 0:l():null;let y=h?h.offsetWidth:0,w=!1;const A=n.children.length-(e.tail?1:0);for(let g=0;g<A-1;++g){if(g<0)continue;const m=u[g];if(w){m.hasAttribute(Pt)||m.setAttribute(Pt,"");continue}else m.hasAttribute(Pt)&&m.removeAttribute(Pt);const v=m.offsetWidth;if(y+=v,p[g]=v,y>f){const{updateCounter:C}=t;for(let T=g;T>=0;--T){const S=A-1-T;C!==void 0?C(S):d.textContent=`${S}`;const R=d.offsetWidth;if(y-=p[T],y+R<=f||T===0){w=!0,g=T-1,h&&(g===-1?(h.style.maxWidth=`${f-R}px`,h.style.boxSizing="border-box"):h.style.maxWidth="");break}}}}const{onUpdateOverflow:b}=t;w?b!==void 0&&b(!0):(b!==void 0&&b(!1),d.setAttribute(Pt,""))}const s=pr();return Ws.mount({id:"vueuc/overflow",head:!0,ssr:s}),rt(i),{selfRef:r,counterRef:o,sync:i}},render(){const{$slots:t}=this;return xt(this.sync),x("div",{class:"v-overflow",ref:"selfRef"},[Je(t,"default"),t.counter?t.counter():x("span",{style:{display:"inline-block"},ref:"counterRef"}),t.tail?t.tail():null])}}),Hs={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};const js=t=>{const{textColorDisabled:e,iconColor:r,textColor2:o,fontSizeSmall:i,fontSizeMedium:s,fontSizeLarge:n,fontSizeHuge:a}=t;return Object.assign(Object.assign({},Hs),{fontSizeSmall:i,fontSizeMedium:s,fontSizeLarge:n,fontSizeHuge:a,textColor:e,iconColor:r,extraTextColor:o})},Xs={name:"Empty",common:st,self:js};var Mo=Xs,Ys=X("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--font-size);
`,[Q("icon",`
 width: var(--icon-size);
 height: var(--icon-size);
 font-size: var(--icon-size);
 line-height: var(--icon-size);
 color: var(--icon-color);
 transition:
 color .3s var(--bezier);
 `),Q("description",`
 margin-top: 8px;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `),Q("extra",`
 text-align: center;
 transition: color .3s var(--bezier);
 margin-top: 12px;
 color: var(--extra-text-color);
 `)]);const Gs=Object.assign(Object.assign({},_e.props),{description:{type:String,default:void 0},showDescription:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function});var Ks=se({name:"Empty",props:Gs,setup(t){const{mergedClsPrefixRef:e}=wt(t),r=_e("Empty","Empty",Ys,Mo,t,e),{localeRef:o}=Zt("Empty"),i=Ze(Vi,null),s=N(()=>{var a,l,d;return(a=t.description)!==null&&a!==void 0?a:(d=(l=i==null?void 0:i.mergedComponentPropsRef.value)===null||l===void 0?void 0:l.Empty)===null||d===void 0?void 0:d.description}),n=N(()=>{var a,l;return((l=(a=i==null?void 0:i.mergedComponentPropsRef.value)===null||a===void 0?void 0:a.Empty)===null||l===void 0?void 0:l.renderIcon)||(()=>x(Yn,null))});return{mergedClsPrefix:e,mergedRenderIcon:n,localizedDescription:N(()=>s.value||o.value.description),cssVars:N(()=>{const{size:a}=t,{common:{cubicBezierEaseInOut:l},self:{[Ae("iconSize",a)]:d,[Ae("fontSize",a)]:u,textColor:f,iconColor:p,extraTextColor:h}}=r.value;return{"--icon-size":d,"--font-size":u,"--bezier":l,"--text-color":f,"--icon-color":p,"--extra-text-color":h}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;return x("div",{class:`${e}-empty`,style:this.cssVars},x("div",{class:`${e}-empty__icon`},Je(t,"icon",void 0,()=>[x(Yt,{clsPrefix:e},{default:this.mergedRenderIcon})])),this.showDescription?x("div",{class:`${e}-empty__description`},Je(t,"default",void 0,()=>[this.localizedDescription])):null,t.extra?x("div",{class:`${e}-empty__extra`},Je(t,"extra")):null)}});const Zs=t=>{const{scrollbarColor:e,scrollbarColorHover:r}=t;return{color:e,colorHover:r}},qs={name:"Scrollbar",common:st,self:Zs};var Ro=qs,Qs=X("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[J(">",[X("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[J("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),J(">",[X("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])]),X("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 `,[ue("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--scrollbar-height);
 `,[J(">",[Q("scrollbar",`
 height: var(--scrollbar-height);
 border-radius: var(--scrollbar-border-radius);
 right: 0;
 `)])]),ue("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--scrollbar-width);
 `,[J(">",[Q("scrollbar",`
 width: var(--scrollbar-width);
 border-radius: var(--scrollbar-border-radius);
 bottom: 0;
 `)])]),ue("disabled",[J(">",[Q("scrollbar",{pointerEvents:"none"})])]),J(">",[Q("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--scrollbar-color);
 transition: background-color .2s var(--scrollbar-bezier);
 `,[Ni(),J("&:hover",{backgroundColor:"var(--scrollbar-color-hover)"})])])])])]);const Js=Object.assign(Object.assign({},_e.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:{type:Boolean,default:!1},container:Function,content:Function,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function}),ea=se({name:"Scrollbar",props:Js,inheritAttrs:!1,setup(t){const{mergedClsPrefixRef:e}=wt(t),r=B(null),o=B(null),i=B(null),s=B(null),n=B(null),a=B(null),l=B(null),d=B(null),u=B(null),f=B(null),p=B(0),h=B(0),y=B(!1),w=B(!1);let A=!1,b=!1,g,m,v=0,C=0,T=0,S=0;const R=Vn(),L=N(()=>{const{value:O}=l,{value:U}=n,{value:K}=u;return O===null||U===null||K===null?0:Math.min(O,K*O/U+t.size*1.5)}),$=N(()=>`${L.value}px`),V=N(()=>{const{value:O}=d,{value:U}=a,{value:K}=f;return O===null||U===null||K===null?0:K*O/U+t.size*1.5}),G=N(()=>`${V.value}px`),z=N(()=>{const{value:O}=l,{value:U}=p,{value:K}=n,{value:te}=u;return O===null||K===null||te===null?0:U/(K-O)*(te-L.value)}),I=N(()=>`${z.value}px`),F=N(()=>{const{value:O}=d,{value:U}=h,{value:K}=a,{value:te}=f;return O===null||K===null||te===null?0:U/(K-O)*(te-V.value)}),_=N(()=>`${F.value}px`),M=N(()=>{const{value:O}=l,{value:U}=n;return O!==null&&U!==null&&U>O}),k=N(()=>{const{value:O}=d,{value:U}=a;return O!==null&&U!==null&&U>O}),Y=N(()=>{const{container:O}=t;return O?O():r.value}),ie=N(()=>{const{content:O}=t;return O?O():o.value}),oe=me,de=O=>{const{onResize:U}=t;U&&U(O),me()},Pe=(O,U)=>{if(!t.scrollable)return;if(typeof O=="number"){ce(O,U!=null?U:0,0,!1,"auto");return}const{left:K,top:te,index:P,elSize:D,position:j,behavior:W,el:Z,debounce:ae=!0}=O;(K!==void 0||te!==void 0)&&ce(K!=null?K:0,te!=null?te:0,0,!1,W),Z!==void 0?ce(0,Z.offsetTop,Z.offsetHeight,ae,W):P!==void 0&&D!==void 0?ce(0,P*D,D,ae,W):j==="bottom"?ce(0,Number.MAX_SAFE_INTEGER,0,!1,W):j==="top"&&ce(0,0,0,!1,W)};function ce(O,U,K,te,P){const{value:D}=Y;if(!!D){if(te){const{scrollTop:j,offsetHeight:W}=D;if(U>j){U+K<=j+W||D.scrollTo({left:O,top:U+K-W,behavior:P});return}}D.scrollTo({left:O,top:U,behavior:P})}}function ne(){Me(),Ie(),me()}function ge(){Fe()}function Fe(){he(),Te()}function he(){m!==void 0&&window.clearTimeout(m),m=window.setTimeout(()=>{w.value=!1},t.duration)}function Te(){g!==void 0&&window.clearTimeout(g),g=window.setTimeout(()=>{y.value=!1},t.duration)}function Me(){g!==void 0&&window.clearTimeout(g),y.value=!0}function Ie(){m!==void 0&&window.clearTimeout(m),w.value=!0}function Ee(O){const{onScroll:U}=t;U&&U(O),ve()}function ve(){const{value:O}=Y;O&&(p.value=O.scrollTop,h.value=O.scrollLeft)}function Le(){const{value:O}=ie;O&&(n.value=O.offsetHeight,a.value=O.offsetWidth);const{value:U}=Y;U&&(l.value=U.offsetHeight,d.value=U.offsetWidth);const{value:K}=s,{value:te}=i;K&&(f.value=K.offsetWidth),te&&(u.value=te.offsetHeight)}function me(){!t.scrollable||(Le(),ve())}function Ce(O){O.preventDefault(),O.stopPropagation(),b=!0,Xe("mousemove",window,E,!0),Xe("mouseup",window,H,!0),C=h.value,T=O.clientX}function E(O){if(!b)return;g!==void 0&&window.clearTimeout(g),m!==void 0&&window.clearTimeout(m);const{value:U}=d,{value:K}=a,{value:te}=V;if(U===null||K===null)return;const D=(O.clientX-T)*(K-U)/(U-te),j=K-U;let W=C+D;W=Math.min(j,W),W=Math.max(W,0);const{value:Z}=Y;if(Z){Z.scrollLeft=W;const{internalOnUpdateScrollLeft:ae}=t;ae&&ae(W)}}function H(O){O.preventDefault(),O.stopPropagation(),Oe("mousemove",window,E,!0),Oe("mouseup",window,H,!0),b=!1,me();const{value:U}=Y;(U==null?void 0:U.contains(O.target))||Fe()}function be(O){O.preventDefault(),O.stopPropagation(),A=!0,Xe("mousemove",window,Be,!0),Xe("mouseup",window,He,!0),v=p.value,S=O.clientY}function Be(O){if(!A)return;g!==void 0&&window.clearTimeout(g),m!==void 0&&window.clearTimeout(m);const{value:U}=l,{value:K}=n,{value:te}=L;if(U===null||K===null)return;const D=(O.clientY-S)*(K-U)/(U-te),j=K-U;let W=v+D;W=Math.min(j,W),W=Math.max(W,0);const{value:Z}=Y;Z&&(Z.scrollTop=W)}function He(O){O.preventDefault(),O.stopPropagation(),Oe("mousemove",window,Be,!0),Oe("mouseup",window,He,!0),A=!1,me();const{value:U}=Y;(U==null?void 0:U.contains(O.target))||Fe()}_r(()=>{const{value:O}=k,{value:U}=M,{value:K}=e,{value:te}=s,{value:P}=i;te&&(O?te.classList.remove(`${K}-scrollbar-rail--disabled`):te.classList.add(`${K}-scrollbar-rail--disabled`)),P&&(U?P.classList.remove(`${K}-scrollbar-rail--disabled`):P.classList.add(`${K}-scrollbar-rail--disabled`))}),rt(()=>{t.container||me()}),St(()=>{g!==void 0&&window.clearTimeout(g),m!==void 0&&window.clearTimeout(m),Oe("mousemove",window,Be,!0),Oe("mouseup",window,He,!0)});const tt=_e("Scrollbar","Scrollbar",Qs,Ro,t,e);return{sync:me,scrollTo:Pe,mergedClsPrefix:e,containerScrollTop:p,containerRef:r,contentRef:o,yRailRef:i,xRailRef:s,needYBar:M,needXBar:k,yBarSizePx:$,xBarSizePx:G,yBarTopPx:I,xBarLeftPx:_,isShowXBar:y,isShowYBar:w,isIos:R,handleScroll:Ee,handleContentResize:oe,handleContainerResize:de,handleMouseEnterWrapper:ne,handleMouseLeaveWrapper:ge,handleYScrollMouseDown:be,handleXScrollMouseDown:Ce,cssVars:N(()=>{const{common:{cubicBezierEaseInOut:O,scrollbarBorderRadius:U,scrollbarHeight:K,scrollbarWidth:te},self:{color:P,colorHover:D}}=tt.value;return{"--scrollbar-bezier":O,"--scrollbar-color":P,"--scrollbar-color-hover":D,"--scrollbar-border-radius":U,"--scrollbar-width":te,"--scrollbar-height":K}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;if(!this.scrollable)return Je(t,"default");const r=()=>x("div",rr(this.$attrs,{class:`${e}-scrollbar`,style:this.cssVars,onMouseenter:this.handleMouseEnterWrapper,onMouseleave:this.handleMouseLeaveWrapper}),[this.container?Je(t,"default"):x("div",{ref:"containerRef",class:`${e}-scrollbar-container`,style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},x(Gt,{onResize:this.handleContentResize},{default:()=>x("div",{ref:"contentRef",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${e}-scrollbar-content`,this.contentClass]},t)})),x("div",{ref:"yRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--vertical`,style:[this.horizontalRailStyle]},x(Nt,{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?x("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),x("div",{ref:"xRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--horizontal`,style:[this.verticalRailStyle]},x(Nt,{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?x("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,left:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))]);return this.container?r():x(Gt,{onResize:this.handleContainerResize},{default:r})}});var ta=ea;const ra=x(jn);function oa(t,e){return x(Nt,{name:"fade-in-scale-up-transition"},{default:()=>t?x(Yt,{clsPrefix:e,class:`${e}-base-select-option__check`},{default:()=>ra}):null})}var Eo=se({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(t){const{valueRef:e,pendingTmNodeRef:r,multipleRef:o,valueSetRef:i,renderLabelRef:s,renderOptionRef:n,handleOptionClick:a,handleOptionMouseEnter:l}=Ze(Ar),d=nt(()=>{const{value:h}=r;return h?t.tmNode.key===h.key:!1});function u(h){const{tmNode:y}=t;y.disabled||a(h,y)}function f(h){const{tmNode:y}=t;y.disabled||l(h,y)}function p(h){const{tmNode:y}=t,{value:w}=d;y.disabled||w||l(h,y)}return{multiple:o,isGrouped:nt(()=>{const{tmNode:h}=t,{parent:y}=h;return y&&y.rawNode.type==="group"}),isPending:d,isSelected:nt(()=>{const{value:h}=e,{value:y}=o;if(h===null)return!1;const w=t.tmNode.rawNode.value;if(y){const{value:A}=i;return A.has(w)}else return h===w}),renderLabel:s,renderOption:n,handleMouseMove:p,handleMouseEnter:f,handleClick:u}},render(){const{clsPrefix:t,tmNode:{rawNode:e},isSelected:r,isPending:o,isGrouped:i,multiple:s,renderOption:n,renderLabel:a,handleClick:l,handleMouseEnter:d,handleMouseMove:u}=this,p=oa(s&&r,t),h=a?[a(e,r),p]:[Rt(e.label,e,r),p],y=x("div",{class:[`${t}-base-select-option`,e.class,{[`${t}-base-select-option--disabled`]:e.disabled,[`${t}-base-select-option--selected`]:r,[`${t}-base-select-option--grouped`]:i,[`${t}-base-select-option--pending`]:o}],style:e.style,onClick:l,onMouseenter:d,onMousemove:u},x("div",{class:`${t}-base-select-option__content`},h));return e.render?e.render({node:y,option:e,selected:r}):n?n({node:y,option:e,selected:r}):y}}),Lo=se({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:t,renderOptionRef:e}=Ze(Ar);return{renderLabel:t,renderOption:e}},render(){const{clsPrefix:t,renderLabel:e,renderOption:r,tmNode:{rawNode:o}}=this,i=e?e(o,!1):Rt(o.label,o,!1),s=x("div",{class:`${t}-base-select-group-header`},i);return o.render?o.render({node:s,option:o}):r?r({node:s,option:o,selected:!1}):s}});const{cubicBezierEaseIn:ko,cubicBezierEaseOut:Fo,transformDebounceScale:ia}=Wi;function Io({transformOrigin:t="inherit",duration:e=".2s",enterScale:r=".9",originalTransform:o="",originalTransition:i=""}={}){return[J("&.fade-in-scale-up-transition-leave-active",{transformOrigin:t,transition:`opacity ${e} ${ko}, transform ${e} ${ko} ${i&&","+i}`}),J("&.fade-in-scale-up-transition-enter-active",{transformOrigin:t,transition:`opacity ${e} ${Fo}, transform ${e} ${Fo} ${i&&","+i}`}),J("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${o} scale(${r})`}),J("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${o} scale(${ia})`})]}var na=X("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--border-radius);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 background-color: var(--color);
`,[ue("multiple",[X("base-select-option",`
 padding-right: 28px;
 `)]),X("scrollbar",`
 max-height: var(--height);
 `),X("virtual-list",`
 max-height: var(--height);
 `),X("base-select-option",`
 min-height: var(--option-height);
 font-size: var(--option-font-size);
 display: flex;
 align-items: center;
 `,[Q("content",`
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),X("base-select-group-header",`
 min-height: var(--option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),X("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),Q("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),Q("loading",`
 color: var(--loading-color);
 font-size: var(--loading-size);
 `),Q("action",`
 padding: 8px var(--option-padding-left);
 font-size: var(--option-font-size);
 transition: 
 color .3s var(--bezier);
 border-color .3s var(--bezier);
 border-top: 1px solid var(--action-divider-color);
 color: var(--action-text-color);
 `),X("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--option-padding);
 color: var(--group-header-text-color);
 `),X("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--option-padding);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 opacity .3s var(--bezier);
 box-sizing: border-box;
 color: var(--option-text-color);
 opacity: 1;
 `,[J("&:active",`
 color: var(--option-text-color-pressed);
 `),ue("grouped",`
 padding-left: calc(var(--option-padding-left) * 1.5);
 `),ue("pending",`
 background-color: var(--option-color-pending);
 `),ue("selected",`
 color: var(--option-text-color-active);
 background-color: var(--option-color-active);
 `),ue("disabled",`
 cursor: not-allowed;
 `,[at("selected",`
 color: var(--option-text-color-disabled);
 `),ue("selected",`
 opacity: var(--option-opacity-disabled);
 `)]),Q("check",`
 font-size: 16px;
 position: absolute;
 right: 8px;
 top: calc(50% - 7px);
 color: var(--option-check-color);
 transition: color .3s var(--bezier);
 `,[Io({enterScale:"0.5"})])])]),sa={height:"calc(var(--option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};const aa=t=>{const{borderRadius:e,popoverColor:r,textColor3:o,dividerColor:i,textColor2:s,primaryColorPressed:n,textColorDisabled:a,primaryColor:l,opacityDisabled:d,hoverColor:u,fontSizeSmall:f,fontSizeMedium:p,fontSizeLarge:h,fontSizeHuge:y,heightSmall:w,heightMedium:A,heightLarge:b,heightHuge:g}=t;return Object.assign(Object.assign({},sa),{optionFontSizeSmall:f,optionFontSizeMedium:p,optionFontSizeLarge:h,optionFontSizeHuge:y,optionHeightSmall:w,optionHeightMedium:A,optionHeightLarge:b,optionHeightHuge:g,borderRadius:e,color:r,groupHeaderTextColor:o,actionDividerColor:i,optionTextColor:s,optionTextColorPressed:n,optionTextColorDisabled:a,optionTextColorActive:l,optionOpacityDisabled:d,optionCheckColor:l,optionColorPending:u,optionColorActive:u,actionTextColor:s,loadingColor:l})},la=qt({name:"InternalSelectMenu",common:st,peers:{Scrollbar:Ro,Empty:Mo},self:aa});var Oo=la,ca=se({name:"InternalSelectMenu",props:Object.assign(Object.assign({},_e.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},width:[Number,String],autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onToggle:Function}),setup(t){const e=_e("InternalSelectMenu","InternalSelectMenu",na,Oo,t,fe(t,"clsPrefix")),r=B(null),o=B(null),i=B(null),s=N(()=>t.treeMate.getFlattenedNodes()),n=N(()=>ls(s.value)),a=B(null);function l(){const{treeMate:_}=t;$(t.autoPending?t.value===null?_.getFirstAvailableNode():t.multiple?_.getNode((t.value||[])[(t.value||[]).length-1])||_.getFirstAvailableNode():_.getNode(t.value)||_.getFirstAvailableNode():null)}l(),rt(()=>{_r(()=>{t.show&&(l(),xt(V))})});const d=N(()=>vr(e.value.self[Ae("optionHeight",t.size)])),u=N(()=>Gr(e.value.self[Ae("padding",t.size)])),f=N(()=>t.multiple&&Array.isArray(t.value)?new Set(t.value):new Set),p=N(()=>{const _=s.value;return _&&_.length===0}),h=N(()=>[{width:Ut(t.width)},I.value]);Ve(fe(t,"treeMate"),()=>{if(t.autoPending){const _=t.treeMate.getFirstAvailableNode();$(_)}else $(null)});function y(_){const{onToggle:M}=t;M&&M(_)}function w(_){const{onScroll:M}=t;M&&M(_)}function A(_){var M;(M=i.value)===null||M===void 0||M.sync(),w(_)}function b(){var _;(_=i.value)===null||_===void 0||_.sync()}function g(){const{value:_}=a;return _||null}function m(_,M){M.disabled||$(M,!1)}function v(_,M){M.disabled||y(M)}function C(_){var M;Tr(_,"action")||(M=t.onKeyup)===null||M===void 0||M.call(t,_)}function T(_){var M;Tr(_,"action")||(M=t.onKeydown)===null||M===void 0||M.call(t,_)}function S(_){var M;(M=t.onMousedown)===null||M===void 0||M.call(t,_),!t.focusable&&_.preventDefault()}function R(){const{value:_}=a;_&&$(_.getNext({loop:!0}),!0)}function L(){const{value:_}=a;_&&$(_.getPrev({loop:!0}),!0)}function $(_,M=!1){a.value=_,M&&V()}function V(){var _,M;const k=a.value;if(!k)return;const Y=n.value(k.key);Y!==null&&(t.virtualScroll?(_=o.value)===null||_===void 0||_.scrollTo({index:Y}):(M=i.value)===null||M===void 0||M.scrollTo({index:Y,elSize:d.value}))}function G(_){var M,k;((M=r.value)===null||M===void 0?void 0:M.contains(_.target))&&((k=t.onFocus)===null||k===void 0||k.call(t,_))}function z(_){var M,k;((M=r.value)===null||M===void 0?void 0:M.contains(_.relatedTarget))||(k=t.onBlur)===null||k===void 0||k.call(t,_)}dt(Ar,{handleOptionMouseEnter:m,handleOptionClick:v,valueSetRef:f,multipleRef:fe(t,"multiple"),valueRef:fe(t,"value"),renderLabelRef:fe(t,"renderLabel"),renderOptionRef:fe(t,"renderOption"),pendingTmNodeRef:a}),dt(fo,r),rt(()=>{const{value:_}=i;_&&_.sync()});const I=N(()=>{const{size:_}=t,{common:{cubicBezierEaseInOut:M},self:{height:k,borderRadius:Y,color:ie,groupHeaderTextColor:oe,actionDividerColor:de,optionTextColorPressed:Pe,optionTextColor:ce,optionTextColorDisabled:ne,optionTextColorActive:ge,optionOpacityDisabled:Fe,optionCheckColor:he,actionTextColor:Te,optionColorPending:Me,optionColorActive:Ie,loadingColor:Ee,loadingSize:ve,[Ae("optionFontSize",_)]:Le,[Ae("optionHeight",_)]:me,[Ae("optionPadding",_)]:Ce}}=e.value;return{"--height":k,"--action-divider-color":de,"--action-text-color":Te,"--bezier":M,"--border-radius":Y,"--color":ie,"--option-font-size":Le,"--group-header-text-color":oe,"--option-check-color":he,"--option-color-pending":Me,"--option-color-active":Ie,"--option-height":me,"--option-opacity-disabled":Fe,"--option-text-color":ce,"--option-text-color-active":ge,"--option-text-color-disabled":ne,"--option-text-color-pressed":Pe,"--option-padding":Ce,"--option-padding-left":Gr(Ce,"left"),"--loading-color":Ee,"--loading-size":ve}});return Object.assign({mergedTheme:e,virtualListRef:o,scrollbarRef:i,style:h,itemSize:d,padding:u,flattenedNodes:s,empty:p,virtualListContainer(){const{value:_}=o;return _==null?void 0:_.listElRef},virtualListContent(){const{value:_}=o;return _==null?void 0:_.itemsElRef},doScroll:w,handleFocusin:G,handleFocusout:z,handleKeyUp:C,handleKeyDown:T,handleMouseDown:S,handleVirtualListResize:b,handleVirtualListScroll:A},{selfRef:r,next:R,prev:L,getPendingTmNode:g})},render(){const{$slots:t,virtualScroll:e,clsPrefix:r,mergedTheme:o}=this;return x("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${r}-base-select-menu`,this.multiple&&`${r}-base-select-menu--multiple`],style:this.style,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?x("div",{class:`${r}-base-select-menu__loading`},x(Hi,{clsPrefix:r,strokeWidth:20})):this.empty?x("div",{class:`${r}-base-select-menu__empty`},Je(t,"empty",void 0,()=>[x(Ks,{theme:o.peers.Empty,themeOverrides:o.peerOverrides.Empty})])):x(ta,{ref:"scrollbarRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,scrollable:this.scrollable,container:e?this.virtualListContainer:void 0,content:e?this.virtualListContent:void 0,onScroll:e?void 0:this.doScroll},{default:()=>e?x(Ns,{ref:"virtualListRef",class:`${r}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:i})=>i.isGroup?x(Lo,{key:i.key,clsPrefix:r,tmNode:i}):i.ignored?null:x(Eo,{clsPrefix:r,key:i.key,tmNode:i})}):x("div",{class:`${r}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(i=>i.isGroup?x(Lo,{key:i.key,clsPrefix:r,tmNode:i}):x(Eo,{clsPrefix:r,key:i.key,tmNode:i})))}),t.action&&x("div",{class:`${r}-base-select-menu__action`,"data-action":!0},Je(t,"action")),t.action&&x(Zn,{onFocus:this.onTabOut}))}}),da={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};const ua=t=>{const{boxShadow2:e,popoverColor:r,textColor2:o,borderRadius:i,fontSize:s,dividerColor:n}=t;return Object.assign(Object.assign({},da),{fontSize:s,borderRadius:i,color:r,dividerColor:n,textColor:o,boxShadow:e})},ha={name:"Popover",common:st,self:ua};var Br=ha;const $r={top:"bottom",bottom:"top",left:"right",right:"left"};var fa=J([X("popover",`
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 transform-origin: inherit;
 position: relative;
 font-size: var(--font-size);
 color: var(--text-color);
 box-shadow: var(--box-shadow);
 `,[J("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),J("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),J("&.popover-transition-enter-active",`
 transition:
 opacity .15s var(--bezier-ease-out),
 transform .15s var(--bezier-ease-out);
 `),J("&.popover-transition-leave-active",`
 transition:
 opacity .15s var(--bezier-ease-in),
 transform .15s var(--bezier-ease-in);
 `),at("raw",`
 background-color: var(--color);
 border-radius: var(--border-radius);
 var(--padding);
 `,[at("show-header","padding: var(--padding);")]),Q("header",`
 padding: var(--padding);
 border-bottom: 1px solid var(--divider-color);
 transition: border-color .3s var(--bezier);
 `),Q("content",`
 padding: var(--padding);
 `),X("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[X("popover-arrow",`
 transition: background-color .3s var(--bezier);
 position: absolute;
 display: block;
 width: calc(var(--arrow-height) * 1.414);
 height: calc(var(--arrow-height) * 1.414);
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--color);
 pointer-events: all;
 `)])]),qe("top-start",`
 top: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),qe("top",`
 top: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),qe("top-end",`
 top: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),qe("bottom-start",`
 bottom: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),qe("bottom",`
 bottom: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),qe("bottom-end",`
 bottom: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),qe("left-start",`
 left: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),qe("left",`
 left: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),qe("left-end",`
 left: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `),qe("right-start",`
 right: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),qe("right",`
 right: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),qe("right-end",`
 right: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `)]);function qe(t,e){const r=t.split("-")[0],o=["top","bottom"].includes(r)?"height: var(--space-arrow);":"width: var(--space-arrow);";return J(`[v-placement="${t}"] >`,[X("popover",`
 margin-${$r[r]}: var(--space);
 `,[ue("show-arrow",`
 margin-${$r[r]}: var(--space-arrow);
 `),ue("overlap",`
 margin: 0;
 `),ji("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${r}: 100%;
 ${$r[r]}: auto;
 ${o}
 `,[X("popover-arrow",e)])])])}const Do=Object.assign(Object.assign({},_e.props),{to:ft.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowStyle:[String,Object],displayDirective:String,x:Number,y:Number,filp:Boolean,overlap:Boolean,placement:String,width:[Number,String],animated:Boolean,onClickoutside:Function,minWidth:Number,maxWidth:Number}),pa=({arrowStyle:t,clsPrefix:e})=>x("div",{key:"__popover-arrow__",class:`${e}-popover-arrow-wrapper`},x("div",{class:`${e}-popover-arrow`,style:t}));var ga=se({name:"PopoverBody",inheritAttrs:!1,props:Do,setup(t,{slots:e,attrs:r}){const{namespaceRef:o,mergedClsPrefixRef:i}=wt(t),s=_e("Popover","Popover",fa,Br,t,i),n=B(null),a=Ze("NPopover"),l=B(null),d=B(t.show),u=N(()=>{const{trigger:v,onClickoutside:C}=t,T=[],{positionManuallyRef:{value:S}}=a;return S||(v==="click"&&!C&&T.push([nr,b]),v==="hover"&&T.push([As,A])),C&&T.push([nr,b]),t.displayDirective==="show"&&T.push([io,t.show]),T}),f=N(()=>[{width:t.width==="trigger"?"":Ut(t.width),maxWidth:Ut(t.maxWidth),minWidth:Ut(t.minWidth)},p.value]),p=N(()=>{const{common:{cubicBezierEaseInOut:v,cubicBezierEaseIn:C,cubicBezierEaseOut:T},self:{space:S,spaceArrow:R,padding:L,fontSize:$,textColor:V,dividerColor:G,color:z,boxShadow:I,borderRadius:F,arrowHeight:_,arrowOffset:M,arrowOffsetVertical:k}}=s.value;return{"--box-shadow":I,"--bezier":v,"--bezier-ease-in":C,"--bezier-ease-out":T,"--font-size":$,"--text-color":V,"--color":z,"--divider-color":G,"--border-radius":F,"--arrow-height":_,"--arrow-offset":M,"--arrow-offset-vertical":k,"--padding":L,"--space":S,"--space-arrow":R}});a.setBodyInstance({syncPosition:h}),St(()=>{a.setBodyInstance(null)}),Ve(fe(t,"show"),v=>{t.animated||(v?d.value=!0:d.value=!1)});function h(){var v;(v=n.value)===null||v===void 0||v.syncPosition()}function y(v){t.trigger==="hover"&&a.handleMouseEnter(v)}function w(v){t.trigger==="hover"&&a.handleMouseLeave(v)}function A(v){t.trigger==="hover"&&!g().contains(v.target)&&a.handleMouseMoveOutside(v)}function b(v){(t.trigger==="click"&&!g().contains(v.target)||t.onClickoutside)&&a.handleClickOutside(v)}function g(){return a.getTriggerElement()}dt(ho,l),dt(uo,null),dt(co,null);function m(){let v;const{internalRenderBodyRef:{value:C}}=a,{value:T}=i;if(C)v=C([`${T}-popover`,t.overlap&&`${T}-popover--overlap`],l,f.value,y,w);else{const{value:S}=a.extraClassRef;v=x("div",rr({class:[`${T}-popover`,S.map(R=>`${T}-${R}`),{[`${T}-popover--overlap`]:t.overlap,[`${T}-popover--show-arrow`]:t.showArrow,[`${T}-popover--show-header`]:!!e.header,[`${T}-popover--raw`]:t.raw}],ref:l,style:f.value,onMouseenter:y,onMouseleave:w},r),[e.header?x(Vt,null,x("div",{class:`${T}-popover__header`},e.header()),x("div",{class:`${T}-popover__content`},e)):Je(e,"default"),t.showArrow?pa({arrowStyle:t.arrowStyle,clsPrefix:T}):null])}return t.displayDirective==="show"||t.show?tr(v,u.value):null}return{namespace:o,isMounted:a.isMountedRef,zIndex:a.zIndexRef,followerRef:n,adjustedTo:ft(t),followerEnabled:d,renderContentNode:m}},render(){return x(Ao,{zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,placement:this.placement,containerClass:this.namespace,ref:"followerRef",overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===ft.tdkey},{default:()=>this.animated?x(Nt,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{this.followerEnabled=!1}},{default:this.renderContentNode}):this.renderContentNode()})}});const va=Object.keys(Do),ma={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function ba(t,e,r){ma[e].forEach(o=>{t.props?t.props=Object.assign({},t.props):t.props={};const i=t.props[o],s=r[o];i?t.props[o]=(...n)=>{i(...n),s(...n)}:t.props[o]=s})}const wa=ct("").type,zo={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowStyle:[String,Object],filp:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,internalExtraClass:{type:Array,default:()=>[]},onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],zIndex:Number,to:ft.propTo,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},ya=Object.assign(Object.assign(Object.assign({},_e.props),zo),{internalRenderBody:Function});var Ur=se({name:"Popover",inheritAttrs:!1,props:ya,__popover__:!0,setup(t){const e=gr(),r=B(null),o=N(()=>t.show),i=B(t.defaultShow),s=mr(o,i),n=nt(()=>t.disabled?!1:s.value),a=()=>{if(t.disabled)return!0;const{getDisabled:z}=t;return!!(z==null?void 0:z())},l=()=>a()?!1:s.value,d=Kr(t,["arrow","showArrow"]),u=N(()=>t.overlap?!1:d.value);let f=null;const p=B(null),h=B(null),y=nt(()=>t.x!==void 0&&t.y!==void 0);function w(z){const{"onUpdate:show":I,onUpdateShow:F,onShow:_,onHide:M}=t;i.value=z,I&&Re(I,z),F&&Re(F,z),z&&_&&Re(_,!0),z&&M&&Re(M,!1)}function A(){f&&f.syncPosition()}function b(){const{value:z}=p;z&&(window.clearTimeout(z),p.value=null)}function g(){const{value:z}=h;z&&(window.clearTimeout(z),h.value=null)}function m(){const z=a();if(t.trigger==="focus"&&!z){if(l())return;w(!0)}}function v(){const z=a();if(t.trigger==="focus"&&!z){if(!l())return;w(!1)}}function C(){const z=a();if(t.trigger==="hover"&&!z){if(g(),p.value!==null||l())return;const I=()=>{w(!0),p.value=null},{delay:F}=t;F===0?I():p.value=window.setTimeout(I,F)}}function T(){const z=a();if(t.trigger==="hover"&&!z){if(b(),h.value!==null||!l())return;const I=()=>{w(!1),h.value=null},{duration:F}=t;F===0?I():h.value=window.setTimeout(I,F)}}function S(){T()}function R(z){var I;!l()||(t.trigger==="click"&&(b(),g(),w(!1)),(I=t.onClickoutside)===null||I===void 0||I.call(t,z))}function L(){if(t.trigger==="click"&&!a()){b(),g();const z=!l();w(z)}}function $(z){i.value=z}function V(){var z;return(z=r.value)===null||z===void 0?void 0:z.targetRef}function G(z){f=z}return dt("NPopover",{getTriggerElement:V,handleMouseEnter:C,handleMouseLeave:T,handleClickOutside:R,handleMouseMoveOutside:S,setBodyInstance:G,positionManuallyRef:y,isMountedRef:e,zIndexRef:fe(t,"zIndex"),extraClassRef:fe(t,"internalExtraClass"),internalRenderBodyRef:fe(t,"internalRenderBody")}),{binderInstRef:r,positionManually:y,mergedShowConsideringDisabledProp:n,uncontrolledShow:i,mergedShowArrow:u,getMergedShow:l,setShow:$,handleClick:L,handleMouseEnter:C,handleMouseLeave:T,handleFocus:m,handleBlur:v,syncPosition:A}},render(){var t;const{positionManually:e,$slots:r}=this;let o,i=!1;if(!e&&(r.activator?o=lo(r,"activator"):o=lo(r,"trigger"),o)){o=bn(o),o=o.type===wa?x("span",[o]):o;const s={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if((t=o.type)===null||t===void 0?void 0:t.__popover__)i=!0,o.props||(o.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),o.props.internalSyncTargetWithParent=!0,o.props.internalInheritedEventHandlers?o.props.internalInheritedEventHandlers=[s,...o.props.internalInheritedEventHandlers]:o.props.internalInheritedEventHandlers=[s];else{const{internalInheritedEventHandlers:n}=this,a=[s,...n],l={onBlur:d=>{a.forEach(u=>{u.onBlur(d)})},onFocus:d=>{a.forEach(u=>{u.onBlur(d)})},onClick:d=>{a.forEach(u=>{u.onClick(d)})},onMouseenter:d=>{a.forEach(u=>{u.onMouseenter(d)})},onMouseleave:d=>{a.forEach(u=>{u.onMouseleave(d)})}};ba(o,n?"nested":e?"manual":this.trigger,l)}}return x(Po,{ref:"binderInstRef",syncTarget:!i,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const s=this.getMergedShow();return[e?null:x(_o,null,{default:()=>o}),x(ga,ao(this.$props,va,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:s})),r)]}})}}),xa={closeSizeSmall:"14px",closeSizeMedium:"14px",closeSizeLarge:"14px",padding:"0 7px",closeMargin:"0 0 0 3px",closeMarginRtl:"0 3px 0 0"};const Pa=t=>{const{textColor2:e,primaryColorHover:r,primaryColorPressed:o,primaryColor:i,infoColor:s,successColor:n,warningColor:a,errorColor:l,baseColor:d,borderColor:u,opacityDisabled:f,tagColor:p,closeColor:h,closeColorHover:y,closeColorPressed:w,borderRadiusSmall:A,fontSizeTiny:b,fontSizeSmall:g,fontSizeMedium:m,heightTiny:v,heightSmall:C,heightMedium:T}=t;return Object.assign(Object.assign({},xa),{heightSmall:v,heightMedium:C,heightLarge:T,borderRadius:A,opacityDisabled:f,fontSizeSmall:b,fontSizeMedium:g,fontSizeLarge:m,textColorCheckable:e,textColorHoverCheckable:r,textColorPressedCheckable:o,textColorChecked:d,colorCheckable:"#0000",colorHoverCheckable:"#0000",colorPressedCheckable:"#0000",colorChecked:i,colorCheckedHover:r,colorCheckedPressed:o,border:`1px solid ${u}`,textColor:e,color:p,closeColor:h,closeColorHover:y,closeColorPressed:w,borderPrimary:`1px solid ${re(i,{alpha:.3})}`,textColorPrimary:i,colorPrimary:re(i,{alpha:.1}),closeColorPrimary:re(i,{alpha:.75}),closeColorHoverPrimary:re(i,{alpha:.6}),closeColorPressedPrimary:re(i,{alpha:.9}),borderInfo:`1px solid ${re(s,{alpha:.3})}`,textColorInfo:s,colorInfo:re(s,{alpha:.1}),closeColorInfo:re(s,{alpha:.75}),closeColorHoverInfo:re(s,{alpha:.6}),closeColorPressedInfo:re(s,{alpha:.9}),borderSuccess:`1px solid ${re(n,{alpha:.3})}`,textColorSuccess:n,colorSuccess:re(n,{alpha:.1}),closeColorSuccess:re(n,{alpha:.75}),closeColorHoverSuccess:re(n,{alpha:.6}),closeColorPressedSuccess:re(n,{alpha:.9}),borderWarning:`1px solid ${re(a,{alpha:.35})}`,textColorWarning:a,colorWarning:re(a,{alpha:.12}),closeColorWarning:re(a,{alpha:.75}),closeColorHoverWarning:re(a,{alpha:.6}),closeColorPressedWarning:re(a,{alpha:.9}),borderError:`1px solid ${re(l,{alpha:.23})}`,textColorError:l,colorError:re(l,{alpha:.08}),closeColorError:re(l,{alpha:.65}),closeColorHoverError:re(l,{alpha:.5}),closeColorPressedError:re(l,{alpha:.8})})},_a={name:"Tag",common:st,self:Pa};var Ta=_a,Ca={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},Aa=X("tag",`
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--padding);
 border-radius: var(--border-radius);
 color: var(--text-color);
 background-color: var(--color);
 transition: 
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 opacity .3s var(--bezier);
 line-height: 1;
 height: var(--height);
 font-size: var(--font-size);
`,[Q("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--border);
 transition: border-color .3s var(--bezier);
 `),Q("avatar",`
 display: flex;
 margin-right: 6px;
 `),Q("close",`
 font-size: var(--close-size);
 margin: var(--close-margin);
 transition: color .3s var(--bezier);
 cursor: pointer;
 `),ue("round",`
 padding: 0 calc(var(--height) / 2);
 border-radius: calc(var(--height) / 2);
 `,[Q("avatar",`
 margin-left: calc((var(--height) - 8px) / -2);
 `)]),ue("disabled",`
 cursor: not-allowed !important;
 opacity: var(--opacity-disabled);
 `),ue("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--text-color-checkable);
 background-color: var(--color-checkable);
 `,[at("disabled",[J("&:hover",{backgroundColor:"var(--color-hover-checkable)"},[at("checked",{color:"var(--text-color-hover-checkable)"})]),J("&:active",{backgroundColor:"var(--color-pressed-checkable)"},[at("checked",{color:"var(--text-color-pressed-checkable)"})])]),ue("checked",{color:"var(--text-color-checked)",backgroundColor:"var(--color-checked)"},[at("disabled",[J("&:hover",{backgroundColor:"var(--color-checked-hover)"}),J("&:active",{backgroundColor:"var(--color-checked-pressed)"})])])])]);const Sa=Object.assign(Object.assign(Object.assign({},_e.props),Ca),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalStopClickPropagation:Boolean,onCheckedChange:{type:Function,validator:()=>!0,default:void 0}}),Ma=Symbol("tag");var Vr=se({name:"Tag",props:Sa,setup(t){const e=B(null),{mergedBorderedRef:r,mergedClsPrefixRef:o,NConfigProvider:i}=wt(t),s=_e("Tag","Tag",Aa,Ta,t,o);dt(Ma,{roundRef:fe(t,"round")});function n(u){if(!t.disabled&&t.checkable){const{checked:f,onCheckedChange:p,onUpdateChecked:h,"onUpdate:checked":y}=t;h&&h(!f),y&&y(!f),p&&p(!f)}}function a(u){if(t.internalStopClickPropagation&&u.stopPropagation(),!t.disabled){const{onClose:f}=t;f&&Re(f,u)}}const l={setTextContent(u){const{value:f}=e;f&&(f.textContent=u)}},d=Xi("Tag",i==null?void 0:i.mergedRtlRef,o);return Object.assign(Object.assign({},l),{rtlEnabled:d,mergedClsPrefix:o,contentRef:e,mergedBordered:r,handleClick:n,handleCloseClick:a,cssVars:N(()=>{const{type:u,size:f,color:{color:p,textColor:h}={}}=t,{common:{cubicBezierEaseInOut:y},self:{padding:w,closeMargin:A,closeMarginRtl:b,borderRadius:g,opacityDisabled:m,textColorCheckable:v,textColorHoverCheckable:C,textColorPressedCheckable:T,textColorChecked:S,colorCheckable:R,colorHoverCheckable:L,colorPressedCheckable:$,colorChecked:V,colorCheckedHover:G,colorCheckedPressed:z,[Ae("closeSize",f)]:I,[Ae("fontSize",f)]:F,[Ae("height",f)]:_,[Ae("color",u)]:M,[Ae("textColor",u)]:k,[Ae("border",u)]:Y,[Ae("closeColor",u)]:ie,[Ae("closeColorHover",u)]:oe,[Ae("closeColorPressed",u)]:de}}=s.value;return{"--avatar-size-override":`calc(${_} - 8px)`,"--bezier":y,"--border-radius":g,"--border":Y,"--close-color":ie,"--close-color-hover":oe,"--close-color-pressed":de,"--close-margin":A,"--close-margin-rtl":b,"--close-size":I,"--color":p||M,"--color-checkable":R,"--color-checked":V,"--color-checked-hover":G,"--color-checked-pressed":z,"--color-hover-checkable":L,"--color-pressed-checkable":$,"--font-size":F,"--height":_,"--opacity-disabled":m,"--padding":w,"--text-color":h||k,"--text-color-checkable":v,"--text-color-checked":S,"--text-color-hover-checkable":C,"--text-color-pressed-checkable":T}})})},render(){const{mergedClsPrefix:t,rtlEnabled:e,color:{borderColor:r}={},$slots:o}=this;return x("div",{class:[`${t}-tag`,{[`${t}-tag--rtl`]:e,[`${t}-tag--disabled`]:this.disabled,[`${t}-tag--checkable`]:this.checkable,[`${t}-tag--checked`]:this.checkable&&this.checked,[`${t}-tag--round`]:this.round}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},o.avatar&&x("div",{class:`${t}-tag__avatar`},{default:o.avatar}),x("span",{class:`${t}-tag__content`,ref:"contentRef"},this.$slots),!this.checkable&&this.closable?x(Kn,{clsPrefix:t,class:`${t}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick}):null,!this.checkable&&this.mergedBordered?x("div",{class:`${t}-tag__border`,style:{borderColor:r}}):null)}}),Ra={paddingSingle:"0 26px 0 14px",clearSize:"16px",arrowSize:"16px"};const Ea=t=>{const{borderRadius:e,textColor2:r,textColorDisabled:o,inputColor:i,inputColorDisabled:s,primaryColor:n,primaryColorHover:a,warningColor:l,warningColorHover:d,errorColor:u,errorColorHover:f,borderColor:p,iconColor:h,iconColorDisabled:y,clearColor:w,clearColorHover:A,clearColorPressed:b,placeholderColor:g,placeholderColorDisabled:m,fontSizeTiny:v,fontSizeSmall:C,fontSizeMedium:T,fontSizeLarge:S,heightTiny:R,heightSmall:L,heightMedium:$,heightLarge:V}=t;return Object.assign(Object.assign({},Ra),{fontSizeTiny:v,fontSizeSmall:C,fontSizeMedium:T,fontSizeLarge:S,heightTiny:R,heightSmall:L,heightMedium:$,heightLarge:V,borderRadius:e,textColor:r,textColorDisabled:o,placeholderColor:g,placeholderColorDisabled:m,color:i,colorDisabled:s,colorActive:i,border:`1px solid ${p}`,borderHover:`1px solid ${a}`,borderActive:`1px solid ${n}`,borderFocus:`1px solid ${a}`,boxShadowHover:null,boxShadowActive:`0 0 0 2px ${re(n,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${re(n,{alpha:.2})}`,caretColor:n,arrowColor:h,arrowColorDisabled:y,loadingColor:n,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${d}`,borderActiveWarning:`1px solid ${l}`,borderFocusWarning:`1px solid ${d}`,boxShadowHoverWarning:null,boxShadowActiveWarning:`0 0 0 2px ${re(l,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${re(l,{alpha:.2})}`,colorActiveWarning:i,caretColorWarning:l,borderError:`1px solid ${u}`,borderHoverError:`1px solid ${f}`,borderActiveError:`1px solid ${u}`,borderFocusError:`1px solid ${f}`,boxShadowHoverError:null,boxShadowActiveError:`0 0 0 2px ${re(u,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${re(u,{alpha:.2})}`,colorActiveError:i,caretColorError:u,clearColor:w,clearColorHover:A,clearColorPressed:b})},La=qt({name:"InternalSelection",common:st,peers:{Popover:Br},self:Ea});var Bo=La,ka=J([X("base-selection",`
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--border-radius);
 min-height: var(--height);
 line-height: 1.5;
 font-size: var(--font-size);
 `,[X("base-loading",`
 color: var(--loading-color);
 `),X("base-selection-tags",{minHeight:"var(--height)"}),Q("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `),Q("state-border",`
 z-index: 1;
 border-color: #0000;
 `),X("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[Q("arrow",`
 font-size: var(--arrow-size);
 color: var(--arrow-color);
 transition: color .3s var(--bezier);
 `)]),X("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 overflow: hidden;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--padding-single);
 transition: color .3s var(--bezier);
 `),X("base-selection-placeholder",`
 color: var(--placeholder-color);
 `),X("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: 3px 26px 0 14px;
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--color);
 border-radius: inherit;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 `),X("base-selection-label",`
 height: var(--height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 border-radius: inherit;
 background-color: var(--color);
 align-items: center;
 `,[X("base-selection-input",`
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--padding-single);
 background-color: #0000;
 color: var(--text-color);
 transition: color .3s var(--bezier);
 caret-color: var(--caret-color);
 `,[Q("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),Q("render-label",`
 color: var(--text-color);
 `)]),at("disabled",[J("&:hover",[Q("state-border",`
 box-shadow: var(--box-shadow-hover);
 border: var(--border-hover);
 `)]),ue("focus",[Q("state-border",`
 box-shadow: var(--box-shadow-focus);
 border: var(--border-focus);
 `)]),ue("active",[Q("state-border",`
 box-shadow: var(--box-shadow-active);
 border: var(--border-active);
 `),X("base-selection-label",{backgroundColor:"var(--color-active)"}),X("base-selection-tags",{backgroundColor:"var(--color-active)"})])]),ue("disabled",{cursor:"not-allowed"},[Q("arrow",`
 color: var(--arrow-color-disabled);
 `),X("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `,[X("base-selection-input",`
 cursor: not-allowed;
 color: var(--text-color-disabled);
 `),Q("render-label",`
 color: var(--text-color-disabled);
 `)]),X("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `),X("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--placeholder-color-disabled);
 `)]),X("base-selection-input-tag",`
 height: calc(var(--height) - 6px);
 line-height: calc(var(--height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[Q("input",`
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--text-color);
 caret-color: var(--caret-color);
 `),Q("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 opacity: 0;
 `)])]),X("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 `),X("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[J("&:last-child",{paddingRight:0}),X("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[Q("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 `)])]),["warning","error"].map(t=>Yi(t,X("base-selection",[Q("state-border",{border:`var(--border-${t})`}),at("disabled",[J("&:hover",[Q("state-border",`
 box-shadow: var(--box-shadow-hover-${t});
 border: var(--border-hover-${t});
 `)]),ue("active",[Q("state-border",`
 box-shadow: var(--box-shadow-active-${t});
 border: var(--border-active-${t});
 `),X("base-selection-label",{backgroundColor:`var(--color-active-${t})`}),X("base-selection-tags",{backgroundColor:`var(--box-shadow-active-${t})`})]),ue("focus",[Q("state-border",`
 box-shadow: var(--box-shadow-focus-${t});
 border: var(--border-focus-${t});
 `)])])])))]),Fa=se({name:"InternalSelection",props:Object.assign(Object.assign({},_e.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:null},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeyup:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,renderLabel:Function}),setup(t){const e=B(null),r=B(null),o=B(null),i=B(null),s=B(null),n=B(null),a=B(null),l=B(null),d=B(null),u=B(null),f=B(!1),p=B(!1),h=B(!1),y=_e("InternalSelection","InternalSelection",ka,Bo,t,fe(t,"clsPrefix")),w=N(()=>t.clearable&&!t.disabled&&(h.value||t.active)),A=N(()=>t.selectedOption?t.renderTag?t.renderTag({option:t.selectedOption,handleClose:()=>{}}):t.renderLabel?t.renderLabel(t.selectedOption,!0):Rt(t.selectedOption.label,t.selectedOption,!0):t.placeholder),b=N(()=>{const E=t.selectedOption;if(!!E)return E.label}),g=N(()=>t.multiple?!!(Array.isArray(t.selectedOptions)&&t.selectedOptions.length):t.selectedOption!==null);function m(){var E;const{value:H}=e;if(H){const{value:be}=r;be&&(be.style.width=`${H.offsetWidth}px`,t.maxTagCount!=="responsive"&&((E=d.value)===null||E===void 0||E.sync()))}}function v(){const{value:E}=u;E&&(E.style.display="none")}function C(){const{value:E}=u;E&&(E.style.display="inline-block")}Ve(fe(t,"active"),E=>{E||v()}),Ve(fe(t,"pattern"),()=>{t.multiple&&xt(m)});function T(E){const{onFocus:H}=t;H&&H(E)}function S(E){const{onBlur:H}=t;H&&H(E)}function R(E){const{onDeleteOption:H}=t;H&&H(E)}function L(E){const{onClear:H}=t;H&&H(E)}function $(E){const{onPatternInput:H}=t;H&&H(E)}function V(E){var H;(!E.relatedTarget||!((H=o.value)===null||H===void 0?void 0:H.contains(E.relatedTarget)))&&T(E)}function G(E){var H;((H=o.value)===null||H===void 0?void 0:H.contains(E.relatedTarget))||S(E)}function z(E){L(E)}function I(){h.value=!0}function F(){h.value=!1}function _(E){!t.active||!t.filterable||E.target!==r.value&&E.preventDefault()}function M(E){R(E)}function k(E){if(E.code==="Backspace"&&!t.pattern.length){const{selectedOptions:H}=t;(H==null?void 0:H.length)&&M(H[H.length-1])}}const Y=B(!1);let ie=null;function oe(E){const{value:H}=e;if(H){const be=E.target.value;H.textContent=be,m()}Y.value?ie=E:$(E)}function de(){Y.value=!0}function Pe(){Y.value=!1,$(ie),ie=null}function ce(){p.value=!0}function ne(E){p.value=!1}function ge(){if(t.filterable){p.value=!1;const{value:E}=n;E&&E.focus()}else if(t.multiple){const{value:E}=i;E==null||E.focus()}else{const{value:E}=s;E==null||E.focus()}}function Fe(){const{value:E}=r;E&&(C(),E.focus())}function he(){const{value:E}=r;E&&E.blur()}function Te(E){const{value:H}=a;H&&H.setTextContent(`+${E}`)}function Me(){const{value:E}=l;return E}function Ie(){return r.value}let Ee=null;function ve(){Ee!==null&&window.clearTimeout(Ee)}function Le(){t.disabled||t.active||(ve(),Ee=window.setTimeout(()=>{f.value=!0},100))}function me(){ve()}function Ce(E){E||(ve(),f.value=!1)}return rt(()=>{_r(()=>{const E=n.value;!E||(E.tabIndex=t.disabled||p.value?-1:0)})}),{mergedTheme:y,mergedClearable:w,patternInputFocused:p,filterablePlaceholder:A,label:b,selected:g,showTagsPanel:f,isCompositing:Y,counterRef:a,counterWrapperRef:l,patternInputMirrorRef:e,patternInputRef:r,selfRef:o,multipleElRef:i,singleElRef:s,patternInputWrapperRef:n,overflowRef:d,inputTagElRef:u,handleMouseDown:_,handleFocusin:V,handleClear:z,handleMouseEnter:I,handleMouseLeave:F,handleDeleteOption:M,handlePatternKeyDown:k,handlePatternInputInput:oe,handlePatternInputBlur:ne,handlePatternInputFocus:ce,handleMouseEnterCounter:Le,handleMouseLeaveCounter:me,handleFocusout:G,handleCompositionEnd:Pe,handleCompositionStart:de,onPopoverUpdateShow:Ce,focus:ge,focusInput:Fe,blurInput:he,updateCounter:Te,getCounter:Me,getTail:Ie,renderLabel:t.renderLabel,cssVars:N(()=>{const{size:E}=t,{common:{cubicBezierEaseInOut:H},self:{borderRadius:be,color:Be,placeholderColor:He,textColor:tt,paddingSingle:O,caretColor:U,colorDisabled:K,textColorDisabled:te,placeholderColorDisabled:P,colorActive:D,boxShadowFocus:j,boxShadowActive:W,boxShadowHover:Z,border:ae,borderFocus:it,borderHover:Xt,borderActive:ci,arrowColor:di,arrowColorDisabled:ui,loadingColor:hi,colorActiveWarning:fi,boxShadowFocusWarning:pi,boxShadowActiveWarning:gi,boxShadowHoverWarning:vi,borderWarning:mi,borderFocusWarning:bi,borderHoverWarning:wi,borderActiveWarning:yi,colorActiveError:xi,boxShadowFocusError:Pi,boxShadowActiveError:_i,boxShadowHoverError:Ti,borderError:Ci,borderFocusError:Ai,borderHoverError:Si,borderActiveError:Mi,clearColor:Ri,clearColorHover:Ei,clearColorPressed:Li,clearSize:ki,arrowSize:Fi,[Ae("height",E)]:Ii,[Ae("fontSize",E)]:Oi}}=y.value;return{"--bezier":H,"--border":ae,"--border-active":ci,"--border-focus":it,"--border-hover":Xt,"--border-radius":be,"--box-shadow-active":W,"--box-shadow-focus":j,"--box-shadow-hover":Z,"--caret-color":U,"--color":Be,"--color-active":D,"--color-disabled":K,"--font-size":Oi,"--height":Ii,"--padding-single":O,"--placeholder-color":He,"--placeholder-color-disabled":P,"--text-color":tt,"--text-color-disabled":te,"--arrow-color":di,"--arrow-color-disabled":ui,"--loading-color":hi,"--color-active-warning":fi,"--box-shadow-focus-warning":pi,"--box-shadow-active-warning":gi,"--box-shadow-hover-warning":vi,"--border-warning":mi,"--border-focus-warning":bi,"--border-hover-warning":wi,"--border-active-warning":yi,"--color-active-error":xi,"--box-shadow-focus-error":Pi,"--box-shadow-active-error":_i,"--box-shadow-hover-error":Ti,"--border-error":Ci,"--border-focus-error":Ai,"--border-hover-error":Si,"--border-active-error":Mi,"--clear-size":ki,"--clear-color":Ri,"--clear-color-hover":Ei,"--clear-color-pressed":Li,"--arrow-size":Fi}})}},render(){const{multiple:t,size:e,disabled:r,filterable:o,maxTagCount:i,bordered:s,clsPrefix:n,renderTag:a,renderLabel:l}=this,d=i==="responsive",u=typeof i=="number",f=d||u,p=x(Gi,{clsPrefix:n,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear});let h;if(t){const y=S=>x("div",{class:`${n}-base-selection-tag-wrapper`,key:S.value},a?a({option:S,handleClose:()=>this.handleDeleteOption(S)}):x(Vr,{size:e,closable:!S.disabled,disabled:r,internalStopClickPropagation:!0,onClose:()=>this.handleDeleteOption(S)},{default:()=>l?l(S,!0):Rt(S.label,S,!0)})),w=(u?this.selectedOptions.slice(0,i):this.selectedOptions).map(y),A=o?x("div",{class:`${n}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},x("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:r,value:this.pattern,autofocus:this.autofocus,class:`${n}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),x("span",{ref:"patternInputMirrorRef",class:`${n}-base-selection-input-tag__mirror`},this.pattern?this.pattern:"")):null,b=d?()=>x("div",{class:`${n}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},x(Vr,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:r})):void 0;let g;if(u){const S=this.selectedOptions.length-i;S>0&&(g=x("div",{class:`${n}-base-selection-tag-wrapper`,key:"__counter__"},x(Vr,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:r},{default:()=>`+${S}`})))}const m=d?o?x(So,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>w,counter:b,tail:()=>A}):x(So,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>w,counter:b}):u?w.concat(g):w,v=f?()=>x("div",{class:`${n}-base-selection-popover`},d?w:this.selectedOptions.map(y)):void 0,C=f?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,T=!this.selected&&!this.pattern&&!this.isCompositing?x("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`},this.placeholder):null;if(o){const S=x("div",{ref:"patternInputWrapperRef",class:`${n}-base-selection-tags`},m,d?null:A,p);h=x(Vt,null,f?x(Ur,Object.assign({},C),{trigger:()=>S,default:v}):S,T)}else{const S=x("div",{ref:"multipleElRef",class:`${n}-base-selection-tags`,tabindex:r?void 0:0},m,p);h=x(Vt,null,f?x(Ur,Object.assign({},C),{trigger:()=>S,default:v}):S,T)}}else if(o){const y=!this.pattern&&(this.active||!this.selected)&&!this.isCompositing;h=x("div",{ref:"patternInputWrapperRef",class:`${n}-base-selection-label`},x("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${n}-base-selection-input`,value:this.patternInputFocused&&this.active?this.pattern:"",placeholder:"",readonly:r,disabled:r,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),y||this.patternInputFocused&&this.active?null:x("div",{class:`${n}-base-selection-label__render-label ${n}-base-selection-overlay`,key:"input"},a?a({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Rt(this.label,this.selectedOption,!0)),y?x("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`,key:"placeholder"},this.filterablePlaceholder):null,p)}else h=x("div",{ref:"singleElRef",class:`${n}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?x("div",{class:`${n}-base-selection-input`,title:Hn(this.label),key:"input"},x("div",{class:`${n}-base-selection-input__content`},a?a({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Rt(this.label,this.selectedOption,!0))):x("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`,key:"placeholder"},this.placeholder),p);return x("div",{ref:"selfRef",class:[`${n}-base-selection`,{[`${n}-base-selection--active`]:this.active,[`${n}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${n}-base-selection--disabled`]:this.disabled,[`${n}-base-selection--multiple`]:this.multiple,[`${n}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeyup:this.onKeyup,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},h,s?x("div",{class:`${n}-base-selection__border`}):null,s?x("div",{class:`${n}-base-selection__state-border`}):null)}});function Ia(t){return sr(t)?t.name||t.key||"key-required":t.value}function sr(t){return t.type==="group"}function $o(t){return t.type==="ignored"}const Oa={getKey:Ia,getIsGroup:sr,getIgnored:$o};function Uo(t,e){try{return!!(1+e.toString().toLowerCase().indexOf(t.trim().toLowerCase()))}catch{return!1}}function Da(t,e,r){if(!e)return t;function o(i){if(!Array.isArray(i))return[];const s=[];for(const n of i)if(sr(n)){const a=o(n.children);a.length&&s.push(Object.assign({},n,{children:a}))}else{if($o(n))continue;e(r,n)&&s.push(n)}return s}return o(t)}function za(t){const e=new Map;return t.forEach(r=>{sr(r)?r.children.forEach(o=>{e.set(o.value,o)}):e.set(r.value,r)}),e}function Ba(t,e){return e?typeof e.label=="string"?Uo(t,e.label):e.value!==void 0?Uo(t,String(e.value)):!1:!1}function $a(t){const{boxShadow2:e}=t;return{menuBoxShadow:e}}const Ua=qt({name:"Select",common:st,peers:{InternalSelection:Bo,InternalSelectMenu:Oo},self:$a});var Va=Ua,Na=J([X("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),X("select-menu",`
 margin: 4px 0;
 box-shadow: var(--menu-box-shadow);
 `,[Io()])]);const Wa=Object.assign(Object.assign({},_e.props),{to:ft.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:{type:Function,default:Ba},placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:{type:Function,default:t=>({label:t,value:t})},fallbackOption:{type:[Function,Boolean],default:()=>t=>({label:String(t),value:t})},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0},items:{type:Array,validator:()=>!0,default:void 0},displayDirective:{type:String,default:"show"}});var Ha=se({name:"Select",props:Wa,setup(t){const{mergedClsPrefixRef:e,mergedBorderedRef:r,namespaceRef:o}=wt(t),i=_e("Select","Select",Na,Va,t,e),s=B(t.defaultValue),n=fe(t,"value"),a=mr(n,s),l=B(!1),d=B(""),u=N(()=>xs(L.value,Oa)),f=N(()=>za(R.value)),p=B(!1),h=mr(fe(t,"show"),p),y=B(null),w=B(null),A=B(null),{localeRef:b}=Zt("Select"),g=N(()=>{var P;return(P=t.placeholder)!==null&&P!==void 0?P:b.value.placeholder}),m=Kr(t,["items","options"]),v=B([]),C=B([]),T=B(new Map),S=N(()=>{const{fallbackOption:P}=t;return P?D=>Object.assign(P(D),{value:D}):!1}),R=N(()=>C.value.concat(v.value).concat(m.value)),L=N(()=>{if(t.remote)return m.value;{const{value:P}=R,{value:D}=d;if(!D.length||!t.filterable)return P;{const{filter:j}=t;return Da(P,j,D)}}});function $(P){const D=t.remote,{value:j}=T,{value:W}=f,{value:Z}=S,ae=[];return P.forEach(it=>{if(W.has(it))ae.push(W.get(it));else if(D&&j.has(it))ae.push(j.get(it));else if(Z){const Xt=Z(it);Xt&&ae.push(Xt)}}),ae}const V=N(()=>{if(t.multiple){const{value:P}=a;return Array.isArray(P)?$(P):[]}return null}),G=N(()=>{const{value:P}=a;return!t.multiple&&!Array.isArray(P)?P===null?null:$([P])[0]||null:null}),z=Ki(t),{mergedSizeRef:I,mergedDisabledRef:F}=z;function _(P,D){const{onChange:j,"onUpdate:value":W,onUpdateValue:Z}=t,{nTriggerFormChange:ae,nTriggerFormInput:it}=z;j&&Re(j,P,D),Z&&Re(Z,P,D),W&&Re(W,P,D),s.value=P,ae(),it()}function M(P){const{onBlur:D}=t,{nTriggerFormBlur:j}=z;D&&Re(D,P),j()}function k(){const{onClear:P}=t;P&&Re(P)}function Y(P){const{onFocus:D}=t,{nTriggerFormFocus:j}=z;D&&Re(D,P),j()}function ie(P){const{onSearch:D}=t;D&&Re(D,P)}function oe(P){const{onScroll:D}=t;D&&Re(D,P)}function de(){var P;const{remote:D,multiple:j}=t;if(D){const{value:W}=T;if(j)(P=V.value)===null||P===void 0||P.forEach(Z=>{W.set(Z.value,Z)});else{const Z=G.value;Z&&W.set(Z.value,Z)}}}function Pe(P){const{onUpdateShow:D,"onUpdate:show":j}=t;D&&Re(D,P),j&&Re(j,P),p.value=P}function ce(){F.value||(d.value="",Pe(!0),p.value=!0,t.filterable&&K())}function ne(){Pe(!1)}function ge(){d.value=""}function Fe(){F.value||(h.value?t.filterable||ne():ce())}function he(P){var D,j;((j=(D=A.value)===null||D===void 0?void 0:D.selfRef)===null||j===void 0?void 0:j.contains(P.relatedTarget))||(l.value=!1,M(P),ne())}function Te(P){Y(P),l.value=!0}function Me(P){l.value=!0}function Ie(P){var D;((D=y.value)===null||D===void 0?void 0:D.$el.contains(P.relatedTarget))||(l.value=!1,M(P),ne())}function Ee(){var P;(P=y.value)===null||P===void 0||P.focus(),ne()}function ve(P){var D;h.value&&(((D=y.value)===null||D===void 0?void 0:D.$el.contains(P.target))||ne())}function Le(P){if(!Array.isArray(P))return[];if(S.value)return Array.from(P);{const{remote:D}=t,{value:j}=f;if(D){const{value:W}=T;return P.filter(Z=>j.has(Z)||W.has(Z))}else return P.filter(W=>j.has(W))}}function me(P){Ce(P.rawNode)}function Ce(P){if(F.value)return;const{tag:D,remote:j}=t;if(D&&!j){const{value:W}=C,Z=W[0]||null;Z&&(v.value.push(Z),C.value=[])}if(j&&T.value.set(P.value,P),t.multiple){const W=Le(a.value),Z=W.findIndex(ae=>ae===P.value);if(~Z){if(W.splice(Z,1),D&&!j){const ae=E(P.value);~ae&&(v.value.splice(ae,1),d.value="")}}else W.push(P.value),d.value="";_(W,$(W))}else{if(D&&!j){const W=E(P.value);~W?v.value=[v.value[W]]:v.value=[]}U(),ne(),_(P.value,P)}}function E(P){return v.value.findIndex(j=>j.value===P)}function H(P){h.value||ce();const{value:D}=P.target;d.value=D;const{tag:j,remote:W}=t;if(ie(D),j&&!W){if(!D){C.value=[];return}const Z=t.onCreate(D);m.value.some(ae=>ae.value===Z.value)||v.value.some(ae=>ae.value===Z.value)?C.value=[]:C.value=[Z]}}function be(P){P.stopPropagation();const{multiple:D}=t;!D&&t.filterable&&ne(),k(),D?_([],[]):_(null,null)}function Be(P){Tr(P,"action")||P.preventDefault()}function He(P){oe(P)}function tt(P){var D,j,W,Z;switch(P.code){case"Space":if(t.filterable)break;case"Enter":case"NumpadEnter":if(h.value){const ae=(D=A.value)===null||D===void 0?void 0:D.getPendingTmNode();ae?me(ae):t.filterable||(ne(),U())}else ce();P.preventDefault();break;case"ArrowUp":if(t.loading)return;h.value&&((j=A.value)===null||j===void 0||j.prev());break;case"ArrowDown":if(t.loading)return;h.value?(W=A.value)===null||W===void 0||W.next():ce();break;case"Escape":ne(),(Z=y.value)===null||Z===void 0||Z.focus();break}}function O(P){switch(P.code){case"Space":t.filterable||P.preventDefault();break;case"ArrowUp":case"ArrowDown":P.preventDefault();break}}function U(){var P;(P=y.value)===null||P===void 0||P.focus()}function K(){var P;(P=y.value)===null||P===void 0||P.focusInput()}function te(){var P;(P=w.value)===null||P===void 0||P.syncPosition()}return de(),Ve(fe(t,"options"),de),Ve(L,()=>{!h.value||xt(te)}),Ve(a,()=>{!h.value||xt(te)}),{mergedClsPrefix:e,mergedBordered:r,namespace:o,treeMate:u,isMounted:gr(),triggerRef:y,menuRef:A,pattern:d,uncontrolledShow:p,mergedShow:h,adjustedTo:ft(t),uncontrolledValue:s,mergedValue:a,followerRef:w,localizedPlaceholder:g,selectedOption:G,selectedOptions:V,mergedSize:I,mergedDisabled:F,focused:l,handleMenuFocus:Me,handleMenuBlur:Ie,handleMenuTabOut:Ee,handleTriggerClick:Fe,handleToggle:me,handleDeleteOption:Ce,handlePatternInput:H,handleClear:be,handleTriggerBlur:he,handleTriggerFocus:Te,handleKeyDown:O,handleKeyUp:tt,syncPosition:te,handleMenuAfterLeave:ge,handleMenuClickOutside:ve,handleMenuScroll:He,handleMenuKeyup:tt,handleMenuKeydown:O,handleMenuMousedown:Be,mergedTheme:i,cssVars:N(()=>{const{self:{menuBoxShadow:P}}=i.value;return{"--menu-box-shadow":P}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;return x("div",{class:`${e}-select`},x(Po,null,{default:()=>[x(_o,null,{default:()=>x(Fa,{ref:"triggerRef",inputProps:this.inputProps,clsPrefix:e,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp})}),x(Ao,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===ft.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>x(Nt,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var r,o;return(this.mergedShow||this.displayDirective==="show")&&tr(x(ca,Object.assign({},this.menuProps,{ref:"menuRef",virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${e}-select-menu`,(r=this.menuProps)===null||r===void 0?void 0:r.class],clsPrefix:e,focusable:!0,autoPending:!0,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(o=this.menuProps)===null||o===void 0?void 0:o.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeyup:this.handleMenuKeyup,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow}),t),this.displayDirective==="show"?[[io,this.mergedShow],[nr,this.handleMenuClickOutside]]:[[nr,this.handleMenuClickOutside]])}})})]}))}});const ja=t=>{const{textColorBase:e,opacity1:r,opacity2:o,opacity3:i,opacity4:s,opacity5:n}=t;return{color:e,opacity1Depth:r,opacity2Depth:o,opacity3Depth:i,opacity4Depth:s,opacity5Depth:n}},Xa={name:"Icon",common:st,self:ja};var Ya=Xa,Ga=X("icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[ue("color-transition",{transition:"color .3s var(--bezier)"}),ue("depth",{color:"var(--color)"},[J("svg",{opacity:"var(--opacity)",transition:"opacity .3s var(--bezier)"})]),J("svg",{height:"1em",width:"1em"})]),Vo=se({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:Object.assign(Object.assign({},_e.props),{depth:[String,Number],size:[Number,String],color:String}),setup(t){const{mergedClsPrefixRef:e}=wt(t),r=_e("Icon","Icon",Ga,Ya,t,e);return{mergedClsPrefix:e,mergedStyle:N(()=>{const{size:o,color:i}=t;return{fontSize:Ut(o),color:i}}),cssVars:N(()=>{const{depth:o}=t,{common:{cubicBezierEaseInOut:i},self:s}=r.value;if(o!==void 0){const{color:n,[`opacity${o}Depth`]:a}=s;return{"--bezier":i,"--color":n,"--opacity":a}}return{"--bezier":i}})}},render(){var t;const{$parent:e,depth:r,mergedClsPrefix:o}=this;return((t=e==null?void 0:e.$options)===null||t===void 0?void 0:t._n_icon__)&&fr("icon","don't wrap `n-icon` inside `n-icon`"),x("i",rr(this.$attrs,{role:"img",class:[`${o}-icon`,{[`${o}-icon--depth`]:r,[`${o}-icon--color-transition`]:r!==void 0}],style:Object.assign(this.cssVars,this.mergedStyle)}),this.$slots)}}),Ka={iconSize:"22px"};const Za=t=>{const{fontSize:e,warningColor:r}=t;return Object.assign(Object.assign({},Ka),{fontSize:e,iconColor:r})},qa=qt({name:"Popconfirm",common:st,peers:{Button:Zi,Popover:Br},self:Za});var Qa=qa;const No=Symbol("popconfirm"),Wo={positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0}},Ho=Wn(Wo);var Ja=se({name:"NPopconfirmPanel",props:Wo,setup(t){const{localeRef:e}=Zt("Popconfirm"),{mergedClsPrefixRef:r,mergedThemeRef:o}=Ze(No);return Object.assign(Object.assign({},Zt("Popconfirm")),{mergedClsPrefix:r,cssVars:N(()=>{const{common:{cubicBezierEaseInOut:i},self:{fontSize:s,iconSize:n,iconColor:a}}=o.value;return{"--bezier":i,"--font-size":s,"--icon-size":n,"--icon-color":a}}),localizedPositiveText:N(()=>t.positiveText||e.value.positiveText),localizedNegativeText:N(()=>t.negativeText||e.value.negativeText),handlePositiveClick(i){t.onPositiveClick(i)},handleNegativeClick(i){t.onNegativeClick(i)}})},render(){const{mergedClsPrefix:t,$slots:e}=this,r=e.action?e.action():this.negativeText===null&&this.positiveText===null?null:[this.negativeText!==null&&x(br,{size:"small",onClick:this.handleNegativeClick},{default:()=>this.localizedNegativeText}),this.positiveText!==null&&x(br,{size:"small",type:"primary",onClick:this.handlePositiveClick},{default:()=>this.localizedPositiveText})];return x("div",{style:this.cssVars},x("div",{class:`${t}-popconfirm__body`},this.showIcon?x("div",{class:`${t}-popconfirm__icon`},Je(e,"icon",void 0,()=>[x(Yt,{clsPrefix:t},{default:()=>x(pn,null)})])):null,Je(e,"default")),r?x("div",{class:`${t}-popconfirm__action`},r):null)}}),el=X("popconfirm",[Q("body",`
 font-size: var(--font-size);
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 position: relative;
 `,[Q("icon",`
 display: flex;
 font-size: var(--icon-size);
 color: var(--icon-color);
 transition: color .3s var(--bezier);
 margin: 0 8px 0 0;
 `)]),Q("action",`
 margin-top: 8px;
 display: flex;
 justify-content: flex-end;
 `,[X("button",[J("&:not(:last-child)",{marginRight:"8px"})])])]);const tl=Object.assign(Object.assign(Object.assign({},_e.props),zo),{positiveText:String,negativeText:String,showIcon:{type:Boolean,default:!0},trigger:{type:String,default:"click"},onPositiveClick:Function,onNegativeClick:Function});var rl=se({name:"Popconfirm",props:tl,__popover__:!0,setup(t){const{mergedClsPrefixRef:e}=wt(),r=_e("Popconfirm","Popconfirm",el,Qa,t,e),o=B(null);function i(n){const{onPositiveClick:a,"onUpdate:show":l}=t;Promise.resolve(a?a(n):!0).then(d=>{var u;d!==!1&&((u=o.value)===null||u===void 0||u.setShow(!1),l&&Re(l,!1))})}function s(n){const{onNegativeClick:a,"onUpdate:show":l}=t;Promise.resolve(a?a(n):!0).then(d=>{var u;d!==!1&&((u=o.value)===null||u===void 0||u.setShow(!1),l&&Re(l,!1))})}return dt(No,{mergedThemeRef:r,mergedClsPrefixRef:e}),{mergedTheme:r,popoverInstRef:o,handlePositiveClick:i,handleNegativeClick:s}},render(){const{$slots:t,$props:e,mergedTheme:r}=this;return x(Ur,Nn(e,Ho,{theme:r.peers.Popover,themeOverrides:r.peerOverrides.Popover,internalExtraClass:["popconfirm"],ref:"popoverInstRef"}),{trigger:t.activator||t.trigger,default:()=>{const o=ao(e,Ho);return x(Ja,Object.assign(Object.assign({},o),{onPositiveClick:this.handlePositiveClick,onNegativeClick:this.handleNegativeClick}),t)}})}}),q;(function(t){t.trunk="trunk",t.head="head",t.leftUpperArm="leftUpperArm",t.leftLowerArm="leftLowerArm",t.leftHand="leftHand",t.leftThigh="leftThigh",t.leftCalf="leftCalf",t.leftFoot="leftFoot",t.rightUpperArm="rightUpperArm",t.rightLowerArm="rightLowerArm",t.rightHand="rightHand",t.rightThigh="rightThigh",t.rightCalf="rightCalf",t.rightFoot="rightFoot"})(q||(q={}));class We{constructor(){c(this,"vertexArr",[]);c(this,"normalArr",[]);c(this,"indexArr",[]);c(this,"_lowerX",0);c(this,"_lowerY",0);c(this,"_lowerZ",0);c(this,"_upperX",0);c(this,"_upperY",0);c(this,"_upperZ",0);c(this,"_xRange",0);c(this,"_yRange",0);c(this,"_zRange",0)}load(e){const r=this.vertexArr,o=this.normalArr,i=this.indexArr,s=e.split(`
`);let n=1/0,a=1/0,l=1/0,d=-1/0,u=-1/0,f=-1/0;for(let p=0,h=s.length;p<h;++p){const y=s[p].trim();if(!y)continue;const w=y.split(" ");switch(w[0]){case"v":{const A=Number(w[1])||0,b=Number(w[2])||0,g=Number(w[3])||0;r.push([A,b,g]),n=Math.min(n,A),a=Math.min(a,b),l=Math.min(l,g),d=Math.max(d,A),u=Math.max(u,b),f=Math.max(f,g)}break;case"vn":{const A=Number(w[1])||0,b=Number(w[2])||0,g=Number(w[3])||0;o.push([A,b,g])}break;case"f":{const A=[];for(let b=1,g=w.length;b<g;++b){const m=w[b].split("/");A.push([Number(m[0])-1,m[2]?Number(m[2])-1:-1])}i.push(A)}break}}return this._lowerX=n,this._lowerY=a,this._lowerZ=l,this._upperX=d,this._upperY=u,this._upperZ=f,this._xRange=d-n,this._yRange=u-a,this._zRange=f-l,this}translate(e,r,o){const i=this.vertexArr;for(let s=0,n=i.length;s<n;++s){const a=i[s];a[0]+=e,a[1]+=r,a[2]+=o}return this._lowerX+=e,this._upperX+=e,this._lowerY+=r,this._upperY+=r,this._lowerZ+=o,this._upperZ+=o,this}setGeometryVertices(e,r=[1,1,1,1]){const o=[],i=[],s=this.vertexArr,n=this.normalArr,a=this.indexArr;for(let l=0,d=a.length;l<d;++l){const u=a[l];if(u.length!==3&&u.length!==4)throw new Error("Illegal face vertices num");const f=o.length;for(let p=0,h=u.length;p<h;++p){const y=u[p],w=y[0],A=y[1],b=s[w],g=A<0?[0,0,0]:n[A];o.push({a_color:r,a_position:b,a_normal:g})}u.length===3?i.push(f,f+1,f+2):i.push(f,f+1,f+2,f,f+2,f+3)}e.setVertices(o),e.indices=i}get lowerX(){return this._lowerX}get lowerY(){return this._lowerY}get lowerZ(){return this._lowerZ}get upperX(){return this._upperX}get upperY(){return this._upperY}get upperZ(){return this._upperZ}get xRange(){return this._xRange}get yRange(){return this._yRange}get zRange(){return this._zRange}}class ol{constructor(e,r,o){c(this,"name");c(this,"componentSize");c(this,"vertices");c(this,"vbo");this.name=e,this.componentSize=r,this.vertices=o}}var jo;(function(t){t[t.TRIANGLES=0]="TRIANGLES",t[t.LINES=1]="LINES"})(jo||(jo={}));class jt{constructor(e=0){c(this,"type",0);c(this,"attributes",[]);c(this,"indices",[]);c(this,"ibo");c(this,"vao");this.type=e}setVertices(e){const r=e.length,o={};for(let i in e[0])if(e[0].hasOwnProperty(i)){const s=e[0][i].length;o[i]=new ol(i,s,new Float32Array(s*r))}for(let i=0;i<r;++i){const s=e[i];for(let n in s)if(s.hasOwnProperty(n)){const a=s[n];o[n].vertices.set(a,a.length*i)}}this.attributes=Object.values(o)}}c(jt,"TYPE_TRIANGLES",0),c(jt,"TYPE_LINES",1);const il=[1,1,1,1],nl=[1,1,1,.1];class De{constructor(){c(this,"translation",[0,0,0]);c(this,"forward",[0,0,1]);c(this,"up",[0,1,0]);c(this,"controlPoint");c(this,"landmarks",[]);c(this,"parent");c(this,"children",[]);c(this,"active",!0);c(this,"localRotation",wr());c(this,"localMatrix",Zr());c(this,"worldMatrix",Zr());c(this,"originWorldPosition",we());c(this,"originViewPosition",we());c(this,"controlPointWorldPosition",we());c(this,"controlPointViewPosition",we());c(this,"controlPointScreenPosition",we());c(this,"landmarksWorldPositions",[]);c(this,"landmarksViewPosition",[]);c(this,"geometry",new jt)}render(e){e.uniform("u_mMatrix",this.worldMatrix),e.uniform("u_color",this.active?il:nl),e.drawGeometry(this.geometry)}dispose(e){e.drawGeometry(this.geometry)}}const sl=[0,0,0];var Cc,Ac,Sc,Mc,Rc,Ec,Lc,kc,Fc,Ic,Oc,Dc,zc,Bc;class Nr{constructor(){c(this,"root",new De);c(this,Cc,this.root);c(this,Ac,new De);c(this,Sc,new De);c(this,Mc,new De);c(this,Rc,new De);c(this,Ec,new De);c(this,Lc,new De);c(this,kc,new De);c(this,Fc,new De);c(this,Ic,new De);c(this,Oc,new De);c(this,Dc,new De);c(this,zc,new De);c(this,Bc,new De)}update(e,r=this.root){const o=[r];for(;;){const i=o.pop();if(!i)break;o.push(...i.children),qr(i.localRotation,i.forward,i.up),qi(i.localMatrix,i.localRotation,i.translation),i.parent?yr(i.worldMatrix,i.parent.worldMatrix,i.localMatrix):Qi(i.worldMatrix,i.localMatrix),lt(i.originWorldPosition,sl,i.worldMatrix),lt(i.originViewPosition,i.originWorldPosition,e.viewMatrix),i.controlPoint&&(lt(i.controlPointWorldPosition,i.controlPoint,i.worldMatrix),lt(i.controlPointViewPosition,i.controlPointWorldPosition,e.viewMatrix),lt(i.controlPointScreenPosition,i.controlPointWorldPosition,e.pvMatrix)),i.landmarks.length!==i.landmarksWorldPositions.length&&(i.landmarksWorldPositions=i.landmarks.map(s=>[0,0,0]),i.landmarksViewPosition=i.landmarks.map(s=>[0,0,0]));for(let s=0,n=i.landmarks.length;s<n;++s)lt(i.landmarksWorldPositions[s],i.landmarks[s],i.worldMatrix),lt(i.landmarksViewPosition[s],i.landmarksWorldPositions[s],e.viewMatrix)}}render(e){const r=[this.root];for(;;){const o=r.pop();if(!o)break;r.push(...o.children),o.render(e)}}async init(){const e=$e(()=>import("./head.643b9ca2.js"),[]),r=$e(()=>import("./trunk.6456ff5d.js"),[]),o=$e(()=>import("./left-upper-arm.6bab6c42.js"),[]),i=$e(()=>import("./left-lower-arm.ebe30a6b.js"),[]),s=$e(()=>import("./left-hand.9f228153.js"),[]),n=$e(()=>import("./right-upper-arm.247f0ea0.js"),[]),a=$e(()=>import("./right-lower-arm.befeeb58.js"),[]),l=$e(()=>import("./right-hand.1a2b65b4.js"),[]),d=$e(()=>import("./left-thigh.ae8e3bcc.js"),[]),u=$e(()=>import("./left-calf.02fe224f.js"),[]),f=$e(()=>import("./left-foot.d9162ea3.js"),[]),p=$e(()=>import("./right-thigh.920c863c.js"),[]),h=$e(()=>import("./right-calf.20f1f9a3.js"),[]),y=$e(()=>import("./right-foot.478e8c23.js"),[]);await Promise.all([e,r,o,i,s,n,a,l,d,u,f,p,h,y]);const w=new We().load((await e).default),A=new We().load((await r).default),b=new We().load((await o).default),g=new We().load((await i).default),m=new We().load((await s).default),v=new We().load((await n).default),C=new We().load((await a).default),T=new We().load((await l).default),S=new We().load((await d).default),R=new We().load((await u).default),L=new We().load((await f).default),$=new We().load((await p).default),V=new We().load((await h).default),G=new We().load((await y).default),z=[0,w.lowerY+w.yRange*.35,w.zRange*-.1],I=[b.lowerX+b.xRange*.3,b.lowerY+b.yRange*(1-.075),b.zRange*-.1],F=[g.lowerX-I[0]+g.xRange*.5,g.lowerY-I[1]+g.yRange*(1-.05),g.lowerZ-I[2]+g.zRange*.3],_=[m.lowerX-F[0]-I[0]+m.xRange*.85,m.lowerY-F[1]-I[1]+m.yRange*(1-.05),m.lowerZ-F[2]-I[2]+m.zRange*.65],M=[S.lowerX+S.xRange*.5,S.lowerY+S.yRange*(1-.05),S.zRange*.05],k=[R.lowerX-M[0]+R.xRange*.5,R.lowerY-M[1]+R.yRange*(1-.05),R.lowerZ-M[2]+R.zRange*.65],Y=[L.lowerX-M[0]-k[0]+L.xRange*.3,L.lowerY-M[1]-k[1]+L.yRange*(1-.25),L.lowerZ-M[2]-k[2]+L.zRange*.25],ie=[0,A.yRange*.75,0],oe=[0,0,w.yRange*.5],de=[b.xRange*.3,b.yRange*-.85,b.zRange*-.3],Pe=[0,g.yRange*-.9,g.zRange*.4],ce=[m.xRange*-.2,m.yRange*-.8,m.zRange*-.1],ne=[S.xRange*-.15,S.yRange*-.87,S.zRange*-.25],ge=[0,R.yRange*-.85,R.zRange*-.3],Fe=[L.xRange*.25,L.yRange*-.5,L.zRange*.6];function he(O){return[-O[0],O[1],O[2]]}const Te=this.root;A.setGeometryVertices(Te.geometry),Te.controlPoint=ie;const Me=this.addChild(this.root,this.head);Me.landmarks=[[-w.lowerX,w.yRange*.05,w.zRange*.15],[-w.upperX,w.yRange*.05,w.zRange*.15]],w.translate(-z[0],-z[1],-z[2]),w.setGeometryVertices(Me.geometry),Me.translation=z,Me.controlPoint=oe;const Ie=this.addChild(this.root,this.leftUpperArm);b.translate(-I[0],-I[1],-I[2]),b.setGeometryVertices(Ie.geometry),Ie.translation=I,Ie.controlPoint=de;const Ee=this.addChild(this.root,this.rightUpperArm);v.translate(+I[0],-I[1],-I[2]),v.setGeometryVertices(Ee.geometry),Ee.translation=he(I),Ee.controlPoint=he(de);const ve=this.addChild(Ie,this.leftLowerArm);g.translate(-F[0]-I[0],-F[1]-I[1],-F[2]-I[2]),g.setGeometryVertices(ve.geometry),ve.translation=F,ve.controlPoint=Pe;const Le=this.addChild(Ee,this.rightLowerArm);C.translate(+F[0]+I[0],-F[1]-I[1],-F[2]-I[2]),C.setGeometryVertices(Le.geometry),Le.translation=he(F),Le.controlPoint=he(Pe);const me=this.addChild(ve,this.leftHand);m.translate(-_[0]-F[0]-I[0],-_[1]-F[1]-I[1],-_[2]-F[2]-I[2]),m.setGeometryVertices(me.geometry),me.translation=_,me.controlPoint=ce;const Ce=this.addChild(Le,this.rightHand);T.translate(+_[0]+F[0]+I[0],-_[1]-F[1]-I[1],-_[2]-F[2]-I[2]),T.setGeometryVertices(Ce.geometry),Ce.translation=he(_),Ce.controlPoint=he(ce);const E=this.addChild(Te,this.leftThigh);S.translate(-M[0],-M[1],-M[2]),S.setGeometryVertices(E.geometry),E.translation=M,E.controlPoint=ne;const H=this.addChild(Te,this.rightThigh);$.translate(+M[0],-M[1],-M[2]),$.setGeometryVertices(H.geometry),H.translation=he(M),H.controlPoint=he(ne);const be=this.addChild(E,this.leftCalf);R.translate(-k[0]-M[0],-k[1]-M[1],-k[2]-M[2]),R.setGeometryVertices(be.geometry),be.translation=k,be.controlPoint=ge;const Be=this.addChild(H,this.rightCalf);V.translate(+k[0]+M[0],-k[1]-M[1],-k[2]-M[2]),V.setGeometryVertices(Be.geometry),Be.translation=he(k),Be.controlPoint=he(ge);const He=this.addChild(be,this.leftFoot);L.translate(-Y[0]-k[0]-M[0],-Y[1]-k[1]-M[1],-Y[2]-k[2]-M[2]),L.setGeometryVertices(He.geometry),He.translation=Y,He.controlPoint=Fe;const tt=this.addChild(Be,this.rightFoot);G.translate(+Y[0]+k[0]+M[0],-Y[1]-k[1]-M[1],-Y[2]-k[2]-M[2]),G.setGeometryVertices(tt.geometry),tt.translation=he(Y),tt.controlPoint=he(Fe)}addChild(e,r){return r=r||new De,e.children.push(r),r.parent=e,r}}Cc=q.trunk,Ac=q.head,Sc=q.leftUpperArm,Mc=q.leftLowerArm,Rc=q.leftHand,Ec=q.leftThigh,Lc=q.leftCalf,kc=q.leftFoot,Fc=q.rightUpperArm,Ic=q.rightLowerArm,Oc=q.rightHand,Dc=q.rightThigh,zc=q.rightCalf,Bc=q.rightFoot;function Wr(t,e,r,o,i,s,n,a,l,d,u,f,p){const h=i-e,y=s-r,w=n-o,A=Math.sqrt(h**2+y**2+w**2);if(A<=1e-8)return!1;const b=h/A,g=y/A,m=w/A,v=Math.sqrt(u**2+f**2+p**2);if(v<=1e-8)return!1;const C=1/v;u*=C,f*=C,p*=C;const T=b*u+g*f+m*p;if(Math.abs(T)<=1e-8)return!1;const S=-e+a,R=-r+l,L=-o+d,$=(S*u+R*f+L*p)/T,V=e+$*b,G=r+$*g,z=o+$*m;return Ye(t,V,G,z),$>=0}function al(t,e,r,o,i,s,n,a,l,d,u){let f=i-e,p=s-r,h=n-o;const y=e-a,w=r-l,A=o-d,b=f**2+p**2+h**2,g=2*(f*y+p*w+h*A),m=y**2+w**2+A**2-u**2,v=g**2-4*b*m;if(v<0)return!1;const C=Math.sqrt(v),T=(-g+C)/(2*b),S=(-g-C)/(2*b),R=Math.min(T,S);return t[0]=e+f*R,t[1]=r+p*R,t[2]=o+h*R,!0}class Xo{constructor(){c(this,"dragStartMousePosition",we());c(this,"dragStartOriginPosition",we());c(this,"dragStartTargetPosition",we());c(this,"mousePosition",we());c(this,"mouseRay0",we());c(this,"mouseRay1",we());c(this,"rayResult0",we());c(this,"rayResult1",we());c(this,"normal",we());c(this,"radius",0);c(this,"offset",we())}}function ll(t,e,r,o,i,s,n){Ye(t.dragStartMousePosition,e,r,0),Ye(t.dragStartTargetPosition,o,i,s),_t(t.normal,n.target,n.position)}function Yo(t,e,r,o){return t.dragStartMousePosition[2]=-1,o.screenToView(t.mouseRay0,t.dragStartMousePosition),t.dragStartMousePosition[2]=1,o.screenToView(t.mouseRay1,t.dragStartMousePosition),!Wr(t.rayResult0,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartTargetPosition[0],t.dragStartTargetPosition[1],t.dragStartTargetPosition[2],t.normal[0],t.normal[1],t.normal[2])||(Ye(t.mousePosition,e,r,-1),o.screenToView(t.mouseRay0,t.mousePosition),Ye(t.mousePosition,e,r,1),o.screenToView(t.mouseRay1,t.mousePosition),!Wr(t.rayResult1,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartTargetPosition[0],t.dragStartTargetPosition[1],t.dragStartTargetPosition[2],t.normal[0],t.normal[1],t.normal[2]))?!1:(_t(t.offset,t.rayResult1,t.rayResult0),!0)}function cl(t,e,r,o,i,s,n,a,l,d){Ye(t.dragStartMousePosition,e,r,0),Ye(t.dragStartOriginPosition,o,i,s),Ye(t.dragStartTargetPosition,n,a,l),_t(t.normal,t.dragStartTargetPosition,d.position),t.radius=Ji(t.dragStartOriginPosition,t.dragStartTargetPosition)}function dl(t,e,r,o){const i=Qr(t.normal,t.dragStartOriginPosition);return Qr(t.normal,t.dragStartTargetPosition)-i<=0?(Ye(t.mousePosition,e,r,-1),o.screenToView(t.mouseRay0,t.mousePosition),Ye(t.mousePosition,e,r,1),o.screenToView(t.mouseRay1,t.mousePosition),al(t.rayResult1,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartOriginPosition[0],t.dragStartOriginPosition[1],t.dragStartOriginPosition[2],t.radius)?!0:Wr(t.rayResult1,t.mouseRay0[0],t.mouseRay0[1],t.mouseRay0[2],t.mouseRay1[0],t.mouseRay1[1],t.mouseRay1[2],t.dragStartOriginPosition[0],t.dragStartOriginPosition[1],t.dragStartOriginPosition[2],t.normal[0],t.normal[1],t.normal[2])):Yo(t,e,r,o)}class ul{constructor(e,r,o,i,s,n){c(this,"perspective",!1);c(this,"_pvMatrix",new Float32Array(16));c(this,"_invPvMatrix",new Float32Array(16));c(this,"_projectionMatrix",new Float32Array(16));c(this,"_viewMatrix",new Float32Array(16));c(this,"_position",new Float32Array(3));c(this,"_target",new Float32Array(3));c(this,"_up",new Float32Array([0,1,0]));c(this,"_left");c(this,"_right");c(this,"_bottom");c(this,"_top");c(this,"_near");c(this,"_far");c(this,"matrixNeedsUpdate",!0);this._left=e,this._right=r,this._bottom=o,this._top=i,this._near=s,this._far=n}fitViewport(e,r){this.left=-e/2,this.right=e/2,this.bottom=-r/2,this.top=r/2}screenToView(e,r){lt(e,r,this._invPvMatrix)}updateMatrix(){en(this._projectionMatrix,this._left,this._right,this._bottom,this._top,this._near,this._far),Jr(this._viewMatrix,this._position,this._target,this._up),yr(this._pvMatrix,this._projectionMatrix,this._viewMatrix),eo(this._invPvMatrix,this._pvMatrix),this.matrixNeedsUpdate=!1}get pvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._pvMatrix}get invPvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._invPvMatrix}get projectionMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._projectionMatrix}get viewMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._viewMatrix}get position(){return this._position}set position(e){Tt(e,this._position)||(this.matrixNeedsUpdate=!0,this._position.set(e))}get target(){return this._target}set target(e){Tt(e,this._target)||(this.matrixNeedsUpdate=!0,this._target.set(e))}get up(){return this._up}set up(e){Tt(e,this._up)||(this.matrixNeedsUpdate=!0,this._up.set(e))}get left(){return this._left}set left(e){e!==this._left&&(this.matrixNeedsUpdate=!0,this._left=e)}get right(){return this._right}set right(e){e!==this._right&&(this.matrixNeedsUpdate=!0,this._right=e)}get bottom(){return this._bottom}set bottom(e){e!==this._bottom&&(this.matrixNeedsUpdate=!0,this._bottom=e)}get top(){return this._top}set top(e){e!==this._top&&(this.matrixNeedsUpdate=!0,this._top=e)}get near(){return this._near}set near(e){e!==this._near&&(this.matrixNeedsUpdate=!0,this._near=e)}get far(){return this._far}set far(e){e!==this._far&&(this.matrixNeedsUpdate=!0,this._far=e)}}class hl{constructor(e,r,o,i){c(this,"perspective",!0);c(this,"_pvMatrix",new Float32Array(16));c(this,"_invPvMatrix",new Float32Array(16));c(this,"_projectionMatrix",new Float32Array(16));c(this,"_viewMatrix",new Float32Array(16));c(this,"_position",new Float32Array(3));c(this,"_target",new Float32Array(3));c(this,"_up",new Float32Array([0,1,0]));c(this,"_fovYRad");c(this,"_aspect");c(this,"_near");c(this,"_far");c(this,"matrixNeedsUpdate",!0);this._fovYRad=e,this._aspect=r,this._near=o,this._far=i}fitViewport(e,r){this.aspect=e/r}screenToView(e,r){lt(e,r,this._invPvMatrix)}updateMatrix(){tn(this._projectionMatrix,this._fovYRad,this._aspect,this._near,this._far),Jr(this._viewMatrix,this._position,this._target,this._up),yr(this._pvMatrix,this._projectionMatrix,this._viewMatrix),eo(this._invPvMatrix,this._pvMatrix),this.matrixNeedsUpdate=!1}get pvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._pvMatrix}get invPvMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._invPvMatrix}get projectionMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._projectionMatrix}get viewMatrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._viewMatrix}get position(){return this._position}set position(e){Tt(e,this._position)||(this.matrixNeedsUpdate=!0,this._position.set(e))}get target(){return this._target}set target(e){Tt(e,this._target)||(this.matrixNeedsUpdate=!0,this._target.set(e))}get up(){return this._up}set up(e){Tt(e,this._up)||(this.matrixNeedsUpdate=!0,this._up.set(e))}get fovYRad(){return this._fovYRad}set fovYRad(e){this._fovYRad!==e&&(this.matrixNeedsUpdate=!0,this._fovYRad=e)}get aspect(){return this._aspect}set aspect(e){this._aspect!==e&&(this.matrixNeedsUpdate=!0,this._aspect=e)}get near(){return this._near}set near(e){this._near!==e&&(this.matrixNeedsUpdate=!0,this._near=e)}get far(){return this._far}set far(e){this._far!==e&&(this.matrixNeedsUpdate=!0,this._far=e)}}const fl=.9,pl=-12,gl=1.2,vl=4;class Go{constructor(e=45/180*Math.PI,r=.1,o=1e3){c(this,"viewportWidth",1);c(this,"viewportHeight",1);c(this,"perspectiveCamera");c(this,"orthographicCamera");c(this,"perspective",!0);c(this,"far",2);c(this,"target",zt(0,0,0));c(this,"rotateX",0);c(this,"rotateY",0);c(this,"zoom",1);c(this,"position",zt(0,0,0));c(this,"orthographicZoomRatio",1.6);c(this,"defaultPosition",zt(0,0,1));c(this,"defaultUp",zt(0,1,0));c(this,"up",zt(0,0,0));c(this,"rotationQuat",wr());c(this,"draggingRotation",!1);c(this,"draggingPosition",!1);c(this,"dragStartProjectedMouseX",0);c(this,"dragStartProjectedMouseY",0);c(this,"dragStartRotateX",0);c(this,"dragStartRotateY",0);c(this,"positionDragContext",new Xo);this.perspectiveCamera=new hl(e,1,r,o),this.orthographicCamera=new ul(-1,1,-1,1,r,o)}screenToView(e,r){return(this.perspective?this.perspectiveCamera:this.orthographicCamera).screenToView(e,r),e}get pvMatrix(){return(this.perspective?this.perspectiveCamera:this.orthographicCamera).pvMatrix}get viewMatrix(){return(this.perspective?this.perspectiveCamera:this.orthographicCamera).viewMatrix}get camera(){return this.perspective?this.perspectiveCamera:this.orthographicCamera}fitViewport(e,r){this.viewportWidth=e,this.viewportHeight=r,this.update()}update(){const e=this.camera,r=this.zoom<=0?fl**-this.zoom:gl**this.zoom,o=r/25*(this.perspective?1:this.orthographicZoomRatio);e.fitViewport(this.viewportWidth*o,this.viewportHeight*o),rn(this.position,this.defaultPosition,this.far*r*2),on(this.rotationQuat,this.rotateX,this.rotateY,0),ee(this.position,this.position,this.rotationQuat),nn(this.position,this.position,this.target),e.position=this.position,this.rotateX===90||this.rotateX===-90?(ee(this.up,this.defaultUp,this.rotationQuat),e.up=this.up):e.up=this.defaultUp,e.target=this.target}onInput(e){const r=(-this.viewportWidth/2+e.mouseX)/this.viewportWidth*2,o=(+this.viewportHeight/2-e.mouseY)/this.viewportHeight*2;if(e.mouseMiddle)if(this.draggingRotation){const i=r-this.dragStartProjectedMouseX,s=o-this.dragStartProjectedMouseY;this.rotateX=Math.max(-90,Math.min(90,this.dragStartRotateX+s*90)),this.rotateY=(this.dragStartRotateY-i*90)%360}else this.draggingRotation=!0,this.dragStartProjectedMouseX=r,this.dragStartProjectedMouseY=o,this.dragStartRotateX=this.rotateX,this.dragStartRotateY=this.rotateY;else this.draggingRotation=!1;e.mouseRight?this.draggingPosition?Yo(this.positionDragContext,r,o,this.camera)&&_t(this.target,this.positionDragContext.dragStartTargetPosition,this.positionDragContext.offset):this.draggingRotation||(this.draggingPosition=!0,ll(this.positionDragContext,r,o,this.target[0],this.target[1],this.target[2],this.camera)):this.draggingPosition=!1,e.wheelDetY&&(this.zoom=Math.max(pl,Math.min(vl,this.zoom+e.wheelDetY))),this.update()}}var mt;(function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"})(mt||(mt={}));class ml{constructor(){c(this,"callback");c(this,"needsUpdate",!1);c(this,"mouseOver",!1);c(this,"mouseX",0);c(this,"mouseY",0);c(this,"mouseLeft",!1);c(this,"mouseLeftDownThisFrame",!1);c(this,"mouseRight",!1);c(this,"mouseRightDownThisFrame",!1);c(this,"mouseMiddle",!1);c(this,"mouseMiddleDownThisFrame",!1);c(this,"wheelDetX",0);c(this,"wheelDetY",0);c(this,"onContextmenu");c(this,"onMouseMove");c(this,"onMouseDown");c(this,"onMouseUp");c(this,"onMouseLeave");c(this,"onMouseOut");c(this,"onWheel");c(this,"onKeyDown");c(this,"onKeyUp");c(this,"onBlur");c(this,"keyMap",new Map);c(this,"timestamp",0);this.onContextmenu=e=>{e.preventDefault()},this.onMouseMove=e=>{this.mouseOver=!0,this.mouseX=e.offsetX,this.mouseY=e.offsetY,this.triggerCallback()},this.onMouseDown=e=>{switch(e.button){case mt.LEFT:this.mouseLeft=!0,this.mouseLeftDownThisFrame=!0;break;case mt.MIDDLE:this.mouseMiddle=!0,this.mouseMiddleDownThisFrame=!0;break;case mt.RIGHT:this.mouseRight=!0,this.mouseRightDownThisFrame=!0;break}this.triggerCallback()},this.onMouseUp=e=>{switch(e.button){case mt.LEFT:this.mouseLeft=!1,this.mouseLeftDownThisFrame=!1;break;case mt.MIDDLE:this.mouseMiddle=!1,this.mouseMiddleDownThisFrame=!1;break;case mt.RIGHT:this.mouseRight=!1,this.mouseLeftDownThisFrame=!1;break}this.triggerCallback()},this.onMouseLeave=()=>{this.mouseOver=!1,this.triggerCallback()},this.onMouseOut=e=>{(e.clientY<=0||e.clientX<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight)&&(this.mouseLeft=!1,this.mouseLeftDownThisFrame=!1,this.mouseRight=!1,this.mouseLeftDownThisFrame=!1),this.triggerCallback()},this.onWheel=e=>{e.preventDefault(),this.wheelDetX+=Math.round(e.deltaX/100),this.wheelDetY+=Math.round(e.deltaY/100),this.triggerCallback()},this.onKeyDown=e=>{const r=e.target;r&&"tagName"in r&&r.tagName==="INPUT"||(e.ctrlKey&&e.preventDefault(),this.keyMap.set(e.key,this.timestamp),this.triggerCallback())},this.onKeyUp=e=>{const r=e.target;r&&"tagName"in r&&r.tagName==="INPUT"||(this.keyMap.delete(e.key),this.triggerCallback())},this.onBlur=()=>{this.keyMap.clear(),this.triggerCallback()}}setup(e){e.addEventListener("contextmenu",this.onContextmenu),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseleave",this.onMouseLeave),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mouseout",this.onMouseOut),e.addEventListener("wheel",this.onWheel),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),window.addEventListener("blur",this.onBlur)}unload(e){e.removeEventListener("contextmenu",this.onContextmenu),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseleave",this.onMouseLeave),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mouseout",this.onMouseOut),e.removeEventListener("wheel",this.onWheel),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("blur",this.onBlur)}update(){this.mouseLeftDownThisFrame=!1,this.mouseRightDownThisFrame=!1,this.mouseMiddleDownThisFrame=!1,this.wheelDetX=0,this.wheelDetY=0,this.timestamp+=1}isKeyPressed(e){return this.keyMap.has(e)}isKeyPressedThisFrame(e){return this.keyMap.get(e)===this.timestamp}triggerCallback(){this.needsUpdate=!0,requestAnimationFrame(()=>{!this.needsUpdate||(this.needsUpdate=!1,this.callback&&this.callback(this),this.update())})}}function bl(t,e,r,o,i){return(t-r)**2+(e-o)**2<=i**2}const Ko="a_position",wl="a_texCoord",Zo="a_color",yl="u_texture";class xl{constructor(e){c(this,"glFrameBuffer");c(this,"textures",[]);c(this,"depthTexture");c(this,"stencilTexture");this.glFrameBuffer=e}get texture(){return this.textures[0]}}class ar{constructor(e,r,o,i,s,n,a,l){c(this,"glTexture");c(this,"level");c(this,"internalFormat");c(this,"width");c(this,"height");c(this,"border");c(this,"format");c(this,"type");c(this,"flipY",!1);c(this,"image");this.glTexture=e,this.level=r,this.internalFormat=o,this.width=i,this.height=s,this.border=n,this.format=a,this.type=l}}function Pl(t,e,r,o,i,s){if(e.substr(-3)==="[0]")switch(o){case t.FLOAT:return function(a){t.uniform1fv(i,a)};case t.INT:return function(a){t.uniform1iv(i,a)};case t.UNSIGNED_INT:return function(a){t.uniform1uiv(i,a)};case t.SAMPLER_2D:const n=new Int32Array(r);for(let a=0;a<r;++a)n[a]=s.count++;return function(a){t.uniform1iv(i,n);for(let l=0;l<r;++l){let d=a[l];d instanceof ar&&(d=d.glTexture),t.activeTexture(t.TEXTURE0+n[l]),t.bindTexture(t.TEXTURE_2D,d||null)}};default:throw new Error(`Unimplemented setter type (uniform: ${e}, type: ${o})`)}switch(o){case t.FLOAT:return function(a){t.uniform1f(i,a)};case t.FLOAT_VEC2:return function(a){t.uniform2fv(i,a)};case t.FLOAT_VEC3:return function(a){t.uniform3fv(i,a)};case t.FLOAT_VEC4:return function(a){t.uniform4fv(i,a)};case t.BOOL:case t.INT:return function(a){t.uniform1i(i,a)};case t.BOOL_VEC2:case t.INT_VEC2:return function(a){t.uniform2iv(i,a)};case t.BOOL_VEC3:case t.INT_VEC3:return function(a){t.uniform3iv(i,a)};case t.BOOL_VEC4:case t.INT_VEC4:return function(a){t.uniform4iv(i,a)};case t.FLOAT_MAT2:return function(a){t.uniformMatrix2fv(i,!1,a)};case t.FLOAT_MAT3:return function(a){t.uniformMatrix3fv(i,!1,a)};case t.FLOAT_MAT4:return function(a){t.uniformMatrix4fv(i,!1,a)};case t.SAMPLER_2D:const n=s.count++;return function(a){a instanceof ar&&(a=a.glTexture),t.uniform1i(i,n),t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,a||null)};default:throw new Error(`Unimplemented setter type (uniform: ${e}, type: ${o})`)}}class _l{constructor(e,r,o,i){c(this,"name");c(this,"size");c(this,"type");c(this,"location");this.name=e,this.size=r,this.type=o,this.location=i}}class Tl{constructor(e,r,o,i,s){c(this,"name");c(this,"size");c(this,"type");c(this,"location");c(this,"setter");this.name=e,this.size=r,this.type=o,this.location=i,this.setter=s}}class Cl{constructor(e,r,o){c(this,"vertShader");c(this,"fragShader");c(this,"program");c(this,"attributes",{});c(this,"uniforms",{});this.vertShader=e,this.fragShader=r,this.program=o}registerAttribute(e,r,o,i){this.attributes[e]=new _l(e,r,o,i)}registerUniform(e,r,o,i,s){e.endsWith("[0]")&&(e=e.substr(0,e.length-"[0]".length)),this.uniforms[e]=new Tl(e,r,o,i,s)}}var Al=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec4 v_color;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = v_color;\r
}\r
`,Sl=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec4 a_position;\r
in vec4 a_color;\r
\r
out vec4 v_color;\r
\r
void main() {\r
    v_color = a_color;\r
    gl_Position = a_position;\r
}\r
`,Ml=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec2 v_texCoord;\r
in vec4 v_color;\r
\r
uniform sampler2D u_texture;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = texture(u_texture, v_texCoord) * v_color;\r
}\r
`,qo=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec4 a_position;\r
in vec2 a_texCoord;\r
in vec4 a_color;\r
\r
out vec2 v_texCoord;\r
out vec4 v_color;\r
\r
void main() {\r
    v_texCoord = a_texCoord;\r
    v_color = a_color;\r
    gl_Position = a_position;\r
}\r
`,Qo;(function(t){t[t.NONE=0]="NONE",t[t.FRONT=1]="FRONT",t[t.BACK=2]="BACK"})(Qo||(Qo={}));var Jo;(function(t){t[t.MESH=0]="MESH",t[t.LINES=1]="LINES"})(Jo||(Jo={}));var ei;(function(t){t[t.OVERLAP=0]="OVERLAP",t[t.LIGHT=1]="LIGHT",t[t.PIGMENT=2]="PIGMENT"})(ei||(ei={}));const Dt=class{constructor(e,r=2e3){c(this,"SIDE_NONE",0);c(this,"SIDE_FRONT",1);c(this,"SIDE_BACK",2);c(this,"BLEND_MODE_OVERLAP",0);c(this,"BLEND_MODE_LIGHT",1);c(this,"BLEND_MODE_PIGMENT",2);c(this,"canvas");c(this,"gl");c(this,"attribLocations");c(this,"BLANK_WHITE");c(this,"IMAGE_2D_SHADER");c(this,"COLOR_2D_SHADER");c(this,"currentShader");c(this,"frameBufferStack",[]);c(this,"currentFrameBuffer");c(this,"batchSize");c(this,"batchPositionVertices");c(this,"batchTexCoordVertices");c(this,"batchColorVertices");c(this,"batchPositionBuffer");c(this,"batchTexCoordBuffer");c(this,"batchColorBuffer");c(this,"batchType",0);c(this,"batchTexture");c(this,"batchIndex",0);c(this,"drawing2D",!1);c(this,"state",{width:0,height:0,color:{r:1,g:1,b:1,a:1},cameraX:0,cameraY:0,zoom:1,blendMode:0});c(this,"stateStack",[]);let o,i=null;if(e?e instanceof HTMLCanvasElement?o=e:(o=e.canvas,i=e):o=document.createElement("canvas"),!i&&(i=o.getContext("webgl2",{alpha:!0,antialias:!1,depth:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1}),!i))throw new Error("Failed to create WebGL2 rendering context");this.canvas=o,this.gl=i,this.state.width=o.width,this.state.height=o.height,i.viewport(0,0,this.state.width,this.state.height),i.enable(i.BLEND),this.BLANK_WHITE=this.createTextureFromRgbaPixels(1,1,new Uint8Array([255,255,255,255])),this.IMAGE_2D_SHADER=this.createShader(qo,Ml),this.COLOR_2D_SHADER=this.createShader(Sl,Al),this.batchSize=r,this.batchPositionVertices=new Float32Array(r*3*2*2),this.batchPositionBuffer=this.createDynamicDrawBuffer(this.batchPositionVertices),this.batchTexCoordVertices=new Float32Array(r*3*2*2),this.batchTexCoordBuffer=this.createDynamicDrawBuffer(this.batchTexCoordVertices),this.batchColorVertices=new Float32Array(r*3*2*4),this.batchColorBuffer=this.createDynamicDrawBuffer(this.batchColorVertices)}static sharedInstance(){return Dt._sharedInstance||(Dt._sharedInstance=new Dt),Dt._sharedInstance}copyTo(e,r=0,o=0,i=this.state.width,s=this.state.height,n=0,a=0,l=this.state.width,d=this.state.height){e.drawImage(this.canvas,n,a,l,d,r,o,i,s)}viewport(e,r){this.state.width=e,this.state.height=r,this.gl.viewport(0,0,this.state.width,this.state.height)}resizeCanvas(e,r){(this.canvas.width!==e||this.canvas.height!==r)&&(this.canvas.width=e,this.canvas.height=r),this.viewport(e,r)}clearColor(e=0,r=0,o=0,i=0){this.gl.clearColor(e,r,o,i)}clear(e,r,o){this.flush2D(),this.switchFrameBuffer();const i=this.gl;let s=0;e&&(s|=i.COLOR_BUFFER_BIT),r&&(s|=i.DEPTH_BUFFER_BIT),o&&(s|=i.STENCIL_BUFFER_BIT),i.clear(s)}depthTest(e){const r=this.gl;e?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}depthMask(e){this.gl.depthMask(e)}cullFace(e){const r=this.gl;switch(e){case 0:r.disable(r.CULL_FACE);break;case 1:r.enable(r.CULL_FACE),r.cullFace(r.FRONT);break;case 2:r.enable(r.CULL_FACE),r.cullFace(r.BACK);break}}blendMode(e){if(e===this.state.blendMode)return;this.state.blendMode=e,this.flush2D();const r=this.gl;switch(e){case 0:r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO);break;case 1:r.blendEquation(r.FUNC_ADD),r.blendFunc(r.SRC_ALPHA,r.ONE);break;case 2:r.blendEquationSeparate(r.FUNC_ADD,r.MAX),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA);break}}useShader(e){e!==this.currentShader&&(this.flush2D(),this.currentShader=e,e&&this.gl.useProgram(e.program))}uniform(e,r){const o=this.currentShader;if(!o)return;this.flush2D();const i=o.uniforms[e];i==null||i.setter(r)}save(){if(this.stateStack.length>999)throw new Error("State stack has reach a max size of 999");const e=this.state,r=e.color;this.stateStack.push({width:e.width,height:e.height,color:{r:r.r,g:r.g,b:r.b,a:r.a},cameraX:e.cameraX,cameraY:e.cameraY,zoom:e.zoom,blendMode:e.blendMode})}restore(){const e=this.stateStack.pop();if(!e)throw new Error("State stack is empty");this.state.color.r=e.color.r,this.state.color.g=e.color.g,this.state.color.b=e.color.b,this.state.color.a=e.color.a,this.state.cameraX=e.cameraX,this.state.cameraY=e.cameraY,this.state.zoom=e.zoom,this.viewport(e.width,e.height),this.blendMode(e.blendMode)}createDynamicDrawBuffer(e){const r=this.gl,o=r.createBuffer();if(!o)throw new Error("Failed to create WebGL buffer");return r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,e,r.DYNAMIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),o}createVBO(e){const r=this.gl,o=r.createBuffer();if(!o)throw new Error("Failed to create WebGL buffer");return r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),o}createIBO(e){const r=this.gl,o=r.createBuffer();if(!o)throw new Error("Failed to create WebGL buffer");return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),o}bindVertexArrayAttribute(e,r,o=4,i=this.gl.FLOAT,s=!1,n=0,a=0){const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),l.enableVertexAttribArray(e),l.vertexAttribPointer(e,o,i,s,n,a),l.bindBuffer(l.ARRAY_BUFFER,null)}createEmptyTexture(e=this.state.width,r=this.state.height,o=!1){if(e<0||r<0)throw new Error("Negative width/height");const i=this.gl,s=i.createTexture();if(!s)throw new Error("Failed to create WebGL texture");i.bindTexture(i.TEXTURE_2D,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,r,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null);const n=new ar(s,0,i.RGBA,e,r,0,i.RGBA,i.UNSIGNED_BYTE);return n.flipY=o,n}createTexture(e){const r=this.createEmptyTexture(e.width,e.height),o=this.gl;return o.bindTexture(o.TEXTURE_2D,r.glTexture),o.texImage2D(o.TEXTURE_2D,r.level,r.internalFormat,r.format,r.type,e),o.bindTexture(o.TEXTURE_2D,null),r}createTextureFromImageUrl(e){return new Promise((r,o)=>{try{const i=new Image;i.onload=()=>{try{const s=this.createTexture(i);s.image=i,r(s)}catch(s){o(s)}},i.onabort=i.onerror=s=>{o(s)},i.src=e}catch(i){o(i)}})}createDepthTexture(e=this.state.width,r=this.state.height){if(e<0||r<0)throw new Error("Negative width/height");const o=this.gl,i=o.createTexture();if(!i)throw new Error("Failed to create WebGL texture");return o.bindTexture(o.TEXTURE_2D,i),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.DEPTH_COMPONENT32F,e,r,0,o.DEPTH_COMPONENT,o.FLOAT,null),o.bindTexture(o.TEXTURE_2D,null),new ar(i,0,o.DEPTH_COMPONENT32F,e,r,0,o.DEPTH_COMPONENT,o.FLOAT)}createTextureFromRgbaPixels(e,r,o){const i=this.createEmptyTexture(e,r),s=this.gl;return s.bindTexture(s.TEXTURE_2D,i.glTexture),s.texImage2D(s.TEXTURE_2D,i.level,i.internalFormat,e,r,i.border,i.format,i.type,o),s.bindTexture(s.TEXTURE_2D,null),i}setTextureFromPixels(e,r,o,i){const s=this.gl;if(!e.glTexture)throw new Error("Texture has been deleted");s.bindTexture(s.TEXTURE_2D,e.glTexture),s.texImage2D(s.TEXTURE_2D,e.level,e.internalFormat,r,o,e.border,e.format,e.type,i),s.bindTexture(s.TEXTURE_2D,null),e.width=r,e.height=o}deleteTexture(e){e.glTexture&&(this.gl.deleteTexture(e.glTexture),e.glTexture=void 0),e.width=0,e.height=0}resizeTexture(e,r=this.state.width,o=this.state.height,i=!1){if(r<0||o<0)throw new Error("Negative width/height");if(e.width===r&&e.height===o)return;const s=this.gl;if(!e.glTexture)throw new Error("Texture has been deleted");s.bindTexture(s.TEXTURE_2D,e.glTexture),s.texImage2D(s.TEXTURE_2D,e.level,e.internalFormat,r,o,e.border,e.format,e.type,null),s.bindTexture(s.TEXTURE_2D,null),e.width=r,e.height=o}createGlShader(e,r){const o=this.gl,i=o.createShader(r);if(!i)throw new Error("Failed to create WebGL shader");if(o.shaderSource(i,e),o.compileShader(i),!o.getShaderParameter(i,o.COMPILE_STATUS))throw new Error(`Failed to compile WebGL shader:

`+o.getShaderInfoLog(i));return i}createShader(e,r){const o=this.gl,i=this.createGlShader(e,o.VERTEX_SHADER),s=this.createGlShader(r,o.FRAGMENT_SHADER),n=o.createProgram();if(!n)throw new Error("Failed to create WebGL program");o.attachShader(n,i),o.attachShader(n,s);const a=this.attribLocations;if(a)for(let p in a)a.hasOwnProperty(p)&&o.bindAttribLocation(n,a[p],p);if(o.linkProgram(n),!o.getProgramParameter(n,o.LINK_STATUS))throw new Error(`Failed to link WebGL program:

`+o.getProgramInfoLog(n));const l=new Cl(i,s,n),d=o.getProgramParameter(n,o.ACTIVE_ATTRIBUTES);for(let p=0;p<d;++p){const h=o.getActiveAttrib(n,p);if(!h)throw new Error("Failed to get WebGL attribute info");const y=o.getAttribLocation(n,h.name);l.registerAttribute(h.name,h.size,h.type,y)}const u=o.getProgramParameter(n,o.ACTIVE_UNIFORMS),f={count:0};for(let p=0;p<u;++p){const h=o.getActiveUniform(n,p);if(!h)throw new Error("Failed to get WebGL uniform info");const y=o.getUniformLocation(n,h.name);if(y==null)throw new Error("Failed to get uniform location");l.registerUniform(h.name,h.size,h.type,y,Pl(o,h.name,h.size,h.type,y,f))}return l}deleteShader(e){const r=this.gl;e.program&&(r.deleteProgram(e.program),e.program=void 0),e.vertShader&&(r.deleteShader(e.vertShader),e.vertShader=void 0),e.fragShader&&(r.deleteShader(e.fragShader),e.fragShader=void 0),e.uniforms={},e.attributes={}}createFrameBuffer(){const r=this.gl.createFramebuffer();if(!r)throw new Error("Failed to create WebGL frame buffer");return new xl(r)}attachColorTexture(e,r){this.attachColorTextures(e,r?[r]:[])}attachColorTextures(e,r){const o=this.gl;if(!e.glFrameBuffer)throw new Error("Frame buffer has been deleted");o.bindFramebuffer(o.FRAMEBUFFER,e.glFrameBuffer),e.textures.length=r.length,r.forEach((i,s)=>{if(!i.glTexture)throw new Error("Texture has been deleted");o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+s,o.TEXTURE_2D,i.glTexture,i.level),e.textures[s]=i}),o.drawBuffers(r.map((i,s)=>o.COLOR_ATTACHMENT0+s)),o.bindFramebuffer(o.FRAMEBUFFER,null),this.currentFrameBuffer=void 0}attachDepthTexture(e,r){const o=this.gl;if(!e.glFrameBuffer)throw new Error("Frame buffer has been deleted");if(o.bindFramebuffer(o.FRAMEBUFFER,e.glFrameBuffer),r){if(!r.glTexture)throw new Error("Texture has been deleted");o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,r.glTexture,r.level),e.depthTexture=r}else o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,null,0),e.depthTexture=void 0;o.bindFramebuffer(o.FRAMEBUFFER,null),this.currentFrameBuffer=void 0}attachStencilTexture(e,r){const o=this.gl;if(!e.glFrameBuffer)throw new Error("Frame buffer has been deleted");if(o.bindFramebuffer(o.FRAMEBUFFER,e.glFrameBuffer),r){if(!r.glTexture)throw new Error("Texture has been deleted");o.framebufferTexture2D(o.FRAMEBUFFER,o.STENCIL_ATTACHMENT,o.TEXTURE_2D,r.glTexture,r.level),e.stencilTexture=r}else o.framebufferTexture2D(o.FRAMEBUFFER,o.STENCIL_ATTACHMENT,o.TEXTURE_2D,null,0),e.stencilTexture=void 0;o.bindFramebuffer(o.FRAMEBUFFER,null),this.currentFrameBuffer=void 0}deleteFrameBuffer(e,r=!1){e.glFrameBuffer&&(this.gl.deleteFramebuffer(e.glFrameBuffer),e.glFrameBuffer=void 0),r&&e.textures.forEach(o=>this.deleteTexture(o))}resizeFrameBuffer(e,r=this.state.width,o=this.state.height){e.textures.forEach(i=>this.resizeTexture(i,r,o)),e.depthTexture&&this.resizeTexture(e.depthTexture,r,o),e.stencilTexture&&this.resizeTexture(e.stencilTexture,r,o)}startCapture(e){this.flush2D(),this.frameBufferStack.push(e)}endCapture(){this.flush2D(),this.frameBufferStack.pop()}switchFrameBuffer(){const e=this.frameBufferStack,r=e.length?e[e.length-1]:void 0;if(r!==this.currentFrameBuffer){this.currentFrameBuffer=r||void 0;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,(r==null?void 0:r.glFrameBuffer)||null)}}disposeGeometry(e){const r=this.gl;e.vao&&(r.deleteVertexArray(e.vao),e.vao=void 0),e.ibo&&(r.deleteBuffer(e.ibo),e.ibo=void 0),e.attributes.forEach(o=>{o.vbo&&(r.deleteBuffer(o.vbo),o.vbo=void 0)})}drawGeometry(e){if(this.drawing2D)throw new Error("Renderer.end2D must be call before draw geometry");const r=this.gl;if(!e.vao){const o=r.createVertexArray();if(!o)throw new Error("Failed to create Vertex Array Object");e.vao=o,r.bindVertexArray(o);const i=this.currentShader;if(!i)throw new Error("Shader not set");const s=this.attribLocations;e.attributes.forEach(n=>{if(n.vbo||(n.vbo=this.createVBO(n.vertices)),s&&s.hasOwnProperty(n.name))this.bindVertexArrayAttribute(s[n.name],n.vbo,n.componentSize);else{const a=i.attributes[n.name];a&&this.bindVertexArrayAttribute(a.location,n.vbo,n.componentSize)}})}switch(r.bindVertexArray(e.vao),e.ibo||(e.ibo=this.createIBO(e.indices)),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.ibo),this.switchFrameBuffer(),e.type){case jt.TYPE_TRIANGLES:r.drawElements(r.TRIANGLES,e.indices.length,r.UNSIGNED_SHORT,0);break;case jt.TYPE_LINES:r.drawElements(r.LINES,e.indices.length,r.UNSIGNED_SHORT,0);break}r.bindVertexArray(null)}begin2D(){if(this.drawing2D)throw new Error("Renderer.end2D must be call before begin");this.drawing2D=!0}end2D(){if(!this.drawing2D)throw new Error("Renderer.begin2D must be call before end");this.flush2D(),this.drawing2D=!1}setCameraPosition(e,r){this.state.cameraX=e,this.state.cameraY=r}centerCamera(){this.setCameraPosition(this.state.width/2,this.state.height/2)}setZoom(e){this.state.zoom=e}setColor(e,r,o,i=1){this.state.color.r=e,this.state.color.g=r,this.state.color.b=o,this.state.color.a=i}flush2D(){if(!!this.drawing2D&&this.batchIndex!==0)switch(this.batchType){case 0:this.flushMesh();break;case 1:this.flushLines();break}}flushMesh(){var l;const e=this.batchTexture,r=this.batchIndex;this.batchIndex=0;const o=this.gl;let i=this.currentShader;if(i||(i=this.IMAGE_2D_SHADER),!i.program)throw new Error("Shader has been deleted");o.useProgram(i.program);const s=i.attributes[Ko];if(s){o.bindBuffer(o.ARRAY_BUFFER,this.batchPositionBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.batchPositionVertices);const d=s.location;o.enableVertexAttribArray(d),o.vertexAttribPointer(d,2,o.FLOAT,!1,0,0)}const n=i.attributes[wl];if(n){o.bindBuffer(o.ARRAY_BUFFER,this.batchTexCoordBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.batchTexCoordVertices);const d=n.location;o.enableVertexAttribArray(d),o.vertexAttribPointer(d,2,o.FLOAT,!1,0,0)}const a=i.attributes[Zo];if(a){o.bindBuffer(o.ARRAY_BUFFER,this.batchColorBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,this.batchColorVertices);const d=a.location;o.enableVertexAttribArray(d),o.vertexAttribPointer(d,4,o.FLOAT,!1,0,0)}(l=i.uniforms[yl])==null||l.setter(e==null?void 0:e.glTexture),this.switchFrameBuffer(),o.drawArrays(o.TRIANGLES,0,r*6)}flushLines(){const e=this.batchIndex;this.batchIndex=0;const r=this.gl;let o=this.currentShader;if(o||(o=this.COLOR_2D_SHADER),!o.program)throw new Error("Shader has been deleted");r.useProgram(o.program),r.bindBuffer(r.ARRAY_BUFFER,this.batchPositionBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.batchPositionVertices);const i=o.attributes[Ko].location;r.enableVertexAttribArray(i),r.vertexAttribPointer(i,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.batchColorBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.batchColorVertices);const s=o.attributes[Zo].location;r.enableVertexAttribArray(s),r.vertexAttribPointer(s,4,r.FLOAT,!1,0,0),this.switchFrameBuffer(),r.drawArrays(r.LINES,0,e*2)}drawLine(e,r,o,i){if(!this.drawing2D)throw new Error("Renderer.begin2D must be call before draw");(this.batchIndex>=this.batchSize*3||this.batchType!==1)&&this.flush2D(),this.batchType=1;const s=this.state.zoom,n=2/this.state.width*s,a=2/this.state.height*s,l=this.state.cameraX,d=this.state.cameraY,u=this.batchPositionVertices,f=this.batchIndex*2*2;u[f]=(e-l)*n,u[f+1]=(r-d)*a,u[f+2]=(o-l)*n,u[f+3]=(i-d)*a;const p=this.batchIndex*2*4,h=this.batchColorVertices,y=this.state.color;for(let w=0;w<2;++w){const A=w*4;h[p+A]=y.r,h[p+1+A]=y.g,h[p+2+A]=y.b,h[p+3+A]=y.a}this.batchIndex+=1}pushCwQuadVertices(e,r,o,i,s,n,a,l,d,u,f,p,h,y,w,A,b){if(!this.drawing2D)throw new Error("Renderer.begin2D must be call before draw");(this.batchIndex>=this.batchSize||e!==this.batchTexture||this.batchType!==0)&&this.flush2D(),this.batchType=0,this.batchTexture=e;const g=this.batchIndex*3*2*2,m=this.batchPositionVertices,v=this.batchTexCoordVertices;m[g]=r,m[g+1]=o,m[g+2]=i,m[g+3]=s,m[g+4]=l,m[g+5]=d,m[g+6]=i,m[g+7]=s,m[g+8]=n,m[g+9]=a,m[g+10]=l,m[g+11]=d,e.flipY&&([u,f,A,b]=[A,b,u,f],[p,h,y,w]=[y,w,p,h]),v[g]=u,v[g+1]=f,v[g+2]=p,v[g+3]=h,v[g+4]=A,v[g+5]=b,v[g+6]=p,v[g+7]=h,v[g+8]=y,v[g+9]=w,v[g+10]=A,v[g+11]=b;const C=this.batchIndex*3*2*4,T=this.batchColorVertices,S=this.state.color;for(let R=0;R<2*3;++R){const L=R*4;T[C+L]=S.r,T[C+1+L]=S.g,T[C+2+L]=S.b,T[C+3+L]=S.a}this.batchIndex+=1}drawCwQuad(e,r,o,i,s,n,a,l,d,u=0,f=e.height,p=e.width,h=e.height,y=e.width,w=0,A=0,b=0){const g=this.state.zoom,m=2/this.state.width*g,v=2/this.state.height*g,C=1/e.width,T=1/e.height,S=this.state.cameraX,R=this.state.cameraY;this.pushCwQuadVertices(e,(r-S)*m,(o-R)*v,(i-S)*m,(s-R)*v,(n-S)*m,(a-R)*v,(l-S)*m,(d-R)*v,u*C,f*T,p*C,h*T,y*C,w*T,A*C,b*T)}drawRect(e,r=0,o=0,i=e.width,s=e.height,n=!1,a=!1,l=0,d=0,u=e.width,f=e.height){const p=r,h=r+i,y=o+s,w=o;let A=l,b=l+u,g=d,m=d+f;n&&([A,b]=[b,A]),a&&([g,m]=[m,g]),this.drawCwQuad(e,p,w,h,w,h,y,p,y,A,m,b,m,b,g,A,g)}draw(e,r=0,o=0,i=e.width,s=e.height,n=!1,a=!1,l=0,d=0,u=e.width,f=e.height,p=0,h=0,y=0,w=0,A=0,b=1,g=1){const m=r,v=r+i,C=o+s,T=o,S=Math.cos(A),R=Math.sin(A),L=S*b,$=-R*g,V=-S*y*b+p+y+w*R*g,G=R*b,z=S*g,I=-S*w*g+h-y*R*b+w,F=m,_=T,M=v,k=T,Y=v,ie=C,oe=m,de=C;let Pe=l,ce=l+u,ne=d,ge=d+f;n&&([Pe,ce]=[ce,Pe]),a&&([ne,ge]=[ge,ne]),this.drawCwQuad(e,L*F+$*_+V,G*F+z*_+I,L*M+$*k+V,G*M+z*k+I,L*Y+$*ie+V,G*Y+z*ie+I,L*oe+$*de+V,G*oe+z*de+I,Pe,ge,ce,ge,ce,ne,Pe,ne)}drawLabel(e,r=0,o=0,i=e.width,s=e.height,n=!1,a=!1,l=0,d=0,u=e.width,f=e.height,p=0,h=0,y=0,w=0,A=0,b=1,g=1){this.draw(e.texture(this),r,o,i,s,n,a,l,d,u,f,p,h,y,w,A,b,g)}};let Hr=Dt;c(Hr,"_sharedInstance");function ti(t,e,r,o,i=Math.min(8,e/2)){let s=0,n=e;const a=Math.ceil(2*Math.PI*e/(i/t.state.zoom)),l=Math.PI*2/a,d=Math.cos(l),u=Math.sin(l),f=r,p=o;for(let h=0;h<a;++h){const y=s*d-n*u,w=s*u+n*d;t.drawLine(s+f,n+p,y+f,w+p),s=y,n=w}}function bt(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}function xe(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function ze(t){const e=1/Math.sqrt(t[0]**2+t[1]**2+t[2]**2);return[t[0]*e,t[1]*e,t[2]*e]}function ot(t,e){let r=[0,0,0];return ln(r,t,e),ze(r)}function lr(t,e){return an([0,0,0],t,e)}function Rl(t,e){return qr([0,0,0,1],t,e)}function El(t){return sn([0,0,0,1],t)}function pt(t,e){return El(Rl(t,e))}function Ll(t){const e=t.map(be=>be.point);function r(...be){return be.reduce((Be,He)=>Be+t[He].visibility,0)/be.length}const o=ze(xe(bt(e[11],e[12]),bt(e[24],e[23]))),i=ze(xe(bt(e[11],e[23]),bt(e[12],e[24]))),s=ot(i,o),n=pt(s,o),a=r(11,12,23,24),l=xe(bt(e[3],e[6]),bt(e[9],e[10])),d=ot(xe(e[7],e[8]),l);ee(l,l,n),ee(d,d,n);const u=r(8,6,5,4,1,2,3,7,0,9,10),f=ze(xe(e[11],e[13])),p=ot(i,f),h=pt(p,f);ee(f,f,n),ee(p,p,n);const y=r(11,13),w=ze(xe(e[12],e[14])),A=ot(i,w),b=pt(A,w);ee(w,w,n),ee(A,A,n);const g=r(12,14),m=ze(xe(e[13],e[15])),v=ot(i,m),C=pt(v,m);ee(m,m,h),ee(v,v,h);const T=r(13,15),S=ze(xe(e[14],e[16])),R=ot(i,S),L=pt(R,S);ee(S,S,b),ee(R,R,b);const $=r(14,16),V=ze(xe(e[15],bt(e[17],e[19]))),G=lr(V,xe(e[21],e[15]));ee(V,V,C),ee(G,G,C);const z=r(15,17,19,21),I=ze(xe(e[16],bt(e[18],e[20]))),F=lr(I,xe(e[22],e[16]));ee(I,I,L),ee(F,F,L);const _=r(16,18,20,22),M=ze(xe(e[23],e[25])),k=ot(i,M),Y=pt(k,M);ee(M,M,n),ee(k,k,n);const ie=r(23,25),oe=ze(xe(e[24],e[26])),de=ot(i,oe),Pe=pt(de,oe);ee(oe,oe,n),ee(de,de,n);const ce=r(24,26),ne=ze(xe(e[25],e[27])),ge=ot(i,ne),Fe=pt(ge,ne);ee(ne,ne,Y),ee(ge,ge,Y);const he=r(25,27),Te=ze(xe(e[26],e[28])),Me=ot(i,Te),Ie=pt(Me,Te);ee(Te,Te,Pe),ee(Me,Me,Pe);const Ee=r(26,28),ve=ze(xe(e[31],e[29])),Le=lr(ve,xe(e[27],e[31]));ee(ve,ve,Fe),ee(Le,Le,Fe);const me=r(27,29,31),Ce=ze(xe(e[32],e[30])),E=lr(Ce,xe(e[28],e[32]));ee(Ce,Ce,Ie),ee(E,E,Ie);const H=r(28,30,32);return{trunk:{up:o,forward:s,visibility:a},head:{up:l,forward:d,visibility:u},leftUpperArm:{up:f,forward:p,visibility:y},leftLowerArm:{up:m,forward:v,visibility:T},leftHand:{up:V,forward:G,visibility:z},leftThigh:{up:M,forward:k,visibility:ie},leftCalf:{up:ne,forward:ge,visibility:he},leftFoot:{up:Le,forward:ve,visibility:me},rightUpperArm:{up:w,forward:A,visibility:g},rightLowerArm:{up:S,forward:R,visibility:$},rightHand:{up:I,forward:F,visibility:_},rightThigh:{up:oe,forward:de,visibility:ce},rightCalf:{up:Te,forward:Me,visibility:Ee},rightFoot:{up:E,forward:Ce,visibility:H}}}var kl=`#version 300 es\r
\r
precision highp float;\r
\r
in vec4 v_color;\r
in vec3 v_normal;\r
\r
uniform vec3 u_directionalLightDirection;\r
uniform vec4 u_color;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = v_color * u_color;\r
    float light = (dot(v_normal, -normalize(u_directionalLightDirection)) + 1.0) * 0.5;\r
    outColor.rgb *= (0.5 + 0.5 * light);\r
}\r
`,Fl=`#version 300 es\r
\r
in vec3 a_position;\r
in vec3 a_normal;\r
in vec4 a_color;\r
\r
uniform mat4 u_pvMatrix;\r
uniform mat4 u_mMatrix;\r
\r
out vec4 v_color;\r
out vec3 v_normal;\r
\r
void main() {\r
    gl_Position = u_pvMatrix * u_mMatrix * vec4(a_position, 1.0);\r
    v_color = a_color;\r
    v_normal = transpose(inverse(mat3(u_mMatrix))) * normalize(a_normal);\r
}\r
`,Il=`#version 300 es\r
\r
precision mediump float;\r
\r
in vec2 v_texCoord;\r
in vec4 v_color;\r
\r
uniform sampler2D u_texture;\r
uniform sampler2D u_deep;\r
uniform float u_threshold;\r
\r
out vec4 outColor;\r
\r
vec4 getPixel(sampler2D texture, int dx, int dy) {\r
    ivec2 texSize = textureSize(texture, 0);\r
    ivec2 pos = ivec2(v_texCoord.xy * vec2(texSize.xy));\r
    int x = max(0, min(texSize.x - 1, pos.x + dx));\r
    int y = max(0, min(texSize.y - 1, pos.y + dy));\r
    return texelFetch(texture, ivec2(x, y), 0);\r
}\r
\r
void main() {\r
    float deep = texture(u_deep, v_texCoord).x;\r
    if (\r
    deep - getPixel(u_deep, -1, 0).x > u_threshold && getPixel(u_texture, -1, 0).a == 1.0\r
    || deep - getPixel(u_deep, 1, 0).x > u_threshold && getPixel(u_texture, 1, 0).a == 1.0\r
    || deep - getPixel(u_deep, 0, -1).x > u_threshold && getPixel(u_texture, 0, -1).a == 1.0\r
    || deep - getPixel(u_deep, 0, 1).x > u_threshold && getPixel(u_texture, 0, 1).a == 1.0\r
    ) {\r
        outColor = v_color;\r
    }\r
}\r
`;const jr=8;var Ol=se({components:{NSpin:cn,NIcon:Vo,NPopconfirm:rl,InfoCircleOutlined:Cn,UndoOutlined:Ln},props:{model:Nr,camera:Go,landmarks:Array,readonly:Boolean,highlights:Array},setup(t){const e=B(),r=B(),o=B(!1);let i=0,s=0,n,a,l,d,u,f;const p=[0,-1,0],h=t.camera||new Go;h.far=5;const y=new ml;y.callback=z;const w=t.model||new Nr;let A=null,b=!1,g=!1;const m=new Xo,v=we(),C=we(),T=we(),S=wr(),R=we(),L=we();rt(async function(){try{o.value=!0,await w.init()}finally{o.value=!1}n=new Hr(r.value),a=n.createShader(Fl,kl),l=n.createShader(qo,Il),d=n.createEmptyTexture(),d.flipY=!0,u=n.createDepthTexture(),u.flipY=!0,f=n.createFrameBuffer(),n.attachColorTexture(f,d),n.attachDepthTexture(f,u),G(),y.setup(r.value),V(t.landmarks)}),St(function(){n.deleteShader(a),n.deleteShader(l),n.deleteFrameBuffer(f,!0),y.unload(r.value)}),Ve(()=>t.landmarks,V),Ve(()=>t.highlights,function(F){Object.keys(q).forEach(_=>{const M=w[_];(F==null?void 0:F.length)?M.active=!!F.includes(_):M.active=!0}),I()});function $(){Object.keys(q).forEach(F=>{const _=w[F];_.forward=[0,0,1],_.up=[0,1,0]}),h.zoom=1,h.rotateX=0,h.rotateY=0,Ye(h.target,0,0,0),h.update(),w.update(h.camera),I()}function V(F){if(F==null?void 0:F.length){const _=Ll(F);Object.keys(q).forEach(M=>{const k=w[M],Y=_[M];k.forward=Y.forward,k.up=Y.up,k.active=Y.visibility>dn})}else Object.keys(q).forEach(_=>{const M=w[_];M.forward=[0,0,1],M.up=[0,1,0],M.active=!0});h.zoom=1,h.rotateX=0,h.rotateY=0,Ye(h.target,0,0,0),h.update(),w.update(h.camera),I()}function G(){const F=e.value.getBoundingClientRect();i=F.width,s=F.height,n.resizeCanvas(i,s),n.resizeFrameBuffer(f),h.fitViewport(i,s)}function z(F){if(h.onInput(F),w.update(h.camera),!t.readonly){if(F.mouseLeft||(b=!1),g&&!F.isKeyPressed("Shift")&&(g=!1,b=!1),!b){A=null;let k=1/0;if(w.root){const Y=[w.root];for(;;){const ie=Y.pop();if(!ie)break;if(Y.push(...ie.children),!ie.controlPoint)continue;const oe=(ie.controlPointScreenPosition[0]+1)/2*i,de=(ie.controlPointScreenPosition[1]+1)/2*s;bl(F.mouseX,s-F.mouseY,oe,de,jr)&&ie.controlPointScreenPosition[2]<k&&(A=ie,k=ie.controlPointScreenPosition[2])}}}const _=(F.mouseX/i-.5)*2,M=(-F.mouseY/s+.5)*2;if((F.mouseLeft&&!b||F.isKeyPressedThisFrame("Shift")&&b)&&A){b=!0;const k=A;cl(m,_,M,k.originWorldPosition[0],k.originWorldPosition[1],k.originWorldPosition[2],k.controlPointWorldPosition[0],k.controlPointWorldPosition[1],k.controlPointWorldPosition[2],h.camera),Bt(v,k.originWorldPosition),Bt(C,k.controlPointWorldPosition),k.parent&&(xr(C,C,k.parent.worldMatrix),xr(v,v,k.parent.worldMatrix)),_t(C,C,v),$t(C,C),Bt(R,k.forward),Bt(L,k.up)}else if(F.mouseLeft&&b&&A){if(F.isKeyPressed("Shift")){g=!0;const k=_-m.dragStartMousePosition[0],Y=M-m.dragStartMousePosition[1],ie=k+Y;un(S,C,ie*Math.PI*2);const oe=A;ee(oe.forward,R,S),$t(oe.forward,oe.forward),ee(oe.up,L,S),$t(oe.up,oe.up),w.update(h.camera,oe)}else if(dl(m,_,M,h.camera)){const k=A;Bt(T,m.rayResult1),k.parent&&xr(T,T,k.parent.worldMatrix),_t(T,T,v),hn(S,C,T),ee(k.forward,R,S),$t(k.forward,k.forward),ee(k.up,L,S),$t(k.up,k.up),w.update(h.camera,k)}}}I()}function I(){if(n.blendMode(n.BLEND_MODE_PIGMENT),n.depthTest(!0),n.cullFace(n.SIDE_BACK),n.startCapture(f),n.clearColor(0,0,0,0),n.clear(!0,!0,!1),n.useShader(a),n.uniform("u_directionalLightDirection",p),n.uniform("u_pvMatrix",h.pvMatrix),w.render(n),n.endCapture(),n.save(),n.depthTest(!1),n.clearColor(242/255,242/255,242/255,1),n.clear(!0,!1,!1),n.centerCamera(),n.begin2D(),n.setColor(1,1,1,1),n.useShader(),n.draw(d),n.setColor(0,0,0,.5),n.useShader(l),n.uniform("u_threshold",1/1e3/(h.far/2)),n.uniform("u_deep",u),n.draw(d),n.end2D(),n.restore(),!t.readonly){n.depthTest(!1),n.useShader(),n.begin2D();const F=[w.root];for(;;){const _=F.pop();if(!_)break;if(F.push(..._.children),_.controlPoint){_.active?n.setColor(1,0,0,_===A?1:.25):n.setColor(0,0,0,_===A?1:.25);const M=_.controlPointScreenPosition;ti(n,jr,M[0]*i/2,M[1]*s/2),ti(n,jr-2,M[0]*i/2,M[1]*s/2)}}n.end2D()}}return{container:e,canvas:r,loading:o,reset:$}}});const Dl={class:"skeleton",ref:"container"},zl={ref:"canvas"},Bl={class:"anchor",style:{top:"4px",left:"4px"}},$l={href:"https://sketchfab.com/3d-models/skeleton-4de7b96a351a4a35b1b6e5415277ff07",target:"_blank",title:"Author of the original model"},Ul={key:0,class:"anchor",style:{top:"4px",right:"4px"}},Vl=ct(" Reset model? ");function Nl(t,e,r,o,i,s){const n=et("n-spin"),a=et("info-circle-outlined"),l=et("n-icon"),d=et("undo-outlined"),u=et("n-popconfirm");return je(),ut("div",Dl,[ye(n,{show:t.loading},{default:ht(()=>[Ne("canvas",zl,null,512)]),_:1},8,["show"]),Ne("div",Bl,[Ne("a",$l,[ye(l,{size:"16",color:"#000",class:"icon-btn"},{default:ht(()=>[ye(a)]),_:1})])]),t.readonly?Wt("",!0):(je(),ut("div",Ul,[ye(u,{onPositiveClick:t.reset},{trigger:ht(()=>[ye(l,{size:"22",color:"#000",class:"icon-btn",title:"Reset"},{default:ht(()=>[ye(d)]),_:1})]),default:ht(()=>[Vl]),_:1},8,["onPositiveClick"])]))],512)}var Wl=Yr(Ol,[["render",Nl]]);function Hl(){var t;return!!((t=document.createElement("canvas"))==null?void 0:t.getContext("webgl2"))}function jl(){return"PointerEvent"in window}class Xl{constructor(){c(this,"chunks",[])}async load(e){const r=await Pr.readJson("dataset/summary.json"),o=[],i=[];for(let a of r){const l=a.index;let d=Pr.readJson(`dataset/photos_${l}.json`);o.push(d);let u={};for(let f in pe){const p=u[f]=Pr.read(`dataset/f_${pe[f].filename}_${l}.dat`);o.push(p)}i.push({photos:d,buffers:u})}const s=o.length;let n=0;o.forEach(a=>a.then(()=>{n+=1,e(n,s)})),await Promise.all(o);for(let a of i){const l=await a.photos,d={};for(let u in a.buffers)d[u]=new Float32Array(await a.buffers[u]);this.chunks.push({photos:l,buffers:d})}}}const ri=Math.PI/180*45;class Yl{constructor(){c(this,"rotation",[0,0,0,0])}prepare(e){const r=Se(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),o=Se(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition);this.rotation=Ct(o,r)}match(e,r,o){const i=pe.chest.getChestRotation(r.chest,o);if(yt(i))return;const s=Ue(this.rotation,i),n=Ue(this.rotation,Qe(i));if(n>ri&&s>ri)return;const a=Math.PI-s,l=Math.PI-n;e.accepted=!0,a>l?e.score=a:(e.score=l,e.flipped=!0)}}const oi=Math.PI/180*45;class Gl{constructor(){c(this,"rotation",[0,0,0,0])}prepare(e){const r=Se(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),o=Se(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition);this.rotation=Ct(o,r)}match(e,r,o){const i=pe.crotch.getCrotchRotation(r.crotch,o);if(yt(i))return;const s=Ue(this.rotation,i),n=Ue(this.rotation,Qe(i));if(n>oi&&s>oi)return;const a=Math.PI-s,l=Math.PI-n;e.accepted=!0,a>l?e.score=a:(e.score=l,e.flipped=!0)}}const kt=Math.PI/180*45,cr=Math.PI/180*60,Ft=[0,0,1];class ii{constructor(e){c(this,"isLeft");c(this,"upperArmZAxisAngle",0);c(this,"lowerArmZAxisAngle",0);c(this,"elbowAngle",0);c(this,"elbowViewAngle",0);c(this,"upperArmLocalDir",[0,0,0]);c(this,"upperArmLocalDirMirror",[0,0,0]);c(this,"chestRotation",[0,0,0,1]);this.isLeft=e}prepare(e){let r=e.rightUpperArm.originViewPosition,o=e.rightUpperArm.controlPointViewPosition,i=e.rightLowerArm.controlPointViewPosition;this.isLeft&&(r=e.leftUpperArm.originViewPosition,o=e.leftUpperArm.controlPointViewPosition,i=e.leftLowerArm.controlPointViewPosition);const s=Se(r,o),n=Se(o,i);this.upperArmZAxisAngle=le(Ft,s),this.lowerArmZAxisAngle=le(Ft,n),this.elbowAngle=le(s,n),this.elbowViewAngle=At(to(o,r,o,i))-Math.PI,this.isLeft?(this.upperArmLocalDir=ke(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=ke(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0)):(this.upperArmLocalDir=ke(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=ke(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0));const a=Se(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),l=Se(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition);this.chestRotation=Ct(l,a)}match(e,r,o){const i=pe.chest.getChestRotation(r.chest,o);if(yt(i))return;const s=pe.upperArm.getLeftUpperArmDir(r.upperArm,o),n=pe.lowerArm.getLeftLowerArmDir(r.lowerArm,o),a=pe.upperArm.getRightUpperArmDir(r.upperArm,o),l=pe.lowerArm.getRightLowerArmDir(r.lowerArm,o),d=le(Ft,s),u=le(Ft,n),f=le(s,n),p=At(Qt(Jt(s),n))-Math.PI,h=Math.abs(this.upperArmZAxisAngle-d),y=Math.abs(this.lowerArmZAxisAngle-u),w=Math.abs(this.elbowAngle-f),A=Math.abs(this.elbowViewAngle-p*(this.isLeft?1:-1)),b=le(s,this.isLeft?this.upperArmLocalDir:this.upperArmLocalDirMirror),g=Ue(this.chestRotation,this.isLeft?i:Qe(i));let m=(Math.PI-h)*(Math.PI-y)*(Math.PI-w)*(Math.PI*2-A)*(Math.PI-b)*(Math.PI-g);const v=le(Ft,a),C=le(Ft,l),T=le(a,l),S=At(Qt(Jt(a),l))-Math.PI,R=Math.abs(this.upperArmZAxisAngle-v),L=Math.abs(this.lowerArmZAxisAngle-C),$=Math.abs(this.elbowAngle-T),V=Math.abs(this.elbowViewAngle-S*(this.isLeft?-1:1)),G=le(a,this.isLeft?this.upperArmLocalDirMirror:this.upperArmLocalDir),z=Ue(this.chestRotation,this.isLeft?Qe(i):i);let I=(Math.PI-R)*(Math.PI-L)*(Math.PI-$)*(Math.PI*2-V)*(Math.PI-G)*(Math.PI-z);(Ke(s)||Ke(n)||h>kt||y>kt||w>cr||A>kt||b>cr)&&(m=-1/0),(Ke(a)||Ke(l)||R>kt||L>kt||$>cr||V>kt||G>cr)&&(I=-1/0),isFinite(m)&&m>I?(e.accepted=!0,e.score=m,e.flipped=!this.isLeft):isFinite(I)&&(e.accepted=!0,e.score=I,e.flipped=this.isLeft)}}const ni=Math.PI/180*45;class Kl{constructor(){c(this,"rotation",[0,0,0,0])}prepare(e){const r=e.head.landmarksViewPosition[0],o=e.head.landmarksViewPosition[1],i=Se(o,r),s=Se(e.head.originViewPosition,e.head.controlPointViewPosition);this.rotation=fn(i,s)}match(e,r,o){const i=pe.face.getFaceRotation(r.face,o);if(yt(i))return;const s=Ue(this.rotation,i),n=Ue(this.rotation,Qe(i));if(n>ni&&s>ni)return;const a=Math.PI-s,l=Math.PI-n;e.accepted=!0,a>l?e.score=a:(e.score=l,e.flipped=!0)}}const dr=Math.PI/180*45;class si{constructor(e){c(this,"isLeft");c(this,"thighLocalDir",[0,0,0]);c(this,"thighLocalDirMirror",[0,0,0]);c(this,"crotchRotation",[0,0,0,1]);this.isLeft=e}prepare(e){this.isLeft?(this.thighLocalDir=ke(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=ke(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0)):(this.thighLocalDir=ke(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=ke(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0));const r=Se(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),o=Se(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition);this.crotchRotation=Ct(o,r)}match(e,r,o){const i=pe.crotch.getCrotchRotation(r.crotch,o);if(yt(i))return;const s=pe.thigh.getLeftThighDir(r.thigh,o),n=pe.thigh.getRightThighDir(r.thigh,o),a=le(s,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror),l=Ue(this.crotchRotation,this.isLeft?i:Qe(i)),d=le(n,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir),u=Ue(this.crotchRotation,this.isLeft?Qe(i):i);let f=(Math.PI-a)*(Math.PI-l),p=(Math.PI-d)*(Math.PI-u);(Ke(s)||a>dr||l>dr)&&(f=-1/0),(Ke(n)||d>dr||u>dr)&&(p=-1/0),isFinite(f)&&f>p?(e.accepted=!0,e.score=f,e.flipped=!this.isLeft):isFinite(p)&&(e.accepted=!0,e.score=p,e.flipped=this.isLeft)}}const It=Math.PI/180*45,ur=Math.PI/180*60,Ot=[0,0,1];class ai{constructor(e){c(this,"isLeft");c(this,"thighZAxisAngle",0);c(this,"calfZAxisAngle",0);c(this,"kneeAngle",0);c(this,"kneeViewAngle",0);c(this,"thighLocalDir",[0,0,0]);c(this,"thighLocalDirMirror",[0,0,0]);c(this,"crotchRotation",[0,0,0,1]);this.isLeft=e}prepare(e){let r=e.rightThigh.originViewPosition,o=e.rightThigh.controlPointViewPosition,i=e.rightCalf.controlPointViewPosition;this.isLeft&&(r=e.leftThigh.originViewPosition,o=e.leftThigh.controlPointViewPosition,i=e.leftCalf.controlPointViewPosition);const s=Se(r,o),n=Se(o,i);this.thighZAxisAngle=le(Ot,s),this.calfZAxisAngle=le(Ot,n),this.kneeAngle=le(s,n),this.kneeViewAngle=At(to(o,r,o,i))-Math.PI,this.isLeft?(this.thighLocalDir=ke(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=ke(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0)):(this.thighLocalDir=ke(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=ke(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0));const a=Se(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),l=Se(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition);this.crotchRotation=Ct(l,a)}match(e,r,o){const i=pe.crotch.getCrotchRotation(r.crotch,o);if(yt(i))return;const s=pe.thigh.getLeftThighDir(r.thigh,o),n=pe.calf.getLeftCalfDir(r.calf,o),a=pe.thigh.getRightThighDir(r.thigh,o),l=pe.calf.getRightCalfDir(r.calf,o),d=le(Ot,s),u=le(Ot,n),f=le(s,n),p=At(Qt(Jt(s),n))-Math.PI,h=Math.abs(this.thighZAxisAngle-d),y=Math.abs(this.calfZAxisAngle-u),w=Math.abs(this.kneeAngle-f),A=Math.abs(this.kneeViewAngle-p*(this.isLeft?1:-1)),b=le(s,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror),g=Ue(this.crotchRotation,this.isLeft?i:Qe(i));let m=(Math.PI-h)*(Math.PI-y)*(Math.PI-w)*(Math.PI*2-A)*(Math.PI-b)*(Math.PI-g);const v=le(Ot,a),C=le(Ot,l),T=le(a,l),S=At(Qt(Jt(a),l))-Math.PI,R=Math.abs(this.thighZAxisAngle-v),L=Math.abs(this.calfZAxisAngle-C),$=Math.abs(this.kneeAngle-T),V=Math.abs(this.kneeViewAngle-S*(this.isLeft?-1:1)),G=le(a,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir),z=Ue(this.crotchRotation,this.isLeft?Qe(i):i);let I=(Math.PI-R)*(Math.PI-L)*(Math.PI-$)*(Math.PI*2-V)*(Math.PI-G)*(Math.PI-z);(Ke(s)||Ke(n)||h>It||y>It||w>ur||A>It||b>ur)&&(m=-1/0),(Ke(a)||Ke(l)||R>It||L>It||$>ur||V>It||G>ur)&&(I=-1/0),isFinite(m)&&m>I?(e.accepted=!0,e.score=m,e.flipped=!this.isLeft):isFinite(I)&&(e.accepted=!0,e.score=I,e.flipped=this.isLeft)}}const hr=Math.PI/180*45;class li{constructor(e){c(this,"isLeft");c(this,"shoulderLocalDir",[0,0,0]);c(this,"shoulderLocalDirMirror",[0,0,0]);c(this,"chestRotation",[0,0,0,1]);this.isLeft=e}prepare(e){this.isLeft?(this.shoulderLocalDir=ke(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=ke(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0)):(this.shoulderLocalDir=ke(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=ke(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0));const r=Se(Ge(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),Ge(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),o=Se(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition);this.chestRotation=Ct(o,r)}match(e,r,o){const i=pe.chest.getChestRotation(r.chest,o);if(yt(i))return;const s=pe.upperArm.getLeftUpperArmDir(r.upperArm,o),n=pe.upperArm.getRightUpperArmDir(r.upperArm,o),a=le(s,this.isLeft?this.shoulderLocalDir:this.shoulderLocalDirMirror),l=Ue(this.chestRotation,this.isLeft?i:Qe(i)),d=le(n,this.isLeft?this.shoulderLocalDirMirror:this.shoulderLocalDir),u=Ue(this.chestRotation,this.isLeft?Qe(i):i);let f=(Math.PI-a)*(Math.PI-l),p=(Math.PI-d)*(Math.PI-u);(Ke(s)||a>hr||l>hr)&&(f=-1/0),(Ke(n)||d>hr||u>hr)&&(p=-1/0),isFinite(f)&&f>p?(e.accepted=!0,e.score=f,e.flipped=!this.isLeft):isFinite(p)&&(e.accepted=!0,e.score=p,e.flipped=this.isLeft)}}function Zl(t,e,r){r.prepare(t);const o={score:0,flipped:!1,accepted:!1},i=[];for(let s of e)for(let n=0,a=s.photos.length;n<a;++n)if(o.score=0,o.accepted=!1,o.flipped=!1,r.match(o,s.buffers,n),o.accepted){let l=i.length;for(let d=0,u=i.length;d<u;++d)if(i[d].score<=o.score){l=d;break}if(l<ro){const d=s.photos[n];i.splice(l,0,{id:d[0],url:d[1],score:o.score,flipped:o.flipped}),i.length>ro&&i.pop()}}return i}const Xr={Face:{matcher:new Kl,highlights:[q.head]},Chest:{matcher:new Yl,highlights:[q.trunk]},"Left Shoulder":{matcher:new li(!0),highlights:[q.trunk,q.leftUpperArm]},"Right Shoulder":{matcher:new li(!1),highlights:[q.trunk,q.rightUpperArm]},"Left Elbow":{matcher:new ii(!0),highlights:[q.leftUpperArm,q.leftLowerArm]},"Right Elbow":{matcher:new ii(!1),highlights:[q.rightUpperArm,q.rightLowerArm]},Crotch:{matcher:new Gl,highlights:[q.trunk]},"Left Hip":{matcher:new si(!0),highlights:[q.trunk,q.leftThigh]},"Right Hip":{matcher:new si(!1),highlights:[q.trunk,q.rightThigh]},"Left Knee":{matcher:new ai(!0),highlights:[q.leftThigh,q.leftCalf]},"Right Knee":{matcher:new ai(!1),highlights:[q.rightThigh,q.rightCalf]}};var ql=se({components:{NButton:br,NSelect:Ha,NIcon:Vo,WarningOutlined:In,SearchOutlined:Mn,SkeletonModelCanvas:Wl},setup(){const t=Hl(),e=jl(),r=new Xl,o=new Nr,i=B(!1),s=Object.keys(Xr).map(u=>({value:u,label:u})),n=B(),a=B(),l=B([]);rt(async function(){try{i.value=!0,await r.load(function(u,f){})}finally{i.value=!1}});async function d(){l.value=[],a.value.scrollTop=0,await xt(),l.value=Zl(o,r.chunks,Xr[n.value].matcher)}return{supportWebGL2:t,supportMouse:e,model:o,matchers:Xr,loadingData:i,bodyPartOptions:s,bodyPart:n,searchResultsContainerDom:a,searchResults:l,onSearch:d}}});const Ql={class:"container rows"},Jl={class:"cols",style:{"font-weight":"bold","align-items":"center"}},ec=Ne("a",{href:"https://www.human-anatomy-for-artist.com/",target:"_blank"},"Human Anatomy for Artist",-1),tc=ct(" \xA0Unofficial Search Helper "),rc={class:"fill cols"},oc={class:"rows",style:{width:"320px",height:"100%",overflow:"auto"}},ic={class:"cols"},nc=ct(" Search "),sc=Ne("div",{class:"description"},[Ne("div",null,"Wheel: Rotate Camera / Zoom"),Ne("div",null,"Mouse Right: Move Camera"),Ne("div",null,"Shift + Mouse Left: Rotate Joint")],-1),ac=yn('<div class="description"><div> This page is a third party search helper for <a href="https://www.human-anatomy-for-artist.com" target="_blank">human-anatomy-for-artist.com</a>. </div><div> I recorded the <a href="https://google.github.io/mediapipe/solutions/pose.html" target="_blank">AI-identified</a> poses of some of the photos to allow you to search for them by the 3D model above. </div><div> Currently less than 1% of the photos are included. More data will be added slowly. </div><div><a href="https://github.com/x6ud/x6ud.github.io/issues" target="_blank">Leave a message</a></div><div><a href="https://github.com/x6ud/human-anatomy-for-artist-search-helper" target="_blank"> Source code </a></div><div> Another <a href="https://x6ud.github.io/pose-search" target="_blank"> tool for searching photos by pose</a></div></div>',1),lc={class:"scroll-list fill",ref:"searchResultsContainerDom"},cc={key:0,class:"loading"},dc={key:1,class:"warning",style:{"font-size":"16px"}},uc={key:0},hc=ct(" This page requires WebGL2 but your system does not seem to support. Try updating your graphics card drivers or changing your browser. "),fc={key:1},pc=ct(" This page currently supports mouse operation only. "),gc=["data-id","href"],vc=["src"];function mc(t,e,r,o,i,s){var p,h,y;const n=et("search-outlined"),a=et("n-icon"),l=et("n-select"),d=et("n-button"),u=et("skeleton-model-canvas"),f=et("warning-outlined");return je(),ut("div",Ql,[Ne("div",Jl,[ye(a,{size:"20"},{default:ht(()=>[ye(n)]),_:1}),ec,tc]),Ne("div",rc,[Ne("div",oc,[Ne("div",ic,[ye(l,{class:"fill",size:"small",placeholder:"Joint / Body Part",filterable:"",clearable:"",options:t.bodyPartOptions,value:t.bodyPart,"onUpdate:value":e[0]||(e[0]=w=>t.bodyPart=w)},null,8,["options","value"]),ye(d,{size:"small",type:"primary",onClick:t.onSearch,disabled:!t.bodyPart},{default:ht(()=>[nc]),_:1},8,["onClick","disabled"])]),sc,ye(u,{style:{width:"100%",height:"400px","min-height":"400px"},model:t.model,highlights:(p=t.matchers[t.bodyPart])==null?void 0:p.highlights},null,8,["model","highlights"]),ac]),Ne("div",lc,[t.loadingData&&!((h=t.searchResults)==null?void 0:h.length)?(je(),ut("div",cc," Loading data... ")):Wt("",!0),!((y=t.searchResults)==null?void 0:y.length)&&(!t.supportWebGL2||!t.supportMouse)?(je(),ut("div",dc,[t.supportWebGL2?Wt("",!0):(je(),ut("div",uc,[ye(a,null,{default:ht(()=>[ye(f)]),_:1}),hc])),t.supportMouse?Wt("",!0):(je(),ut("div",fc,[ye(a,null,{default:ht(()=>[ye(f)]),_:1}),pc]))])):Wt("",!0),(je(!0),ut(Vt,null,wn(t.searchResults,w=>(je(),ut("a",{class:"item photo","data-id":w.id,href:`https://www.human-anatomy-for-artist.com/photos/show/id/${w.id}`,rel:"noreferrer",target:"_blank"},[Ne("img",{src:w.url,style:xn({transform:w.flipped?"scaleX(-1)":null}),alt:"",referrerpolicy:"no-referrer"},null,12,vc)],8,gc))),256))],512)])])}var _c=Yr(ql,[["render",mc]]);export{_c as default};
//# sourceMappingURL=Search.412b4d85.js.map
