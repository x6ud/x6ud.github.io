var vo=Object.defineProperty;var go=(e,o,i)=>o in e?vo(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i;var ae=(e,o,i)=>(go(e,typeof o!="symbol"?o+"":o,i),i);import{i as Ne,D as be,a as H,c as A,j as s,b as U,w as ie,H as mo,k as Ve,l as we,m as bo,K as De,M as Ie,e as Ue,al as We,V as wo,I as xo,N as _o,t as Oe,F as T,s as He,o as q,B as yo,x as Co,A as ko,p as Fe,f as Z,Z as zo,$ as Ke,am as $o,an as je,ao as So,ap as Ae,aq as Pe,ar as Me,as as qe,at as Ro,au as Bo,av as Fo,aw as Ao,ax as Po,ay as Mo,az as Ge,aA as Eo,ag as To,aB as Lo,aC as No,ad as Vo,Y as Do,ae as Io,af as Uo,ah as Wo,ak as Ye,aD as Oo}from"./PhotoDataset.243cb9d2.js";import{e as O,o as G,c as ce,f as w,h as c,p as Ho,j as J,k as b,t as Xe,i as xe,N as Ko,w as jo,u as qo,l as re,n as Go,s as _e,T as Yo,r as W,y as ue,C as V,z as k,q as Xo,P as Zo,F as Jo,G as Qo,B as ea,D as he,Q as ta,R as oa,S as aa,A as ra,g as se}from"./vendor.1b7edcc2.js";import{_ as Ee}from"./index.21a3b0a9.js";const na={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ia=w("path",{d:"M608 112c-167.9 0-304 136.1-304 304c0 70.3 23.9 135 63.9 186.5l-41.1 41.1l-62.3-62.3a8.15 8.15 0 0 0-11.4 0l-39.8 39.8a8.15 8.15 0 0 0 0 11.4l62.3 62.3l-44.9 44.9l-62.3-62.3a8.15 8.15 0 0 0-11.4 0l-39.8 39.8a8.15 8.15 0 0 0 0 11.4l62.3 62.3l-65.3 65.3a8.03 8.03 0 0 0 0 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 0 0 608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8c-43.1-43-66.8-100.3-66.8-161.2c0-60.9 23.7-118.2 66.8-161.2c43-43.1 100.3-66.8 161.2-66.8c60.9 0 118.2 23.7 161.2 66.8c43.1 43 66.8 100.3 66.8 161.2c0 60.9-23.7 118.2-66.8 161.2z",fill:"currentColor"},null,-1);var sa=O({name:"KeyOutlined",render:function(o,i){return G(),ce("svg",na,[ia])}});const la={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},da=w("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281l360-281.1c3.8-3 6.1-7.7 6.1-12.6z",fill:"currentColor"},null,-1);var ca=O({name:"LeftOutlined",render:function(o,i){return G(),ce("svg",la,[da])}});const ua={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ha=w("path",{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1l-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z",fill:"currentColor"},null,-1);var pa=O({name:"RightOutlined",render:function(o,i){return G(),ce("svg",ua,[ha])}});const fa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},va=w("path",{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144s-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80s80-35.8 80-80s-35.8-80-80-80z",fill:"currentColor"},null,-1);var ga=O({name:"SaveFilled",render:function(o,i){return G(),ce("svg",fa,[va])}});const ma={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ba=w("path",{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1c-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z",fill:"currentColor"},null,-1);var wa=O({name:"SearchOutlined",render:function(o,i){return G(),ce("svg",ma,[ba])}}),xa=O({name:"Eye",render(){return c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},c("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),c("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}}),_a=O({name:"EyeOff",render(){return c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},c("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),c("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),c("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),c("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),c("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}}),ya={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"};const Ca=e=>{const{textColor2:o,textColor3:i,textColorDisabled:r,primaryColor:l,primaryColorHover:n,inputColor:d,inputColorDisabled:g,borderColor:m,warningColor:h,warningColorHover:y,errorColor:_,errorColorHover:$,borderRadius:S,lineHeight:L,fontSizeTiny:D,fontSizeSmall:R,fontSizeMedium:M,fontSizeLarge:v,heightTiny:p,heightSmall:u,heightMedium:z,heightLarge:N,actionColor:x,clearColor:B,clearColorHover:C,clearColorPressed:K,placeholderColor:E,placeholderColorDisabled:Y,iconColor:le,iconColorDisabled:X,iconColorHover:te,iconColorPressed:de}=e;return Object.assign(Object.assign({},ya),{countTextColor:i,heightTiny:p,heightSmall:u,heightMedium:z,heightLarge:N,fontSizeTiny:D,fontSizeSmall:R,fontSizeMedium:M,fontSizeLarge:v,lineHeight:L,lineHeightTextarea:L,borderRadius:S,iconSize:"16px",groupLabelColor:x,groupLabelTextColor:o,textColor:o,textColorDisabled:r,textDecorationColor:o,caretColor:l,placeholderColor:E,placeholderColorDisabled:Y,color:d,colorDisabled:g,colorFocus:d,groupLabelBorder:`1px solid ${m}`,border:`1px solid ${m}`,borderHover:`1px solid ${n}`,borderDisabled:`1px solid ${m}`,borderFocus:`1px solid ${n}`,boxShadowFocus:`0 0 0 2px ${be(l,{alpha:.2})}`,loadingColor:l,loadingColorWarning:h,borderWarning:`1px solid ${h}`,borderHoverWarning:`1px solid ${y}`,colorFocusWarning:d,borderFocusWarning:`1px solid ${y}`,boxShadowFocusWarning:`0 0 0 2px ${be(h,{alpha:.2})}`,caretColorWarning:h,loadingColorError:_,borderError:`1px solid ${_}`,borderHoverError:`1px solid ${$}`,colorFocusError:d,borderFocusError:`1px solid ${$}`,boxShadowFocusError:`0 0 0 2px ${be(_,{alpha:.2})}`,caretColorError:_,clearColor:B,clearColorHover:C,clearColorPressed:K,iconColor:le,iconColorDisabled:X,iconColorHover:te,iconColorPressed:de,suffixTextColor:o})},ka={name:"Input",common:Ne,self:Ca};var za=ka;const Ze=Symbol("input");function $a(e){let o=0;for(const i of e)o++;return o}function ye(e){return["",void 0,null].includes(e)}var Je=O({name:"InputWordCount",setup(e,{slots:o}){const{mergedValueRef:i,maxlengthRef:r,mergedClsPrefixRef:l}=Ho(Ze),n=J(()=>{const{value:d}=i;return d===null||Array.isArray(d)?0:$a(d)});return()=>{const{value:d}=r,{value:g}=i;return c("span",{class:`${l.value}-input-word-count`},o.default?o.default({value:g===null||Array.isArray(g)?"":g}):d===void 0?n.value:`${n.value} / ${d}`)}}}),Sa=H([A("input",`
 max-width: 100%;
 cursor: text;
 line-height: 1.5;
 z-index: auto;
 outline: none;
 box-sizing: border-box;
 position: relative;
 display: inline-flex;
 border-radius: var(--border-radius);
 background-color: var(--color);
 transition: background-color .3s var(--bezier);
 font-size: var(--font-size);
 --padding-vertical: calc((var(--height) - 1.5 * var(--font-size)) / 2);
 `,[s("input, textarea",`
 overflow: hidden;
 flex-grow: 1;
 position: relative;
 `),s("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder",`
 box-sizing: border-box;
 font-size: inherit;
 line-height: 1.5;
 font-family: inherit;
 border: none;
 outline: none;
 background-color: #0000;
 text-align: inherit;
 transition:
 caret-color .3s var(--bezier),
 color .3s var(--bezier),
 text-decoration-color .3s var(--bezier);
 `),s("input-el, textarea-el",`
 -webkit-appearance: none;
 width: 100%;
 min-width: 0;
 text-decoration-color: var(--text-decoration-color);
 color: var(--text-color);
 caret-color: var(--caret-color);
 `,[H("&::placeholder",{color:"#0000"})]),U("round",[ie("textarea",{borderRadius:"calc(var(--height) / 2)"})]),s("placeholder",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: hidden;
 color: var(--placeholder-color);
 `,[H("span",{width:"100%",display:"inline-block"})]),ie("autosize",{width:"100%"}),U("autosize",[s("textarea-el, input-el",`
 position: absolute;
 top: 0;
 left: 0;
 height: 100%;
 `)]),A("input-wrapper",`
 overflow: hidden;
 display: inline-flex;
 flex-grow: 1;
 position: relative;
 padding-left: var(--padding-left);
 padding-right: var(--padding-right);
 `),s("input-mirror",`
 padding: 0;
 height: var(--height);
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: nowrap;
 pointer-events: none;
 `),s("input-el",`
 padding: 0;
 height: var(--height);
 line-height: var(--height);
 `,[H("+",[s("placeholder",`
 display: flex;
 align-items: center; 
 `)])]),ie("textarea",[s("placeholder",{whiteSpace:"nowrap"})]),s("eye",`
 transition: color .3s var(--bezier);
 `),U("textarea",{width:"100%"},[A("input-word-count",`
 position: absolute;
 right: var(--padding-right);
 bottom: var(--padding-vertical);
 `),U("resizable",[A("input-wrapper",`
 resize: vertical;
 overflow: auto;
 min-height: var(--height);
 `)]),s("textarea-el, textarea-mirror, placeholder",`
 width: 100%;
 height: 100%;
 padding-left: 0;
 padding-right: 0;
 padding-top: var(--padding-vertical);
 padding-bottom: var(--padding-vertical);
 display: inline-block;
 vertical-align: bottom;
 box-sizing: border-box;
 line-height: var(--line-height-textarea);
 margin: 0;
 resize: none;
 `),s("textarea-mirror",`
 pointer-events: none;
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre-wrap;
 overflow-wrap: break-word;
 `)]),U("pair",[s("input-el, placeholder",{textAlign:"center"}),s("separator",`
 display: flex;
 align-items: center;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `,[A("icon",`
 color: var(--icon-color);
 `),A("base-icon",`
 color: var(--icon-color);
 `)])]),U("disabled",{cursor:"not-allowed",backgroundColor:"var(--color-disabled)"},[s("border",{border:"var(--border-disabled)"}),s("input-el, textarea-el",{cursor:"not-allowed",color:"var(--text-color-disabled)",textDecorationColor:"var(--text-color-disabled)"}),s("placeholder",{color:"var(--placeholder-color-disabled)"}),s("separator",{color:"var(--text-color-disabled)"},[A("icon",`
 color: var(--icon-color-disabled);
 `),A("base-icon",`
 color: var(--icon-color-disabled);
 `)]),s("suffix, prefix",{color:"var(--text-color-disabled)"},[A("icon",`
 color: var(--icon-color-disabled);
 `),A("internal-icon",`
 color: var(--icon-color-disabled);
 `)])]),ie("disabled",[s("eye",`
 color: var(--icon-color);
 cursor: pointer;
 `,[H("&:hover",`
 color: var(--icon-color-hover);
 `),H("&:active",`
 color: var(--icon-color-pressed);
 `)]),U("focus",{backgroundColor:"var(--color-focus)"},[s("state-border",{border:"var(--border-focus)",boxShadow:"var(--box-shadow-focus)"})]),H("&:hover",[s("state-border",{border:"var(--border-focus)"})])]),s("border, state-border",`
 box-sizing: border-box;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: inherit;
 border: var(--border);
 transition:
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `),s("state-border",`
 border-color: #0000;
 z-index: 1;
 `),s("prefix",{marginRight:"4px"}),s("suffix",`
 margin-left: 4px;
 `),s("suffix, prefix",`
 transition: color .3s var(--bezier);
 flex-wrap: nowrap;
 flex-shrink: 0;
 line-height: var(--height);
 white-space: nowrap;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 color: var(--suffix-text-color);
 `,[A("base-loading",`
 font-size: var(--icon-size);
 margin-left: 4px;
 color: var(--loading-color);
 `),A("base-clear",`
 font-size: var(--icon-size);
 margin-left: 4px;
 `,[s("placeholder",[A("base-icon",`
 transition: color .3s var(--bezier);
 color: var(--icon-color);
 font-size: var(--icon-size);
 `)])]),A("icon",`
 transition: color .3s var(--bezier);
 color: var(--icon-color);
 font-size: var(--icon-size);
 `),A("base-icon",`
 font-size: var(--icon-size);
 `)]),A("input-word-count",`
 pointer-events: none;
 line-height: 1.5;
 font-size: .85em;
 color: var(--count-text-color);
 transition: color .3s var(--bezier);
 margin-left: 4px;
 font-variant: tabular-nums;
 `)]),["warning","error"].map(e=>mo(e,A("input",[ie("disabled",[A("base-loading",`
 color: var(--loading-color-${e})
 `),s("input-el, textarea-el",{caretColor:`var(--caret-color-${e})`}),s("state-border",{border:`var(--border-${e})`}),H("&:hover",[s("state-border",`
 border: var(--border-hover-${e});
 `)]),H("&:focus",{backgroundColor:`var(--color-focus-${e})`},[s("state-border",`
 box-shadow: var(--box-shadow-focus-${e});
 border: var(--border-focus-${e});
 `)]),U("focus",{backgroundColor:`var(--color-focus-${e})`},[s("state-border",`
 box-shadow: var(--box-shadow-focus-${e});
 border: var(--border-focus-${e});
 `)])])])))]);const Ra=Object.assign(Object.assign({},we.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},onMousedown:Function,onKeydown:Function,onKeyup:Function,onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,showPasswordToggle:Boolean});var Ba=O({name:"Input",props:Ra,setup(e){const{mergedClsPrefixRef:o,mergedBorderedRef:i}=Ve(e),r=we("Input","Input",Sa,za,e,o),l=b(null),n=b(null),d=b(null),g=b(null),m=b(null),h=b(null),{localeRef:y}=bo("Input"),_=b(e.defaultValue),$=Xe(e,"value"),S=De($,_),L=Ie(e),{mergedSizeRef:D,mergedDisabledRef:R}=L,M=b(!1),v=b(!1),p=b(!1),u=b(!1);let z=null;const N=J(()=>{const{placeholder:t,pair:a}=e;return a?Array.isArray(t)?t:t===void 0?["",""]:[t,t]:t===void 0?[y.value.placeholder]:[t]}),x=J(()=>{const{value:t}=p,{value:a}=S,{value:f}=N;return!t&&(ye(a)||Array.isArray(a)&&ye(a[0]))&&f[0]}),B=J(()=>{const{value:t}=p,{value:a}=S,{value:f}=N;return!t&&f[1]&&(ye(a)||Array.isArray(a)&&ye(a[1]))}),C=Ue(()=>e.internalForceFocus||M.value),K=Ue(()=>{if(R.value||e.readonly||!e.clearable||!C.value&&!v.value)return!1;const{value:t}=S,{value:a}=C;return e.pair?!!(Array.isArray(t)&&(t[0]||t[1]))&&(v.value||a):!!t&&(v.value||a)}),E=J(()=>{const{showPasswordOn:t}=e;if(t)return t;if(e.showPasswordToggle)return"click"}),Y=b(!1),le=J(()=>{const{textDecoration:t}=e;return t?Array.isArray(t)?t.map(a=>({textDecoration:a})):[{textDecoration:t}]:["",""]}),X=()=>{if(e.type==="textarea"){const{autosize:t}=e;if(typeof t=="boolean"||!n.value)return;const{paddingTop:a,paddingBottom:f,lineHeight:P}=window.getComputedStyle(n.value),F=Number(a.slice(0,-2)),I=Number(f.slice(0,-2)),oe=Number(P.slice(0,-2)),{value:Q}=d;if(!Q)return;if(t.minRows){const ee=Math.max(t.minRows,1),Be=`${F+I+oe*ee}px`;Q.style.minHeight=Be}if(t.maxRows){const ee=`${F+I+oe*t.maxRows}px`;Q.style.maxHeight=ee}}},te=J(()=>{const{maxlength:t}=e;return t===void 0?void 0:Number(t)});xe(()=>{const{value:t}=S;Array.isArray(t)||Re(t)});const de=Ko().proxy;function ne(t){const{onUpdateValue:a,"onUpdate:value":f,onInput:P}=e,{nTriggerFormInput:F}=L;a&&T(a,t),f&&T(f,t),P&&T(P,t),_.value=t,F()}function fe(t){const{onChange:a}=e,{nTriggerFormChange:f}=L;a&&T(a,t),_.value=t,f()}function ke(t){const{onBlur:a}=e,{nTriggerFormBlur:f}=L;a&&T(a,t),f()}function ze(t){const{onFocus:a}=e,{nTriggerFormFocus:f}=L;a&&T(a,t),f()}function $e(t){const{onClear:a}=e;a&&T(a,t)}function ot(t){const{onInputBlur:a}=e;a&&T(a,t)}function at(t){const{onInputFocus:a}=e;a&&T(a,t)}function rt(){const{onDeactivate:t}=e;t&&T(t)}function nt(){const{onActivate:t}=e;t&&T(t)}function it(t){const{onClick:a}=e;a&&T(a,t)}function st(t){const{onWrapperFocus:a}=e;a&&T(a,t)}function lt(t){const{onWrapperBlur:a}=e;a&&T(a,t)}function dt(){p.value=!0}function ct(t){p.value=!1,t.target===h.value?ve(t,1):ve(t,0)}function ve(t,a=0,f="input"){const P=t.target.value;if(Re(P),z=P,p.value)return;const F=P;if(!e.pair)f==="input"?ne(F):fe(F);else{let{value:I}=S;Array.isArray(I)?I=[...I]:I=["",""],I[a]=F,f==="input"?ne(I):fe(I)}de.$forceUpdate()}function ut(t){ot(t),t.relatedTarget===l.value&&rt(),t.relatedTarget!==null&&(t.relatedTarget===m.value||t.relatedTarget===h.value||t.relatedTarget===n.value)||(u.value=!1),ge(t,"blur")}function ht(t){at(t),M.value=!0,u.value=!0,nt(),ge(t,"focus")}function pt(t){e.passivelyActivated&&(lt(t),ge(t,"blur"))}function ft(t){e.passivelyActivated&&(M.value=!0,st(t),ge(t,"focus"))}function ge(t,a){t.relatedTarget!==null&&(t.relatedTarget===m.value||t.relatedTarget===h.value||t.relatedTarget===n.value||t.relatedTarget===l.value)||(a==="focus"?(ze(t),M.value=!0):a==="blur"&&(ke(t),M.value=!1))}function vt(t,a){ve(t,a,"change")}function gt(t){it(t)}function mt(t){$e(t),e.pair?ne(["",""]):ne("")}function bt(t){const{onMousedown:a}=e;a&&a(t);const{tagName:f}=t.target;if(f!=="INPUT"&&f!=="TEXTAREA"){if(e.resizable){const{value:P}=l;if(P){const{left:F,top:I,width:oe,height:Q}=P.getBoundingClientRect(),ee=14;if(F+oe-ee<t.clientX&&t.clientY<F+oe&&I+Q-ee<t.clientY&&t.clientY<I+Q)return}}t.preventDefault(),M.value||Le()}}function wt(){v.value=!0}function xt(){v.value=!1}function _t(){R.value||E.value==="click"&&(Y.value=!Y.value)}function yt(t){if(R.value)return;t.preventDefault();const a=P=>{P.preventDefault(),He("mouseup",document,a)};if(Oe("mouseup",document,a),E.value!=="mousedown")return;Y.value=!0;const f=()=>{Y.value=!1,He("mouseup",document,f)};Oe("mouseup",document,f)}function Ct(t){var a;switch((a=e.onKeydown)===null||a===void 0||a.call(e,t),t.code){case"Escape":Se();break;case"Enter":case"NumpadEnter":kt(t);break}}function kt(t){var a,f;if(e.passivelyActivated){const{value:P}=u;if(P){e.internalDeactivateOnEnter&&Se();return}t.preventDefault(),e.type==="textarea"?(a=n.value)===null||a===void 0||a.focus():(f=m.value)===null||f===void 0||f.focus()}}function Se(){e.passivelyActivated&&(u.value=!1,Go(()=>{var t;(t=l.value)===null||t===void 0||t.focus()}))}function Le(){var t,a,f;R.value||(e.passivelyActivated?(t=l.value)===null||t===void 0||t.focus():((a=n.value)===null||a===void 0||a.focus(),(f=m.value)===null||f===void 0||f.focus()))}function zt(){var t;((t=l.value)===null||t===void 0?void 0:t.contains(document.activeElement))&&document.activeElement.blur()}function $t(){R.value||(n.value?n.value.focus():m.value&&m.value.focus())}function St(){const{value:t}=l;(t==null?void 0:t.contains(document.activeElement))&&t!==document.activeElement&&Se()}function Re(t){const{type:a,pair:f,autosize:P}=e;if(!f&&P)if(a==="textarea"){const{value:F}=d;F&&(F.textContent=(t!=null?t:"")+`\r
`)}else{const{value:F}=g;F&&(t?F.textContent=t:F.innerHTML="&nbsp;")}}function Rt(){X()}let me=null;return jo(()=>{const{autosize:t,type:a}=e;t&&a==="textarea"?me=_e(S,f=>{!Array.isArray(f)&&f!==z&&Re(f)}):me==null||me()}),qo(Ze,{mergedValueRef:S,maxlengthRef:te,mergedClsPrefixRef:o}),Object.assign(Object.assign({},{wrapperElRef:l,inputElRef:m,textareaElRef:n,isCompositing:p,focus:Le,blur:zt,deactivate:St,activate:$t}),{wrapperElRef:l,inputElRef:m,inputMirrorElRef:g,inputEl2Ref:h,textareaElRef:n,textareaMirrorElRef:d,uncontrolledValue:_,mergedValue:S,passwordVisible:Y,mergedPlaceholder:N,showPlaceholder1:x,showPlaceholder2:B,mergedFocus:C,isComposing:p,activated:u,showClearButton:K,mergedSize:D,mergedDisabled:R,textDecorationStyle:le,mergedClsPrefix:o,mergedBordered:i,mergedShowPasswordOn:E,handleCompositionStart:dt,handleCompositionEnd:ct,handleInput:ve,handleInputBlur:ut,handleInputFocus:ht,handleWrapperBlur:pt,handleWrapperFocus:ft,handleMouseEnter:wt,handleMouseLeave:xt,handleMouseDown:bt,handleChange:vt,handleClick:gt,handleClear:mt,handlePasswordToggleClick:_t,handlePasswordToggleMousedown:yt,handleWrapperKeyDown:Ct,handleTextAreaMirrorResize:Rt,mergedTheme:r,cssVars:J(()=>{const{value:t}=D,{common:{cubicBezierEaseInOut:a},self:{color:f,borderRadius:P,textColor:F,caretColor:I,caretColorError:oe,caretColorWarning:Q,textDecorationColor:ee,border:Be,borderDisabled:Bt,borderHover:Ft,borderFocus:At,placeholderColor:Pt,placeholderColorDisabled:Mt,lineHeightTextarea:Et,colorDisabled:Tt,colorFocus:Lt,textColorDisabled:Nt,boxShadowFocus:Vt,iconSize:Dt,colorFocusWarning:It,boxShadowFocusWarning:Ut,borderWarning:Wt,borderFocusWarning:Ot,borderHoverWarning:Ht,colorFocusError:Kt,boxShadowFocusError:jt,borderError:qt,borderFocusError:Gt,borderHoverError:Yt,clearSize:Xt,clearColor:Zt,clearColorHover:Jt,clearColorPressed:Qt,iconColor:eo,iconColorDisabled:to,suffixTextColor:oo,countTextColor:ao,iconColorHover:ro,iconColorPressed:no,loadingColor:io,loadingColorError:so,loadingColorWarning:lo,[q("padding",t)]:co,[q("fontSize",t)]:uo,[q("height",t)]:ho}}=r.value,{left:po,right:fo}=yo(co);return{"--bezier":a,"--count-text-color":ao,"--color":f,"--font-size":uo,"--border-radius":P,"--height":ho,"--padding-left":po,"--padding-right":fo,"--text-color":F,"--caret-color":I,"--text-decoration-color":ee,"--border":Be,"--border-disabled":Bt,"--border-hover":Ft,"--border-focus":At,"--placeholder-color":Pt,"--placeholder-color-disabled":Mt,"--icon-size":Dt,"--line-height-textarea":Et,"--color-disabled":Tt,"--color-focus":Lt,"--text-color-disabled":Nt,"--box-shadow-focus":Vt,"--loading-color":io,"--caret-color-warning":Q,"--color-focus-warning":It,"--box-shadow-focus-warning":Ut,"--border-warning":Wt,"--border-focus-warning":Ot,"--border-hover-warning":Ht,"--loading-color-warning":lo,"--caret-color-error":oe,"--color-focus-error":Kt,"--box-shadow-focus-error":jt,"--border-error":qt,"--border-focus-error":Gt,"--border-hover-error":Yt,"--loading-color-error":so,"--clear-color":Zt,"--clear-size":Xt,"--clear-color-hover":Jt,"--clear-color-pressed":Qt,"--icon-color":eo,"--icon-color-hover":ro,"--icon-color-pressed":no,"--icon-color-disabled":to,"--suffix-text-color":oo}})})},render(){const{mergedClsPrefix:e}=this;return c("div",{ref:"wrapperElRef",class:[`${e}-input`,{[`${e}-input--disabled`]:this.mergedDisabled,[`${e}-input--textarea`]:this.type==="textarea",[`${e}-input--resizable`]:this.resizable&&!this.autosize,[`${e}-input--autosize`]:this.autosize,[`${e}-input--round`]:this.round&&this.type!=="textarea",[`${e}-input--pair`]:this.pair,[`${e}-input--focus`]:this.mergedFocus,[`${e}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:!this.mergedDisabled&&this.passivelyActivated&&!this.activated?0:void 0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.onKeyup,onKeydown:this.handleWrapperKeyDown},c("div",{class:`${e}-input-wrapper`},this.$slots.affix||this.$slots.prefix?c("div",{class:`${e}-input__prefix`},re(this.$slots,"affix",void 0,()=>[re(this.$slots,"prefix")])):null,this.type==="textarea"?c("div",{class:`${e}-input__textarea`},c("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:`${e}-input__textarea-el`,autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:this.textDecorationStyle[0],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:this.handleInput,onChange:this.handleChange})),this.showPlaceholder1?c("div",{class:`${e}-input__placeholder`,key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?c(wo,{onResize:this.handleTextAreaMirrorResize},{default:()=>c("div",{ref:"textareaMirrorElRef",class:`${e}-input__textarea-mirror`,key:"mirror"})}):null):c("div",{class:`${e}-input__input`},c("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:this.type==="password"&&this.mergedShowPasswordOn&&this.passwordVisible?"text":this.type,class:`${e}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,style:this.textDecorationStyle[0],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:o=>this.handleInput(o,0),onChange:o=>this.handleChange(o,0)})),this.showPlaceholder1?c("div",{class:`${e}-input__placeholder`},c("span",null,this.mergedPlaceholder[0])):null,this.autosize?c("div",{class:`${e}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"},"\xA0"):null),!this.pair&&(this.$slots.suffix||this.clearable||this.showCount||this.mergedShowPasswordOn||this.loading!==void 0)?c("div",{class:`${e}-input__suffix`},[this.clearable||this.$slots.clear?c(We,{clsPrefix:e,show:this.showClearButton,onClear:this.handleClear},{default:()=>re(this.$slots,"clear")}):null,re(this.$slots,"suffix"),this.loading!==void 0?c(xo,{clsPrefix:e,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.showCount&&this.type!=="textarea"?c(Je,null,{default:this.$slots.count}):null,this.mergedShowPasswordOn&&this.type==="password"?c(_o,{clsPrefix:e,class:`${e}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},{default:()=>this.passwordVisible?c(xa,null):c(_a,null)}):null]):null),this.pair?c("span",{class:`${e}-input__separator`},re(this.$slots,"separator",void 0,()=>[this.separator])):null,this.pair?c("div",{class:`${e}-input-wrapper`},c("div",{class:`${e}-input__input`},c("input",{ref:"inputEl2Ref",type:this.type,class:`${e}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:o=>this.handleInput(o,1),onChange:o=>this.handleChange(o,1)}),this.showPlaceholder2?c("div",{class:`${e}-input__placeholder`},c("span",null,this.mergedPlaceholder[1])):null),c("div",{class:`${e}-input__suffix`},[this.clearable||this.$slots.clear?c(We,{clsPrefix:e,show:this.showClearButton,onClear:this.handleClear},{default:()=>re(this.$slots,"clear")}):null,re(this.$slots,"suffix")])):null,this.mergedBordered?c("div",{class:`${e}-input__border`}):null,this.mergedBordered?c("div",{class:`${e}-input__state-border`}):null,this.showCount&&this.type==="textarea"?c(Je,null,{default:this.$slots.count}):null)}}),Fa={buttonHeightSmall:"14px",buttonHeightMedium:"18px",buttonHeightLarge:"22px",buttonWidthSmall:"14px",buttonWidthMedium:"18px",buttonWidthLarge:"22px",buttonWidthPressedSmall:"20px",buttonWidthPressedMedium:"24px",buttonWidthPressedLarge:"28px",railHeightSmall:"18px",railHeightMedium:"22px",railHeightLarge:"26px",railWidthSmall:"32px",railWidthMedium:"40px",railWidthLarge:"48px"};const Aa=e=>{const{primaryColor:o,opacityDisabled:i,borderRadius:r}=e,l="rgba(0, 0, 0, .14)";return Object.assign(Object.assign({},Fa),{textColor:"white",loadingColor:o,opacityDisabled:i,railColor:l,railColorActive:o,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:r,railBorderRadiusMedium:r,railBorderRadiusLarge:r,buttonBorderRadiusSmall:r,buttonBorderRadiusMedium:r,buttonBorderRadiusLarge:r,boxShadowFocus:`0 0 0 2px ${be(o,{alpha:.2})}`})},Pa={name:"Switch",common:Ne,self:Aa};var Ma=Pa,Ea=A("switch",`
 height: var(--height);
 min-width: var(--width);
 vertical-align: middle;
 user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[s("children-placeholder",`
 height: var(--rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),s("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),s("button-placeholder",`
 width: calc(1.75 * var(--rail-height));
 height: var(--rail-height);
 `),A("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--button-width) - 4px);
 color: var(--loading-color);
 transition: color .3s var(--bezier);
 `,[Co({originalTransform:"translateX(-50%) translateY(-50%)"})]),s("checked, unchecked",`
 transition: color .3s var(--bezier);
 color: var(--text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),s("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--rail-height) - var(--offset));
 `),s("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--rail-height) - var(--offset));
 `),H("&:focus",[s("rail",`
 box-shadow: var(--box-shadow-focus);
 `)]),U("round",[s("rail",{borderRadius:"calc(var(--rail-height) / 2)"},[s("button",{borderRadius:"calc(var(--button-height) / 2)"})])]),ie("disabled",[U("pressed",[s("rail",[s("button",{maxWidth:"var(--button-width-pressed)"})])]),s("rail",[H("&:active",[s("button",{maxWidth:"var(--button-width-pressed)"})])]),U("active",[U("pressed",[s("rail",[s("button",{left:"calc(100% - var(--offset) - var(--button-width-pressed))"})])]),s("rail",[H("&:active",[s("button",{left:"calc(100% - var(--offset) - var(--button-width-pressed))"})])])])]),U("active",[s("rail",[s("button",{left:"calc(100% - (var(--rail-height) + var(--button-width)) / 2)"})])]),s("rail",`
 overflow: hidden;
 height: var(--rail-height);
 min-width: var(--rail-width);
 border-radius: var(--rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 background-color: var(--rail-color);
 `,[s("button",`
 top: var(--offset);
 left: var(--offset);
 height: var(--button-width);
 width: var(--button-width-pressed);
 max-width: var(--button-width);
 border-radius: var(--button-border-radius);
 background-color: var(--button-color);
 box-shadow: var(--button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--bezier),
 left .3s var(--bezier),
 opacity .3s var(--bezier),
 max-width .3s var(--bezier),
 box-shadow .3s var(--bezier);
 `)]),U("active",[s("rail",{backgroundColor:"var(--rail-color-active)"})]),U("disabled",[s("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]);const Ta=Object.assign(Object.assign({},we.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},onChange:[Function,Array]});var La=O({name:"Switch",props:Ta,setup(e){const{mergedClsPrefixRef:o}=Ve(e),i=we("Switch","Switch",Ea,Ma,e,o),r=Ie(e),{mergedSizeRef:l,mergedDisabledRef:n}=r,d=b(e.defaultValue),g=Xe(e,"value"),m=De(g,d),h=b(!1);function y(v){const{"onUpdate:value":p,onChange:u,onUpdateValue:z}=e,{nTriggerFormInput:N,nTriggerFormChange:x}=r;p&&T(p,v),z&&T(z,v),u&&T(u,v),d.value=v,N(),x()}function _(){const{nTriggerFormFocus:v}=r;v()}function $(){const{nTriggerFormBlur:v}=r;v()}function S(){n.value||(m.value!==e.checkedValue?y(e.checkedValue):y(e.uncheckedValue))}function L(){_()}function D(){$(),h.value=!1}function R(v){v.code==="Space"&&(y(!m.value),h.value=!1)}function M(v){v.code==="Space"&&(v.preventDefault(),h.value=!0)}return{handleClick:S,handleBlur:D,handleFocus:L,handleKeyup:R,handleKeydown:M,pressed:h,mergedClsPrefix:o,mergedValue:m,mergedDisabled:n,cssVars:J(()=>{const{value:v}=l,{self:{opacityDisabled:p,railColor:u,railColorActive:z,buttonBoxShadow:N,buttonColor:x,boxShadowFocus:B,loadingColor:C,textColor:K,[q("buttonHeight",v)]:E,[q("buttonWidth",v)]:Y,[q("buttonWidthPressed",v)]:le,[q("railHeight",v)]:X,[q("railWidth",v)]:te,[q("railBorderRadius",v)]:de,[q("buttonBorderRadius",v)]:ne},common:{cubicBezierEaseInOut:fe}}=i.value,ke=Fe((Z(X)-Z(E))/2),ze=Fe(Math.max(Z(X),Z(E))),$e=Z(X)>Z(E)?te:Fe(Z(te)+Z(E)-Z(X));return{"--bezier":fe,"--button-border-radius":ne,"--button-box-shadow":N,"--button-color":x,"--button-width":Y,"--button-width-pressed":le,"--button-height":E,"--height":ze,"--offset":ke,"--opacity-disabled":p,"--rail-border-radius":de,"--rail-color":u,"--rail-color-active":z,"--rail-height":X,"--rail-width":te,"--width":$e,"--box-shadow-focus":B,"--loading-color":C,"--text-color":K}})}},render(){const{mergedClsPrefix:e,mergedValue:o,mergedDisabled:i,checkedValue:r,$slots:l}=this,n=o===r,{checked:d,unchecked:g}=l;return c("div",{role:"switch","aria-checked":n,class:[`${e}-switch`,n&&`${e}-switch--active`,i&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.pressed&&`${e}-switch--pressed`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},c("div",{class:`${e}-switch__rail`,"aria-hidden":"true"},(d||g)&&c("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},c("div",{class:`${e}-switch__rail-placeholder`},c("div",{class:`${e}-switch__button-placeholder`}),d==null?void 0:d()),c("div",{class:`${e}-switch__rail-placeholder`},c("div",{class:`${e}-switch__button-placeholder`}),g==null?void 0:g())),c("div",{class:`${e}-switch__button`},c(Yo,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?c(ko,{key:"loading",clsPrefix:e,strokeWidth:20}):null}),d&&c("div",{key:"checked",class:`${e}-switch__checked`},d()),g&&c("div",{key:"unchecked",class:`${e}-switch__unchecked`},g()))))}}),Na=O({components:{NSpin:zo,NSwitch:La},props:{landmarks:Array,imgUrl:String},setup(e){const o=b(),i=b();let r,l=b(!1),n;const d=b(!0);xe(async function(){r=i.value.getContext("2d"),await g()}),_e([()=>e.landmarks,()=>e.imgUrl,d],g);async function g(){var _;const m=o.value.getBoundingClientRect(),h=m.width,y=m.height;if((i.value.width!==h||i.value.height!==y)&&(i.value.width=h,i.value.height=y),r.clearRect(0,0,h,y),e.imgUrl){if(!n||n.src!==e.imgUrl)try{l.value=!0,n=await Ke(e.imgUrl)}finally{l.value=!1}let $=1;n.width>h&&($=h/n.width),n.height>y&&($=Math.min($,y/n.height));const S=h/2,L=y/2,D=n.width*$,R=n.height*$,M=S-D/2,v=L-R/2;if(r.drawImage(n,M,v,D,R),((_=e.landmarks)==null?void 0:_.length)===$o&&d.value){let p=function(B){r.beginPath();const C=e.landmarks[B].point,K=C[0]*D+M,E=C[1]*R+v;r.moveTo(K,E),N+=1,x+=e.landmarks[B].visibility},u=function(B){const C=e.landmarks[B].point,K=C[0]*D+M,E=C[1]*R+v;r.lineTo(K,E),N+=1,x+=e.landmarks[B].visibility},z=function(){const B=x/N||0,C=Math.floor(255*B),K=0,E=Math.floor(255*(1-B));r.strokeStyle=`rgb(${C},${K},${E})`,r.stroke(),N=0,x=0};r.lineWidth=1.5;let N=0,x=0;p(8),u(6),u(5),u(4),u(0),u(1),u(2),u(3),u(7),z(),p(10),u(9),z(),p(12),u(24),u(23),u(11),u(12),z(),p(12),u(14),u(16),z(),p(11),u(13),u(15),z(),p(24),u(26),u(28),z(),p(23),u(25),u(27),z(),p(16),u(18),u(20),u(16),u(22),z(),p(15),u(17),u(19),u(15),u(21),z(),p(28),u(32),u(30),u(28),z(),p(27),u(29),u(31),u(27),z()}}}return{wrapper:o,canvas:i,imageLoading:l,drawLandmarks:d}}});const Va={class:"normalized-landmarks-canvas",ref:"wrapper"},Da={ref:"canvas"};function Ia(e,o,i,r,l,n){const d=W("n-spin"),g=W("n-switch");return G(),ue("div",Va,[w(d,{show:e.imageLoading},{default:V(()=>[k("canvas",Da,null,512)]),_:1},8,["show"]),w(g,{value:e.drawLandmarks,"onUpdate:value":o[0]||(o[0]=m=>e.drawLandmarks=m),style:{position:"absolute",right:"4px",top:"4px","z-index":"2"}},null,8,["value"])],512)}var Ua=Ee(Na,[["render",Ia]]);const Qe=[0,1,0];class Wa{constructor(){ae(this,"_matrix",new Float32Array(16));ae(this,"_position",new Float32Array([0,0,0]));ae(this,"_quaternion",je(new Float32Array(4),0,0,0));ae(this,"_scale",new Float32Array([1,1,1]));ae(this,"matrixNeedsUpdate",!0)}updateMatrix(){So(this._matrix,this._quaternion,this._position,this._scale),this.matrixNeedsUpdate=!1}get matrix(){return this.matrixNeedsUpdate&&this.updateMatrix(),this._matrix}set matrix(o){this._matrix.set(o),Ae(this._position,this._matrix),Pe(this._quaternion,this._matrix),Me(this._scale,this._matrix),this.matrixNeedsUpdate=!1}get x(){return this._position[0]}set x(o){o!==this._position[0]&&(this._position[0]=o,this.matrixNeedsUpdate=!0)}get y(){return this._position[1]}set y(o){o!==this._position[1]&&(this._position[1]=o,this.matrixNeedsUpdate=!0)}get z(){return this._position[2]}set z(o){o!==this._position[2]&&(this._position[2]=o,this.matrixNeedsUpdate=!0)}get position(){return this._position}set position(o){qe(o,this._position)||(this._position.set(o),this.matrixNeedsUpdate=!0)}get scaleX(){return this._scale[0]}set scaleX(o){o!==this._scale[0]&&(this._scale[0]=o,this.matrixNeedsUpdate=!0)}get scaleY(){return this._scale[1]}set scaleY(o){o!==this._scale[1]&&(this._scale[1]=o,this.matrixNeedsUpdate=!0)}get scaleZ(){return this._scale[2]}set scaleZ(o){o!==this._scale[2]&&(this._scale[2]=o,this.matrixNeedsUpdate=!0)}get scale(){return this._scale}set scale(o){qe(o,this._scale)||(this._scale.set(o),this.matrixNeedsUpdate=!0)}get quaternion(){return this._quaternion}set quaternion(o){Ro(o,this._quaternion)||(this._quaternion.set(o),this.matrixNeedsUpdate=!0)}setRotationDegrees(o,i,r){je(this._quaternion,o,i,r),this.matrixNeedsUpdate=!0}rotateX(o){Bo(this._quaternion,this._quaternion,o),this.matrixNeedsUpdate=!0}rotateY(o){Fo(this._quaternion,this._quaternion,o),this.matrixNeedsUpdate=!0}rotateZ(o){Ao(this._quaternion,this._quaternion,o),this.matrixNeedsUpdate=!0}lookAt(o,i,r=Qe){Po(this._matrix,o,i,r),Ae(this._position,this._matrix),Pe(this._quaternion,this._matrix),Me(this._scale,this._matrix),this.matrixNeedsUpdate=!0}targetTo(o,i,r=Qe){Mo(this._matrix,o,i,r),Ae(this._position,this._matrix),Pe(this._quaternion,this._matrix),Me(this._scale,this._matrix),this.matrixNeedsUpdate=!0}}function j(...e){const o=[];for(let i=0,r=e.length;i<r-1;++i)o.push(e[i]),o.push(e[i+1]);return o}class Oa extends Wa{constructor(){super(...arguments);ae(this,"geometry",new Ge(Ge.TYPE_LINES))}setLandmarks(o,i){this.dispose(o);const r=this.geometry,l=[];for(let d of i)l.push({a_position:[d.point[0],d.point[1],d.point[2]],a_color:[d.visibility,0,1-d.visibility,1]});const n=[...j(8,6,5,4,0,1,2,3,7),...j(10,9),...j(12,24,23,11,12),...j(12,14,16),...j(11,13,15),...j(24,26,28),...j(23,25,27),...j(16,18,20,16,22),...j(15,17,19,15,21),...j(28,32,30,28),...j(27,29,31,27)];r.setVertices(l),r.indices=n}dispose(o){o.disposeGeometry(this.geometry)}render(o){o.uniform("u_mMatrix",this.matrix),o.drawGeometry(this.geometry)}}var Ha=`#version 300 es\r
\r
precision highp float;\r
\r
in vec4 v_color;\r
\r
uniform vec4 u_color;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = v_color * u_color;\r
}\r
`,Ka=`#version 300 es\r
\r
in vec3 a_position;\r
in vec4 a_color;\r
\r
uniform mat4 u_pvMatrix;\r
uniform mat4 u_mMatrix;\r
\r
out vec4 v_color;\r
\r
void main() {\r
    gl_Position = u_pvMatrix * u_mMatrix * vec4(a_position, 1.0);\r
    v_color = a_color;\r
}\r
`,ja=O({props:{landmarks:Array},setup(e){const o=b(),i=b();let r,l;const n=new To,d=new Lo;d.callback=function(h){n.onInput(h),m()};const g=new Oa;xe(function(){d.setup(i.value),r=new Eo(i.value),l=r.createShader(Ka,Ha),m()}),Xo(function(){d.unload(i.value),r.deleteShader(l),g.dispose(r)}),_e(()=>e.landmarks,function(){n.zoom=1,n.rotateX=0,n.rotateY=0,No(n.target,0,0,0),n.update(),m()});function m(){var $;const h=o.value.getBoundingClientRect(),y=h.width,_=h.height;r.resizeCanvas(y,_),n.fitViewport(y,_),r.clearColor(242/255,242/255,242/255,1),r.clear(!0,!0,!1),r.blendMode(r.BLEND_MODE_PIGMENT),(($=e.landmarks)==null?void 0:$.length)&&(r.depthTest(!1),r.useShader(l),r.uniform("u_color",[1,1,1,1]),r.uniform("u_pvMatrix",n.pvMatrix),g.setLandmarks(r,e.landmarks),g.render(r))}return{container:o,canvas:i}}});const qa={class:"world-landmarks-canvas",ref:"container"},Ga={ref:"canvas"};function Ya(e,o,i,r,l,n){return G(),ue("div",qa,[k("canvas",Ga,null,512)],512)}var Xa=Ee(ja,[["render",Ya]]);const Te=new Worker("/worker/detect-pose.worker.js",{type:"classic"}),Ce=document.createElement("canvas"),et=Ce.getContext("2d");function Za(e){return new Promise(async function(o,i){Te.onmessage=function(l){l.data?o(l.data):i("Failed to run model")};const r=1e3;if(e.width>r||e.height>r){const l=r/Math.max(e.width,e.height),n=Math.floor(e.width*l),d=Math.floor(e.height*l);Ce.width=n,Ce.height=d,et.clearRect(0,0,n,d),et.drawImage(e,0,0,n,d),Te.postMessage(await createImageBitmap(Ce))}else Te.postMessage(await createImageBitmap(e))})}async function Ja(e,o,i,r){const l=new URLSearchParams({client_id:e,query:o,page:i+"",per_page:r+""}),n=await fetch("https://api.unsplash.com/search/photos/?"+l.toString());if(!n.ok)throw new Error(n.statusText);const d=await n.json();return{total:d.total,pages:d.total_pages,photos:d.results}}async function Qa(e,o){const i=new URLSearchParams({client_id:e}),r=await fetch("https://api.unsplash.com/photos/"+o+"?"+i.toString());if(!r.ok)throw new Error(r.statusText);const l=await r.json();return{id:l.id,width:l.width,height:l.height,tags:l.tags.map(n=>n.title),link:l.links.html,urls:l.urls,author:{name:l.user.name,username:l.user.username}}}const tt="unsplash-access-key";var er=O({components:{NButton:Vo,NIcon:Do,NInput:Ba,NRadio:Io,KeyOutlined:sa,SearchOutlined:wa,LeftOutlined:ca,RightOutlined:pa,SaveFilled:ga,NormalizedLandmarksCanvas:Ua,WorldLandmarksCanvas:Xa,SkeletonModelCanvas:Uo},setup:function(){const e=new Wo,o=b(0),i=b(!1),r=b(localStorage.getItem(tt)||""),l=b(""),n=b(1),d=b(20),g=b(!1),m=b(),h=b(new Ye),y=b(!1),_=b(!1),$=b(!1);xe(async function(){try{i.value=!0,await e.load(),o.value=e.data.length}finally{i.value=!1}}),_e(r,function(x){localStorage.setItem(tt,x)});async function S(){try{g.value=!0,m.value=await Ja(r.value,l.value,n.value,d.value)}finally{g.value=!1}}async function L(){n.value=1,await S()}async function D(){n.value=Math.max(n.value-1,1),await S()}async function R(){var x;n.value=Math.min(n.value+1,((x=m.value)==null?void 0:x.pages)||1),await S()}async function M(){var B;const x=Number(prompt("Jump to page",n.value+""));!x||(n.value=Math.max(Math.min(Number(x),((B=m.value)==null?void 0:B.pages)||1),1)||n.value,await S())}async function v(x){const B=e.findById(x);if(B)y.value=!0,h.value=B;else{y.value=!1,$.value=!1;const C=await Qa(r.value,x);h.value=new Ye,h.value.id=C.id,h.value.width=C.width,h.value.height=C.height,h.value.full=C.urls.full,h.value.regular=C.urls.regular,h.value.authorName=C.author.name,h.value.authorUsername=C.author.username,h.value.gender=Oo(C.tags)}}async function p(){try{_.value=!0;const x=await Za(await Ke(h.value.regular));h.value.normalizedLandmarks=x.normalizedLandmarks,h.value.worldLandmarks=x.worldLandmarks}finally{$.value=!0,_.value=!1}}function u(){try{i.value=!0,e.add(h.value),y.value=!0,o.value+=1}finally{i.value=!1}}async function z(){try{i.value=!0,await e.writeToFile()}finally{i.value=!1}}function N(x){h.value.gender=Number(x.target.value)}return{numOfRecords:o,dbLoading:i,accessKey:r,keywords:l,page:n,perPage:d,searchLoading:g,searchResult:m,photo:h,recordInserted:y,modelRunning:_,modelHasBeenRun:$,onSearch:L,prevPage:D,nextPage:R,jumpToPage:M,selectPhoto:v,runModel:p,addRecord:u,saveDataJson:z,onPhotoGenderChange:N}}});const pe=e=>(ta("data-v-e2606508"),e=e(),oa(),e),tr={class:"container rows"},or={class:"cols"},ar={class:"cols",style:{height:"56px"}},rr={class:"photos cols fill"},nr=["onClick"],ir={class:"cols fill"},sr={class:"rows",style:{width:"280px"}},lr={class:"rows",style:{width:"280px",overflow:"auto"}},dr={class:"form"},cr={class:"form-item"},ur=pe(()=>k("label",null,"ID",-1)),hr={class:"form-item"},pr=pe(()=>k("label",null,"Author",-1)),fr={class:"form-item"},vr=pe(()=>k("label",null,"Size",-1)),gr={class:"value"},mr={class:"form-item"},br=pe(()=>k("label",null,"Gender",-1)),wr={class:"value"},xr=se(" Unmarked "),_r=se(" Male "),yr=se(" Female "),Cr={class:"cols",style:{"justify-content":"flex-end"}},kr=se(" Run Model "),zr=se(" Add Record "),$r={class:"cols",style:{"align-items":"center","font-size":"12px",color:"#999"}},Sr=pe(()=>k("div",{class:"fill"},null,-1)),Rr={style:{"margin-right":".5em"}},Br=se(" Save JSON ");function Fr(e,o,i,r,l,n){var v;const d=W("key-outlined"),g=W("n-icon"),m=W("n-input"),h=W("search-outlined"),y=W("left-outlined"),_=W("n-button"),$=W("right-outlined"),S=W("normalized-landmarks-canvas"),L=W("world-landmarks-canvas"),D=W("skeleton-model-canvas"),R=W("n-radio"),M=W("save-filled");return G(),ue("div",tr,[k("div",or,[w(m,{placeholder:"Unsplash Access Key",title:"Unsplash Access Key",style:{width:"140px"},size:"small",value:e.accessKey,"onUpdate:value":o[0]||(o[0]=p=>e.accessKey=p)},{prefix:V(()=>[w(g,null,{default:V(()=>[w(d)]),_:1})]),_:1},8,["value"]),w(m,{placeholder:"Keywords",title:"Keywords",size:"small",value:e.keywords,"onUpdate:value":o[1]||(o[1]=p=>e.keywords=p),disabled:!e.accessKey,loading:e.searchLoading,onKeypress:Zo(e.onSearch,["enter"])},{prefix:V(()=>[w(g,null,{default:V(()=>[w(h)]),_:1})]),_:1},8,["value","disabled","loading","onKeypress"])]),k("div",ar,[w(_,{title:"Prev Page",style:{height:"100%"},size:"tiny",disabled:!e.searchResult||e.page===1,loading:e.searchLoading,onClick:e.prevPage},{icon:V(()=>[w(g,null,{default:V(()=>[w(y)]),_:1})]),_:1},8,["disabled","loading","onClick"]),k("div",rr,[e.searchResult?(G(!0),ue(Jo,{key:0},Qo(e.searchResult.photos,p=>(G(),ue("div",{class:aa(["photo",{selected:p.id===e.photo.id}]),style:ra({"background-image":`url(${p.urls.thumb})`}),onClick:u=>e.selectPhoto(p.id)},null,14,nr))),256)):ea("",!0),k("div",{class:"pages",onDblclick:o[2]||(o[2]=(...p)=>e.jumpToPage&&e.jumpToPage(...p))},he(e.page)+"/"+he(((v=e.searchResult)==null?void 0:v.pages)||0),33)]),w(_,{title:"Next Page",style:{height:"100%"},size:"tiny",disabled:!e.searchResult||e.page>=e.searchResult.pages,loading:e.searchLoading,onClick:e.nextPage},{icon:V(()=>[w(g,null,{default:V(()=>[w($)]),_:1})]),_:1},8,["disabled","loading","onClick"])]),k("div",ir,[w(S,{class:"fill","img-url":e.photo.regular,landmarks:e.photo.normalizedLandmarks},null,8,["img-url","landmarks"]),k("div",sr,[w(L,{style:{width:"280px",height:"280px"},landmarks:e.photo.worldLandmarks},null,8,["landmarks"]),w(D,{style:{width:"280px",height:"280px"},landmarks:e.photo.worldLandmarks,readonly:""},null,8,["landmarks"])]),k("div",lr,[k("div",dr,[k("div",cr,[ur,w(m,{class:"value",placeholder:"",size:"small",readonly:"",value:e.photo.id,"onUpdate:value":o[3]||(o[3]=p=>e.photo.id=p)},null,8,["value"])]),k("div",hr,[pr,w(m,{class:"value",placeholder:"",size:"small",readonly:"",value:e.photo.authorName,"onUpdate:value":o[4]||(o[4]=p=>e.photo.authorName=p)},null,8,["value"])]),k("div",fr,[vr,k("div",gr,he(e.photo.width)+"\xD7"+he(e.photo.height),1)]),k("div",mr,[br,k("div",wr,[w(R,{name:"gender",checked:!e.photo.gender,value:0,disabled:!e.photo.id,onChange:e.onPhotoGenderChange},{default:V(()=>[xr]),_:1},8,["checked","disabled","onChange"]),w(R,{name:"gender",checked:e.photo.gender===1,value:1,disabled:!e.photo.id,onChange:e.onPhotoGenderChange},{default:V(()=>[_r]),_:1},8,["checked","disabled","onChange"]),w(R,{name:"gender",checked:e.photo.gender===2,value:2,disabled:!e.photo.id,onChange:e.onPhotoGenderChange},{default:V(()=>[yr]),_:1},8,["checked","disabled","onChange"])])])]),k("div",Cr,[w(_,{disabled:!e.photo.id||!!e.photo.normalizedLandmarks.length||e.modelRunning||e.modelHasBeenRun,loading:e.modelRunning,onClick:e.runModel},{default:V(()=>[kr]),_:1},8,["disabled","loading","onClick"]),w(_,{disabled:!e.photo.id||!e.photo.normalizedLandmarks.length||e.recordInserted||e.dbLoading,onClick:e.addRecord},{default:V(()=>[zr]),_:1},8,["disabled","onClick"])])])]),k("div",$r,[Sr,k("div",Rr,"Num of Records: "+he(e.numOfRecords),1),w(_,{size:"tiny",type:"primary",loading:e.dbLoading,onClick:e.saveDataJson},{icon:V(()=>[w(M)]),default:V(()=>[Br]),_:1},8,["loading","onClick"])])])}var Lr=Ee(er,[["render",Fr],["__scopeId","data-v-e2606508"]]);export{Lr as default};
//# sourceMappingURL=Editor.5be8b8e0.js.map
