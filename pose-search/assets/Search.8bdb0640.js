var mo=Object.defineProperty,Po=Object.defineProperties;var yo=Object.getOwnPropertyDescriptors;var ei=Object.getOwnPropertySymbols;var Mo=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable;var Vt=(t,e,i)=>e in t?mo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ti=(t,e)=>{for(var i in e||(e={}))Mo.call(e,i)&&Vt(t,i,e[i]);if(ei)for(var i of ei(e))xo.call(e,i)&&Vt(t,i,e[i]);return t},ii=(t,e)=>Po(t,yo(e));var W=(t,e,i)=>(Vt(t,typeof e!="symbol"?e+"":e,i),i);import{e as fe,o as ke,c as gt,f as he,g as Le,h as w,t as Me,i as Oe,j as $,k as T,m as oi,n as Ze,l as De,p as zt,w as Et,q as ri,T as pt,s as qe,u as Ut,F as vt,v as ni,x as li,y as Ee,z as de,A as Ot,r as Se,B as Qe,C as Re,D as si,E as Ao,G as ko,H as Lo}from"./vendor.1b7edcc2.js";import{_ as Dt}from"./index.21a3b0a9.js";import{r as Co,c as K,a as se,b as le,u as So,N as $t,d as ai,e as bt,f as Ft,V as wt,g as mt,h as Ro,p as Pt,i as et,j as Z,k as ht,l as Ae,m as ci,n as To,o as ge,q as Wo,s as tt,t as yt,v as Bt,w as Ue,x as ui,y as Nt,z as Io,A as _o,B as di,C as Vo,D as ee,E as zo,F as Ce,G as Eo,H as Uo,I as Oo,J as hi,K as Ht,L as Do,M as fi,O as $o,P as Kt,Q as Fo,R as Bo,S as No,T as gi,U as Ho,W as Ko,X as jo,Y as pi,Z as Go,_ as vi,$ as Xo,a0 as Mt,a1 as Zo,a2 as xt,a3 as At,a4 as bi,a5 as qo,a6 as Yo,a7 as Jo,a8 as z,a9 as Qo,aa as er,ab as ve,ac as be,ad as tr,ae as ir,af as or,ag as rr,ah as nr,ai as lr,aj as sr,ak as ar}from"./PhotoDataset.243cb9d2.js";const cr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ur=he("path",{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4l-66.1-.3c-4.4 0-8 3.5-8 8c0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4l66 .3c4.4 0 8-3.5 8-8c0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:"currentColor"},null,-1),dr=he("path",{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448s448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z",fill:"currentColor"},null,-1);var hr=fe({name:"CloseCircleOutlined",render:function(e,i){return ke(),gt("svg",cr,[ur,dr])}});const fr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},gr=he("path",{d:"M464 720a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z",fill:"currentColor"},null,-1);var pr=fe({name:"WarningOutlined",render:function(e,i){return ke(),gt("svg",fr,[gr])}});function jt(t,e){let{target:i}=t;for(;i;){if(i.dataset&&i.dataset[e]!==void 0)return!0;i=i.parentElement}return!1}const vr=(typeof window=="undefined"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function br(){return vr}function wr(t,e="default",i=[]){const r=t.$slots[e];return r===void 0?i:r()}const it=(t,...e)=>typeof t=="function"?t(...e):typeof t=="string"?Le(t):typeof t=="number"?Le(String(t)):null;function mr(t){switch(typeof t){case"string":return t||void 0;case"number":return String(t);default:return}}var Pr=fe({name:"Checkmark",render(){return w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},w("g",{fill:"none"},w("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),yr=Co("close",w("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},w("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},w("g",{fill:"currentColor","fill-rule":"nonzero"},w("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),Mr=fe({name:"Empty",render(){return w("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},w("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),w("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),xr=K("base-close",`
 cursor: pointer;
 color: var(--close-color);
`,[se("&:hover",{color:"var(--close-color-hover)"}),se("&:active",{color:"var(--close-color-pressed)"}),le("disabled",{cursor:"not-allowed!important",color:"var(--close-color-disabled)"})]),Ar=fe({name:"BaseClose",props:{clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},onClick:Function},setup(t){return So("BaseClose",xr,Me(t,"clsPrefix")),()=>{const{clsPrefix:e,disabled:i}=t;return w($t,{role:"button",ariaDisabled:i,ariaLabel:"close",clsPrefix:e,class:[`${e}-base-close`,i&&`${e}-base-close--disabled`],onClick:i?void 0:t.onClick},{default:()=>w(yr,null)})}}}),kr=fe({props:{onFocus:Function,onBlur:Function},setup(t){return()=>w("div",{style:"width: 0; height: 0",tabindex:0,onFocus:t.onFocus,onBlur:t.onBlur})}});function wi(t){return Array.isArray(t)?t:[t]}const Gt={STOP:"STOP"};function mi(t,e){const i=e(t);t.children!==void 0&&i!==Gt.STOP&&t.children.forEach(o=>mi(o,e))}function Lr(t,e={}){const{preserveGroup:i=!1}=e,o=[],r=i?n=>{n.isLeaf||(o.push(n.key),l(n.children))}:n=>{n.isLeaf||(n.isGroup||o.push(n.key),l(n.children))};function l(n){n.forEach(r)}return l(t),o}function Cr(t,e){const{isLeaf:i}=t;return i!==void 0?i:!e(t)}function Sr(t){return t.children}function Rr(t){return t.key}function Tr(){return!1}function Wr(t,e){const{isLeaf:i}=t;return!(i===!1&&!Array.isArray(e(t)))}function Ir(t){return t.disabled===!0}function _r(t,e){return t.isLeaf===!1&&!Array.isArray(e(t))}function Xt(t){var e;return t==null?[]:Array.isArray(t)?t:(e=t.checkedKeys)!==null&&e!==void 0?e:[]}function Zt(t){var e;return t==null||Array.isArray(t)?[]:(e=t.indeterminateKeys)!==null&&e!==void 0?e:[]}function Vr(t,e){const i=new Set(t);return e.forEach(o=>{i.has(o)||i.add(o)}),Array.from(i)}function zr(t,e){const i=new Set(t);return e.forEach(o=>{i.has(o)&&i.delete(o)}),Array.from(i)}function Er(t){return(t==null?void 0:t.type)==="group"}function Ur(t){const e=new Map;return t.forEach((i,o)=>{e.set(i.key,o)}),i=>{var o;return(o=e.get(i))!==null&&o!==void 0?o:null}}class Or extends Error{constructor(){super();this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function Dr(t,e,i){return kt(e.concat(t),i)}function $r(t,e){const i=new Set;return t.forEach(o=>{const r=e.treeNodeMap.get(o);if(r!==void 0){let l=r.parent;for(;l!==null&&!(l.disabled||i.has(l.key));)i.add(l.key),l=l.parent}}),i}function Fr(t,e,i){const o=kt(e,i),r=kt(t,i,!0),l=$r(t,i),n=[];return o.forEach(s=>{(r.has(s)||l.has(s))&&n.push(s)}),n.forEach(s=>o.delete(s)),o}function qt(t,e){const{checkedKeys:i,keysToCheck:o,keysToUncheck:r,indeterminateKeys:l,cascade:n,leafOnly:s,checkStrategy:c}=t;if(!n)return o!==void 0?{checkedKeys:Vr(i,o),indeterminateKeys:Array.from(l)}:r!==void 0?{checkedKeys:zr(i,r),indeterminateKeys:Array.from(l)}:{checkedKeys:Array.from(i),indeterminateKeys:Array.from(l)};const{levelTreeNodeMap:a}=e;let d;r!==void 0?d=Fr(r,i,e):o!==void 0?d=Dr(o,i,e):d=kt(i,e);const f=c==="parent",v=c==="child"||s,u=d,b=new Set,M=Math.max.apply(null,Array.from(a.keys()));for(let P=M;P>=0;P-=1){const m=P===0,h=a.get(P);for(const g of h){if(g.isLeaf)continue;const{key:y,shallowLoaded:A}=g;if(v&&A&&g.children.forEach(U=>{!U.disabled&&!U.isLeaf&&U.shallowLoaded&&u.has(U.key)&&u.delete(U.key)}),g.disabled||!A)continue;let S=!0,L=!1,B=!0;for(const U of g.children){const N=U.key;if(!U.disabled){if(B&&(B=!1),u.has(N))L=!0;else if(b.has(N)){L=!0,S=!1;break}else if(S=!1,L)break}}S&&!B?(f&&g.children.forEach(U=>{!U.disabled&&u.has(U.key)&&u.delete(U.key)}),u.add(y)):L&&b.add(y),m&&v&&u.has(y)&&u.delete(y)}}return{checkedKeys:Array.from(u),indeterminateKeys:Array.from(b)}}function kt(t,e,i=!1){const{treeNodeMap:o,getChildren:r}=e,l=new Set,n=new Set(t);return t.forEach(s=>{const c=o.get(s);c!==void 0&&mi(c,a=>{if(a.disabled)return Gt.STOP;const{key:d}=a;if(!l.has(d)&&(l.add(d),n.add(d),_r(a.rawNode,r))){if(i)return Gt.STOP;throw new Or}})}),n}function Br(t,{includeGroup:e=!1,includeSelf:i=!0},o){var r;const l=o.treeNodeMap;let n=t==null?null:(r=l.get(t))!==null&&r!==void 0?r:null;const s={keyPath:[],treeNodePath:[],treeNode:n};if(n==null?void 0:n.ignored)return s.treeNode=null,s;for(;n;)!n.ignored&&(e||!n.isGroup)&&s.treeNodePath.push(n),n=n.parent;return s.treeNodePath.reverse(),i||s.treeNodePath.pop(),s.keyPath=s.treeNodePath.map(c=>c.key),s}function Nr(t){if(t.length===0)return null;const e=t[0];return e.isGroup||e.ignored||e.disabled?e.getNext():e}function Hr(t,e){const i=t.siblings,o=i.length,{index:r}=t;return e?i[(r+1)%o]:r===i.length-1?null:i[r+1]}function Pi(t,e,{loop:i=!1,includeDisabled:o=!1}={}){const r=e==="prev"?Kr:Hr,l={reverse:e==="prev"};let n=!1,s=null;function c(a){if(a!==null){if(a===t){if(!n)n=!0;else if(!t.disabled&&!t.isGroup){s=t;return}}else if((!a.disabled||o)&&!a.ignored&&!a.isGroup){s=a;return}if(a.isGroup){const d=Yt(a,l);d!==null?s=d:c(r(a,i))}else{const d=r(a,!1);if(d!==null)c(d);else{const f=jr(a);(f==null?void 0:f.isGroup)?c(r(f,i)):i&&c(r(a,!0))}}}}return c(t),s}function Kr(t,e){const i=t.siblings,o=i.length,{index:r}=t;return e?i[(r-1+o)%o]:r===0?null:i[r-1]}function jr(t){return t.parent}function Yt(t,e={}){const{reverse:i=!1}=e,{children:o}=t;if(o){const{length:r}=o,l=i?r-1:0,n=i?-1:r,s=i?-1:1;for(let c=l;c!==n;c+=s){const a=o[c];if(!a.disabled&&!a.ignored)if(a.isGroup){const d=Yt(a,e);if(d!==null)return d}else return a}}return null}const Gr={getChild(){return this.ignored?null:Yt(this)},getParent(){const{parent:t}=this;return(t==null?void 0:t.isGroup)?t.getParent():t},getNext(t={}){return Pi(this,"next",t)},getPrev(t={}){return Pi(this,"prev",t)}};function Xr(t,e){const i=e?new Set(e):void 0,o=[];function r(l){l.forEach(n=>{o.push(n),!(n.isLeaf||!n.children||n.ignored)&&(n.isGroup||i===void 0||i.has(n.key))&&r(n.children)})}return r(t),o}function Zr(t,e){const i=t.key;for(;e;){if(e.key===i)return!0;e=e.parent}return!1}function yi(t,e,i,o,r,l=null,n=0){const s=[];return t.forEach((c,a)=>{var d;const f=Object.create(o);if(f.rawNode=c,f.siblings=s,f.level=n,f.index=a,f.isFirstChild=a===0,f.isLastChild=a+1===t.length,f.parent=l,!f.ignored){const v=r(c);Array.isArray(v)&&(f.children=yi(v,e,i,o,r,f,n+1))}s.push(f),e.set(f.key,f),i.has(n)||i.set(n,[]),(d=i.get(n))===null||d===void 0||d.push(f)}),s}function qr(t,e={}){const i=new Map,o=new Map,{getDisabled:r=Ir,getIgnored:l=Tr,getChildren:n=Sr,getIsGroup:s=Er,getKey:c=Rr}=e,a=Object.assign({get key(){return c(this.rawNode)},get disabled(){return r(this.rawNode)},get isGroup(){return s(this.rawNode)},get isLeaf(){return Cr(this.rawNode,n)},get shallowLoaded(){return Wr(this.rawNode,n)},get ignored(){return l(this.rawNode)},contains(h){return Zr(this,h)}},Gr),d=yi(t,i,o,a,n);function f(h){if(h==null)return null;const g=i.get(h);return g&&!g.isGroup&&!g.ignored?g:null}function v(h){if(h==null)return null;const g=i.get(h);return g&&!g.ignored?g:null}function u(h,g){const y=v(h);return y?y.getPrev(g):null}function b(h,g){const y=v(h);return y?y.getNext(g):null}function M(h){const g=v(h);return g?g.getParent():null}function P(h){const g=v(h);return g?g.getChild():null}const m={treeNodes:d,treeNodeMap:i,levelTreeNodeMap:o,maxLevel:Math.max(...o.keys()),getChildren:n,getFlattenedNodes(h){return Xr(d,h)},getNode:f,getPrev:u,getNext:b,getParent:M,getChild:P,getFirstAvailableNode(){return Nr(d)},getPath(h,g={}){return Br(h,g,m)},getCheckedKeys(h,g={}){const{cascade:y=!0,leafOnly:A=!1,checkStrategy:S="all"}=g;return qt({checkedKeys:Xt(h),indeterminateKeys:Zt(h),cascade:y,leafOnly:A,checkStrategy:S},m)},check(h,g,y={}){const{cascade:A=!0,leafOnly:S=!1,checkStrategy:L="all"}=y;return qt({checkedKeys:Xt(g),indeterminateKeys:Zt(g),keysToCheck:h==null?[]:wi(h),cascade:A,leafOnly:S,checkStrategy:L},m)},uncheck(h,g,y={}){const{cascade:A=!0,leafOnly:S=!1,checkStrategy:L="all"}=y;return qt({checkedKeys:Xt(g),indeterminateKeys:Zt(g),keysToUncheck:h==null?[]:wi(h),cascade:A,leafOnly:S,checkStrategy:L},m)},getNonLeafKeys(h={}){return Lr(d,h)}};return m}function Mi(t){return t&-t}class Yr{constructor(e,i){this.l=e,this.min=i;const o=new Array(e+1);for(let r=0;r<e+1;++r)o[r]=0;this.ft=o}add(e,i){if(i===0)return;const{l:o,ft:r}=this;for(e+=1;e<=o;)r[e]+=i,e+=Mi(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===0)return 0;const{ft:i,min:o,l:r}=this;if(e===void 0&&(e=r),e>r)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let l=e*o;for(;e>0;)l+=i[e],e-=Mi(e);return l}getBound(e){let i=0,o=this.l;for(;o>i;){const r=Math.floor((i+o)/2),l=this.sum(r);if(l>e){o=r;continue}else if(l<e){if(i===r)return this.sum(i+1)<=e?i+1:r;i=r}else return r}return i}}const Jr=mt(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[mt("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[mt("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var Qr=fe({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(t){const e=ai();Jr.mount({id:"vueuc/virtual-list",head:!0,ssr:e}),Oe(()=>{const{defaultScrollIndex:y,defaultScrollKey:A}=t;y!=null?f({index:y}):A!=null&&f({key:A})});const i=$(()=>{const y=new Map,{keyField:A}=t;return t.items.forEach((S,L)=>{y.set(S[A],L)}),y}),o=T(null),r=T(void 0),l=new Map,n=$(()=>{const{items:y,itemSize:A,keyField:S}=t,L=new Yr(y.length,A);return y.forEach((B,U)=>{const N=B[S],q=l.get(N);q!==void 0&&L.add(U,q)}),L}),s=T(0),c=T(0),a=bt(()=>Math.max(n.value.getBound(c.value-Ft(t.paddingTop))-1,0)),d=$(()=>{const{value:y}=r;if(y===void 0)return[];const{items:A,itemSize:S}=t,L=a.value,B=Math.min(L+Math.ceil(y/S+1),A.length-1),U=[];for(let N=L;N<=B;++N)U.push(A[N]);return U}),f=y=>{const{left:A,top:S,index:L,key:B,position:U,behavior:N,debounce:q=!0}=y;if(A!==void 0||S!==void 0)u(A,S,N);else if(L!==void 0)v(L,N,q);else if(B!==void 0){const re=i.value.get(B);re!==void 0&&v(re,N,q)}else U==="bottom"?u(0,Number.MAX_SAFE_INTEGER,N):U==="top"&&u(0,0,N)};function v(y,A,S){const{value:L}=n,B=L.sum(y)+Ft(t.paddingTop);if(!S)o.value.scrollTo({left:0,top:B,behavior:A});else{const{scrollTop:U,offsetHeight:N}=o.value;if(B>U){const q=L.get(y);B+q<=U+N||o.value.scrollTo({left:0,top:B+q-N,behavior:A})}else o.value.scrollTo({left:0,top:B,behavior:A})}m=y}function u(y,A,S){o.value.scrollTo({left:y,top:A,behavior:S})}function b(y,A){var S;if(t.ignoreItemResize)return;const{value:L}=n,B=i.value.get(y),U=A.target.offsetHeight;U-t.itemSize===0?l.delete(y):l.set(y,U-t.itemSize);const q=U-L.get(B);q!==0&&(h!==void 0&&B<=h&&((S=o.value)===null||S===void 0||S.scrollBy(0,q)),L.add(B,q),s.value++)}function M(y){Ro(g);const{onScroll:A}=t;A!==void 0&&A(y)}function P(y){r.value=y.contentRect.height;const{onResize:A}=t;A!==void 0&&A(y)}let m,h;function g(){const{value:y}=o;y!=null&&(h=m!=null?m:a.value,m=void 0,c.value=o.value.scrollTop)}return{listHeight:r,listStyle:{overflow:"auto"},keyToIndex:i,itemsStyle:$(()=>{const{itemResizable:y}=t,A=Pt(n.value.sum());return s.value,[t.itemsStyle,{boxSizing:"content-box",height:y?"":A,minHeight:y?A:"",paddingTop:Pt(t.paddingTop),paddingBottom:Pt(t.paddingBottom)}]}),visibleItemsStyle:$(()=>(s.value,{transform:`translate3d(0, ${Pt(n.value.sum(a.value))}, 0)`})),viewportItems:d,listElRef:o,itemsElRef:T(null),scrollTo:f,handleListResize:P,handleListScroll:M,handleItemResize:b}},render(){const{itemResizable:t,keyField:e,keyToIndex:i,visibleItemsTag:o}=this;return w(wt,{onResize:this.handleListResize},{default:()=>{var r,l;return w("div",oi(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?w("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[w(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(n=>{const s=n[e],c=i.get(s),a=this.$slots.default({item:n,index:c})[0];return t?w(wt,{key:s,onResize:d=>this.handleItemResize(s,d)},{default:()=>a}):(a.key=s,a)})})]):(l=(r=this.$slots).empty)===null||l===void 0?void 0:l.call(r)])}})}});const Ye="v-hidden",en=mt("[v-hidden]",{display:"none!important"});var xi=fe({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(t,{slots:e}){const i=T(null),o=T(null);function r(){const{value:n}=i,{getCounter:s,getTail:c}=t;let a;if(s!==void 0?a=s():a=o.value,!n||!a)return;a.hasAttribute(Ye)&&a.removeAttribute(Ye);const{children:d}=n,f=n.offsetWidth,v=[],u=e.tail?c==null?void 0:c():null;let b=u?u.offsetWidth:0,M=!1;const P=n.children.length-(e.tail?1:0);for(let h=0;h<P-1;++h){if(h<0)continue;const g=d[h];if(M){g.hasAttribute(Ye)||g.setAttribute(Ye,"");continue}else g.hasAttribute(Ye)&&g.removeAttribute(Ye);const y=g.offsetWidth;if(b+=y,v[h]=y,b>f){const{updateCounter:A}=t;for(let S=h;S>=0;--S){const L=P-1-S;A!==void 0?A(L):a.textContent=`${L}`;const B=a.offsetWidth;if(b-=v[S],b+B<=f||S===0){M=!0,h=S-1,u&&(h===-1?(u.style.maxWidth=`${f-B}px`,u.style.boxSizing="border-box"):u.style.maxWidth="");break}}}}const{onUpdateOverflow:m}=t;M?m!==void 0&&m(!0):(m!==void 0&&m(!1),a.setAttribute(Ye,""))}const l=ai();return en.mount({id:"vueuc/overflow",head:!0,ssr:l}),Oe(r),{selfRef:i,counterRef:o,sync:r}},render(){const{$slots:t}=this;return Ze(this.sync),w("div",{class:"v-overflow",ref:"selfRef"},[De(t,"default"),t.counter?t.counter():w("span",{style:{display:"inline-block"},ref:"counterRef"}),t.tail?t.tail():null])}}),tn={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};const on=t=>{const{textColorDisabled:e,iconColor:i,textColor2:o,fontSizeSmall:r,fontSizeMedium:l,fontSizeLarge:n,fontSizeHuge:s}=t;return Object.assign(Object.assign({},tn),{fontSizeSmall:r,fontSizeMedium:l,fontSizeLarge:n,fontSizeHuge:s,textColor:e,iconColor:i,extraTextColor:o})},rn={name:"Empty",common:et,self:on};var Ai=rn,nn=K("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--font-size);
`,[Z("icon",`
 width: var(--icon-size);
 height: var(--icon-size);
 font-size: var(--icon-size);
 line-height: var(--icon-size);
 color: var(--icon-color);
 transition:
 color .3s var(--bezier);
 `),Z("description",`
 margin-top: 8px;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `),Z("extra",`
 text-align: center;
 transition: color .3s var(--bezier);
 margin-top: 12px;
 color: var(--extra-text-color);
 `)]);const ln=Object.assign(Object.assign({},Ae.props),{description:{type:String,default:void 0},showDescription:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function});var sn=fe({name:"Empty",props:ln,setup(t){const{mergedClsPrefixRef:e}=ht(t),i=Ae("Empty","Empty",nn,Ai,t,e),{localeRef:o}=ci("Empty"),r=zt(To,null),l=$(()=>{var s,c,a;return(s=t.description)!==null&&s!==void 0?s:(a=(c=r==null?void 0:r.mergedComponentPropsRef.value)===null||c===void 0?void 0:c.Empty)===null||a===void 0?void 0:a.description}),n=$(()=>{var s,c;return((c=(s=r==null?void 0:r.mergedComponentPropsRef.value)===null||s===void 0?void 0:s.Empty)===null||c===void 0?void 0:c.renderIcon)||(()=>w(Mr,null))});return{mergedClsPrefix:e,mergedRenderIcon:n,localizedDescription:$(()=>l.value||o.value.description),cssVars:$(()=>{const{size:s}=t,{common:{cubicBezierEaseInOut:c},self:{[ge("iconSize",s)]:a,[ge("fontSize",s)]:d,textColor:f,iconColor:v,extraTextColor:u}}=i.value;return{"--icon-size":a,"--font-size":d,"--bezier":c,"--text-color":f,"--icon-color":v,"--extra-text-color":u}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;return w("div",{class:`${e}-empty`,style:this.cssVars},w("div",{class:`${e}-empty__icon`},De(t,"icon",void 0,()=>[w($t,{clsPrefix:e},{default:this.mergedRenderIcon})])),this.showDescription?w("div",{class:`${e}-empty__description`},De(t,"default",void 0,()=>[this.localizedDescription])):null,t.extra?w("div",{class:`${e}-empty__extra`},De(t,"extra")):null)}});const an=t=>{const{scrollbarColor:e,scrollbarColorHover:i}=t;return{color:e,colorHover:i}},cn={name:"Scrollbar",common:et,self:an};var ki=cn,un=K("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[se(">",[K("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[se("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),se(">",[K("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])]),K("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 `,[le("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--scrollbar-height);
 `,[se(">",[Z("scrollbar",`
 height: var(--scrollbar-height);
 border-radius: var(--scrollbar-border-radius);
 right: 0;
 `)])]),le("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--scrollbar-width);
 `,[se(">",[Z("scrollbar",`
 width: var(--scrollbar-width);
 border-radius: var(--scrollbar-border-radius);
 bottom: 0;
 `)])]),le("disabled",[se(">",[Z("scrollbar",{pointerEvents:"none"})])]),se(">",[Z("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--scrollbar-color);
 transition: background-color .2s var(--scrollbar-bezier);
 `,[Wo(),se("&:hover",{backgroundColor:"var(--scrollbar-color-hover)"})])])])])]);const dn=Object.assign(Object.assign({},Ae.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:{type:Boolean,default:!1},container:Function,content:Function,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function}),hn=fe({name:"Scrollbar",props:dn,inheritAttrs:!1,setup(t){const{mergedClsPrefixRef:e}=ht(t),i=T(null),o=T(null),r=T(null),l=T(null),n=T(null),s=T(null),c=T(null),a=T(null),d=T(null),f=T(null),v=T(0),u=T(0),b=T(!1),M=T(!1);let P=!1,m=!1,h,g,y=0,A=0,S=0,L=0;const B=br(),U=$(()=>{const{value:R}=c,{value:V}=n,{value:G}=d;return R===null||V===null||G===null?0:Math.min(R,G*R/V+t.size*1.5)}),N=$(()=>`${U.value}px`),q=$(()=>{const{value:R}=a,{value:V}=s,{value:G}=f;return R===null||V===null||G===null?0:G*R/V+t.size*1.5}),re=$(()=>`${q.value}px`),Y=$(()=>{const{value:R}=c,{value:V}=v,{value:G}=n,{value:Q}=d;return R===null||G===null||Q===null?0:V/(G-R)*(Q-U.value)}),ae=$(()=>`${Y.value}px`),pe=$(()=>{const{value:R}=a,{value:V}=u,{value:G}=s,{value:Q}=f;return R===null||G===null||Q===null?0:V/(G-R)*(Q-q.value)}),x=$(()=>`${pe.value}px`),I=$(()=>{const{value:R}=c,{value:V}=n;return R!==null&&V!==null&&V>R}),ie=$(()=>{const{value:R}=a,{value:V}=s;return R!==null&&V!==null&&V>R}),te=$(()=>{const{container:R}=t;return R?R():i.value}),ce=$(()=>{const{content:R}=t;return R?R():o.value}),me=xe,we=R=>{const{onResize:V}=t;V&&V(R),xe()},Pe=(R,V)=>{if(!t.scrollable)return;if(typeof R=="number"){ue(R,V!=null?V:0,0,!1,"auto");return}const{left:G,top:Q,index:p,elSize:C,position:F,behavior:D,el:X,debounce:ne=!0}=R;(G!==void 0||Q!==void 0)&&ue(G!=null?G:0,Q!=null?Q:0,0,!1,D),X!==void 0?ue(0,X.offsetTop,X.offsetHeight,ne,D):p!==void 0&&C!==void 0?ue(0,p*C,C,ne,D):F==="bottom"?ue(0,Number.MAX_SAFE_INTEGER,0,!1,D):F==="top"&&ue(0,0,0,!1,D)};function ue(R,V,G,Q,p){const{value:C}=te;if(!!C){if(Q){const{scrollTop:F,offsetHeight:D}=C;if(V>F){V+G<=F+D||C.scrollTo({left:R,top:V+G-D,behavior:p});return}}C.scrollTo({left:R,top:V,behavior:p})}}function ye(){He(),Ke(),xe()}function Fe(){Ie()}function Ie(){Be(),Ne()}function Be(){g!==void 0&&window.clearTimeout(g),g=window.setTimeout(()=>{M.value=!1},t.duration)}function Ne(){h!==void 0&&window.clearTimeout(h),h=window.setTimeout(()=>{b.value=!1},t.duration)}function He(){h!==void 0&&window.clearTimeout(h),b.value=!0}function Ke(){g!==void 0&&window.clearTimeout(g),M.value=!0}function _e(R){const{onScroll:V}=t;V&&V(R),Te()}function Te(){const{value:R}=te;R&&(v.value=R.scrollTop,u.value=R.scrollLeft)}function je(){const{value:R}=ce;R&&(n.value=R.offsetHeight,s.value=R.offsetWidth);const{value:V}=te;V&&(c.value=V.offsetHeight,a.value=V.offsetWidth);const{value:G}=l,{value:Q}=r;G&&(f.value=G.offsetWidth),Q&&(d.value=Q.offsetHeight)}function xe(){!t.scrollable||(je(),Te())}function Ve(R){R.preventDefault(),R.stopPropagation(),m=!0,yt("mousemove",window,k,!0),yt("mouseup",window,H,!0),A=u.value,S=R.clientX}function k(R){if(!m)return;h!==void 0&&window.clearTimeout(h),g!==void 0&&window.clearTimeout(g);const{value:V}=a,{value:G}=s,{value:Q}=q;if(V===null||G===null)return;const C=(R.clientX-S)*(G-V)/(V-Q),F=G-V;let D=A+C;D=Math.min(F,D),D=Math.max(D,0);const{value:X}=te;if(X){X.scrollLeft=D;const{internalOnUpdateScrollLeft:ne}=t;ne&&ne(D)}}function H(R){R.preventDefault(),R.stopPropagation(),tt("mousemove",window,k,!0),tt("mouseup",window,H,!0),m=!1,xe();const{value:V}=te;(V==null?void 0:V.contains(R.target))||Ie()}function We(R){R.preventDefault(),R.stopPropagation(),P=!0,yt("mousemove",window,Ge,!0),yt("mouseup",window,Xe,!0),y=v.value,L=R.clientY}function Ge(R){if(!P)return;h!==void 0&&window.clearTimeout(h),g!==void 0&&window.clearTimeout(g);const{value:V}=c,{value:G}=n,{value:Q}=U;if(V===null||G===null)return;const C=(R.clientY-L)*(G-V)/(V-Q),F=G-V;let D=y+C;D=Math.min(F,D),D=Math.max(D,0);const{value:X}=te;X&&(X.scrollTop=D)}function Xe(R){R.preventDefault(),R.stopPropagation(),tt("mousemove",window,Ge,!0),tt("mouseup",window,Xe,!0),P=!1,xe();const{value:V}=te;(V==null?void 0:V.contains(R.target))||Ie()}Et(()=>{const{value:R}=ie,{value:V}=I,{value:G}=e,{value:Q}=l,{value:p}=r;Q&&(R?Q.classList.remove(`${G}-scrollbar-rail--disabled`):Q.classList.add(`${G}-scrollbar-rail--disabled`)),p&&(V?p.classList.remove(`${G}-scrollbar-rail--disabled`):p.classList.add(`${G}-scrollbar-rail--disabled`))}),Oe(()=>{t.container||xe()}),ri(()=>{h!==void 0&&window.clearTimeout(h),g!==void 0&&window.clearTimeout(g),tt("mousemove",window,Ge,!0),tt("mouseup",window,Xe,!0)});const Je=Ae("Scrollbar","Scrollbar",un,ki,t,e);return{sync:xe,scrollTo:Pe,mergedClsPrefix:e,containerScrollTop:v,containerRef:i,contentRef:o,yRailRef:r,xRailRef:l,needYBar:I,needXBar:ie,yBarSizePx:N,xBarSizePx:re,yBarTopPx:ae,xBarLeftPx:x,isShowXBar:b,isShowYBar:M,isIos:B,handleScroll:_e,handleContentResize:me,handleContainerResize:we,handleMouseEnterWrapper:ye,handleMouseLeaveWrapper:Fe,handleYScrollMouseDown:We,handleXScrollMouseDown:Ve,cssVars:$(()=>{const{common:{cubicBezierEaseInOut:R,scrollbarBorderRadius:V,scrollbarHeight:G,scrollbarWidth:Q},self:{color:p,colorHover:C}}=Je.value;return{"--scrollbar-bezier":R,"--scrollbar-color":p,"--scrollbar-color-hover":C,"--scrollbar-border-radius":V,"--scrollbar-width":Q,"--scrollbar-height":G}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;if(!this.scrollable)return De(t,"default");const i=()=>w("div",oi(this.$attrs,{class:`${e}-scrollbar`,style:this.cssVars,onMouseenter:this.handleMouseEnterWrapper,onMouseleave:this.handleMouseLeaveWrapper}),[this.container?De(t,"default"):w("div",{ref:"containerRef",class:`${e}-scrollbar-container`,style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},w(wt,{onResize:this.handleContentResize},{default:()=>w("div",{ref:"contentRef",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${e}-scrollbar-content`,this.contentClass]},t)})),w("div",{ref:"yRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--vertical`,style:[this.horizontalRailStyle]},w(pt,{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?w("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),w("div",{ref:"xRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--horizontal`,style:[this.verticalRailStyle]},w(pt,{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?w("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,left:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))]);return this.container?i():w(wt,{onResize:this.handleContainerResize},{default:i})}});var fn=hn;const gn=w(Pr);function pn(t,e){return w(pt,{name:"fade-in-scale-up-transition"},{default:()=>t?w($t,{clsPrefix:e,class:`${e}-base-select-option__check`},{default:()=>gn}):null})}var Li=fe({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(t){const{valueRef:e,pendingTmNodeRef:i,multipleRef:o,valueSetRef:r,renderLabelRef:l,renderOptionRef:n,handleOptionClick:s,handleOptionMouseEnter:c}=zt(Bt),a=bt(()=>{const{value:u}=i;return u?t.tmNode.key===u.key:!1});function d(u){const{tmNode:b}=t;b.disabled||s(u,b)}function f(u){const{tmNode:b}=t;b.disabled||c(u,b)}function v(u){const{tmNode:b}=t,{value:M}=a;b.disabled||M||c(u,b)}return{multiple:o,isGrouped:bt(()=>{const{tmNode:u}=t,{parent:b}=u;return b&&b.rawNode.type==="group"}),isPending:a,isSelected:bt(()=>{const{value:u}=e,{value:b}=o;if(u===null)return!1;const M=t.tmNode.rawNode.value;if(b){const{value:P}=r;return P.has(M)}else return u===M}),renderLabel:l,renderOption:n,handleMouseMove:v,handleMouseEnter:f,handleClick:d}},render(){const{clsPrefix:t,tmNode:{rawNode:e},isSelected:i,isPending:o,isGrouped:r,multiple:l,renderOption:n,renderLabel:s,handleClick:c,handleMouseEnter:a,handleMouseMove:d}=this,v=pn(l&&i,t),u=s?[s(e,i),v]:[it(e.label,e,i),v],b=w("div",{class:[`${t}-base-select-option`,e.class,{[`${t}-base-select-option--disabled`]:e.disabled,[`${t}-base-select-option--selected`]:i,[`${t}-base-select-option--grouped`]:r,[`${t}-base-select-option--pending`]:o}],style:e.style,onClick:c,onMouseenter:a,onMousemove:d},w("div",{class:`${t}-base-select-option__content`},u));return e.render?e.render({node:b,option:e,selected:i}):n?n({node:b,option:e,selected:i}):b}}),Ci=fe({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:t,renderOptionRef:e}=zt(Bt);return{renderLabel:t,renderOption:e}},render(){const{clsPrefix:t,renderLabel:e,renderOption:i,tmNode:{rawNode:o}}=this,r=e?e(o,!1):it(o.label,o,!1),l=w("div",{class:`${t}-base-select-group-header`},r);return o.render?o.render({node:l,option:o}):i?i({node:l,option:o,selected:!1}):l}}),vn=K("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--border-radius);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 background-color: var(--color);
`,[le("multiple",[K("base-select-option",`
 padding-right: 28px;
 `)]),K("scrollbar",`
 max-height: var(--height);
 `),K("virtual-list",`
 max-height: var(--height);
 `),K("base-select-option",`
 min-height: var(--option-height);
 font-size: var(--option-font-size);
 display: flex;
 align-items: center;
 `,[Z("content",`
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),K("base-select-group-header",`
 min-height: var(--option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),K("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),Z("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),Z("loading",`
 color: var(--loading-color);
 font-size: var(--loading-size);
 `),Z("action",`
 padding: 8px var(--option-padding-left);
 font-size: var(--option-font-size);
 transition: 
 color .3s var(--bezier);
 border-color .3s var(--bezier);
 border-top: 1px solid var(--action-divider-color);
 color: var(--action-text-color);
 `),K("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--option-padding);
 color: var(--group-header-text-color);
 `),K("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--option-padding);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 opacity .3s var(--bezier);
 box-sizing: border-box;
 color: var(--option-text-color);
 opacity: 1;
 `,[se("&:active",`
 color: var(--option-text-color-pressed);
 `),le("grouped",`
 padding-left: calc(var(--option-padding-left) * 1.5);
 `),le("pending",`
 background-color: var(--option-color-pending);
 `),le("selected",`
 color: var(--option-text-color-active);
 background-color: var(--option-color-active);
 `),le("disabled",`
 cursor: not-allowed;
 `,[Ue("selected",`
 color: var(--option-text-color-disabled);
 `),le("selected",`
 opacity: var(--option-opacity-disabled);
 `)]),Z("check",`
 font-size: 16px;
 position: absolute;
 right: 8px;
 top: calc(50% - 7px);
 color: var(--option-check-color);
 transition: color .3s var(--bezier);
 `,[ui({enterScale:"0.5"})])])]),bn={height:"calc(var(--option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};const wn=t=>{const{borderRadius:e,popoverColor:i,textColor3:o,dividerColor:r,textColor2:l,primaryColorPressed:n,textColorDisabled:s,primaryColor:c,opacityDisabled:a,hoverColor:d,fontSizeSmall:f,fontSizeMedium:v,fontSizeLarge:u,fontSizeHuge:b,heightSmall:M,heightMedium:P,heightLarge:m,heightHuge:h}=t;return Object.assign(Object.assign({},bn),{optionFontSizeSmall:f,optionFontSizeMedium:v,optionFontSizeLarge:u,optionFontSizeHuge:b,optionHeightSmall:M,optionHeightMedium:P,optionHeightLarge:m,optionHeightHuge:h,borderRadius:e,color:i,groupHeaderTextColor:o,actionDividerColor:r,optionTextColor:l,optionTextColorPressed:n,optionTextColorDisabled:s,optionTextColorActive:c,optionOpacityDisabled:a,optionCheckColor:c,optionColorPending:d,optionColorActive:d,actionTextColor:l,loadingColor:c})},mn=Nt({name:"InternalSelectMenu",common:et,peers:{Scrollbar:ki,Empty:Ai},self:wn});var Si=mn,Pn=fe({name:"InternalSelectMenu",props:Object.assign(Object.assign({},Ae.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},width:[Number,String],autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onToggle:Function}),setup(t){const e=Ae("InternalSelectMenu","InternalSelectMenu",vn,Si,t,Me(t,"clsPrefix")),i=T(null),o=T(null),r=T(null),l=$(()=>t.treeMate.getFlattenedNodes()),n=$(()=>Ur(l.value)),s=T(null);function c(){const{treeMate:x}=t;N(t.autoPending?t.value===null?x.getFirstAvailableNode():t.multiple?x.getNode((t.value||[])[(t.value||[]).length-1])||x.getFirstAvailableNode():x.getNode(t.value)||x.getFirstAvailableNode():null)}c(),Oe(()=>{Et(()=>{t.show&&(c(),Ze(q))})});const a=$(()=>Ft(e.value.self[ge("optionHeight",t.size)])),d=$(()=>di(e.value.self[ge("padding",t.size)])),f=$(()=>t.multiple&&Array.isArray(t.value)?new Set(t.value):new Set),v=$(()=>{const x=l.value;return x&&x.length===0}),u=$(()=>[{width:Vo(t.width)},ae.value]);qe(Me(t,"treeMate"),()=>{if(t.autoPending){const x=t.treeMate.getFirstAvailableNode();N(x)}else N(null)});function b(x){const{onToggle:I}=t;I&&I(x)}function M(x){const{onScroll:I}=t;I&&I(x)}function P(x){var I;(I=r.value)===null||I===void 0||I.sync(),M(x)}function m(){var x;(x=r.value)===null||x===void 0||x.sync()}function h(){const{value:x}=s;return x||null}function g(x,I){I.disabled||N(I,!1)}function y(x,I){I.disabled||b(I)}function A(x){var I;jt(x,"action")||(I=t.onKeyup)===null||I===void 0||I.call(t,x)}function S(x){var I;jt(x,"action")||(I=t.onKeydown)===null||I===void 0||I.call(t,x)}function L(x){var I;(I=t.onMousedown)===null||I===void 0||I.call(t,x),!t.focusable&&x.preventDefault()}function B(){const{value:x}=s;x&&N(x.getNext({loop:!0}),!0)}function U(){const{value:x}=s;x&&N(x.getPrev({loop:!0}),!0)}function N(x,I=!1){s.value=x,I&&q()}function q(){var x,I;const ie=s.value;if(!ie)return;const te=n.value(ie.key);te!==null&&(t.virtualScroll?(x=o.value)===null||x===void 0||x.scrollTo({index:te}):(I=r.value)===null||I===void 0||I.scrollTo({index:te,elSize:a.value}))}function re(x){var I,ie;((I=i.value)===null||I===void 0?void 0:I.contains(x.target))&&((ie=t.onFocus)===null||ie===void 0||ie.call(t,x))}function Y(x){var I,ie;((I=i.value)===null||I===void 0?void 0:I.contains(x.relatedTarget))||(ie=t.onBlur)===null||ie===void 0||ie.call(t,x)}Ut(Bt,{handleOptionMouseEnter:g,handleOptionClick:y,valueSetRef:f,multipleRef:Me(t,"multiple"),valueRef:Me(t,"value"),renderLabelRef:Me(t,"renderLabel"),renderOptionRef:Me(t,"renderOption"),pendingTmNodeRef:s}),Ut(Io,i),Oe(()=>{const{value:x}=r;x&&x.sync()});const ae=$(()=>{const{size:x}=t,{common:{cubicBezierEaseInOut:I},self:{height:ie,borderRadius:te,color:ce,groupHeaderTextColor:me,actionDividerColor:we,optionTextColorPressed:Pe,optionTextColor:ue,optionTextColorDisabled:ye,optionTextColorActive:Fe,optionOpacityDisabled:Ie,optionCheckColor:Be,actionTextColor:Ne,optionColorPending:He,optionColorActive:Ke,loadingColor:_e,loadingSize:Te,[ge("optionFontSize",x)]:je,[ge("optionHeight",x)]:xe,[ge("optionPadding",x)]:Ve}}=e.value;return{"--height":ie,"--action-divider-color":we,"--action-text-color":Ne,"--bezier":I,"--border-radius":te,"--color":ce,"--option-font-size":je,"--group-header-text-color":me,"--option-check-color":Be,"--option-color-pending":He,"--option-color-active":Ke,"--option-height":xe,"--option-opacity-disabled":Ie,"--option-text-color":ue,"--option-text-color-active":Fe,"--option-text-color-disabled":ye,"--option-text-color-pressed":Pe,"--option-padding":Ve,"--option-padding-left":di(Ve,"left"),"--loading-color":_e,"--loading-size":Te}});return Object.assign({mergedTheme:e,virtualListRef:o,scrollbarRef:r,style:u,itemSize:a,padding:d,flattenedNodes:l,empty:v,virtualListContainer(){const{value:x}=o;return x==null?void 0:x.listElRef},virtualListContent(){const{value:x}=o;return x==null?void 0:x.itemsElRef},doScroll:M,handleFocusin:re,handleFocusout:Y,handleKeyUp:A,handleKeyDown:S,handleMouseDown:L,handleVirtualListResize:m,handleVirtualListScroll:P},{selfRef:i,next:B,prev:U,getPendingTmNode:h})},render(){const{$slots:t,virtualScroll:e,clsPrefix:i,mergedTheme:o}=this;return w("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${i}-base-select-menu`,this.multiple&&`${i}-base-select-menu--multiple`],style:this.style,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?w("div",{class:`${i}-base-select-menu__loading`},w(_o,{clsPrefix:i,strokeWidth:20})):this.empty?w("div",{class:`${i}-base-select-menu__empty`},De(t,"empty",void 0,()=>[w(sn,{theme:o.peers.Empty,themeOverrides:o.peerOverrides.Empty})])):w(fn,{ref:"scrollbarRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,scrollable:this.scrollable,container:e?this.virtualListContainer:void 0,content:e?this.virtualListContent:void 0,onScroll:e?void 0:this.doScroll},{default:()=>e?w(Qr,{ref:"virtualListRef",class:`${i}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:r})=>r.isGroup?w(Ci,{key:r.key,clsPrefix:i,tmNode:r}):r.ignored?null:w(Li,{clsPrefix:i,key:r.key,tmNode:r})}):w("div",{class:`${i}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(r=>r.isGroup?w(Ci,{key:r.key,clsPrefix:i,tmNode:r}):w(Li,{clsPrefix:i,key:r.key,tmNode:r})))}),t.action&&w("div",{class:`${i}-base-select-menu__action`,"data-action":!0},De(t,"action")),t.action&&w(kr,{onFocus:this.onTabOut}))}}),yn={closeSizeSmall:"14px",closeSizeMedium:"14px",closeSizeLarge:"14px",padding:"0 7px",closeMargin:"0 0 0 3px",closeMarginRtl:"0 3px 0 0"};const Mn=t=>{const{textColor2:e,primaryColorHover:i,primaryColorPressed:o,primaryColor:r,infoColor:l,successColor:n,warningColor:s,errorColor:c,baseColor:a,borderColor:d,opacityDisabled:f,tagColor:v,closeColor:u,closeColorHover:b,closeColorPressed:M,borderRadiusSmall:P,fontSizeTiny:m,fontSizeSmall:h,fontSizeMedium:g,heightTiny:y,heightSmall:A,heightMedium:S}=t;return Object.assign(Object.assign({},yn),{heightSmall:y,heightMedium:A,heightLarge:S,borderRadius:P,opacityDisabled:f,fontSizeSmall:m,fontSizeMedium:h,fontSizeLarge:g,textColorCheckable:e,textColorHoverCheckable:i,textColorPressedCheckable:o,textColorChecked:a,colorCheckable:"#0000",colorHoverCheckable:"#0000",colorPressedCheckable:"#0000",colorChecked:r,colorCheckedHover:i,colorCheckedPressed:o,border:`1px solid ${d}`,textColor:e,color:v,closeColor:u,closeColorHover:b,closeColorPressed:M,borderPrimary:`1px solid ${ee(r,{alpha:.3})}`,textColorPrimary:r,colorPrimary:ee(r,{alpha:.1}),closeColorPrimary:ee(r,{alpha:.75}),closeColorHoverPrimary:ee(r,{alpha:.6}),closeColorPressedPrimary:ee(r,{alpha:.9}),borderInfo:`1px solid ${ee(l,{alpha:.3})}`,textColorInfo:l,colorInfo:ee(l,{alpha:.1}),closeColorInfo:ee(l,{alpha:.75}),closeColorHoverInfo:ee(l,{alpha:.6}),closeColorPressedInfo:ee(l,{alpha:.9}),borderSuccess:`1px solid ${ee(n,{alpha:.3})}`,textColorSuccess:n,colorSuccess:ee(n,{alpha:.1}),closeColorSuccess:ee(n,{alpha:.75}),closeColorHoverSuccess:ee(n,{alpha:.6}),closeColorPressedSuccess:ee(n,{alpha:.9}),borderWarning:`1px solid ${ee(s,{alpha:.35})}`,textColorWarning:s,colorWarning:ee(s,{alpha:.12}),closeColorWarning:ee(s,{alpha:.75}),closeColorHoverWarning:ee(s,{alpha:.6}),closeColorPressedWarning:ee(s,{alpha:.9}),borderError:`1px solid ${ee(c,{alpha:.23})}`,textColorError:c,colorError:ee(c,{alpha:.08}),closeColorError:ee(c,{alpha:.65}),closeColorHoverError:ee(c,{alpha:.5}),closeColorPressedError:ee(c,{alpha:.8})})},xn={name:"Tag",common:et,self:Mn};var An=xn,kn={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},Ln=K("tag",`
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--padding);
 border-radius: var(--border-radius);
 color: var(--text-color);
 background-color: var(--color);
 transition: 
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 opacity .3s var(--bezier);
 line-height: 1.5;
 height: var(--height);
 font-size: var(--font-size);
`,[Z("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--border);
 transition: border-color .3s var(--bezier);
 `),Z("close",`
 font-size: var(--close-size);
 margin: var(--close-margin);
 transition: color .3s var(--bezier);
 cursor: pointer;
 `),le("round",`
 padding: 0 calc(var(--height) / 2);
 border-radius: calc(var(--height) / 2);
 `),le("disabled",{cursor:"not-allowed !important",opacity:"var(--opacity-disabled)"}),le("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--text-color-checkable);
 background-color: var(--color-checkable);
 `,[Ue("disabled",[se("&:hover",{backgroundColor:"var(--color-hover-checkable)"},[Ue("checked",{color:"var(--text-color-hover-checkable)"})]),se("&:active",{backgroundColor:"var(--color-pressed-checkable)"},[Ue("checked",{color:"var(--text-color-pressed-checkable)"})])]),le("checked",{color:"var(--text-color-checked)",backgroundColor:"var(--color-checked)"},[Ue("disabled",[se("&:hover",{backgroundColor:"var(--color-checked-hover)"}),se("&:active",{backgroundColor:"var(--color-checked-pressed)"})])])])]);const Cn=Object.assign(Object.assign(Object.assign({},Ae.props),kn),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalStopClickPropagation:Boolean,onCheckedChange:{type:Function,validator:()=>!0,default:void 0}});var Jt=fe({name:"Tag",props:Cn,setup(t){const e=T(null),{mergedBorderedRef:i,mergedClsPrefixRef:o,NConfigProvider:r}=ht(t),l=Ae("Tag","Tag",Ln,An,t,o);function n(d){if(!t.disabled&&t.checkable){const{checked:f,onCheckedChange:v,onUpdateChecked:u,"onUpdate:checked":b}=t;u&&u(!f),b&&b(!f),v&&v(!f)}}function s(d){if(t.internalStopClickPropagation&&d.stopPropagation(),!t.disabled){const{onClose:f}=t;f&&Ce(f,d)}}const c={setTextContent(d){const{value:f}=e;f&&(f.textContent=d)}},a=zo("Tag",r==null?void 0:r.mergedRtlRef,o);return Object.assign(Object.assign({},c),{rtlEnabled:a,mergedClsPrefix:o,contentRef:e,mergedBordered:i,handleClick:n,handleCloseClick:s,cssVars:$(()=>{const{type:d,size:f,color:{color:v,textColor:u}={}}=t,{common:{cubicBezierEaseInOut:b},self:{padding:M,closeMargin:P,closeMarginRtl:m,borderRadius:h,opacityDisabled:g,textColorCheckable:y,textColorHoverCheckable:A,textColorPressedCheckable:S,textColorChecked:L,colorCheckable:B,colorHoverCheckable:U,colorPressedCheckable:N,colorChecked:q,colorCheckedHover:re,colorCheckedPressed:Y,[ge("closeSize",f)]:ae,[ge("fontSize",f)]:pe,[ge("height",f)]:x,[ge("color",d)]:I,[ge("textColor",d)]:ie,[ge("border",d)]:te,[ge("closeColor",d)]:ce,[ge("closeColorHover",d)]:me,[ge("closeColorPressed",d)]:we}}=l.value;return{"--bezier":b,"--border-radius":h,"--border":te,"--close-color":ce,"--close-color-hover":me,"--close-color-pressed":we,"--close-margin":P,"--close-margin-rtl":m,"--close-size":ae,"--color":v||I,"--color-checkable":B,"--color-checked":q,"--color-checked-hover":re,"--color-checked-pressed":Y,"--color-hover-checkable":U,"--color-pressed-checkable":N,"--font-size":pe,"--height":x,"--opacity-disabled":g,"--padding":M,"--text-color":u||ie,"--text-color-checkable":y,"--text-color-checked":L,"--text-color-hover-checkable":A,"--text-color-pressed-checkable":S}})})},render(){const{mergedClsPrefix:t,rtlEnabled:e,color:{borderColor:i}={}}=this;return w("div",{class:[`${t}-tag`,{[`${t}-tag--rtl`]:e,[`${t}-tag--disabled`]:this.disabled,[`${t}-tag--checkable`]:this.checkable,[`${t}-tag--checked`]:this.checkable&&this.checked,[`${t}-tag--round`]:this.round}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},w("span",{class:`${t}-tag__content`,ref:"contentRef"},this.$slots),!this.checkable&&this.closable?w(Ar,{clsPrefix:t,class:`${t}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick}):null,!this.checkable&&this.mergedBordered?w("div",{class:`${t}-tag__border`,style:{borderColor:i}}):null)}}),Sn={paddingSingle:"0 26px 0 14px",clearSize:"16px",arrowSize:"16px"};const Rn=t=>{const{borderRadius:e,textColor2:i,textColorDisabled:o,inputColor:r,inputColorDisabled:l,primaryColor:n,primaryColorHover:s,warningColor:c,warningColorHover:a,errorColor:d,errorColorHover:f,borderColor:v,iconColor:u,iconColorDisabled:b,clearColor:M,clearColorHover:P,clearColorPressed:m,placeholderColor:h,placeholderColorDisabled:g,fontSizeTiny:y,fontSizeSmall:A,fontSizeMedium:S,fontSizeLarge:L,heightTiny:B,heightSmall:U,heightMedium:N,heightLarge:q}=t;return Object.assign(Object.assign({},Sn),{fontSizeTiny:y,fontSizeSmall:A,fontSizeMedium:S,fontSizeLarge:L,heightTiny:B,heightSmall:U,heightMedium:N,heightLarge:q,borderRadius:e,textColor:i,textColorDisabled:o,placeholderColor:h,placeholderColorDisabled:g,color:r,colorDisabled:l,colorActive:r,border:`1px solid ${v}`,borderHover:`1px solid ${s}`,borderActive:`1px solid ${n}`,borderFocus:`1px solid ${s}`,boxShadowHover:null,boxShadowActive:`0 0 0 2px ${ee(n,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${ee(n,{alpha:.2})}`,caretColor:n,arrowColor:u,arrowColorDisabled:b,loadingColor:n,borderWarning:`1px solid ${c}`,borderHoverWarning:`1px solid ${a}`,borderActiveWarning:`1px solid ${c}`,borderFocusWarning:`1px solid ${a}`,boxShadowHoverWarning:null,boxShadowActiveWarning:`0 0 0 2px ${ee(c,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${ee(c,{alpha:.2})}`,colorActiveWarning:r,caretColorWarning:c,borderError:`1px solid ${d}`,borderHoverError:`1px solid ${f}`,borderActiveError:`1px solid ${d}`,borderFocusError:`1px solid ${f}`,boxShadowHoverError:null,boxShadowActiveError:`0 0 0 2px ${ee(d,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${ee(d,{alpha:.2})}`,colorActiveError:r,caretColorError:d,clearColor:M,clearColorHover:P,clearColorPressed:m})},Tn=Nt({name:"InternalSelection",common:et,peers:{Popover:Eo},self:Rn});var Ri=Tn,Wn=se([K("base-selection",`
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--border-radius);
 min-height: var(--height);
 line-height: 1.5;
 font-size: var(--font-size);
 `,[K("base-loading",`
 color: var(--loading-color);
 `),K("base-selection-tags",{minHeight:"var(--height)"}),Z("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `),Z("state-border",`
 z-index: 1;
 border-color: #0000;
 `),K("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[Z("arrow",`
 font-size: var(--arrow-size);
 color: var(--arrow-color);
 transition: color .3s var(--bezier);
 `)]),K("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 overflow: hidden;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--padding-single);
 transition: color .3s var(--bezier);
 `),K("base-selection-placeholder",`
 color: var(--placeholder-color);
 `),K("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: 3px 26px 0 14px;
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--color);
 border-radius: inherit;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 `),K("base-selection-label",`
 height: var(--height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 border-radius: inherit;
 background-color: var(--color);
 align-items: center;
 `,[K("base-selection-input",`
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--padding-single);
 background-color: #0000;
 color: var(--text-color);
 transition: color .3s var(--bezier);
 caret-color: var(--caret-color);
 `,[Z("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),Z("render-label",`
 color: var(--text-color);
 `)]),Ue("disabled",[se("&:hover",[Z("state-border",`
 box-shadow: var(--box-shadow-hover);
 border: var(--border-hover);
 `)]),le("focus",[Z("state-border",`
 box-shadow: var(--box-shadow-focus);
 border: var(--border-focus);
 `)]),le("active",[Z("state-border",`
 box-shadow: var(--box-shadow-active);
 border: var(--border-active);
 `),K("base-selection-label",{backgroundColor:"var(--color-active)"}),K("base-selection-tags",{backgroundColor:"var(--color-active)"})])]),le("disabled",{cursor:"not-allowed"},[Z("arrow",`
 color: var(--arrow-color-disabled);
 `),K("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `,[K("base-selection-input",`
 cursor: not-allowed;
 color: var(--text-color-disabled);
 `),Z("render-label",`
 color: var(--text-color-disabled);
 `)]),K("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `),K("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--placeholder-color-disabled);
 `)]),K("base-selection-input-tag",`
 height: calc(var(--height) - 6px);
 line-height: calc(var(--height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[Z("input",`
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--text-color);
 caret-color: var(--caret-color);
 `),Z("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 opacity: 0;
 `)])]),K("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 `),K("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[se("&:last-child",{paddingRight:0}),K("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[Z("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 `)])]),["warning","error"].map(t=>Uo(t,K("base-selection",[Z("state-border",{border:`var(--border-${t})`}),Ue("disabled",[se("&:hover",[Z("state-border",`
 box-shadow: var(--box-shadow-hover-${t});
 border: var(--border-hover-${t});
 `)]),le("active",[Z("state-border",`
 box-shadow: var(--box-shadow-active-${t});
 border: var(--border-active-${t});
 `),K("base-selection-label",{backgroundColor:`var(--color-active-${t})`}),K("base-selection-tags",{backgroundColor:`var(--box-shadow-active-${t})`})]),le("focus",[Z("state-border",`
 box-shadow: var(--box-shadow-focus-${t});
 border: var(--border-focus-${t});
 `)])])])))]),In=fe({name:"InternalSelection",props:Object.assign(Object.assign({},Ae.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:null},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeyup:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,renderLabel:Function}),setup(t){const e=T(null),i=T(null),o=T(null),r=T(null),l=T(null),n=T(null),s=T(null),c=T(null),a=T(null),d=T(null),f=T(!1),v=T(!1),u=T(!1),b=Ae("InternalSelection","InternalSelection",Wn,Ri,t,Me(t,"clsPrefix")),M=$(()=>t.clearable&&!t.disabled&&(u.value||t.active)),P=$(()=>t.selectedOption?t.renderTag?t.renderTag({option:t.selectedOption,handleClose:()=>{}}):t.renderLabel?t.renderLabel(t.selectedOption,!0):it(t.selectedOption.label,t.selectedOption,!0):t.placeholder),m=$(()=>{const k=t.selectedOption;if(!!k)return k.label}),h=$(()=>t.multiple?!!(Array.isArray(t.selectedOptions)&&t.selectedOptions.length):t.selectedOption!==null);function g(){var k;const{value:H}=e;if(H){const{value:We}=i;We&&(We.style.width=`${H.offsetWidth}px`,t.maxTagCount!=="responsive"&&((k=a.value)===null||k===void 0||k.sync()))}}function y(){const{value:k}=d;k&&(k.style.display="none")}function A(){const{value:k}=d;k&&(k.style.display="inline-block")}qe(Me(t,"active"),k=>{k||y()}),qe(Me(t,"pattern"),()=>{t.multiple&&Ze(g)});function S(k){const{onFocus:H}=t;H&&H(k)}function L(k){const{onBlur:H}=t;H&&H(k)}function B(k){const{onDeleteOption:H}=t;H&&H(k)}function U(k){const{onClear:H}=t;H&&H(k)}function N(k){const{onPatternInput:H}=t;H&&H(k)}function q(k){var H;(!k.relatedTarget||!((H=o.value)===null||H===void 0?void 0:H.contains(k.relatedTarget)))&&S(k)}function re(k){var H;((H=o.value)===null||H===void 0?void 0:H.contains(k.relatedTarget))||L(k)}function Y(k){U(k)}function ae(){u.value=!0}function pe(){u.value=!1}function x(k){!t.active||!t.filterable||k.target!==i.value&&k.preventDefault()}function I(k){B(k)}function ie(k){if(k.code==="Backspace"&&!t.pattern.length){const{selectedOptions:H}=t;(H==null?void 0:H.length)&&I(H[H.length-1])}}const te=T(!1);let ce=null;function me(k){const{value:H}=e;if(H){const We=k.target.value;H.textContent=We,g()}te.value?ce=k:N(k)}function we(){te.value=!0}function Pe(){te.value=!1,N(ce),ce=null}function ue(){v.value=!0}function ye(k){v.value=!1}function Fe(){if(t.filterable){v.value=!1;const{value:k}=n;k&&k.focus()}else if(t.multiple){const{value:k}=r;k==null||k.focus()}else{const{value:k}=l;k==null||k.focus()}}function Ie(){const{value:k}=i;k&&(A(),k.focus())}function Be(){const{value:k}=i;k&&k.blur()}function Ne(k){const{value:H}=s;H&&H.setTextContent(`+${k}`)}function He(){const{value:k}=c;return k}function Ke(){return i.value}let _e=null;function Te(){_e!==null&&window.clearTimeout(_e)}function je(){t.disabled||t.active||(Te(),_e=window.setTimeout(()=>{f.value=!0},100))}function xe(){Te()}function Ve(k){k||(Te(),f.value=!1)}return Oe(()=>{Et(()=>{const k=n.value;!k||(k.tabIndex=t.disabled||v.value?-1:0)})}),{mergedTheme:b,mergedClearable:M,patternInputFocused:v,filterablePlaceholder:P,label:m,selected:h,showTagsPanel:f,isCompositing:te,counterRef:s,counterWrapperRef:c,patternInputMirrorRef:e,patternInputRef:i,selfRef:o,multipleElRef:r,singleElRef:l,patternInputWrapperRef:n,overflowRef:a,inputTagElRef:d,handleMouseDown:x,handleFocusin:q,handleClear:Y,handleMouseEnter:ae,handleMouseLeave:pe,handleDeleteOption:I,handlePatternKeyDown:ie,handlePatternInputInput:me,handlePatternInputBlur:ye,handlePatternInputFocus:ue,handleMouseEnterCounter:je,handleMouseLeaveCounter:xe,handleFocusout:re,handleCompositionEnd:Pe,handleCompositionStart:we,onPopoverUpdateShow:Ve,focus:Fe,focusInput:Ie,blurInput:Be,updateCounter:Ne,getCounter:He,getTail:Ke,renderLabel:t.renderLabel,cssVars:$(()=>{const{size:k}=t,{common:{cubicBezierEaseInOut:H},self:{borderRadius:We,color:Ge,placeholderColor:Xe,textColor:Je,paddingSingle:R,caretColor:V,colorDisabled:G,textColorDisabled:Q,placeholderColorDisabled:p,colorActive:C,boxShadowFocus:F,boxShadowActive:D,boxShadowHover:X,border:ne,borderFocus:ze,borderHover:ft,borderActive:Ki,arrowColor:ji,arrowColorDisabled:Gi,loadingColor:Xi,colorActiveWarning:Zi,boxShadowFocusWarning:qi,boxShadowActiveWarning:Yi,boxShadowHoverWarning:Ji,borderWarning:Qi,borderFocusWarning:eo,borderHoverWarning:to,borderActiveWarning:io,colorActiveError:oo,boxShadowFocusError:ro,boxShadowActiveError:no,boxShadowHoverError:lo,borderError:so,borderFocusError:ao,borderHoverError:co,borderActiveError:uo,clearColor:ho,clearColorHover:fo,clearColorPressed:go,clearSize:po,arrowSize:vo,[ge("height",k)]:bo,[ge("fontSize",k)]:wo}}=b.value;return{"--bezier":H,"--border":ne,"--border-active":Ki,"--border-focus":ze,"--border-hover":ft,"--border-radius":We,"--box-shadow-active":D,"--box-shadow-focus":F,"--box-shadow-hover":X,"--caret-color":V,"--color":Ge,"--color-active":C,"--color-disabled":G,"--font-size":wo,"--height":bo,"--padding-single":R,"--placeholder-color":Xe,"--placeholder-color-disabled":p,"--text-color":Je,"--text-color-disabled":Q,"--arrow-color":ji,"--arrow-color-disabled":Gi,"--loading-color":Xi,"--color-active-warning":Zi,"--box-shadow-focus-warning":qi,"--box-shadow-active-warning":Yi,"--box-shadow-hover-warning":Ji,"--border-warning":Qi,"--border-focus-warning":eo,"--border-hover-warning":to,"--border-active-warning":io,"--color-active-error":oo,"--box-shadow-focus-error":ro,"--box-shadow-active-error":no,"--box-shadow-hover-error":lo,"--border-error":so,"--border-focus-error":ao,"--border-hover-error":co,"--border-active-error":uo,"--clear-size":po,"--clear-color":ho,"--clear-color-hover":fo,"--clear-color-pressed":go,"--arrow-size":vo}})}},render(){const{multiple:t,size:e,disabled:i,filterable:o,maxTagCount:r,bordered:l,clsPrefix:n,renderTag:s,renderLabel:c}=this,a=r==="responsive",d=typeof r=="number",f=a||d,v=w(Oo,{clsPrefix:n,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear});let u;if(t){const b=L=>w("div",{class:`${n}-base-selection-tag-wrapper`,key:L.value},s?s({option:L,handleClose:()=>this.handleDeleteOption(L)}):w(Jt,{size:e,closable:!L.disabled,disabled:i,internalStopClickPropagation:!0,onClose:()=>this.handleDeleteOption(L)},{default:()=>c?c(L,!0):it(L.label,L,!0)})),M=(d?this.selectedOptions.slice(0,r):this.selectedOptions).map(b),P=o?w("div",{class:`${n}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},w("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:i,value:this.pattern,autofocus:this.autofocus,class:`${n}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),w("span",{ref:"patternInputMirrorRef",class:`${n}-base-selection-input-tag__mirror`},this.pattern?this.pattern:"")):null,m=a?()=>w("div",{class:`${n}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},w(Jt,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:i})):void 0;let h;if(d){const L=this.selectedOptions.length-r;L>0&&(h=w("div",{class:`${n}-base-selection-tag-wrapper`,key:"__counter__"},w(Jt,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:i},{default:()=>`+${L}`})))}const g=a?o?w(xi,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>M,counter:m,tail:()=>P}):w(xi,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>M,counter:m}):d?M.concat(h):M,y=f?()=>w("div",{class:`${n}-base-selection-popover`},a?M:this.selectedOptions.map(b)):void 0,A=f?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,S=!this.selected&&!this.pattern&&!this.isCompositing?w("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`},this.placeholder):null;if(o){const L=w("div",{ref:"patternInputWrapperRef",class:`${n}-base-selection-tags`},g,a?null:P,v);u=w(vt,null,f?w(hi,Object.assign({},A),{trigger:()=>L,default:y}):L,S)}else{const L=w("div",{ref:"multipleElRef",class:`${n}-base-selection-tags`,tabindex:i?void 0:0},g,v);u=w(vt,null,f?w(hi,Object.assign({},A),{trigger:()=>L,default:y}):L,S)}}else if(o){const b=!this.pattern&&(this.active||!this.selected)&&!this.isCompositing;u=w("div",{ref:"patternInputWrapperRef",class:`${n}-base-selection-label`},w("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${n}-base-selection-input`,value:this.patternInputFocused&&this.active?this.pattern:"",placeholder:"",readonly:i,disabled:i,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),b||this.patternInputFocused&&this.active?null:w("div",{class:`${n}-base-selection-label__render-label ${n}-base-selection-overlay`,key:"input"},s?s({option:this.selectedOption,handleClose:()=>{}}):c?c(this.selectedOption,!0):it(this.label,this.selectedOption,!0)),b?w("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`,key:"placeholder"},this.filterablePlaceholder):null,v)}else u=w("div",{ref:"singleElRef",class:`${n}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?w("div",{class:`${n}-base-selection-input`,title:mr(this.label),key:"input"},w("div",{class:`${n}-base-selection-input__content`},s?s({option:this.selectedOption,handleClose:()=>{}}):c?c(this.selectedOption,!0):it(this.label,this.selectedOption,!0))):w("div",{class:`${n}-base-selection-placeholder ${n}-base-selection-overlay`,key:"placeholder"},this.placeholder),v);return w("div",{ref:"selfRef",class:[`${n}-base-selection`,{[`${n}-base-selection--active`]:this.active,[`${n}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${n}-base-selection--disabled`]:this.disabled,[`${n}-base-selection--multiple`]:this.multiple,[`${n}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeyup:this.onKeyup,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},u,l?w("div",{class:`${n}-base-selection__border`}):null,l?w("div",{class:`${n}-base-selection__state-border`}):null)}});function _n(t){return Lt(t)?t.name||t.key||"key-required":t.value}function Lt(t){return t.type==="group"}function Ti(t){return t.type==="ignored"}const Vn={getKey:_n,getIsGroup:Lt,getIgnored:Ti};function Wi(t,e){try{return!!(1+e.toString().toLowerCase().indexOf(t.trim().toLowerCase()))}catch{return!1}}function zn(t,e,i){if(!e)return t;function o(r){if(!Array.isArray(r))return[];const l=[];for(const n of r)if(Lt(n)){const s=o(n.children);s.length&&l.push(Object.assign({},n,{children:s}))}else{if(Ti(n))continue;e(i,n)&&l.push(n)}return l}return o(t)}function En(t){const e=new Map;return t.forEach(i=>{Lt(i)?i.children.forEach(o=>{e.set(o.value,o)}):e.set(i.value,i)}),e}function Un(t,e){return e?typeof e.label=="string"?Wi(t,e.label):e.value!==void 0?Wi(t,String(e.value)):!1:!1}function On(t){const{boxShadow2:e}=t;return{menuBoxShadow:e}}const Dn=Nt({name:"Select",common:et,peers:{InternalSelection:Ri,InternalSelectMenu:Si},self:On});var $n=Dn,Fn=se([K("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),K("select-menu",`
 margin: 4px 0;
 box-shadow: var(--menu-box-shadow);
 `,[ui()])]);const Bn=Object.assign(Object.assign({},Ae.props),{to:Kt.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:{type:Function,default:Un},placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:{type:Function,default:t=>({label:t,value:t})},fallbackOption:{type:[Function,Boolean],default:()=>t=>({label:String(t),value:t})},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0},items:{type:Array,validator:()=>!0,default:void 0},displayDirective:{type:String,default:"show"}});var Nn=fe({name:"Select",props:Bn,setup(t){const{mergedClsPrefixRef:e,mergedBorderedRef:i,namespaceRef:o}=ht(t),r=Ae("Select","Select",Fn,$n,t,e),l=T(t.defaultValue),n=Me(t,"value"),s=Ht(n,l),c=T(!1),a=T(""),d=$(()=>qr(U.value,Vn)),f=$(()=>En(B.value)),v=T(!1),u=Ht(Me(t,"show"),v),b=T(null),M=T(null),P=T(null),{localeRef:m}=ci("Select"),h=$(()=>{var p;return(p=t.placeholder)!==null&&p!==void 0?p:m.value.placeholder}),g=Do(t,["items","options"]),y=T([]),A=T([]),S=T(new Map),L=$(()=>{const{fallbackOption:p}=t;return p?C=>Object.assign(p(C),{value:C}):!1}),B=$(()=>A.value.concat(y.value).concat(g.value)),U=$(()=>{if(t.remote)return g.value;{const{value:p}=B,{value:C}=a;if(!C.length||!t.filterable)return p;{const{filter:F}=t;return zn(p,F,C)}}});function N(p){const C=t.remote,{value:F}=S,{value:D}=f,{value:X}=L,ne=[];return p.forEach(ze=>{if(D.has(ze))ne.push(D.get(ze));else if(C&&F.has(ze))ne.push(F.get(ze));else if(X){const ft=X(ze);ft&&ne.push(ft)}}),ne}const q=$(()=>{if(t.multiple){const{value:p}=s;return Array.isArray(p)?N(p):[]}return null}),re=$(()=>{const{value:p}=s;return!t.multiple&&!Array.isArray(p)?p===null?null:N([p])[0]||null:null}),Y=fi(t),{mergedSizeRef:ae,mergedDisabledRef:pe}=Y;function x(p,C){const{onChange:F,"onUpdate:value":D,onUpdateValue:X}=t,{nTriggerFormChange:ne,nTriggerFormInput:ze}=Y;F&&Ce(F,p,C),X&&Ce(X,p,C),D&&Ce(D,p,C),l.value=p,ne(),ze()}function I(p){const{onBlur:C}=t,{nTriggerFormBlur:F}=Y;C&&Ce(C,p),F()}function ie(){const{onClear:p}=t;p&&Ce(p)}function te(p){const{onFocus:C}=t,{nTriggerFormFocus:F}=Y;C&&Ce(C,p),F()}function ce(p){const{onSearch:C}=t;C&&Ce(C,p)}function me(p){const{onScroll:C}=t;C&&Ce(C,p)}function we(){var p;const{remote:C,multiple:F}=t;if(C){const{value:D}=S;if(F)(p=q.value)===null||p===void 0||p.forEach(X=>{D.set(X.value,X)});else{const X=re.value;X&&D.set(X.value,X)}}}function Pe(p){const{onUpdateShow:C,"onUpdate:show":F}=t;C&&Ce(C,p),F&&Ce(F,p),v.value=p}function ue(){pe.value||(a.value="",Pe(!0),v.value=!0,t.filterable&&G())}function ye(){Pe(!1)}function Fe(){a.value=""}function Ie(){pe.value||(u.value?t.filterable||ye():ue())}function Be(p){var C,F;((F=(C=P.value)===null||C===void 0?void 0:C.selfRef)===null||F===void 0?void 0:F.contains(p.relatedTarget))||(c.value=!1,I(p),ye())}function Ne(p){te(p),c.value=!0}function He(p){c.value=!0}function Ke(p){var C;((C=b.value)===null||C===void 0?void 0:C.$el.contains(p.relatedTarget))||(c.value=!1,I(p),ye())}function _e(){var p;(p=b.value)===null||p===void 0||p.focus(),ye()}function Te(p){var C;u.value&&(((C=b.value)===null||C===void 0?void 0:C.$el.contains(p.target))||ye())}function je(p){if(!Array.isArray(p))return[];if(L.value)return Array.from(p);{const{remote:C}=t,{value:F}=f;if(C){const{value:D}=S;return p.filter(X=>F.has(X)||D.has(X))}else return p.filter(D=>F.has(D))}}function xe(p){Ve(p.rawNode)}function Ve(p){if(pe.value)return;const{tag:C,remote:F}=t;if(C&&!F){const{value:D}=A,X=D[0]||null;X&&(y.value.push(X),A.value=[])}if(F&&S.value.set(p.value,p),t.multiple){const D=je(s.value),X=D.findIndex(ne=>ne===p.value);if(~X){if(D.splice(X,1),C&&!F){const ne=k(p.value);~ne&&(y.value.splice(ne,1),a.value="")}}else D.push(p.value),a.value="";x(D,N(D))}else{if(C&&!F){const D=k(p.value);~D?y.value=[y.value[D]]:y.value=[]}V(),ye(),x(p.value,p)}}function k(p){return y.value.findIndex(F=>F.value===p)}function H(p){u.value||ue();const{value:C}=p.target;a.value=C;const{tag:F,remote:D}=t;if(ce(C),F&&!D){if(!C){A.value=[];return}const X=t.onCreate(C);g.value.some(ne=>ne.value===X.value)||y.value.some(ne=>ne.value===X.value)?A.value=[]:A.value=[X]}}function We(p){p.stopPropagation();const{multiple:C}=t;!C&&t.filterable&&ye(),ie(),C?x([],[]):x(null,null)}function Ge(p){jt(p,"action")||p.preventDefault()}function Xe(p){me(p)}function Je(p){var C,F,D,X;switch(p.code){case"Space":if(t.filterable)break;case"Enter":case"NumpadEnter":if(u.value){const ne=(C=P.value)===null||C===void 0?void 0:C.getPendingTmNode();ne?xe(ne):t.filterable||(ye(),V())}else ue();p.preventDefault();break;case"ArrowUp":if(t.loading)return;u.value&&((F=P.value)===null||F===void 0||F.prev());break;case"ArrowDown":if(t.loading)return;u.value?(D=P.value)===null||D===void 0||D.next():ue();break;case"Escape":ye(),(X=b.value)===null||X===void 0||X.focus();break}}function R(p){switch(p.code){case"Space":t.filterable||p.preventDefault();break;case"ArrowUp":case"ArrowDown":p.preventDefault();break}}function V(){var p;(p=b.value)===null||p===void 0||p.focus()}function G(){var p;(p=b.value)===null||p===void 0||p.focusInput()}function Q(){var p;(p=M.value)===null||p===void 0||p.syncPosition()}return we(),qe(Me(t,"options"),we),qe(U,()=>{!u.value||Ze(Q)}),qe(s,()=>{!u.value||Ze(Q)}),{mergedClsPrefix:e,mergedBordered:i,namespace:o,treeMate:d,isMounted:$o(),triggerRef:b,menuRef:P,pattern:a,uncontrolledShow:v,mergedShow:u,adjustedTo:Kt(t),uncontrolledValue:l,mergedValue:s,followerRef:M,localizedPlaceholder:h,selectedOption:re,selectedOptions:q,mergedSize:ae,mergedDisabled:pe,focused:c,handleMenuFocus:He,handleMenuBlur:Ke,handleMenuTabOut:_e,handleTriggerClick:Ie,handleToggle:xe,handleDeleteOption:Ve,handlePatternInput:H,handleClear:We,handleTriggerBlur:Be,handleTriggerFocus:Ne,handleKeyDown:R,handleKeyUp:Je,syncPosition:Q,handleMenuAfterLeave:Fe,handleMenuClickOutside:Te,handleMenuScroll:Xe,handleMenuKeyup:Je,handleMenuKeydown:R,handleMenuMousedown:Ge,mergedTheme:r,cssVars:$(()=>{const{self:{menuBoxShadow:p}}=r.value;return{"--menu-box-shadow":p}})}},render(){const{$slots:t,mergedClsPrefix:e}=this;return w("div",{class:`${e}-select`},w(Fo,null,{default:()=>[w(Bo,null,{default:()=>w(In,{ref:"triggerRef",inputProps:this.inputProps,clsPrefix:e,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp})}),w(No,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Kt.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>w(pt,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var i,o;return(this.mergedShow||this.displayDirective==="show")&&ni(w(Pn,Object.assign({},this.menuProps,{ref:"menuRef",virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${e}-select-menu`,(i=this.menuProps)===null||i===void 0?void 0:i.class],clsPrefix:e,focusable:!0,autoPending:!0,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(o=this.menuProps)===null||o===void 0?void 0:o.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeyup:this.handleMenuKeyup,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow}),t),this.displayDirective==="show"?[[li,this.mergedShow],[gi,this.handleMenuClickOutside]]:[[gi,this.handleMenuClickOutside]])}})})]}))}}),Hn=K("radio-group",`
 display: inline-block;
 font-size: var(--font-size);
`,[Z("splitor",`
 display: inline-block;
 vertical-align: bottom;
 width: 1px;
 transition:
 background-color .3s var(--bezier),
 opacity .3s var(--bezier);
 background: var(--button-border-color);
 `,[le("checked",{backgroundColor:"var(--button-border-color-active)"}),le("disabled",{opacity:"var(--opacity-disabled)"})]),le("button-group",`
 white-space: nowrap;
 height: var(--height);
 line-height: var(--height);
 `,[K("radio-button",{height:"var(--height)",lineHeight:"var(--height)"}),Z("splitor",{height:"var(--height)"})]),K("radio-button",`
 vertical-align: bottom;
 outline: none;
 position: relative;
 user-select: none;
 display: inline-block;
 box-sizing: border-box;
 padding-left: 14px;
 padding-right: 14px;
 white-space: nowrap;
 transition:
 background-color .3s var(--bezier),
 opacity .3s var(--bezier),
 border-color .3s var(--bezier),
 color .3s var(--bezier);
 color: var(--button-text-color);
 border-top: 1px solid var(--button-border-color);
 border-bottom: 1px solid var(--button-border-color);
 `,[Z("radio-input",`
 border: 0;
 width: 0;
 height: 0;
 opacity: 0;
 margin: 0;
 `),Z("state-border",`
 pointer-events: none;
 position: absolute;
 box-shadow: var(--button-box-shadow);
 transition: box-shadow .3s var(--bezier);
 left: -1px;
 bottom: -1px;
 right: -1px;
 top: -1px;
 `),se("&:first-child",`
 border-top-left-radius: var(--button-border-radius);
 border-bottom-left-radius: var(--button-border-radius);
 border-left: 1px solid var(--button-border-color);
 `,[Z("state-border",`
 border-top-left-radius: var(--button-border-radius);
 border-bottom-left-radius: var(--button-border-radius);
 `)]),se("&:last-child",`
 border-top-right-radius: var(--button-border-radius);
 border-bottom-right-radius: var(--button-border-radius);
 border-right: 1px solid var(--button-border-color);
 `,[Z("state-border",`
 border-top-right-radius: var(--button-border-radius);
 border-bottom-right-radius: var(--button-border-radius);
 `)]),Ue("disabled",`
 cursor: pointer;
 `,[se("&:hover",[Z("state-border",`
 transition: box-shadow .3s var(--bezier);
 box-shadow: var(--button-box-shadow-hover);
 `),Ue("checked",{color:"var(--button-text-color-hover)"})]),le("focus",[se("&:not(:active)",[Z("state-border",{boxShadow:"var(--button-box-shadow-focus)"})])])]),le("checked",`
 background: var(--button-color-active);
 color: var(--button-text-color-active);
 border-color: var(--button-border-color-active);
 `),le("disabled",`
 cursor: not-allowed;
 opacity: var(--opacity-disabled);
 `)])]);function Kn(t,e,i){var o;const r=[];let l=!1;for(let n=0;n<t.length;++n){const s=t[n],c=(o=s.type)===null||o===void 0?void 0:o.name;c==="RadioButton"&&(l=!0);const a=s.props;if(c!=="RadioButton"){r.push(s);continue}if(n===0)r.push(s);else{const d=r[r.length-1].props,f=e===d.value,v=d.disabled,u=e===a.value,b=a.disabled,M=(f?2:0)+(v?0:1),P=(u?2:0)+(b?0:1),m={[`${i}-radio-group__splitor--disabled`]:v,[`${i}-radio-group__splitor--checked`]:f},h={[`${i}-radio-group__splitor--disabled`]:b,[`${i}-radio-group__splitor--checked`]:u},g=M<P?h:m;r.push(w("div",{class:[`${i}-radio-group__splitor`,g]}),s)}}return{children:r,isButtonGroup:l}}const jn=Object.assign(Object.assign({},Ae.props),{name:String,value:[String,Number],defaultValue:{type:[String,Number],default:null},size:String,disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]});var Gn=fe({name:"RadioGroup",props:jn,setup(t){const e=T(null),{mergedSizeRef:i,mergedDisabledRef:o,nTriggerFormChange:r,nTriggerFormInput:l,nTriggerFormBlur:n,nTriggerFormFocus:s}=fi(t),{mergedClsPrefixRef:c}=ht(t),a=Ae("Radio","RadioGroup",Hn,jo,t,c),d=T(t.defaultValue),f=Me(t,"value"),v=Ht(f,d);function u(P){const{onUpdateValue:m,"onUpdate:value":h}=t;m&&Ce(m,P),h&&Ce(h,P),d.value=P,r(),l()}function b(P){const{value:m}=e;!m||m.contains(P.relatedTarget)||s()}function M(P){const{value:m}=e;!m||m.contains(P.relatedTarget)||n()}return Ut(Ho,{mergedClsPrefixRef:c,nameRef:Me(t,"name"),valueRef:v,disabledRef:o,mergedSizeRef:i,doUpdateValue:u}),{selfElRef:e,mergedClsPrefix:c,mergedValue:v,handleFocusout:M,handleFocusin:b,cssVars:$(()=>{const{value:P}=i,{common:{cubicBezierEaseInOut:m},self:{buttonBorderColor:h,buttonBorderColorActive:g,buttonBorderRadius:y,buttonBoxShadow:A,buttonBoxShadowFocus:S,buttonBoxShadowHover:L,buttonColorActive:B,buttonTextColor:U,buttonTextColorActive:N,buttonTextColorHover:q,opacityDisabled:re,[ge("buttonHeight",P)]:Y,[ge("fontSize",P)]:ae}}=a.value;return{"--font-size":ae,"--bezier":m,"--button-border-color":h,"--button-border-color-active":g,"--button-border-radius":y,"--button-box-shadow":A,"--button-box-shadow-focus":S,"--button-box-shadow-hover":L,"--button-color-active":B,"--button-text-color":U,"--button-text-color-hover":q,"--button-text-color-active":N,"--height":Y,"--opacity-disabled":re}})}},render(){const{mergedValue:t,mergedClsPrefix:e,handleFocusin:i,handleFocusout:o}=this,{children:r,isButtonGroup:l}=Kn(Ko(wr(this)),t,e);return w("div",{onFocusin:i,onFocusout:o,ref:"selfElRef",class:[`${e}-radio-group`,l&&`${e}-radio-group--button-group`],style:this.cssVars},r)}});function Xn(t){const e=t.getBoundingClientRect(),i=e.right-e.left,o=e.bottom-e.top;return e.top>-o&&e.left>-i&&e.bottom<(window.innerHeight||document.documentElement.clientHeight)+o&&e.right<(window.innerWidth||document.documentElement.clientWidth)+i}function Zn(t,e,i){let o,r,l=s=>e(s),n=s=>(document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",o),document.removeEventListener("mouseout",r),i&&i(s));o=n,r=s=>{(!s.relatedTarget||s.relatedTarget.nodeName==="HTML")&&n(s)},document.addEventListener("mousemove",l),document.addEventListener("mouseup",o),document.addEventListener("mouseout",r),t&&l(t)}var qn=fe({props:{src:{type:String,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},imgWidth:{type:Number,required:!0},imgHeight:{type:Number,required:!0},center:{type:Object,required:!0},related:{type:Array,required:!0},landmarks:{type:Array,required:!0},flip:Boolean},setup(t){const e=T(),i=T(!1),o=$(function(){const n=t.flip?1-t.center[0]:t.center[0];let s=n,c=n;for(let S of t.related){const L=t.flip?1-S[0]:S[0];s=Math.min(s,L),c=Math.max(c,L)}s=Math.max(0,s),c=Math.min(1,c);const a=Math.max(Math.abs(n-s),Math.abs(c-n)),d=t.center[1];let f=d,v=d;for(let S of t.related)f=Math.min(f,S[1]),v=Math.max(v,S[1]);f=Math.max(0,f),v=Math.min(1,v);const u=Math.max(Math.abs(d-f),Math.abs(v-d)),b=(a+u)/2+Math.min(a,u)/4,M=b*2*t.imgWidth,P=b*2*t.imgHeight,m=Math.min(t.width/M,t.height/P),h=t.imgWidth*m,g=t.imgHeight*m,y=-n*h+t.width/2,A=-d*g+t.height/2;return{left:Math.round(y)+"px",top:Math.round(A)+"px",width:Math.floor(h)+"px",height:Math.floor(g)+"px",transform:t.flip?"scaleX(-1)":""}});let r=null;Oe(function(){r=setInterval(l,100),l()}),ri(function(){r!=null&&clearInterval(r)});function l(){e.value&&Xn(e.value)&&(i.value=!0,r!=null&&(clearInterval(r),r=null))}return{dom:e,imgStyle:o,visible:i}}});const Yn=["src"];function Jn(t,e,i,o,r,l){return ke(),Ee("div",{class:"image-clip",style:Ot({width:t.width+"px",height:t.height+"px"}),ref:"dom"},[de("img",{src:t.src,alt:"",style:Ot(t.imgStyle)},null,12,Yn)],4)}var Qn=Dt(qn,[["render",Jn]]);const el=14,tl=-10;var il=fe({components:{NIcon:pi,NSpin:Go,CloseCircleOutlined:hr},props:{show:Boolean,id:{type:String,required:!0},regular:{type:String,required:!0},full:{type:String,required:!0},authorName:{type:String,required:!0},authorUsername:{type:String,required:!0},flip:Boolean},emits:["update:show"],setup(t,e){const i=T(!1),o=T(0),r=T(0),l=T(0),n=$(function(){return`https://unsplash.com/@${t.authorUsername}?utm_source=${vi}&utm_medium=referral`}),s=$(function(){return`https://unsplash.com/?utm_source=${vi}&utm_medium=referral`}),c=$(function(){const u=1.1**o.value,b=-r.value/u*(t.flip?-1:1),M=l.value/u;return{transform:`scaleX(${(t.flip?-1:1)*u}) scaleY(${u}) translateX(${b}px) translateY(${M}px)`}});qe(()=>t.full,async function(){if(d(),!!t.full)try{i.value=!0,await Xo(t.full)}finally{i.value=!1}});function a(){d(),e.emit("update:show",!1)}function d(){o.value=0,r.value=0,l.value=0}function f(u){o.value-=Math.round(u.deltaY/100),o.value=Math.max(tl,Math.min(el,o.value))}function v(u){if(u.button===0){u.preventDefault(),u.stopPropagation();const b=r.value,M=l.value,P=u.clientX,m=u.clientY;Zn(u,function(h){r.value=b-(h.clientX-P),l.value=M+h.clientY-m})}}return{fullLoading:i,authorUrl:n,unsplashUrl:s,imgStyle:c,close:a,onWheel:f,onMouseDown:v}}});const ol={key:0,class:"image-viewer"},rl={key:0,class:"loading"},nl=Le(" Full size image loading... "),ll=["src"],sl={class:"link"},al={style:{position:"absolute",left:"5px","font-style":"normal","font-size":"12px",opacity:".5"}},cl=Le(" Photo by "),ul=["href"],dl=Le(" on "),hl=["href"];function fl(t,e,i,o,r,l){const n=Se("n-spin"),s=Se("close-circle-outlined"),c=Se("n-icon");return ke(),gt(Ao,{to:"body"},[t.show?(ke(),Ee("div",ol,[t.fullLoading?(ke(),Ee("div",rl,[he(n,{style:{"margin-right":"8px"}}),nl])):Qe("",!0),de("div",{class:"img-wrapper",onWheel:e[1]||(e[1]=(...a)=>t.onWheel&&t.onWheel(...a))},[de("img",{src:t.fullLoading?t.regular:t.full,alt:"",style:Ot(t.imgStyle),onMousedown:e[0]||(e[0]=(...a)=>t.onMouseDown&&t.onMouseDown(...a))},null,44,ll)],32),de("div",{class:"btn-close",onClick:e[2]||(e[2]=(...a)=>t.close&&t.close(...a))},[he(c,{color:"#fff",size:"26"},{default:Re(()=>[he(s)]),_:1})]),de("div",sl,[de("div",al," ID: "+si(t.id),1),de("div",null,[cl,de("a",{href:t.authorUrl,target:"_blank"},si(t.authorName),9,ul),dl,de("a",{href:t.unsplashUrl,target:"_blank"},"Unsplash",8,hl)])])])):Qe("",!0)])}var gl=Dt(il,[["render",fl],["__scopeId","data-v-73c3dc38"]]);function pl(){var t;return!!((t=document.createElement("canvas"))==null?void 0:t.getContext("webgl2"))}function vl(){return"PointerEvent"in window}function O(...t){const e=[0,0,0];for(let i of t)Qo(e,e,i);return t.length&&er(e,e,1/t.length),e}function ot(t){return t=t%(Math.PI*2),t<0&&(t+=Math.PI*2),t}function rt(t,e,i,o){return Math.atan2(o[1]-i[1],o[0]-i[0])-Math.atan2(e[1]-t[1],e[0]-t[0])}function $e(t,e,i,o){const r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],l=[o[0]-i[0],o[1]-i[1],o[2]-i[2]];return z(r,l)}function J(...t){return t.reduce((e,i)=>e+i,0)/t.length}const E=function(){const t=Mt(),e=Mt(),i=Mt(),o=Mt(),r=Zo();return function(l,n,s,c,a,d,f=!1){return xt(t,c,s),f&&(t[0]=-t[0]),At(t,t),xt(e,n,l),f&&(e[0]=-e[0]),bi(i,e,t),At(i,i),qo(r,i,t),Yo(r,r),xt(o,d,a),f&&(o[0]=-o[0]),At(o,o),Jo([0,0,0],o,r)}}();function _(t,e){const i=xt([0,0,0],e,t);return At(i,i),i}function j(t,e){return[(t[0]*2-1)*e,-t[1]*2+1,t[2]*e]}function oe(t){return[-t[0],t[1],t[2]]}function nt(t,e){const i=[0,0,0];return bi(i,t,e),i}function Ii(t){return t[0]>=0&&t[0]<=1&&t[1]>=0&&t[1]<=1}const Ct=Math.PI/180*45;class bl{constructor(){W(this,"targetUp",[0,0,0]);W(this,"targetRight",[0,0,0]);W(this,"targetUpMirror",[0,0,0]);W(this,"targetRightMirror",[0,0,0])}prepare(e){this.targetUp=_(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),this.targetRight=_(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition),this.targetUpMirror=_(oe(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition)),oe(O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition))),this.targetRightMirror=_(oe(e.leftUpperArm.originViewPosition),oe(e.rightUpperArm.originViewPosition))}match(e){const i=e.normalizedLandmarks;if(Math.min(i[12].visibility,i[11].visibility,i[24].visibility,i[23].visibility)<ve)return null;const r=e.width/e.height,l=j(i[11].point,r),n=j(i[12].point,r),s=j(i[23].point,r),c=j(i[24].point,r),a=_(O(s,c),O(l,n)),d=_(n,l),f=z(this.targetUp,a),v=z(this.targetRight,d),u=(Math.PI-f)*(Math.PI-v),b=z(this.targetUpMirror,a),M=z(this.targetRightMirror,d),P=(Math.PI-b)*(Math.PI-M);let m=0,h=!1;if(f<=Ct&&v<=Ct&&u>P)m=u;else if(b<=Ct&&M<=Ct)m=P,h=!0;else return null;return{score:m,center:O(i[11].point,i[12].point),related:[i[11].point,i[12].point,i[13].point,i[14].point,O(i[24].point,i[23].point,i[12].point,i[11].point)],flip:h}}}const St=Math.PI/180*45;class wl{constructor(){W(this,"targetUp",[0,0,0]);W(this,"targetRight",[0,0,0]);W(this,"targetUpMirror",[0,0,0]);W(this,"targetRightMirror",[0,0,0])}prepare(e){this.targetUp=_(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),this.targetRight=_(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition),this.targetUpMirror=_(oe(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition)),oe(O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition))),this.targetRightMirror=_(oe(e.leftThigh.originViewPosition),oe(e.rightThigh.originViewPosition))}match(e){const i=e.normalizedLandmarks;if(Math.min(i[12].visibility,i[11].visibility,i[24].visibility,i[23].visibility)<ve)return null;const r=e.width/e.height,l=j(i[11].point,r),n=j(i[12].point,r),s=j(i[23].point,r),c=j(i[24].point,r),a=_(O(s,c),O(l,n)),d=_(c,s),f=z(this.targetUp,a),v=z(this.targetRight,d),u=(Math.PI-f)*(Math.PI-v),b=z(this.targetUpMirror,a),M=z(this.targetRightMirror,d),P=(Math.PI-b)*(Math.PI-M);let m=0,h=!1;if(f<=St&&v<=St&&u>P)m=u;else if(b<=St&&M<=St)m=P,h=!0;else return null;return{score:m,center:O(i[23].point,i[24].point),related:[i[23].point,i[24].point,i[25].point,i[26].point,O(i[24].point,i[23].point,i[12].point,i[11].point)],flip:h}}}const lt=Math.PI/180*45,Rt=Math.PI/180*60,st=[0,0,1];class _i{constructor(e){W(this,"isLeft");W(this,"upperArmZAxisAngle",0);W(this,"lowerArmZAxisAngle",0);W(this,"elbowAngle",0);W(this,"elbowViewAngle",0);W(this,"upperArmLocalDir",[0,0,0]);W(this,"upperArmLocalDirMirror",[0,0,0]);W(this,"trunkForward",[0,0,0]);W(this,"trunkForwardMirror",[0,0,0]);this.isLeft=e}prepare(e){let i=e.rightUpperArm.originViewPosition,o=e.rightUpperArm.controlPointViewPosition,r=e.rightLowerArm.controlPointViewPosition;this.isLeft&&(i=e.leftUpperArm.originViewPosition,o=e.leftUpperArm.controlPointViewPosition,r=e.leftLowerArm.controlPointViewPosition);const l=_(i,o),n=_(o,r);this.upperArmZAxisAngle=z(st,l),this.lowerArmZAxisAngle=z(st,n),this.elbowAngle=z(l,n),this.elbowViewAngle=ot(rt(o,i,o,r))-Math.PI,this.isLeft?(this.upperArmLocalDir=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0)):(this.upperArmLocalDir=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0));const s=_(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),c=_(oe(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition)),oe(O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition))),a=_(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition),d=_(oe(e.leftUpperArm.originViewPosition),oe(e.rightUpperArm.originViewPosition));this.trunkForward=nt(a,s),this.trunkForwardMirror=nt(d,c)}match(e){const i=e.width/e.height,o=e.normalizedLandmarks,r=e.worldLandmarks,l=j(o[11].point,i),n=j(o[12].point,i),s=j(o[23].point,i),c=j(o[24].point,i),a=_(O(s,c),O(l,n)),d=_(n,l),f=nt(d,a),v=Math.min(J(o[11].visibility,o[13].visibility),J(o[13].visibility,o[15].visibility));let u=1/0,b=1/0,M=1/0,P=1/0,m=1/0,h=1/0;if(v>=ve){const re=l,Y=j(o[13].point,i),ae=j(o[15].point,i),pe=_(re,Y),x=_(Y,ae),I=z(st,pe),ie=z(st,x);u=Math.abs(this.upperArmZAxisAngle-I),b=Math.abs(this.lowerArmZAxisAngle-ie);const te=r[11].point,ce=r[13].point,me=r[15].point,we=$e(te,ce,ce,me);M=Math.abs(this.elbowAngle-we);const Pe=ot(rt(Y,re,Y,ae))-Math.PI;P=Math.abs(this.elbowViewAngle-Pe*(this.isLeft?1:-1));const ue=E(r[12].point,r[11].point,r[23].point,r[11].point,r[11].point,r[13].point);m=z(ue,this.isLeft?this.upperArmLocalDir:this.upperArmLocalDirMirror),h=z(f,this.isLeft?this.trunkForward:this.trunkForwardMirror)}const g=(Math.PI-u)*(Math.PI-b)*(Math.PI-M)*(Math.PI*2-P)*(Math.PI-m)*(Math.PI-h),y=Math.min(J(o[12].visibility,o[14].visibility),J(o[14].visibility,o[16].visibility));let A=1/0,S=1/0,L=1/0,B=1/0,U=1/0,N=1/0;if(y>=ve){const re=n,Y=j(o[14].point,i),ae=j(o[16].point,i),pe=_(re,Y),x=_(Y,ae),I=z(st,pe),ie=z(st,x);A=Math.abs(this.upperArmZAxisAngle-I),S=Math.abs(this.lowerArmZAxisAngle-ie);const te=r[12].point,ce=r[14].point,me=r[16].point,we=$e(te,ce,ce,me);L=Math.abs(this.elbowAngle-we);const Pe=ot(rt(Y,re,Y,ae))-Math.PI;B=Math.abs(this.elbowViewAngle-Pe*(this.isLeft?-1:1));const ue=E(r[11].point,r[12].point,r[24].point,r[12].point,r[12].point,r[14].point);U=z(ue,this.isLeft?this.upperArmLocalDirMirror:this.upperArmLocalDir),N=z(f,this.isLeft?this.trunkForwardMirror:this.trunkForward)}const q=(Math.PI-A)*(Math.PI-S)*(Math.PI-L)*(Math.PI*2-B)*(Math.PI-U)*(Math.PI-N);return g>=q&&u<=lt&&b<=lt&&M<=Rt&&P<=lt&&m<=Rt?{score:g,center:o[13].point,related:[o[11].point,o[15].point],flip:!this.isLeft}:A<=lt&&S<=lt&&L<=Rt&&B<=lt&&U<=Rt?{score:q,center:o[14].point,related:[o[12].point,o[16].point],flip:this.isLeft}:null}}const at=Math.PI/180*60;class Vi{constructor(e){W(this,"isLeft");W(this,"elbowAngle",0);W(this,"upperArmLocalDir",[0,0,0]);W(this,"upperArmLocalDirMirror",[0,0,0]);W(this,"lowerArmLocalDir",[0,0,0]);W(this,"lowerArmLocalDirMirror",[0,0,0]);this.isLeft=e}prepare(e){let i=e.rightUpperArm.originWorldPosition,o=e.rightUpperArm.controlPointWorldPosition,r=e.rightLowerArm.controlPointWorldPosition;this.isLeft&&(i=e.leftUpperArm.originWorldPosition,o=e.leftUpperArm.controlPointWorldPosition,r=e.leftLowerArm.controlPointWorldPosition);const l=_(i,o),n=_(o,r);this.elbowAngle=z(l,n),this.isLeft?(this.upperArmLocalDir=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0),this.lowerArmLocalDir=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftLowerArm.originWorldPosition,e.leftLowerArm.controlPointWorldPosition),this.lowerArmLocalDirMirror=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftLowerArm.originWorldPosition,e.leftLowerArm.controlPointWorldPosition,!0)):(this.upperArmLocalDir=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.upperArmLocalDirMirror=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0),this.lowerArmLocalDir=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightLowerArm.originWorldPosition,e.rightLowerArm.controlPointWorldPosition),this.lowerArmLocalDirMirror=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightLowerArm.originWorldPosition,e.rightLowerArm.controlPointWorldPosition,!0))}match(e){const i=e.worldLandmarks,o=e.normalizedLandmarks,r=Math.min(J(i[11].visibility,i[13].visibility),J(i[13].visibility,i[15].visibility));let l=1/0,n=1/0,s=1/0;if(r>=ve){const b=i[11].point,M=i[13].point,P=i[15].point,m=$e(b,M,M,P);l=Math.abs(this.elbowAngle-m);const h=E(i[12].point,i[11].point,i[23].point,i[11].point,i[11].point,i[13].point);n=z(h,this.isLeft?this.upperArmLocalDir:this.upperArmLocalDirMirror);const g=E(i[12].point,i[11].point,i[13].point,i[11].point,i[13].point,i[15].point);s=z(g,this.isLeft?this.lowerArmLocalDir:this.lowerArmLocalDirMirror)}const c=(Math.PI-l)*(Math.PI-n)*(Math.PI-s),a=Math.min(J(i[12].visibility,i[14].visibility),J(i[14].visibility,i[16].visibility));let d=1/0,f=1/0,v=1/0;if(a>=ve){const b=i[12].point,M=i[14].point,P=i[16].point,m=$e(b,M,M,P);d=Math.abs(this.elbowAngle-m);const h=E(i[11].point,i[12].point,i[24].point,i[12].point,i[12].point,i[14].point);f=z(h,this.isLeft?this.upperArmLocalDirMirror:this.upperArmLocalDir);const g=E(i[11].point,i[12].point,i[14].point,i[12].point,i[14].point,i[16].point);v=z(g,this.isLeft?this.lowerArmLocalDirMirror:this.lowerArmLocalDir)}const u=(Math.PI-d)*(Math.PI-f)*(Math.PI-v);return c>=u&&l<=at&&n<=at&&s<=at?{score:c,center:o[13].point,related:[o[11].point,o[15].point],flip:!this.isLeft}:d<=at&&f<=at&&v<=at?{score:u,center:o[14].point,related:[o[12].point,o[16].point],flip:this.isLeft}:null}}const Tt=Math.PI/180*45;class ml{constructor(){W(this,"targetForward",[0,0,0]);W(this,"targetRight",[0,0,0]);W(this,"targetForwardMirror",[0,0,0]);W(this,"targetRightMirror",[0,0,0])}prepare(e){const i=e.head.landmarksViewPosition[0],o=e.head.landmarksViewPosition[1];this.targetRight=_(o,i),this.targetForward=_(e.head.originViewPosition,e.head.controlPointViewPosition),this.targetRightMirror=_(oe(i),oe(o)),this.targetForwardMirror=_(oe(e.head.originViewPosition),oe(e.head.controlPointViewPosition))}match(e){const i=e.normalizedLandmarks;if(!Ii(i[8].point)||!Ii(i[7].point)||Math.min(i[8].visibility,i[7].visibility,i[10].visibility,i[9].visibility)<ve)return null;const r=e.width/e.height,l=j(i[7].point,r),n=j(i[8].point,r),s=j(i[0].point,r),c=_(n,l),a=_(O(l,n),s),d=z(this.targetRight,c),f=z(this.targetForward,a),v=(Math.PI-d)*(Math.PI-f),u=z(this.targetRightMirror,c),b=z(this.targetForwardMirror,a),M=(Math.PI-u)*(Math.PI-b);let P=0,m=!1;if(d<=Tt&&f<=Tt&&v>M)P=v;else if(u<=Tt&&b<=Tt)P=M,m=!0;else return null;const h=Math.min(i[8].point[0],i[7].point[0]),g=Math.max(i[8].point[0],i[7].point[0]),A=(g-h)*.5,S=Math.min(i[6].point[1],i[3].point[1],i[10].point[1],i[9].point[1]),L=Math.min(i[6].point[1],i[3].point[1],i[10].point[1],i[9].point[1]),U=(L-S)*.5;return{score:P,center:O(i[0].point),related:[i[8].point,i[7].point,i[10].point,i[9].point,[h-A,i[0].point[1],i[0].point[2]],[g+A,i[0].point[1],i[0].point[2]],[i[0].point[0],S-U,i[0].point[2]],[i[0].point[0],L+U,i[0].point[2]]],flip:m}}}const zi=Math.PI/180*30,Wt=Math.PI/180*60;class Ei{constructor(e){W(this,"isLeft");W(this,"thighLocalDir",[0,0,0]);W(this,"thighLocalDirMirror",[0,0,0]);W(this,"trunkViewUp",[0,0,0]);W(this,"trunkViewRight",[0,0,0]);W(this,"trunkViewUpMirror",[0,0,0]);W(this,"trunkViewRightMirror",[0,0,0]);this.isLeft=e}prepare(e){this.trunkViewUp=_(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),this.trunkViewUpMirror=_(oe(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition)),oe(O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition))),this.trunkViewRight=_(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition),this.trunkViewRightMirror=_(oe(e.leftThigh.originViewPosition),oe(e.rightThigh.originViewPosition)),this.isLeft?(this.thighLocalDir=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0)):(this.thighLocalDir=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0))}match(e){const i=e.worldLandmarks,o=e.normalizedLandmarks,r=e.width/e.height,l=j(o[11].point,r),n=j(o[12].point,r),s=j(o[23].point,r),c=j(o[24].point,r),a=_(O(s,c),O(l,n)),d=_(n,l),f=Math.min(J(i[11].visibility,i[23].visibility,i[24].visibility),J(i[23].visibility,i[25].visibility));let v=1/0,u=1/0,b=1/0;if(f>=ve){const g=E(i[24].point,i[23].point,i[23].point,i[11].point,i[23].point,i[25].point);v=z(g,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror),u=z(a,this.isLeft?this.trunkViewUp:this.trunkViewUpMirror),b=z(d,this.isLeft?this.trunkViewRight:this.trunkViewRightMirror)}const M=Math.min(J(i[12].visibility,i[24].visibility,i[23].visibility),J(i[24].visibility,i[26].visibility));let P=1/0,m=1/0,h=1/0;if(M>=ve){const g=E(i[23].point,i[24].point,i[24].point,i[12].point,i[24].point,i[26].point);P=z(g,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir),m=z(a,this.isLeft?this.trunkViewUpMirror:this.trunkViewUp),h=z(d,this.isLeft?this.trunkViewRightMirror:this.trunkViewRight)}return v<P&&v<=zi&&u<=Wt&&b<=Wt?{score:(Math.PI-v)*(Math.PI-u)*(Math.PI-b),center:o[23].point,related:[o[24].point,o[25].point,O(o[23].point,o[11].point)],flip:!this.isLeft}:P<=zi&&m<=Wt&&h<=Wt?{score:(Math.PI-P)*(Math.PI-m)*(Math.PI-h),center:o[24].point,related:[o[23].point,o[26].point,O(o[24].point,o[12].point)],flip:this.isLeft}:null}}const Ui=Math.PI/180*45;class Oi{constructor(e){W(this,"isLeft");W(this,"thighLocalDir",[0,0,0]);W(this,"thighLocalDirMirror",[0,0,0]);this.isLeft=e}prepare(e){this.isLeft?(this.thighLocalDir=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0)):(this.thighLocalDir=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0))}match(e){const i=e.worldLandmarks,o=e.normalizedLandmarks,r=e.width/e.height,l=j(o[11].point,r),n=j(o[12].point,r),s=j(o[23].point,r),c=j(o[24].point,r);_(O(s,c),O(l,n)),_(n,l);const a=Math.min(J(i[11].visibility,i[23].visibility,i[24].visibility),J(i[23].visibility,i[25].visibility));let d=1/0;if(a>=ve){const u=E(i[24].point,i[23].point,i[23].point,i[11].point,i[23].point,i[25].point);d=z(u,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror)}const f=Math.min(J(i[12].visibility,i[24].visibility,i[23].visibility),J(i[24].visibility,i[26].visibility));let v=1/0;if(f>=ve){const u=E(i[23].point,i[24].point,i[24].point,i[12].point,i[24].point,i[26].point);v=z(u,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir)}return d<v&&d<=Ui?{score:Math.PI-d,center:o[23].point,related:[o[24].point,o[25].point,O(o[23].point,o[11].point)],flip:!this.isLeft}:v<=Ui?{score:Math.PI-v,center:o[24].point,related:[o[23].point,o[26].point,O(o[24].point,o[12].point)],flip:this.isLeft}:null}}const ct=Math.PI/180*45,It=Math.PI/180*60,ut=[0,0,1];class Di{constructor(e){W(this,"isLeft");W(this,"thighZAxisAngle",0);W(this,"calfZAxisAngle",0);W(this,"kneeAngle",0);W(this,"kneeViewAngle",0);W(this,"thighLocalDir",[0,0,0]);W(this,"thighLocalDirMirror",[0,0,0]);W(this,"trunkForward",[0,0,0]);W(this,"trunkForwardMirror",[0,0,0]);this.isLeft=e}prepare(e){let i=e.rightThigh.originViewPosition,o=e.rightThigh.controlPointViewPosition,r=e.rightCalf.controlPointViewPosition;this.isLeft&&(i=e.leftThigh.originViewPosition,o=e.leftThigh.controlPointViewPosition,r=e.leftCalf.controlPointViewPosition);const l=_(i,o),n=_(o,r);this.thighZAxisAngle=z(ut,l),this.calfZAxisAngle=z(ut,n),this.kneeAngle=z(l,n),this.kneeViewAngle=ot(rt(o,i,o,r))-Math.PI,this.isLeft?(this.thighLocalDir=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0)):(this.thighLocalDir=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0));const s=_(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),c=_(oe(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition)),oe(O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition))),a=_(e.rightThigh.originViewPosition,e.leftThigh.originViewPosition),d=_(oe(e.leftThigh.originViewPosition),oe(e.rightThigh.originViewPosition));this.trunkForward=nt(a,s),this.trunkForwardMirror=nt(d,c)}match(e){const i=e.width/e.height,o=e.normalizedLandmarks,r=e.worldLandmarks,l=j(o[11].point,i),n=j(o[12].point,i),s=j(o[23].point,i),c=j(o[24].point,i),a=_(O(s,c),O(l,n)),d=_(n,l),f=nt(d,a),v=Math.min(J(o[23].visibility,o[25].visibility),J(o[25].visibility,o[27].visibility));let u=1/0,b=1/0,M=1/0,P=1/0,m=1/0,h=1/0;if(v>=ve){const re=s,Y=j(o[25].point,i),ae=j(o[27].point,i),pe=_(re,Y),x=_(Y,ae),I=z(ut,pe),ie=z(ut,x);u=Math.abs(this.thighZAxisAngle-I),b=Math.abs(this.calfZAxisAngle-ie);const te=r[23].point,ce=r[25].point,me=r[27].point,we=$e(te,ce,ce,me);M=Math.abs(this.kneeAngle-we);const Pe=ot(rt(Y,re,Y,ae))-Math.PI;P=Math.abs(this.kneeViewAngle-Pe*(this.isLeft?1:-1));const ue=E(r[24].point,r[23].point,r[23].point,r[11].point,r[23].point,r[25].point);m=z(ue,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror),h=z(f,this.isLeft?this.trunkForward:this.trunkForwardMirror)}const g=(Math.PI-u)*(Math.PI-b)*(Math.PI-M)*(Math.PI*2-P)*(Math.PI-m)*(Math.PI-h),y=Math.min(J(o[24].visibility,o[26].visibility),J(o[26].visibility,o[28].visibility));let A=1/0,S=1/0,L=1/0,B=1/0,U=1/0,N=1/0;if(y>=ve){const re=c,Y=j(o[26].point,i),ae=j(o[28].point,i),pe=_(re,Y),x=_(Y,ae),I=z(ut,pe),ie=z(ut,x);A=Math.abs(this.thighZAxisAngle-I),S=Math.abs(this.calfZAxisAngle-ie);const te=r[24].point,ce=r[26].point,me=r[28].point,we=$e(te,ce,ce,me);L=Math.abs(this.kneeAngle-we);const Pe=ot(rt(Y,re,Y,ae))-Math.PI;B=Math.abs(this.kneeViewAngle-Pe*(this.isLeft?-1:1));const ue=E(r[23].point,r[24].point,r[24].point,r[12].point,r[24].point,r[26].point);U=z(ue,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir),N=z(f,this.isLeft?this.trunkForwardMirror:this.trunkForward)}const q=(Math.PI-A)*(Math.PI-S)*(Math.PI-L)*(Math.PI*2-B)*(Math.PI-U)*(Math.PI-N);return g>=q&&u<=ct&&b<=ct&&M<=It&&P<=ct&&m<=It?{score:g,center:o[25].point,related:[o[23].point,o[27].point],flip:!this.isLeft}:A<=ct&&S<=ct&&L<=It&&B<=ct&&U<=It?{score:q,center:o[26].point,related:[o[24].point,o[28].point],flip:this.isLeft}:null}}const dt=Math.PI/180*60;class $i{constructor(e){W(this,"isLeft");W(this,"kneeAngle",0);W(this,"thighLocalDir",[0,0,0]);W(this,"thighLocalDirMirror",[0,0,0]);W(this,"calfLocalDir",[0,0,0]);W(this,"calfLocalDirMirror",[0,0,0]);this.isLeft=e}prepare(e){let i=e.rightThigh.originWorldPosition,o=e.rightThigh.controlPointWorldPosition,r=e.rightCalf.controlPointWorldPosition;this.isLeft&&(i=e.leftThigh.originWorldPosition,o=e.leftThigh.controlPointWorldPosition,r=e.leftCalf.controlPointWorldPosition);const l=_(i,o),n=_(o,r);this.kneeAngle=z(l,n),this.isLeft?(this.thighLocalDir=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition),this.thighLocalDirMirror=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,!0),this.calfLocalDir=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftCalf.originWorldPosition,e.leftCalf.controlPointWorldPosition),this.calfLocalDirMirror=E(e.rightThigh.originWorldPosition,e.leftThigh.originWorldPosition,e.leftThigh.controlPointWorldPosition,e.leftThigh.originWorldPosition,e.leftCalf.originWorldPosition,e.leftCalf.controlPointWorldPosition,!0)):(this.thighLocalDir=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition),this.thighLocalDirMirror=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,!0),this.calfLocalDir=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightCalf.originWorldPosition,e.rightCalf.controlPointWorldPosition),this.calfLocalDirMirror=E(e.leftThigh.originWorldPosition,e.rightThigh.originWorldPosition,e.rightThigh.controlPointWorldPosition,e.rightThigh.originWorldPosition,e.rightCalf.originWorldPosition,e.rightCalf.controlPointWorldPosition,!0))}match(e){const i=e.worldLandmarks,o=e.normalizedLandmarks,r=Math.min(J(i[23].visibility,i[25].visibility),J(i[25].visibility,i[27].visibility));let l=1/0,n=1/0,s=1/0;if(r>=ve){const b=i[23].point,M=i[25].point,P=i[27].point,m=$e(b,M,M,P);l=Math.abs(this.kneeAngle-m);const h=E(i[24].point,i[23].point,i[23].point,i[11].point,i[23].point,i[25].point);n=z(h,this.isLeft?this.thighLocalDir:this.thighLocalDirMirror);const g=E(i[24].point,i[23].point,i[25].point,i[23].point,i[25].point,i[27].point);s=z(g,this.isLeft?this.calfLocalDir:this.calfLocalDirMirror)}const c=(Math.PI-l)*(Math.PI-n)*(Math.PI-s),a=Math.min(J(i[24].visibility,i[26].visibility),J(i[26].visibility,i[28].visibility));let d=1/0,f=1/0,v=1/0;if(a>=ve){const b=i[24].point,M=i[26].point,P=i[28].point,m=$e(b,M,M,P);d=Math.abs(this.kneeAngle-m);const h=E(i[23].point,i[24].point,i[24].point,i[12].point,i[24].point,i[26].point);f=z(h,this.isLeft?this.thighLocalDirMirror:this.thighLocalDir);const g=E(i[23].point,i[24].point,i[26].point,i[24].point,i[26].point,i[28].point);v=z(g,this.isLeft?this.calfLocalDirMirror:this.calfLocalDir)}const u=(Math.PI-d)*(Math.PI-f)*(Math.PI-v);return c>=u&&l<=dt&&n<=dt&&s<=dt?{score:c,center:o[25].point,related:[o[23].point,o[27].point],flip:!this.isLeft}:d<=dt&&f<=dt&&v<=dt?{score:u,center:o[26].point,related:[o[24].point,o[28].point],flip:this.isLeft}:null}}const Fi=Math.PI/180*45,_t=Math.PI/180*45;class Bi{constructor(e){W(this,"isLeft");W(this,"shoulderLocalDir",[0,0,0]);W(this,"shoulderLocalDirMirror",[0,0,0]);W(this,"trunkViewUp",[0,0,0]);W(this,"trunkViewRight",[0,0,0]);W(this,"trunkViewUpMirror",[0,0,0]);W(this,"trunkViewRightMirror",[0,0,0]);this.isLeft=e}prepare(e){this.trunkViewUp=_(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition),O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition)),this.trunkViewUpMirror=_(oe(O(e.leftThigh.originViewPosition,e.rightThigh.originViewPosition)),oe(O(e.leftUpperArm.originViewPosition,e.rightUpperArm.originViewPosition))),this.trunkViewRight=_(e.rightUpperArm.originViewPosition,e.leftUpperArm.originViewPosition),this.trunkViewRightMirror=_(oe(e.leftUpperArm.originViewPosition),oe(e.rightUpperArm.originViewPosition)),this.isLeft?(this.shoulderLocalDir=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0)):(this.shoulderLocalDir=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0))}match(e){const i=e.worldLandmarks,o=e.normalizedLandmarks,r=e.width/e.height,l=j(o[11].point,r),n=j(o[12].point,r),s=j(o[23].point,r),c=j(o[24].point,r),a=_(O(s,c),O(l,n)),d=_(n,l),f=Math.min(J(i[12].visibility,i[11].visibility,i[23].visibility),J(i[11].visibility,i[13].visibility));let v=1/0,u=1/0,b=1/0;if(f>=ve){const g=E(i[12].point,i[11].point,i[23].point,i[11].point,i[11].point,i[13].point);v=z(g,this.isLeft?this.shoulderLocalDir:this.shoulderLocalDirMirror),u=z(a,this.isLeft?this.trunkViewUp:this.trunkViewUpMirror),b=z(d,this.isLeft?this.trunkViewRight:this.trunkViewRightMirror)}const M=Math.min(J(i[11].visibility,i[12].visibility,i[24].visibility),J(i[12].visibility,i[14].visibility));let P=1/0,m=1/0,h=1/0;if(M>=ve){const g=E(i[11].point,i[12].point,i[24].point,i[12].point,i[12].point,i[14].point);P=z(g,this.isLeft?this.shoulderLocalDirMirror:this.shoulderLocalDir),m=z(a,this.isLeft?this.trunkViewUpMirror:this.trunkViewUp),h=z(d,this.isLeft?this.trunkViewRightMirror:this.trunkViewRight)}return v<P&&v<=Fi&&u<=_t&&b<=_t?{score:(Math.PI-v)*(Math.PI-u)*(Math.PI-b),center:o[11].point,related:[o[12].point,o[13].point,O(o[23].point,o[11].point)],flip:!this.isLeft}:P<=Fi&&m<=_t&&h<=_t?{score:(Math.PI-P)*(Math.PI-m)*(Math.PI-h),center:o[12].point,related:[o[11].point,o[14].point,O(o[24].point,o[12].point)],flip:this.isLeft}:null}}const Ni=Math.PI/180*45;class Hi{constructor(e){W(this,"isLeft");W(this,"shoulderLocalDir",[0,0,0]);W(this,"shoulderLocalDirMirror",[0,0,0]);this.isLeft=e}prepare(e){this.isLeft?(this.shoulderLocalDir=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=E(e.rightUpperArm.originWorldPosition,e.leftUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.leftUpperArm.originWorldPosition,e.leftUpperArm.controlPointWorldPosition,!0)):(this.shoulderLocalDir=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition),this.shoulderLocalDirMirror=E(e.leftUpperArm.originWorldPosition,e.rightUpperArm.originWorldPosition,e.trunk.originWorldPosition,e.trunk.controlPointWorldPosition,e.rightUpperArm.originWorldPosition,e.rightUpperArm.controlPointWorldPosition,!0))}match(e){const i=e.worldLandmarks,o=e.normalizedLandmarks,r=e.width/e.height,l=j(o[11].point,r),n=j(o[12].point,r),s=j(o[23].point,r),c=j(o[24].point,r);_(O(s,c),O(l,n)),_(n,l);const a=Math.min(J(i[12].visibility,i[11].visibility,i[23].visibility),J(i[11].visibility,i[13].visibility));let d=1/0;if(a>=ve){const u=E(i[12].point,i[11].point,i[23].point,i[11].point,i[11].point,i[13].point);d=z(u,this.isLeft?this.shoulderLocalDir:this.shoulderLocalDirMirror)}const f=Math.min(J(i[11].visibility,i[12].visibility,i[24].visibility),J(i[12].visibility,i[14].visibility));let v=1/0;if(f>=ve){const u=E(i[11].point,i[12].point,i[24].point,i[12].point,i[12].point,i[14].point);v=z(u,this.isLeft?this.shoulderLocalDirMirror:this.shoulderLocalDir)}return d<v&&d<=Ni?{score:Math.PI-d,center:o[11].point,related:[o[12].point,o[13].point,O(o[23].point,o[11].point)],flip:!this.isLeft}:v<=Ni?{score:Math.PI-v,center:o[12].point,related:[o[11].point,o[14].point,O(o[24].point,o[12].point)],flip:this.isLeft}:null}}function Pl(t,e,i){const o=[];return i.prepare(e),t.forEach(r=>{const l=i.match(r);l!=null&&o.push(ii(ti({},l),{photo:r}))}),o.sort((r,l)=>-r.score+l.score),o}const Qt={Face:{matcher:new ml,highlights:[be.head]},Chest:{matcher:new bl,highlights:[be.trunk]},"Left Shoulder":{matcher:new Bi(!0),cameraUnrelatedMatcher:new Hi(!0),highlights:[be.trunk,be.leftUpperArm]},"Right Shoulder":{matcher:new Bi(!1),cameraUnrelatedMatcher:new Hi(!1),highlights:[be.trunk,be.rightUpperArm]},"Left Elbow":{matcher:new _i(!0),cameraUnrelatedMatcher:new Vi(!0),highlights:[be.leftUpperArm,be.leftLowerArm]},"Right Elbow":{matcher:new _i(!1),cameraUnrelatedMatcher:new Vi(!1),highlights:[be.rightUpperArm,be.rightLowerArm]},Crotch:{matcher:new wl,highlights:[be.trunk]},"Left Hip":{matcher:new Ei(!0),cameraUnrelatedMatcher:new Oi(!0),highlights:[be.trunk,be.leftThigh]},"Right Hip":{matcher:new Ei(!1),cameraUnrelatedMatcher:new Oi(!1),highlights:[be.trunk,be.rightThigh]},"Left Knee":{matcher:new Di(!0),cameraUnrelatedMatcher:new $i(!0),highlights:[be.leftThigh,be.leftCalf]},"Right Knee":{matcher:new Di(!1),cameraUnrelatedMatcher:new $i(!1),highlights:[be.rightThigh,be.rightCalf]}};var yl=fe({components:{NButton:tr,NSelect:Nn,NRadio:ir,NRadioGroup:Gn,NIcon:pi,WarningOutlined:pr,SkeletonModelCanvas:or,ImageClip:Qn,ImageViewer:gl},setup(){const t=pl(),e=vl(),i=new nr,o=new lr,r=new rr,l=T(),n=T(!1),s=Object.keys(Qt).map(h=>({value:h,label:h})),c=T(),a=T(0),d=T(1),f=T(!1),v=T(),u=T(!1),b=T(!1),M=T(new ar);Oe(async function(){try{n.value=!0,await Ze(),await i.load()}finally{n.value=!1}});async function P(){try{f.value=!0,v.value=[],await Ze();const h=Qt[c.value];if(h){let g=i.data;a.value&&(g=g.filter(A=>A.gender===a.value));const y=!d.value&&h.cameraUnrelatedMatcher?h.cameraUnrelatedMatcher:h.matcher;v.value=Pl(g,o,y).slice(0,sr),l.value.scrollTop=0}}finally{f.value=!1}}function m(h){u.value=!0,b.value=h.flip,M.value=h.photo}return{supportWebGL2:t,supportMouse:e,matchers:Qt,model:o,camera:r,searchResultDom:l,dbLoading:n,bodyPartOptions:s,bodyPart:c,gender:a,cameraRelated:d,searchResult:v,searching:f,showImageViewer:u,imageViewerFlip:b,currentPhoto:M,search:P,showLargePhoto:m}}});const Ml={class:"container cols"},xl={class:"rows",style:{width:"320px",height:"100%",overflow:"auto"}},Al={class:"cols search-condition"},kl=Le(" Search "),Ll={class:"cols search-condition"},Cl=de("label",null,"Gender",-1),Sl=Le("Any"),Rl=Le("Male"),Tl=Le("Female"),Wl={class:"cols search-condition"},Il=de("label",null,"Camera",-1),_l=Le("Related"),Vl=Le("Ignored"),zl=de("div",{class:"description"},[de("div",null,"Wheel: Rotate Camera / Zoom"),de("div",null,"Mouse Right: Move Camera"),de("div",null,"Shift + Mouse Left: Rotate Joint")],-1),El=Lo('<div style="width:100%;height:1px;background:#d9d9d9;margin:6px 0;"></div><div class="description"><div>Author: x6udpngx</div><div><a href="https://github.com/x6ud/x6ud.github.io/issues" target="_blank">Leave a message</a></div><div><a href="https://github.com/x6ud/pose-search" target="_blank">Source code</a></div><div><span>Support me:\xA0</span><a href="https://ko-fi.com/x6udpngx" target="_blank">Ko-fi.com/x6udpngx</a></div><div><a href="https://x6ud.github.io/human-anatomy-for-artist-search-helper" target="_blank"> Male body art reference search </a></div><div><a href="https://x6ud.github.io/female-anatomy-for-artist-search-helper" target="_blank"> Female body art reference search </a></div></div>',2),Ul={class:"fill"},Ol={class:"result",style:{width:"100%",height:"100%",overflow:"auto"},ref:"searchResultDom"},Dl={key:0,class:"loading"},$l={key:1,class:"warning",style:{"font-size":"16px"}},Fl={key:0},Bl=Le(" This page requires WebGL2 but your system does not seem to support. Try updating your graphics card drivers or changing your browser. "),Nl={key:1},Hl=Le(" This page currently supports mouse operation only. ");function Kl(t,e,i,o,r,l){var M,P,m,h;const n=Se("n-select"),s=Se("n-button"),c=Se("n-radio"),a=Se("n-radio-group"),d=Se("skeleton-model-canvas"),f=Se("warning-outlined"),v=Se("n-icon"),u=Se("image-clip"),b=Se("image-viewer");return ke(),Ee(vt,null,[de("div",Ml,[de("div",xl,[de("div",Al,[he(n,{class:"fill",size:"small",placeholder:"Joint / Body Part",filterable:"",clearable:"",options:t.bodyPartOptions,loading:t.dbLoading,value:t.bodyPart,"onUpdate:value":e[0]||(e[0]=g=>t.bodyPart=g)},null,8,["options","loading","value"]),he(s,{size:"small",type:"primary",onClick:t.search,disabled:!t.bodyPart||t.searching},{default:Re(()=>[kl]),_:1},8,["onClick","disabled"])]),de("div",Ll,[Cl,he(a,{size:"small",value:t.gender,"onUpdate:value":e[1]||(e[1]=g=>t.gender=g)},{default:Re(()=>[he(c,{value:0},{default:Re(()=>[Sl]),_:1}),he(c,{value:1},{default:Re(()=>[Rl]),_:1}),he(c,{value:2},{default:Re(()=>[Tl]),_:1})]),_:1},8,["value"])]),ni(de("div",Wl,[Il,he(a,{size:"small",value:t.cameraRelated,"onUpdate:value":e[2]||(e[2]=g=>t.cameraRelated=g)},{default:Re(()=>[he(c,{value:1},{default:Re(()=>[_l]),_:1}),he(c,{value:0},{default:Re(()=>[Vl]),_:1})]),_:1},8,["value"])],512),[[li,(M=t.matchers[t.bodyPart])==null?void 0:M.cameraUnrelatedMatcher]]),zl,he(d,{style:{width:"100%",height:"400px","min-height":"400px"},model:t.model,camera:t.camera,highlights:(P=t.matchers[t.bodyPart])==null?void 0:P.highlights},null,8,["model","camera","highlights"]),El]),de("div",Ul,[de("div",Ol,[t.dbLoading&&!((m=t.searchResult)==null?void 0:m.length)?(ke(),Ee("div",Dl," Loading data... ")):Qe("",!0),!((h=t.searchResult)==null?void 0:h.length)&&(!t.supportWebGL2||!t.supportMouse)?(ke(),Ee("div",$l,[t.supportWebGL2?Qe("",!0):(ke(),Ee("div",Fl,[he(v,null,{default:Re(()=>[he(f)]),_:1}),Bl])),t.supportMouse?Qe("",!0):(ke(),Ee("div",Nl,[he(v,null,{default:Re(()=>[he(f)]),_:1}),Hl]))])):Qe("",!0),(ke(!0),Ee(vt,null,ko(t.searchResult,g=>(ke(),gt(u,{class:"photo",src:g.photo.regular,width:200,height:200,"img-width":g.photo.width,"img-height":g.photo.height,center:g.center,related:g.related,landmarks:g.photo.normalizedLandmarks,flip:g.flip,onClick:y=>t.showLargePhoto(g)},null,8,["src","img-width","img-height","center","related","landmarks","flip","onClick"]))),256))],512)])]),he(b,{show:t.showImageViewer,"onUpdate:show":e[3]||(e[3]=g=>t.showImageViewer=g),id:t.currentPhoto.id,regular:t.currentPhoto.regular,full:t.currentPhoto.full,flip:t.imageViewerFlip,"author-name":t.currentPhoto.authorName,"author-username":t.currentPhoto.authorUsername},null,8,["show","id","regular","full","flip","author-name","author-username"])],64)}var ql=Dt(yl,[["render",Kl]]);export{ql as default};
//# sourceMappingURL=Search.8bdb0640.js.map
